/*! For license information please see index.js.LICENSE.txt */
(()=>{var t={907:(t,e,i)=>{Urso.App.Components={},i(239),i(748)},239:(t,e,i)=>{Urso.App.Components.SlotMachine={Template:i(199),Config:i(917),Symbols:i(573)}},917:t=>{class e extends Urso.SlotBase.Components.SlotMachine.Config{getBasicConfig(){var t=super.getBasicConfig();return t.bounce={top:{to:{y:-80,x:0},duration:200},bottom:{to:{y:80,x:0},duration:200}},t.speedUpReelsFactor=3,t.symbolSpeed=20,t.reelsCount=3,t.reelColors=["#FF00FF","#00FF00","#00FFFF"],t}}t.exports=e},573:t=>{class e extends Urso.SlotBase.Components.SlotMachine.Symbols{get(){return[{key:"0",template:{type:Urso.types.objects.IMAGE,assetKey:"00",anchorX:.5,anchorY:.5}},{key:"1",template:{type:Urso.types.objects.IMAGE,assetKey:"01",anchorX:.5,anchorY:.5}},{key:"2",template:{type:Urso.types.objects.IMAGE,assetKey:"02",anchorX:.5,anchorY:.5}},{key:"3",template:{type:Urso.types.objects.IMAGE,assetKey:"03",anchorX:.5,anchorY:.5}},{key:"4",template:{type:Urso.types.objects.IMAGE,assetKey:"04",anchorX:.5,anchorY:.5}},{key:"5",template:{type:Urso.types.objects.IMAGE,assetKey:"05",anchorX:.5,anchorY:.5}},{key:"6",template:{type:Urso.types.objects.IMAGE,assetKey:"06",anchorX:.5,anchorY:.5}},{key:"7",template:{type:Urso.types.objects.IMAGE,assetKey:"07",anchorX:.5,anchorY:.5}},{key:"8",template:{type:Urso.types.objects.IMAGE,assetKey:"08",anchorX:.5,anchorY:.5}},{key:"9",template:{type:Urso.types.objects.IMAGE,assetKey:"09",anchorX:.5,anchorY:.5}}]}}t.exports=e},199:t=>{t.exports=class{constructor(){var t="images/symbols/";this.assets=[{type:Urso.types.assets.IMAGE,key:"00",path:t+"00.png"},{type:Urso.types.assets.IMAGE,key:"01",path:t+"01.png"},{type:Urso.types.assets.IMAGE,key:"02",path:t+"02.png"},{type:Urso.types.assets.IMAGE,key:"03",path:t+"03.png"},{type:Urso.types.assets.IMAGE,key:"04",path:t+"04.png"},{type:Urso.types.assets.IMAGE,key:"05",path:t+"05.png"},{type:Urso.types.assets.IMAGE,key:"06",path:t+"06.png"},{type:Urso.types.assets.IMAGE,key:"07",path:t+"07.png"},{type:Urso.types.assets.IMAGE,key:"08",path:t+"08.png"},{type:Urso.types.assets.IMAGE,key:"09",path:t+"09.png"}],this.objects=[]}}},748:(t,e,i)=>{Urso.App.Components.WinCounter={Template:i(921)}},921:t=>{t.exports=class{constructor(){this.objects=[{type:Urso.types.objects.TEXT,name:"counterText",text:"",fontSize:200,alpha:0,fontFamily:"GraphicPixel",fill:"#FF00FFCC",stroke:"#00FFFF",strokeThickness:20,fontWeight:"bold",anchorX:.5,anchorY:.5,x:screen.availWidth/2,y:500,wordWrapWidth:440,visible:!0}]}}},561:(t,e,i)=>{window.Urso.App={},i(752),i(65),i(907),i(686)},752:()=>{Urso.config.extendingChain=["Urso.Core","Urso.SlotBase","Urso.App"],Urso.config.title="LuckyFUNKZ",Urso.config.defaultScene="play",Urso.config.useTransport=!0},65:(t,e,i)=>{Urso.App.Modules={},i(412)},412:(t,e,i)=>{Urso.App.Modules.Transport={Config:i(438),Controller:i(951)}},438:t=>{t.exports=class{getConfig(){return{autoReconnect:!0,reconnectTimeout:5e3,type:"xhr",host:!1}}}},951:(t,e,i)=>{var r=i(93);class n extends Urso.SlotBase.Modules.Transport.Controller{constructor(){super(),this._responceHandler=null,this._mockup=new r}init(){super.init(),this.emit("modules.transport.ready")}setResponseHandler(t){this._responceHandler=t}setReadyHandler(t){setTimeout(t,50)}send(t){setTimeout((()=>{var e=this._mockup.getResponse(t);this._responceHandler(JSON.parse(e))}),50)}}t.exports=n},468:(t,e,i)=>{var r=i(20),n=i(130),s=i(655),o=i(584),a={reconnectTimeout:5e3,starterBalance:42069,currency:{currentCurrency:"GOLD",currentSymbol:""},responses:{ApiVersionRequest:r,CheckBrokenGameRequest:n,AuthRequest:s,BalanceRequest:i(44),SpinRequest:o,GambleRequest:i(600)},params:{scatterSymbols:["1"],bets:[1,2,3,4,5],extrabet:0,betMultiplier:1,coinValues:1,defaultCoinValue:1,defaultBet:1,defaultLines:[1,2,3,4,5],avaliableLines:[[1,1,1],[0,0,0],[2,2,2],[0,1,2],[2,1,0]],payouts:[{payout:741,symbols:[0,0,0],type:"basic"},{payout:420,symbols:[1,1,1],type:"basic"},{payout:69,symbols:[2,2,2],type:"basic"},{payout:42,symbols:[3,3,3],type:"basic"},{payout:31,symbols:[4,4,4],type:"basic"},{payout:10,symbols:[5,5,5],type:"basic"},{payout:5,symbols:[6,6,6],type:"basic"},{payout:1,symbols:[7,7,7],type:"basic"}]}};t.exports=a},643:t=>{t.exports={spin:[[[2,6,4],[8,1,9],[6,8,1]],[[6,8,8],[7,0,3],[6,6,6]],[[2,0,4],[2,3,0],[2,4,2]],[[7,1,4],[5,7,4],[8,4,5]],[[2,8,5],[3,2,4],[0,8,5]],[[6,5,0],[5,6,9],[4,6,6]],[[1,9,8],[1,2,3],[9,5,7]],[[7,8,4],[8,5,8],[9,2,3]],[[0,1,8],[8,1,5],[6,1,1]],[[1,2,0],[4,6,8],[2,1,8]],[[4,3,2],[7,7,7],[1,0,7]],[[7,5,9],[1,7,6],[6,1,7]],[[6,7,9],[7,4,5],[8,4,3]],[[5,5,5],[7,3,0],[9,1,8]],[[1,3,6],[6,9,2],[8,3,0]],[[9,2,6],[9,5,4],[7,7,7]],[[1,6,0],[2,6,3],[0,8,9]],[[4,7,6],[5,1,8],[8,7,2]],[[2,0,9],[2,4,6],[2,5,4]],[[1,1,3],[3,4,2],[6,8,2]],[[6,4,3],[3,1,6],[0,9,4]],[[0,9,1],[2,8,4],[0,2,5]],[[2,9,5],[1,4,9],[7,2,6]],[[8,8,7],[0,8,7],[7,9,7]],[[4,7,9],[4,4,6],[2,9,9]],[[3,2,2],[3,4,8],[4,0,6]],[[2,9,9],[9,6,4],[0,3,2]],[[5,4,9],[7,7,7],[9,1,7]],[[6,9,6],[9,2,3],[8,8,8]],[[9,1,6],[2,3,0],[4,2,0]],[[0,9,5],[4,6,7],[7,9,3]],[[9,2,8],[8,5,3],[8,3,8]],[[7,0,9],[9,2,6],[1,6,9]],[[4,7,8],[5,7,1],[1,5,2]],[[0,0,5],[4,6,4],[0,2,1]],[[6,0,1],[3,7,4],[4,2,6]],[[0,6,5],[6,6,6],[9,4,2]],[[9,2,3],[1,0,1],[9,9,3]],[[9,8,5],[1,9,3],[4,1,5]],[[5,6,5],[7,4,3],[7,6,5]],[[7,5,1],[6,7,2],[8,1,7]],[[6,8,9],[5,3,1],[8,6,2]],[[1,1,5],[7,0,7],[2,1,4]],[[8,5,5],[7,5,4],[7,7,7]],[[4,0,1],[1,1,1],[4,7,3]],[[5,0,9],[1,7,6],[9,9,6]],[[3,6,1],[1,5,5],[1,3,4]],[[1,5,4],[1,3,1],[2,3,8]],[[8,4,5],[3,6,1],[9,4,5]],[[7,2,6],[1,6,1],[6,5,0]],[[7,4,3],[4,0,6],[1,1,6]],[[4,5,6],[3,8,5],[5,7,7]],[[8,8,3],[4,0,1],[3,9,1]],[[7,7,8],[0,2,8],[2,5,5]],[[0,7,9],[6,3,8],[1,7,6]],[[5,4,6],[8,2,4],[5,5,0]],[[5,9,6],[8,8,2],[1,8,0]],[[4,4,4],[9,9,6],[7,9,2]],[[1,8,4],[8,3,9],[8,9,1]],[[1,4,7],[1,4,7],[0,1,3]],[[1,3,8],[0,5,4],[4,9,3]],[[4,0,3],[3,1,6],[1,0,8]],[[9,3,5],[1,3,9],[2,5,4]],[[8,5,9],[3,0,3],[0,5,4]],[[3,5,5],[0,6,8],[4,7,2]],[[4,3,4],[7,4,7],[7,7,7]],[[5,5,4],[9,2,3],[6,3,3]],[[4,1,8],[9,4,7],[1,1,0]],[[7,1,8],[3,7,7],[5,7,7]],[[4,4,7],[6,9,6],[7,9,8]],[[3,1,6],[1,9,8],[9,4,4]],[[9,9,7],[2,7,5],[7,0,7]],[[6,6,8],[1,8,6],[7,5,5]],[[4,6,2],[1,1,5],[5,9,5]],[[3,6,1],[5,5,3],[0,6,1]],[[8,4,5],[0,8,4],[6,2,9]],[[7,0,7],[4,7,2],[3,5,4]],[[3,7,7],[1,7,7],[7,0,9]],[[1,8,8],[9,2,8],[8,8,9]],[[2,3,3],[0,9,1],[5,2,4]],[[3,3,3],[2,5,4],[9,3,6]],[[4,3,2],[6,7,2],[6,4,6]],[[7,0,5],[3,4,7],[7,1,2]],[[4,5,6],[2,0,4],[2,6,1]],[[9,0,3],[7,9,8],[4,1,5]],[[8,7,5],[7,7,7],[0,4,2]],[[6,6,8],[6,5,7],[6,1,7]],[[2,8,8],[2,4,1],[3,3,2]],[[8,6,4],[4,6,2],[5,5,5]],[[5,1,4],[1,1,1],[2,4,7]],[[8,9,6],[6,7,2],[3,9,9]],[[5,5,5],[9,0,7],[4,4,3]],[[8,2,5],[0,5,8],[3,1,4]],[[4,8,5],[3,1,4],[1,9,9]],[[7,3,4],[4,7,9],[5,9,7]],[[5,8,1],[4,3,2],[6,8,9]],[[2,9,9],[2,6,9],[3,9,1]],[[4,5,5],[9,6,1],[8,2,7]],[[2,3,0],[5,9,0],[8,6,6]],[[6,0,7],[6,7,1],[8,6,7]],[[2,5,7],[8,9,4],[6,9,0]],[[5,5,0],[1,3,2],[2,8,0]],[[7,0,7],[0,1,8],[5,7,8]],[[3,4,3],[5,3,9],[3,4,0]],[[7,3,1],[3,6,5],[0,9,3]],[[0,7,1],[9,5,2],[9,8,3]],[[1,2,2],[0,1,9],[0,3,8]],[[1,5,2],[5,2,1],[4,4,4]],[[3,7,3],[7,4,0],[3,0,4]],[[5,1,0],[7,5,6],[2,0,7]],[[4,1,0],[4,1,9],[2,3,7]],[[7,7,0],[6,7,4],[1,2,4]],[[2,4,4],[2,1,7],[2,5,5]],[[8,2,7],[2,4,4],[8,1,1]],[[5,7,7],[7,1,7],[7,7,7]],[[2,9,2],[7,4,5],[7,5,7]],[[7,3,7],[0,0,2],[6,9,8]],[[3,4,9],[2,1,5],[7,2,8]],[[1,4,3],[8,4,3],[5,5,5]],[[7,1,2],[0,4,3],[2,0,2]],[[3,3,0],[3,8,7],[4,6,1]],[[3,4,3],[0,6,4],[7,7,6]],[[1,1,6],[7,6,7],[6,2,1]],[[4,8,6],[5,1,5],[5,2,8]],[[3,7,6],[1,6,0],[6,2,5]],[[4,3,9],[2,2,8],[4,7,1]],[[0,1,7],[7,4,7],[1,9,1]],[[0,0,9],[0,9,9],[4,3,0]],[[6,6,2],[2,9,7],[8,6,2]],[[6,0,8],[3,6,6],[7,4,9]],[[2,5,8],[5,2,5],[7,7,7]],[[8,8,1],[7,6,9],[5,5,0]],[[3,6,9],[6,0,9],[7,7,7]],[[5,3,6],[3,7,4],[1,1,2]],[[7,7,7],[6,9,7],[9,8,4]],[[9,6,2],[4,4,4],[2,5,5]],[[8,1,8],[1,1,3],[8,8,7]],[[6,6,5],[2,5,7],[4,0,3]],[[6,8,0],[6,6,3],[5,4,6]],[[7,7,5],[5,7,0],[3,9,7]],[[5,6,8],[7,5,4],[4,1,5]],[[5,2,0],[5,1,4],[9,8,3]],[[1,5,2],[0,3,6],[6,3,0]],[[5,2,6],[2,0,2],[9,7,0]],[[8,5,5],[0,9,8],[4,4,7]],[[9,6,3],[9,5,9],[2,1,3]],[[2,4,2],[4,8,9],[3,3,8]],[[9,9,6],[5,8,1],[5,4,3]],[[7,9,3],[9,3,8],[6,3,6]],[[1,2,5],[4,6,7],[4,3,8]],[[4,7,5],[7,7,7],[2,0,9]],[[0,4,8],[7,2,3],[9,9,8]],[[2,1,4],[3,5,9],[3,7,5]],[[0,2,4],[3,0,1],[3,6,9]],[[7,7,7],[8,8,7],[3,1,9]],[[4,9,3],[5,5,5],[9,0,8]],[[7,7,9],[8,7,6],[3,8,7]],[[1,7,4],[9,2,1],[2,8,8]],[[7,9,0],[5,7,7],[1,9,7]],[[2,7,7],[4,7,6],[7,4,2]],[[0,7,7],[9,4,7],[4,5,8]],[[9,9,2],[0,7,4],[2,9,0]],[[3,0,8],[0,3,6],[9,4,1]],[[3,8,2],[8,6,3],[2,2,4]],[[5,7,3],[4,2,5],[2,1,7]],[[4,5,2],[3,9,3],[7,7,7]],[[2,0,2],[9,7,1],[8,8,6]],[[7,9,3],[4,5,4],[5,2,3]],[[6,2,3],[2,5,6],[4,4,6]],[[7,9,7],[0,7,3],[7,5,1]],[[0,7,1],[4,4,4],[6,1,5]],[[0,4,6],[1,9,7],[9,9,1]],[[7,0,8],[3,7,5],[9,6,7]],[[7,1,3],[5,7,3],[5,6,7]],[[7,7,4],[7,7,3],[3,4,5]],[[6,7,1],[3,4,4],[1,7,9]],[[7,4,1],[9,7,8],[1,3,7]],[[7,2,7],[0,0,2],[7,7,4]],[[9,0,0],[5,9,8],[3,7,8]],[[4,1,4],[6,1,6],[5,4,0]],[[7,8,0],[6,1,0],[5,4,2]],[[2,2,7],[1,7,4],[7,3,3]],[[5,3,2],[2,3,3],[8,2,3]],[[4,1,8],[4,1,8],[1,6,0]],[[4,3,9],[0,2,8],[3,2,2]],[[0,1,1],[9,6,3],[2,1,0]],[[0,4,4],[2,4,8],[4,1,3]],[[5,1,4],[4,7,1],[4,5,0]],[[5,1,3],[7,7,7],[4,5,9]],[[6,3,6],[5,6,1],[6,4,8]],[[0,6,0],[0,7,8],[6,3,7]],[[2,0,6],[6,3,9],[7,7,7]],[[6,4,8],[2,2,1],[0,1,0]],[[8,0,7],[0,9,6],[4,8,0]],[[0,4,3],[3,9,2],[2,2,3]],[[6,0,4],[3,7,9],[3,0,1]],[[1,2,6],[1,6,7],[6,7,6]],[[8,8,1],[0,4,7],[0,9,9]],[[6,5,1],[0,9,3],[5,3,4]],[[6,0,7],[2,2,1],[1,8,9]],[[8,9,4],[7,3,2],[0,5,8]],[[8,8,1],[2,5,3],[8,6,8]],[[1,9,0],[0,8,7],[7,7,7]],[[9,4,5],[8,1,6],[7,5,5]],[[4,9,8],[6,4,8],[4,2,2]],[[7,7,7],[1,2,2],[0,2,3]],[[3,4,2],[8,8,8],[6,1,9]],[[7,7,3],[0,4,9],[2,9,6]],[[7,6,9],[6,7,7],[5,2,7]],[[4,5,7],[7,5,9],[5,1,1]],[[8,8,1],[0,0,3],[8,6,4]],[[4,8,8],[8,4,6],[4,7,7]],[[7,6,9],[1,0,0],[6,6,7]],[[6,6,7],[5,8,3],[5,6,9]],[[7,4,7],[8,8,7],[0,7,6]],[[9,6,4],[2,6,7],[4,5,7]],[[9,3,3],[6,6,6],[8,3,2]],[[0,0,5],[3,0,4],[1,3,3]],[[5,2,5],[6,0,3],[6,2,2]],[[4,4,4],[7,0,2],[0,0,6]],[[1,7,3],[5,4,5],[6,8,8]],[[6,2,8],[1,8,7],[5,3,9]],[[4,4,7],[0,7,3],[2,3,5]],[[5,0,0],[2,9,0],[9,0,9]],[[7,4,4],[6,3,3],[7,8,9]],[[7,6,7],[0,7,2],[7,8,9]],[[0,8,1],[6,6,6],[6,4,5]],[[4,0,6],[0,6,7],[7,7,7]],[[1,7,7],[2,7,6],[2,9,7]],[[9,6,1],[9,4,3],[1,3,4]],[[8,0,4],[8,7,7],[6,6,6]],[[4,8,6],[6,4,1],[7,3,4]],[[8,8,6],[5,5,7],[5,7,5]],[[2,8,8],[9,6,0],[1,7,2]],[[3,1,0],[6,7,3],[8,9,2]],[[8,2,7],[4,4,4],[6,2,9]],[[9,8,2],[1,1,9],[6,0,8]],[[0,5,9],[1,4,9],[6,3,4]],[[9,4,5],[7,7,7],[1,3,9]],[[7,7,6],[1,7,9],[2,5,9]],[[6,7,7],[7,6,5],[2,9,2]],[[8,3,4],[6,0,5],[1,4,3]],[[5,3,7],[4,6,9],[0,5,5]],[[6,6,5],[3,7,9],[4,5,7]],[[0,2,6],[0,1,3],[7,2,7]],[[1,0,7],[1,2,0],[0,4,7]],[[1,4,5],[4,5,3],[8,7,2]],[[3,5,4],[5,9,0],[7,5,2]],[[6,7,9],[4,9,7],[8,5,7]],[[7,6,5],[3,7,2],[5,9,7]],[[2,0,1],[3,9,4],[5,8,3]],[[5,9,8],[4,2,3],[5,7,7]],[[7,3,3],[2,7,9],[5,6,7]],[[2,4,3],[4,4,1],[1,6,1]],[[6,8,4],[3,6,0],[8,4,6]],[[8,3,6],[9,4,6],[6,8,0]],[[8,2,9],[9,2,5],[1,6,9]],[[9,2,7],[2,5,6],[3,8,0]],[[2,4,2],[9,4,2],[9,4,9]],[[9,8,6],[0,2,4],[1,7,5]],[[3,1,9],[8,2,0],[1,3,5]],[[0,6,1],[3,8,3],[9,0,3]],[[5,7,6],[6,8,9],[2,6,2]],[[7,0,8],[1,4,5],[2,7,1]],[[6,0,6],[6,4,0],[6,9,9]],[[1,4,1],[4,0,5],[3,6,9]],[[6,6,6],[9,1,4],[0,8,1]],[[8,1,5],[2,3,6],[2,1,4]],[[9,9,7],[1,8,4],[0,3,5]],[[8,8,9],[0,7,5],[9,1,2]],[[5,1,0],[8,4,5],[4,3,3]],[[2,4,1],[8,4,6],[6,3,7]],[[9,2,9],[4,2,6],[5,3,5]],[[8,2,3],[3,6,4],[0,2,7]],[[2,5,1],[1,9,2],[5,5,9]],[[7,1,6],[9,6,9],[2,6,1]],[[5,5,5],[2,7,4],[8,7,3]],[[5,7,5],[0,2,8],[3,2,0]],[[1,3,9],[9,3,2],[2,1,2]],[[4,1,1],[0,3,3],[6,7,2]],[[2,2,6],[6,6,1],[3,9,3]],[[6,6,6],[4,8,1],[4,3,8]],[[3,6,7],[7,7,7],[4,9,5]],[[5,5,3],[5,0,6],[5,0,8]],[[3,8,4],[4,3,5],[6,7,8]],[[7,8,2],[0,1,6],[6,4,0]],[[1,5,6],[4,6,7],[7,8,7]],[[7,6,3],[0,5,0],[5,4,6]],[[0,8,8],[6,8,6],[6,0,8]],[[8,0,4],[6,3,9],[7,4,3]],[[6,6,0],[1,6,9],[6,4,6]],[[3,4,3],[0,9,4],[6,4,3]],[[7,6,8],[9,5,1],[2,8,7]],[[2,9,7],[0,1,7],[2,2,9]],[[0,1,8],[1,5,7],[8,7,3]],[[8,7,9],[6,0,7],[0,5,0]],[[6,6,6],[6,4,9],[3,7,5]],[[5,7,0],[3,9,2],[4,9,3]],[[3,4,0],[0,6,6],[7,3,7]],[[5,7,9],[3,8,0],[2,1,8]],[[5,4,9],[7,7,7],[5,1,0]],[[6,2,4],[6,7,8],[3,2,7]],[[0,1,2],[8,3,5],[5,4,8]],[[0,2,4],[2,0,8],[7,7,7]],[[7,7,9],[8,4,4],[4,9,0]],[[0,2,4],[9,5,2],[7,2,4]],[[6,1,5],[5,9,7],[5,4,3]],[[0,6,6],[0,7,5],[5,1,2]],[[2,9,4],[1,1,2],[5,7,9]],[[2,9,9],[9,9,5],[8,8,2]],[[3,7,0],[4,6,1],[2,6,0]],[[0,7,4],[6,9,3],[7,9,3]],[[5,7,6],[9,2,9],[7,7,7]],[[1,0,1],[7,0,5],[6,5,5]],[[7,3,1],[6,6,6],[8,1,8]],[[2,9,6],[8,4,7],[6,4,2]],[[2,7,4],[3,4,8],[2,1,3]],[[6,6,6],[7,7,4],[3,8,9]],[[9,9,7],[7,7,7],[8,2,5]],[[4,6,8],[8,7,6],[0,2,3]],[[6,8,5],[1,3,6],[1,8,5]],[[2,0,2],[3,8,0],[1,4,9]],[[0,6,2],[4,7,4],[5,1,5]],[[7,7,9],[8,4,4],[6,2,2]],[[6,6,5],[5,6,7],[0,1,6]],[[7,5,7],[1,7,7],[7,2,0]],[[5,8,3],[5,9,2],[0,1,0]],[[8,4,2],[0,2,3],[4,0,8]],[[4,0,8],[2,1,5],[6,5,1]],[[7,7,7],[0,8,3],[4,6,7]],[[1,0,6],[3,6,4],[6,4,9]],[[5,6,7],[3,0,8],[0,5,8]],[[4,6,5],[5,0,9],[2,5,7]],[[7,0,6],[8,6,4],[4,9,3]],[[7,1,3],[0,2,2],[4,9,0]],[[9,3,3],[2,9,2],[4,8,8]],[[8,1,1],[2,8,0],[2,8,3]],[[8,6,6],[6,9,5],[4,4,8]],[[2,3,7],[9,8,4],[4,3,2]],[[8,1,1],[6,3,0],[3,3,1]],[[7,7,2],[2,9,4],[2,7,9]],[[9,8,5],[7,8,6],[6,3,9]],[[4,6,1],[5,4,4],[2,6,6]],[[9,2,8],[1,9,5],[9,1,5]],[[5,0,5],[2,3,1],[4,9,2]],[[7,7,1],[7,4,5],[3,0,0]],[[3,6,2],[4,4,0],[4,1,9]],[[7,5,3],[1,3,8],[5,5,0]],[[9,2,1],[9,6,1],[5,0,3]],[[4,9,7],[8,8,1],[7,7,7]],[[3,7,8],[4,9,4],[4,5,5]],[[7,7,7],[2,8,4],[7,6,1]],[[7,4,3],[9,2,2],[1,8,7]],[[7,8,1],[8,5,2],[6,8,8]],[[6,4,4],[6,8,2],[5,0,5]],[[7,1,0],[2,2,2],[9,1,1]],[[7,0,2],[6,4,1],[7,5,5]],[[8,1,2],[2,3,9],[4,6,2]],[[5,4,5],[7,7,7],[9,3,6]],[[6,6,6],[3,7,5],[6,8,2]],[[5,5,5],[9,8,7],[0,4,5]],[[7,3,9],[6,7,0],[0,8,7]],[[0,6,2],[8,7,2],[4,9,0]],[[7,6,1],[3,7,1],[0,9,7]],[[1,9,8],[7,6,4],[6,0,2]],[[3,4,0],[7,7,7],[0,1,1]],[[0,5,9],[9,3,5],[5,5,3]],[[0,6,8],[0,3,5],[8,1,6]],[[9,6,7],[1,0,6],[9,3,3]],[[6,4,3],[6,8,6],[8,2,0]],[[1,9,8],[6,9,8],[3,6,3]],[[6,4,3],[1,4,5],[2,4,9]],[[7,7,7],[7,3,2],[7,9,8]],[[4,8,9],[3,2,5],[1,2,2]],[[5,9,6],[1,0,9],[6,7,5]],[[7,7,7],[6,0,9],[7,2,8]],[[5,5,7],[2,7,5],[7,2,0]],[[4,2,3],[5,1,0],[6,5,4]],[[4,5,4],[0,1,3],[4,8,3]],[[3,7,8],[1,6,4],[2,0,2]],[[5,4,3],[4,7,9],[2,6,7]],[[6,5,6],[2,0,0],[3,1,2]],[[4,3,4],[1,6,7],[7,7,7]],[[6,5,6],[4,0,8],[3,6,7]],[[8,0,0],[0,9,4],[5,5,5]],[[5,6,2],[6,0,4],[4,5,3]],[[3,9,1],[5,0,5],[3,8,7]],[[5,0,0],[5,5,3],[3,7,5]],[[8,5,2],[7,7,7],[9,2,1]],[[1,7,9],[0,3,5],[2,5,4]],[[4,0,7],[6,2,9],[8,8,0]],[[8,8,6],[2,8,2],[7,5,6]],[[6,6,5],[1,3,9],[7,7,7]],[[6,1,6],[9,6,9],[6,1,4]],[[8,5,6],[5,6,0],[6,5,3]],[[8,6,3],[3,5,6],[5,0,7]],[[8,0,1],[7,7,7],[7,6,4]],[[0,8,5],[7,2,4],[6,6,4]],[[7,7,7],[8,8,1],[4,5,9]],[[0,8,9],[3,9,1],[7,6,3]],[[5,5,5],[5,1,3],[2,0,0]],[[3,3,1],[7,4,3],[0,3,2]],[[0,5,9],[0,7,9],[4,5,5]],[[1,6,2],[0,6,5],[3,1,1]],[[0,4,7],[3,3,8],[0,9,0]],[[6,7,5],[2,5,0],[2,2,2]],[[0,4,1],[5,5,5],[5,5,8]],[[1,5,0],[0,8,3],[5,4,5]],[[2,2,5],[7,7,8],[3,0,2]],[[0,9,7],[6,9,1],[6,9,5]],[[5,9,8],[6,2,6],[1,1,6]],[[0,4,0],[3,9,7],[8,5,0]],[[4,0,5],[0,6,7],[0,3,3]],[[5,2,4],[9,6,4],[8,2,0]],[[6,3,9],[8,7,6],[9,6,8]],[[4,7,1],[7,6,8],[0,3,9]],[[5,2,6],[7,6,8],[6,2,8]],[[5,1,1],[7,4,4],[7,2,9]],[[0,3,1],[3,6,6],[8,8,8]],[[6,5,2],[9,7,4],[6,1,4]],[[1,7,9],[1,4,9],[3,2,4]],[[0,5,1],[5,7,4],[7,5,3]],[[0,0,3],[0,5,8],[9,5,5]],[[4,5,7],[3,2,2],[7,7,7]],[[3,3,9],[8,7,7],[7,8,2]],[[1,6,1],[9,6,1],[6,1,5]],[[2,8,9],[9,5,3],[9,1,7]],[[8,1,6],[9,1,6],[6,2,4]],[[9,7,7],[3,6,4],[9,7,1]],[[4,6,8],[7,5,0],[1,5,4]],[[8,2,0],[4,4,2],[3,2,5]],[[3,8,5],[5,0,1],[4,9,8]],[[7,8,1],[1,8,6],[5,2,7]],[[7,3,0],[5,7,7],[9,9,7]],[[2,8,7],[7,8,9],[0,7,4]],[[5,3,6],[1,0,7],[7,8,0]],[[6,4,9],[6,9,0],[1,5,3]],[[4,9,5],[5,5,8],[5,8,8]],[[3,6,7],[2,2,7],[8,9,5]],[[6,6,0],[8,6,9],[9,4,8]],[[8,3,9],[8,6,9],[4,8,9]],[[7,7,7],[9,8,8],[4,0,8]],[[0,0,5],[6,6,6],[5,7,2]],[[8,5,0],[6,6,6],[0,2,1]],[[6,0,4],[7,9,7],[1,4,9]],[[3,7,6],[9,4,4],[7,7,7]],[[4,3,7],[5,7,4],[7,6,1]],[[1,3,5],[2,7,7],[0,3,7]],[[8,2,3],[7,9,9],[6,6,6]],[[7,5,5],[9,7,5],[1,6,5]],[[2,5,2],[4,2,6],[7,7,9]],[[7,2,5],[2,7,9],[2,6,7]],[[5,8,4],[9,6,1],[6,6,6]],[[0,5,6],[7,3,7],[9,3,1]],[[3,3,4],[5,2,0],[7,4,3]],[[7,7,7],[2,9,9],[3,3,2]],[[6,8,6],[7,7,7],[1,9,4]],[[9,4,5],[8,7,3],[9,5,2]],[[5,1,7],[1,8,5],[7,7,7]],[[2,2,6],[7,6,7],[1,7,3]],[[4,2,0],[2,6,2],[4,3,8]],[[5,6,5],[6,5,0],[1,9,5]],[[8,3,8],[7,5,1],[9,1,3]],[[5,0,2],[9,3,3],[1,5,5]],[[3,6,2],[3,6,9],[1,4,4]],[[3,2,8],[7,2,1],[9,6,3]],[[1,2,3],[3,3,4],[0,2,0]],[[0,2,4],[7,7,7],[5,0,6]],[[3,4,9],[1,2,7],[7,0,9]],[[1,9,9],[1,8,3],[4,1,9]],[[8,6,7],[2,7,4],[7,4,1]],[[2,4,7],[7,6,7],[0,3,1]],[[0,0,1],[0,3,6],[0,3,8]],[[5,8,9],[3,0,8],[0,5,4]],[[6,0,0],[8,2,8],[7,2,5]],[[7,2,7],[2,3,7],[0,5,0]],[[6,7,5],[4,7,9],[9,1,8]],[[7,9,8],[8,1,8],[1,2,9]],[[8,3,1],[3,9,6],[7,7,7]],[[0,1,7],[2,6,9],[5,7,4]],[[3,3,9],[4,8,2],[7,7,7]],[[1,5,7],[5,0,4],[8,6,9]],[[7,7,8],[8,4,7],[2,3,5]],[[9,9,5],[7,8,5],[4,1,9]],[[3,8,8],[9,7,5],[6,1,6]],[[5,1,6],[6,6,6],[9,5,7]],[[5,3,7],[9,7,6],[7,2,8]],[[2,7,3],[4,0,2],[0,1,1]],[[8,7,7],[9,8,3],[9,2,2]],[[6,2,6],[0,3,5],[0,0,2]],[[4,0,8],[5,6,3],[1,4,1]],[[9,2,5],[6,6,8],[6,1,1]],[[5,8,4],[0,1,2],[7,3,4]],[[6,7,8],[2,8,9],[7,9,4]],[[3,3,4],[2,2,4],[0,6,5]],[[4,6,8],[0,1,8],[9,5,3]],[[6,8,9],[7,8,2],[3,5,4]],[[8,1,1],[0,4,3],[0,6,7]],[[6,1,3],[6,9,2],[8,5,4]],[[9,7,8],[8,1,1],[7,8,9]],[[9,3,3],[2,9,4],[3,7,0]],[[7,8,6],[5,2,4],[7,4,1]],[[9,8,6],[7,7,5],[9,6,2]],[[7,8,8],[5,4,3],[7,8,0]],[[2,9,1],[1,3,3],[4,4,4]],[[3,8,2],[4,7,1],[1,6,1]],[[0,9,5],[3,2,0],[2,7,6]],[[4,4,9],[7,8,7],[3,8,1]],[[7,7,6],[4,1,9],[6,4,5]],[[8,9,6],[1,4,3],[1,8,1]],[[0,3,3],[0,2,9],[4,3,7]],[[9,3,3],[1,5,5],[4,9,5]],[[8,0,0],[6,0,6],[9,7,9]],[[9,2,6],[0,6,6],[6,9,9]],[[6,2,6],[4,6,9],[9,5,5]],[[8,0,3],[1,2,4],[4,2,3]],[[8,2,2],[9,4,4],[6,4,3]],[[6,7,1],[9,3,7],[1,8,9]],[[4,1,4],[2,4,9],[4,6,1]],[[6,7,5],[9,5,8],[5,7,0]],[[1,1,7],[5,7,3],[7,4,8]],[[0,3,6],[5,1,6],[7,4,3]],[[6,5,7],[4,7,3],[6,1,1]],[[2,5,2],[5,0,7],[7,7,7]],[[6,3,0],[9,7,0],[4,8,0]],[[6,1,3],[4,9,2],[4,8,0]],[[5,7,8],[4,5,2],[1,2,4]],[[7,5,0],[4,2,5],[2,3,6]],[[7,1,6],[7,8,8],[3,3,7]],[[4,4,4],[2,0,6],[4,1,2]],[[8,5,8],[9,8,4],[0,6,8]],[[4,1,8],[3,3,3],[3,6,4]],[[1,4,1],[8,4,2],[3,0,0]],[[8,1,7],[7,4,3],[5,1,2]],[[0,5,2],[6,6,6],[2,7,4]],[[3,9,4],[3,6,5],[6,6,6]],[[9,5,3],[6,8,9],[0,9,9]],[[1,8,2],[2,8,6],[1,9,5]],[[4,6,8],[2,2,2],[8,0,9]],[[8,0,8],[3,2,7],[6,2,5]],[[5,1,4],[3,4,0],[1,9,4]],[[2,8,0],[1,9,2],[0,2,9]],[[2,0,5],[7,7,7],[5,3,1]],[[9,0,3],[6,9,3],[6,4,9]],[[7,3,7],[7,7,0],[4,2,7]],[[6,3,8],[8,1,7],[5,5,5]],[[0,1,8],[3,7,8],[3,6,0]],[[4,1,5],[0,9,7],[8,7,8]],[[7,4,2],[7,7,6],[7,9,7]],[[7,7,6],[3,7,5],[4,3,7]],[[3,8,6],[0,6,2],[0,1,2]],[[2,7,1],[0,8,3],[0,5,0]],[[1,3,7],[6,6,6],[4,9,9]],[[5,9,2],[3,3,0],[6,0,0]],[[5,0,8],[5,7,8],[5,8,5]],[[2,6,3],[1,0,1],[7,9,0]],[[8,8,6],[3,2,6],[7,1,9]],[[9,1,0],[2,9,1],[7,7,7]],[[7,6,2],[0,8,4],[7,0,0]],[[5,2,3],[5,7,8],[5,6,4]],[[0,1,9],[8,7,4],[2,4,2]],[[0,0,0],[6,9,3],[3,1,4]],[[6,3,9],[8,7,7],[6,6,6]],[[6,7,9],[4,2,1],[4,6,5]],[[1,3,5],[4,4,3],[3,9,5]],[[6,0,0],[0,4,5],[2,7,4]],[[5,0,4],[0,9,9],[6,2,2]],[[9,1,7],[3,4,8],[1,1,4]],[[7,4,9],[7,6,2],[9,6,2]],[[3,5,7],[3,7,5],[7,1,7]],[[8,8,9],[9,6,7],[9,4,0]],[[8,0,7],[6,0,1],[8,1,8]],[[5,9,9],[5,5,2],[3,0,5]],[[0,9,6],[5,5,8],[2,9,4]],[[0,7,5],[8,2,7],[1,4,0]],[[8,9,0],[2,5,1],[7,7,8]],[[6,5,2],[4,6,6],[8,5,6]],[[3,8,9],[8,5,6],[7,8,7]],[[0,2,2],[5,0,7],[0,6,3]],[[3,9,0],[1,7,4],[1,6,1]],[[5,3,1],[0,1,1],[7,1,5]],[[2,1,5],[5,9,1],[2,2,6]],[[7,6,4],[9,7,8],[8,8,7]],[[0,0,6],[1,2,2],[8,1,9]],[[0,6,1],[0,5,7],[7,7,7]],[[6,4,2],[2,8,5],[7,7,7]],[[4,0,4],[8,6,6],[5,5,5]],[[3,0,3],[9,8,0],[6,2,0]],[[1,0,8],[7,7,7],[1,8,9]],[[1,8,7],[3,4,3],[1,8,7]],[[6,1,8],[9,9,8],[1,5,4]],[[7,6,4],[7,6,3],[3,6,3]],[[0,4,7],[8,8,6],[3,8,5]],[[5,8,4],[5,8,1],[1,4,0]],[[7,8,8],[7,1,4],[0,4,8]],[[0,4,8],[5,8,1],[3,0,4]],[[5,5,1],[1,4,0],[9,1,9]],[[0,7,9],[8,1,3],[6,2,1]],[[6,0,7],[0,2,1],[5,6,6]],[[2,9,6],[2,8,2],[6,6,6]],[[1,2,6],[4,7,2],[2,4,0]],[[6,0,3],[6,9,0],[0,9,9]],[[7,0,7],[9,1,5],[0,3,6]],[[5,4,5],[7,5,8],[0,1,5]],[[6,4,6],[5,0,5],[1,1,7]],[[5,5,5],[0,2,6],[3,6,8]],[[1,2,6],[8,2,8],[9,8,4]],[[6,2,3],[4,7,3],[1,1,0]],[[8,5,4],[1,7,9],[9,3,5]],[[8,4,0],[3,5,9],[5,3,1]],[[5,3,8],[0,8,5],[0,1,4]],[[7,6,3],[3,9,7],[7,7,9]],[[1,6,8],[0,1,8],[7,7,7]],[[0,0,4],[7,4,0],[2,7,9]],[[9,1,8],[8,7,5],[4,1,5]],[[8,5,6],[8,6,2],[3,6,7]],[[9,5,7],[2,2,3],[6,4,3]],[[6,3,8],[4,6,8],[4,1,6]],[[9,1,1],[5,6,3],[2,9,3]],[[6,3,1],[8,7,2],[0,9,6]],[[7,8,1],[7,7,7],[4,9,0]],[[6,1,6],[3,6,0],[5,3,6]],[[3,9,1],[6,9,2],[2,9,3]],[[0,7,3],[8,9,1],[9,6,3]],[[1,3,7],[4,6,3],[8,9,2]],[[0,7,3],[6,8,1],[6,5,4]],[[7,6,5],[3,5,5],[5,5,4]],[[8,6,0],[8,8,2],[8,8,5]],[[6,6,9],[6,8,7],[4,6,2]],[[7,1,7],[7,6,6],[6,3,4]],[[5,6,5],[7,6,4],[6,1,1]],[[4,1,7],[0,3,6],[2,0,4]],[[6,7,0],[9,1,2],[3,0,7]],[[5,6,0],[5,3,3],[9,7,7]],[[7,7,5],[8,5,2],[5,3,9]],[[4,3,0],[4,2,5],[7,9,5]],[[1,8,3],[7,9,8],[6,6,6]],[[2,0,1],[7,1,6],[6,8,0]],[[2,8,4],[5,4,6],[5,3,4]],[[3,3,0],[5,8,7],[5,4,4]],[[7,0,8],[1,2,6],[5,3,2]],[[8,7,4],[2,8,5],[2,2,1]],[[5,7,9],[0,5,9],[1,0,6]],[[4,3,9],[3,1,5],[8,3,7]],[[7,6,2],[1,4,6],[6,2,4]],[[5,5,5],[9,5,1],[9,0,1]],[[3,2,1],[5,4,8],[9,8,1]],[[5,8,8],[1,2,0],[2,8,3]],[[9,2,0],[5,3,6],[2,4,1]],[[0,8,7],[3,1,3],[5,2,5]],[[6,6,6],[0,1,8],[1,4,3]],[[6,6,2],[5,9,7],[4,7,9]],[[5,6,2],[9,3,9],[1,6,4]],[[9,7,9],[4,8,4],[8,2,8]],[[4,9,6],[2,2,1],[6,5,9]],[[4,7,6],[5,2,9],[2,1,0]],[[9,7,9],[1,4,0],[9,3,3]],[[3,0,9],[2,5,8],[0,2,5]],[[5,2,1],[3,2,8],[6,2,7]],[[2,4,1],[1,0,2],[8,6,3]],[[8,6,5],[4,1,6],[5,7,3]],[[2,1,9],[3,2,8],[5,5,4]],[[5,6,0],[1,9,6],[4,4,4]],[[2,6,5],[5,2,4],[1,5,3]],[[6,6,9],[3,7,9],[5,6,3]],[[9,5,8],[0,1,9],[4,6,7]],[[3,2,6],[5,6,9],[2,6,9]],[[6,9,1],[3,9,2],[6,8,9]],[[4,4,4],[1,4,1],[1,1,7]],[[1,0,0],[5,5,5],[7,7,1]],[[6,6,2],[2,0,9],[7,4,1]],[[6,6,7],[7,7,1],[7,2,6]],[[8,9,1],[6,0,5],[6,8,4]],[[7,9,6],[0,1,1],[2,4,7]],[[9,6,6],[0,9,1],[4,4,0]],[[9,2,5],[5,5,5],[8,2,4]],[[8,3,5],[6,7,4],[5,6,7]],[[3,2,4],[3,6,3],[4,8,8]],[[7,6,1],[9,4,2],[8,9,2]],[[6,6,9],[2,3,6],[5,1,0]],[[6,9,5],[8,6,2],[8,1,1]],[[1,9,8],[0,3,0],[4,4,2]],[[0,3,7],[2,8,6],[4,7,7]],[[3,4,3],[7,6,1],[5,9,1]],[[4,0,4],[7,2,0],[4,6,9]],[[2,0,6],[5,4,9],[6,9,3]],[[9,3,7],[8,4,8],[8,6,6]],[[5,8,5],[3,4,0],[2,9,0]],[[7,7,7],[9,5,5],[2,1,0]],[[6,0,4],[2,0,0],[8,6,1]],[[5,3,5],[3,6,9],[5,9,2]],[[8,3,5],[4,1,4],[4,7,5]],[[9,3,9],[8,0,5],[0,4,8]],[[7,7,7],[5,0,2],[5,9,7]],[[8,9,9],[3,3,1],[9,8,6]],[[9,7,9],[3,3,5],[5,9,5]],[[7,0,0],[6,2,6],[8,6,9]],[[5,5,9],[9,5,6],[9,2,5]],[[7,9,5],[9,5,7],[3,4,3]],[[2,6,8],[4,8,1],[8,8,5]],[[5,7,4],[9,7,8],[3,7,2]],[[3,5,6],[1,0,5],[4,8,7]],[[4,4,4],[0,5,5],[5,8,4]],[[8,1,7],[9,6,0],[3,7,4]],[[3,8,7],[2,5,1],[8,7,9]],[[7,7,7],[7,3,7],[4,1,5]],[[1,7,8],[8,0,6],[7,4,9]],[[4,3,4],[5,1,1],[4,8,4]],[[3,9,4],[9,7,0],[0,5,8]],[[7,1,7],[8,7,2],[5,1,2]],[[8,3,6],[0,2,7],[8,5,3]],[[1,3,3],[2,4,8],[2,2,5]],[[3,6,7],[6,9,7],[8,3,3]],[[4,6,8],[9,5,6],[4,1,6]],[[7,7,7],[3,6,4],[4,8,3]],[[3,4,4],[5,2,8],[8,4,2]],[[7,7,7],[1,0,8],[5,1,6]],[[2,4,3],[2,1,8],[5,5,9]],[[7,5,9],[9,7,9],[7,0,7]],[[5,3,5],[6,6,6],[2,3,2]],[[2,5,2],[2,4,1],[1,4,4]],[[6,8,6],[0,9,6],[5,7,0]],[[0,3,7],[5,7,1],[7,1,6]],[[4,0,1],[3,2,5],[5,1,0]],[[3,5,7],[1,2,8],[4,0,1]],[[2,9,6],[0,2,8],[1,7,9]],[[2,1,1],[5,6,1],[2,6,7]],[[4,2,9],[5,2,2],[0,0,7]],[[2,7,6],[4,4,7],[0,6,6]],[[7,5,0],[3,4,7],[6,7,0]],[[9,5,3],[0,7,9],[2,3,9]],[[2,7,2],[5,1,6],[1,1,9]],[[6,9,2],[3,3,3],[5,0,4]],[[7,7,7],[8,0,0],[8,3,9]],[[3,1,6],[6,3,1],[1,7,5]],[[1,1,4],[3,5,2],[6,9,8]],[[3,8,6],[7,7,7],[5,3,4]],[[7,7,7],[3,2,7],[4,6,5]],[[0,3,7],[5,7,3],[7,7,3]],[[4,4,0],[4,4,2],[4,4,3]],[[5,6,2],[7,0,6],[2,6,0]],[[0,5,8],[6,3,1],[3,4,6]],[[8,0,7],[3,8,5],[1,0,1]],[[6,1,0],[1,3,7],[7,7,7]],[[1,9,1],[3,9,6],[6,9,8]],[[0,4,8],[2,4,5],[4,1,8]],[[4,2,3],[6,6,6],[5,9,6]],[[6,1,1],[1,6,3],[9,1,6]],[[2,4,0],[6,8,6],[3,8,9]],[[1,5,5],[8,3,9],[8,9,5]],[[7,9,0],[7,4,9],[8,3,4]],[[1,6,1],[7,4,6],[9,9,7]],[[6,6,6],[6,2,1],[6,5,8]],[[0,0,6],[7,1,2],[5,5,5]],[[2,1,9],[2,2,8],[8,8,4]],[[3,3,5],[7,7,7],[0,4,9]],[[3,3,0],[3,1,9],[3,5,0]],[[0,3,7],[3,7,7],[1,8,4]],[[6,9,0],[1,5,9],[7,1,6]],[[4,4,0],[3,5,1],[4,8,3]],[[7,7,7],[8,3,7],[3,6,3]],[[2,1,3],[9,9,9],[0,2,9]],[[8,9,6],[5,2,8],[5,9,2]],[[3,4,8],[6,2,6],[4,6,3]],[[2,5,4],[1,5,7],[1,4,2]],[[6,5,8],[4,4,1],[8,6,3]],[[1,1,4],[2,3,3],[8,3,6]],[[3,3,4],[3,2,1],[6,8,6]],[[8,0,7],[9,7,8],[7,1,9]],[[0,6,6],[3,3,1],[6,0,8]],[[3,2,7],[9,7,2],[4,5,0]],[[0,7,6],[2,9,0],[5,0,7]],[[6,2,6],[8,9,2],[6,6,6]],[[3,3,0],[6,6,6],[6,0,7]],[[1,4,9],[1,4,5],[3,4,5]],[[7,7,4],[2,7,5],[4,4,7]],[[8,6,0],[8,2,8],[6,6,3]],[[0,9,7],[6,2,4],[9,8,1]],[[0,7,6],[3,2,8],[2,1,2]],[[0,4,7],[0,1,2],[6,3,1]],[[8,5,2],[7,7,7],[4,6,5]],[[7,1,3],[3,6,0],[3,4,8]],[[8,0,3],[9,4,0],[9,5,0]],[[3,8,3],[5,4,2],[1,1,0]],[[1,6,2],[3,1,2],[2,3,6]],[[9,5,6],[5,8,3],[1,2,0]],[[8,5,5],[3,5,0],[5,4,7]],[[6,7,5],[9,3,1],[7,9,7]],[[2,9,9],[8,9,1],[9,0,7]],[[2,3,3],[3,0,6],[7,5,1]],[[3,6,2],[6,6,6],[4,9,4]],[[3,0,7],[4,8,8],[2,3,5]],[[4,3,7],[9,0,5],[4,5,7]],[[2,9,7],[2,2,6],[3,8,1]],[[4,8,7],[9,3,6],[0,6,8]],[[2,1,6],[6,4,0],[9,9,5]],[[3,1,7],[0,9,9],[7,2,8]],[[9,5,0],[6,8,5],[4,6,2]],[[6,6,6],[4,3,3],[8,6,5]],[[4,8,2],[9,6,5],[6,2,4]],[[7,0,0],[8,9,2],[6,5,5]],[[6,1,7],[6,7,8],[7,8,3]],[[1,4,6],[0,4,2],[3,3,0]],[[7,4,3],[4,5,6],[9,1,3]],[[2,5,0],[7,9,3],[0,0,2]],[[0,9,7],[5,7,2],[7,4,8]],[[0,2,0],[5,9,5],[6,4,0]],[[4,4,0],[5,6,5],[1,5,1]],[[0,6,6],[5,1,4],[2,6,9]],[[0,0,1],[6,6,6],[4,1,6]],[[8,1,6],[2,8,5],[9,6,2]],[[7,0,0],[7,6,2],[0,8,6]],[[5,7,1],[6,4,9],[5,2,6]],[[0,5,6],[5,2,9],[1,9,5]],[[9,7,6],[1,0,7],[6,6,6]],[[5,5,7],[0,5,8],[6,3,8]],[[7,2,7],[4,5,4],[6,6,6]],[[5,8,4],[0,7,8],[0,0,8]],[[5,2,6],[2,9,1],[5,8,8]],[[8,5,9],[2,6,2],[8,5,1]],[[8,2,2],[2,8,3],[5,3,8]],[[7,4,0],[2,7,4],[7,8,1]],[[9,8,6],[5,6,3],[6,3,8]],[[9,7,8],[6,9,1],[9,0,0]],[[3,9,1],[1,6,1],[7,6,5]],[[4,8,1],[9,6,8],[4,4,9]],[[1,7,3],[4,2,5],[2,5,0]],[[2,5,5],[5,4,3],[0,5,0]],[[7,3,5],[2,1,3],[9,8,1]],[[1,7,7],[0,7,4],[7,1,6]],[[6,2,4],[6,5,3],[8,2,7]],[[1,2,0],[9,4,3],[0,6,3]],[[4,7,2],[3,6,4],[7,8,3]],[[9,4,7],[2,4,3],[4,9,3]],[[4,2,4],[1,0,3],[2,4,8]],[[2,0,9],[2,6,3],[0,1,1]],[[6,6,6],[2,1,5],[0,8,1]],[[4,4,1],[6,6,6],[6,7,3]],[[6,3,5],[7,7,7],[7,8,1]],[[3,5,5],[0,5,1],[2,8,2]],[[9,2,4],[0,6,2],[5,8,2]],[[1,4,0],[3,6,9],[2,2,8]],[[6,4,0],[5,5,5],[3,4,9]],[[4,8,7],[9,7,1],[0,5,8]],[[5,5,4],[8,1,4],[1,1,6]],[[3,0,4],[1,8,2],[7,7,4]],[[8,9,3],[1,6,4],[4,9,0]],[[1,6,7],[3,1,4],[5,7,6]],[[9,4,4],[4,0,2],[5,9,2]],[[5,6,1],[7,7,7],[6,9,7]],[[0,7,3],[3,4,6],[5,9,8]],[[8,8,2],[9,6,4],[5,9,2]],[[3,0,4],[9,5,8],[6,8,8]],[[0,9,9],[2,2,2],[6,6,8]],[[7,0,8],[9,8,0],[4,6,3]],[[5,8,3],[6,1,7],[7,6,2]],[[8,3,4],[9,3,9],[7,9,9]],[[7,1,0],[4,4,4],[0,0,3]],[[9,2,2],[2,8,1],[8,7,5]],[[7,3,5],[8,8,8],[6,2,5]],[[5,8,3],[0,4,1],[2,5,5]],[[2,0,9],[9,1,6],[0,9,8]],[[8,4,4],[5,1,8],[7,7,7]],[[8,5,3],[4,6,2],[6,6,6]],[[7,7,2],[6,0,6],[4,1,6]],[[4,6,5],[1,1,6],[6,8,5]],[[9,8,3],[8,2,0],[0,2,8]],[[3,7,8],[1,9,2],[7,7,7]],[[3,7,0],[0,0,5],[9,8,5]],[[2,9,4],[5,5,6],[6,7,7]],[[3,3,7],[4,8,2],[1,6,7]],[[0,6,0],[7,9,2],[1,9,7]],[[0,9,1],[9,9,1],[7,7,6]],[[7,7,7],[5,5,7],[2,8,6]],[[6,1,4],[8,7,7],[1,7,2]],[[6,1,3],[5,7,7],[1,4,6]],[[8,8,7],[1,4,3],[5,5,1]],[[3,1,0],[1,5,2],[3,2,1]],[[5,6,1],[6,5,1],[3,6,5]],[[1,4,6],[7,6,1],[9,6,2]],[[6,8,6],[2,6,1],[6,6,8]],[[9,1,6],[6,8,3],[9,0,6]],[[3,7,1],[8,5,7],[2,0,8]],[[7,7,3],[4,7,7],[8,5,6]],[[6,9,5],[0,4,6],[6,1,2]],[[9,4,8],[9,8,3],[8,0,8]],[[3,6,1],[2,3,8],[6,3,6]],[[1,7,0],[5,9,4],[2,9,0]],[[3,1,7],[9,2,6],[5,7,7]],[[3,8,0],[3,7,5],[2,3,8]],[[4,0,2],[1,5,7],[7,7,7]],[[3,3,4],[9,3,0],[2,3,9]],[[4,5,1],[3,8,9],[3,6,8]],[[7,9,7],[3,0,2],[3,9,3]],[[8,7,2],[1,8,5],[1,1,4]],[[8,3,7],[5,7,6],[7,4,8]],[[8,6,1],[5,8,8],[4,7,2]],[[9,7,3],[3,8,9],[0,5,3]],[[0,7,1],[2,5,5],[4,4,4]],[[1,5,8],[1,3,7],[9,8,0]],[[5,7,7],[2,5,7],[3,6,0]],[[9,0,2],[8,5,4],[2,5,4]],[[4,1,4],[8,8,8],[6,9,0]],[[2,4,1],[1,6,5],[6,6,6]],[[9,7,5],[7,9,7],[6,6,9]],[[3,8,4],[3,1,9],[3,8,5]],[[8,3,2],[1,8,5],[0,5,4]],[[2,5,3],[6,6,0],[9,0,8]],[[4,8,7],[6,7,6],[7,4,2]],[[9,3,6],[7,7,7],[9,3,1]],[[7,7,7],[4,3,2],[7,2,6]],[[1,2,8],[4,7,5],[0,9,3]],[[5,4,6],[5,7,7],[7,8,5]],[[3,9,5],[7,7,2],[9,4,8]],[[8,3,5],[2,1,0],[3,6,4]],[[1,6,5],[1,2,3],[5,6,6]],[[2,9,9],[1,8,4],[2,6,3]],[[9,2,5],[3,7,5],[1,5,8]],[[5,2,5],[6,2,5],[4,3,2]],[[0,2,6],[5,3,1],[8,0,2]],[[8,7,6],[4,9,3],[1,7,2]],[[4,0,3],[5,5,4],[4,3,2]],[[5,9,9],[6,6,6],[2,1,1]],[[4,9,5],[0,9,6],[6,8,4]],[[1,3,3],[6,7,8],[5,5,5]],[[8,1,7],[5,4,0],[6,1,2]],[[2,4,9],[5,7,1],[5,6,3]],[[4,6,1],[6,6,3],[6,1,0]],[[7,0,2],[7,5,7],[2,5,4]],[[2,5,9],[5,9,0],[3,6,8]],[[6,9,3],[1,3,8],[9,1,6]],[[3,7,0],[7,0,2],[7,2,9]],[[6,6,6],[4,9,3],[6,3,2]],[[3,2,5],[3,7,3],[4,7,4]],[[4,0,8],[3,2,9],[2,8,3]],[[8,7,5],[9,0,3],[5,3,7]],[[9,7,3],[8,3,1],[1,4,0]],[[4,6,3],[1,8,7],[5,2,6]],[[2,9,1],[6,8,3],[5,7,1]],[[7,1,6],[4,0,5],[5,0,7]],[[7,3,2],[9,6,5],[6,8,7]],[[2,7,2],[9,9,0],[6,5,4]],[[6,3,5],[7,7,7],[0,1,9]],[[0,8,5],[1,8,6],[0,1,8]],[[5,0,9],[6,8,8],[5,5,5]],[[8,4,4],[0,0,4],[9,5,7]],[[6,6,6],[4,1,8],[0,8,6]],[[6,3,4],[0,1,6],[6,7,2]],[[0,3,8],[9,6,3],[3,4,1]],[[5,2,0],[6,6,6],[0,5,4]],[[3,3,3],[6,0,7],[4,9,8]],[[7,7,5],[6,1,8],[3,3,3]],[[8,3,4],[9,1,3],[5,7,4]],[[9,6,9],[5,2,7],[2,7,2]],[[3,8,0],[4,3,5],[6,4,3]],[[3,1,8],[9,8,0],[1,0,5]],[[9,8,4],[0,1,9],[5,8,7]],[[6,6,6],[4,8,1],[5,4,9]],[[4,3,2],[4,1,3],[7,4,6]],[[0,8,7],[8,7,7],[7,4,8]],[[6,8,8],[4,6,7],[3,2,7]],[[7,0,8],[7,7,7],[0,5,6]],[[0,4,9],[7,7,7],[2,7,6]],[[6,1,3],[4,6,5],[7,2,6]],[[9,0,9],[9,7,5],[3,8,5]],[[8,6,7],[3,7,2],[7,0,3]],[[9,3,2],[6,8,0],[4,8,1]],[[8,1,9],[7,5,6],[3,3,3]],[[7,8,7],[9,7,8],[7,1,1]],[[8,6,7],[0,1,1],[2,9,3]],[[2,4,1],[9,3,0],[1,7,6]],[[4,4,6],[2,3,1],[4,9,6]],[[5,6,8],[4,0,6],[6,7,4]],[[7,2,8],[9,0,5],[1,4,0]],[[9,7,1],[2,6,6],[4,7,4]],[[1,0,8],[4,7,3],[6,6,2]],[[0,7,5],[7,3,8],[1,4,4]],[[5,3,6],[7,1,1],[6,0,7]],[[7,7,7],[5,2,2],[7,2,4]],[[7,3,4],[7,7,4],[1,2,7]],[[3,9,1],[9,4,8],[2,2,5]],[[4,1,2],[8,1,0],[7,7,2]],[[3,8,1],[7,6,6],[4,8,9]],[[7,7,7],[3,3,4],[3,9,5]],[[6,8,6],[9,0,1],[1,1,5]],[[0,7,4],[3,2,3],[0,5,5]],[[8,6,6],[1,5,3],[0,7,4]],[[1,4,4],[3,2,5],[2,7,9]],[[6,5,0],[6,3,5],[0,7,8]],[[0,7,3],[9,5,3],[0,9,6]],[[9,7,1],[8,1,7],[2,5,0]],[[8,9,1],[8,7,3],[6,1,5]],[[0,2,4],[1,9,9],[4,0,8]],[[5,5,0],[3,1,9],[5,0,4]],[[2,3,6],[8,8,3],[4,4,6]],[[7,7,7],[4,4,6],[0,5,0]],[[4,3,9],[0,5,7],[4,9,9]],[[4,2,9],[3,4,1],[2,2,0]],[[8,3,2],[4,7,0],[6,1,7]],[[1,4,7],[9,7,7],[2,4,9]]],respin:[],freespin:[]}},460:(t,e,i)=>{var r=i(643),n=i(469),s=new class{constructor(){this._reset()}_reset(){n.set("spin.counter",0)}getInitalSymbols(){return r.spin[0]}makeSpin(t){this._chargeForSpin(t.data);var e=this._getNextSpinSymbols();return{state:this._getCurrentState(),spinStages:this._calculateSpinStages(e,t)}}_getLines(){return{lines:n.get("config.base.params.avaliableLines"),trueLines:!0}}_getLinesContentBase(t,e){for(var i=this._getLines(t),r=[],n=0;n<i.lines.length;n++){for(var s=i.lines[n],o=[],a=[],h=0;h<s.length;h++)o.push(t[+s[h]][h]),a.push([h+"",s[h]]);r.push({line:s,lineSymbols:o,wonSymbols:a,lineIndex:i.trueLines?n:-1})}return r.slice(0,e.data.lines.length)}_calculateSpinStages(t,e){return[{spinResult:{type:"SpinResult",rows:t},slotWin:this._calculateSlotWin(t,e)}]}_getJokerSymbols(){var t=n.get("config.base.params",[]);return(n.get("freespins.inProgress",!1)&&t.bonusGameJokerSymbols?t.bonusGameJokerSymbols:t.jokerSymbols)||[]}_isSymbolJoker(t){var e=this._getJokerSymbols(),i=!1;if(e)for(var r=0;r<e.length;r++)e[r]===t&&(i=!0);return i}_getScatterSymbols(){return[]}_isSymbolScatter(t){var e=this._getScatterSymbols(),i=!1;if(e)for(var r=0;r<e.length;r++)e[r]===t&&(i=!0);return i}_getWinlineCandidate(t,e){for(var i={jokersCount:0,length:0,lineIndex:t.lineIndex,wonSymbols:t.wonSymbols},r=0;r<t.lineSymbols.length;r++){var n=t.lineSymbols[r],s=this._isSymbolJoker(n),o=this._isSymbolScatter(n);if(e&&!s)break;if(o&&!s||r>0&&!s&&!this._isSymbolJoker(i.symbol)&&n!==i.symbol)break;i.length++,s&&i.jokersCount++,(!i.symbol||this._isSymbolJoker(i.symbol)&&!s)&&(i.symbol=n)}return i}_getWinlinesCandidates(t){for(var e=[],i=0;i<t.length;i++){var r=[],n=t[i];r.push(this._getWinlineCandidate(n)),r.push(this._getWinlineCandidate(n,!0)),e.push(r)}return e}_getLineWinAmounts(t){for(var e=n.get("config.base.params.payouts"),i=[],r=0;r<t.length;r++){for(var s=t[r],o=!1,a=!1,h=0;h<s.length;h++)for(var l=s[h],u=0;u<e.length;u++){var c=e[u];c.symbols[0]===l.symbol&&c.symbols.length<=l.length&&(!o||+c.payout>+o.payout)&&(o=c,a=l)}if(o){for(var d=+o.payout,p=[],f=0;f<o.symbols.length;f++)p.push(a.wonSymbols[f]);var m;m=-1===a.lineIndex?{amount:d+"",type:"WinAmount",wonSymbols:p}:{amount:d+"",selectedLine:a.lineIndex+"",type:"LineWinAmount",wonSymbols:p},i.push(m)}}return i}_postprocessWinAmounts(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:i}=arguments.length>2?arguments[2]:void 0,r=0,s=0;s<t.length;s++)t[s].amount&&(r+=+t[s].amount);var o=!!(r>0||e.newState&&"Ready"!==e.newState)&&{totalWin:r,canGamble:!0,gambleParams:{history:["0","1","1","0","0"]},lineWinAmounts:t};return this._payForWin(r),n.set("gamble",{totalWin:r,stepsLeft:4}),{slotWin:o,bonusGameData:e}}_toCoins(t,e){return(+t*+e.data.bet*+e.data.coin).toFixed(0)}_payForWin(t){var e=+n.get("balance.amount")+ +t;n.set("balance.amount",e)}_chargeForSpin(t){if(!n.get("freespins.inProgress",!1)){var e=+(n.get("balance.amount")-+t.bet*+t.coin*+t.lines.length).toFixed(0);n.set("balance.amount",e)}}_calculateSlotWin(t,e){for(var i=this._getLinesContentBase(t,e),r=this._getWinlinesCandidates(i),n=this._getLineWinAmounts(r),s=0;s<n.length;s++)n[s].amount&&(n[s].amount=this._toCoins(+n[s].amount,e));var{slotWin:o}=this._postprocessWinAmounts(n,{},e);return o}_getCurrentState(){return"Ready"}_getNextSpinSymbols(){var t=n.get("spin.counter"),e=this._validateNextTypeIndex("spin",t+1);return n.set("spin.counter",e),r.spin[e]}_validateNextTypeIndex(t,e){return e<r[t].length||(e=0),e}getBalance(){var{amount:t,currency:e}=n.get("balance");return{totalAmount:t,currency:e}}getRandomInt(t){return Math.floor(Math.random()*Math.floor(t))}makeGamble(){var t={totalWin:"0",canGamble:"false"},e=!!this.getRandomInt(2),{totalWin:i,stepsLeft:r}=n.get("gamble");return e&&r>0?(i*=2,t.totalWin=i,r--):(i=0,r=0),t.canGamble=r>0,n.set("gamble",{totalWin:i,stepsLeft:r}),{data:t}}};Object.freeze(s),t.exports=s},469:t=>{var e=new class{constructor(){this._data={}}get(t){return this.recursiveGet(t,this._data)}set(t,e){return this.recursiveSet(t,e,this._data),!0}recursiveGet(t,e,i){if(void 0===e)return i;for(var r of t="string"==typeof t?t.split("."):t){if(void 0===e[r])return i;e=e[r]}return e}recursiveSet(t,e,i){var r=(t="string"==typeof t?t.split("."):t).shift();return t.length>0?(i[r]||(i[r]={}),this.recursiveSet(t,e,i[r])):i[r]=e,!0}};Object.freeze(e),t.exports=e},224:(t,e,i)=>{var r=i(529);t.exports=class{constructor(t){this._params=t,this._responses=t.responses||{}}makeResponse(t){var{action:e,sesId:i,data:n}=JSON.parse(t);return this._responses[e]?new this._responses[e]({action:e,sesId:i,data:n},this._params).make():new r({action:e,sesId:i,data:n},r.WRONG_REQUEST).make()}}},20:(t,e,i)=>{var r=i(541);t.exports=class extends r{constructor(t,e){var{reconnectTimeout:i}=e;super(t),this._responseData={transportConfig:{reconnectTimeout:i}}}}},655:(t,e,i)=>{var r=i(541);t.exports=class extends r{constructor(t,e){super(t),this._responseData=this._makeResponse(e)}_makeResponse(t){var{bets:e,extrabet:i,betMultiplier:r,coinValues:n,defaultCoinValue:s,defaultBet:o,defaultLines:a,avaliableLines:h,payouts:l}=t.params;return{sessionId:"123-3123-1233-12-313",bets:e,extrabet:i,betMultiplier:r,coinValues:n,defaultCoinValue:s,defaultBet:o,defaultLines:a,gameParameters:{avaliableLines:h,payouts:l,initialSymbols:this._helper.getInitalSymbols()}}}}},44:(t,e,i)=>{var r=i(541);t.exports=class extends r{constructor(t){super(t),this._responseData=this._makeResponse()}_makeResponse(){return this._helper.getBalance()}}},541:(t,e,i)=>{var r=i(460);t.exports=class{constructor(t){var{action:e,sesId:i,data:n}=t;this.action=e.replace("Request","Response"),this.result=!0,this.sesId=i,this._requestData=n,this._responseData={},this._helper=r}make(){var t={action:this.action,result:this.result,sesId:this.sesId,data:this._responseData};return JSON.stringify(t)}}},130:(t,e,i)=>{var r=i(541);t.exports=class extends r{constructor(t){super(t),this._responseData={haveBrockenGame:!1}}}},529:(t,e,i)=>{var r=i(541);class n extends r{constructor(t,e){super(t),this._makeResponse(e)}_makeResponse(t){this.result=!1,t===n.WRONG_REQUEST?this._responseData={message:"Wrong request"}:(this._responseData={message:"Internal server error"},this.action="InternalError")}}n.UNEXPECTED=0,n.WRONG_REQUEST=1,t.exports=n},600:(t,e,i)=>{var r=i(541);t.exports=class extends r{constructor(t){super(t),this._responseData=this._makeResponse(t)}_makeResponse(t){return this._helper.makeGamble(t)}}},584:(t,e,i)=>{var r=i(541);t.exports=class extends r{constructor(t){super(t),this._responseData=this._makeResponse(t)}_makeResponse(t){return this._helper.makeSpin(t)}}},93:(t,e,i)=>{var r=i(469),n=i(224);t.exports=class{constructor(){this.gameConfig=i(468),this.spinConfig=i(643),this.mapper=new n(this.gameConfig),this.setDefaults()}setDefaults(){r.set("config.base",this.gameConfig),r.set("balance.amount",this.gameConfig.starterBalance),r.set("balance.currency",this.gameConfig.currency),r.set("config.spin",this.spinConfig)}getResponse(t){return this.mapper.makeResponse(JSON.stringify(t))}}},686:(t,e,i)=>{Urso.App.Templates={},i(958),i(403)},958:(t,e,i)=>{Urso.App.Templates.Groups={UiGroup:i(197)}},197:t=>{t.exports=class{constructor(){var t="images/ui";this.styles={".baseUi":{fontFamily:"GraphicPixel",fill:"#FFFFFF",stroke:"#2D2F21",anchorX:.5,anchorY:.5,fontSize:30,strokeThickness:2,wordWrap:!0},".btn-text":{fontSize:30},".winFieldValue":{fontSize:46},".cheeringText":{fontSize:32},".displayText":{fontSize:38,fontStyle:"italic",fill:"#00FFFF",stroke:"#FF00FF",strokeThickness:4},".btn-press":{fill:"#34383A"}},this.assets=[{type:Urso.types.assets.IMAGE,key:"autoPressed",path:"".concat(t,"/buttons/auto_pressed.png")},{type:Urso.types.assets.IMAGE,key:"autoUnpressed",path:"".concat(t,"/buttons/auto_unpressed.png")},{type:Urso.types.assets.IMAGE,key:"autoPress",path:"".concat(t,"/buttons/auto_press.png")},{type:Urso.types.assets.FONT,key:"GraphicPixel",path:"fonts/GraphicPixel-Regular.ttf"},{type:Urso.types.assets.IMAGE,key:"linesPressed",path:"".concat(t,"/buttons/lines_pressed.png")},{type:Urso.types.assets.IMAGE,key:"linesUnpressed",path:"".concat(t,"/buttons/lines_unpressed.png")},{type:Urso.types.assets.IMAGE,key:"betOnePressed",path:"".concat(t,"/buttons/bet_one_pressed.png")},{type:Urso.types.assets.IMAGE,key:"betOneUnpressed",path:"".concat(t,"/buttons/bet_one_unpressed.png")},{type:Urso.types.assets.IMAGE,key:"betMaxPressed",path:"".concat(t,"/buttons/bet_max_pressed.png")},{type:Urso.types.assets.IMAGE,key:"betMaxUnpressed",path:"".concat(t,"/buttons/bet_max_unpressed.png")},{type:Urso.types.assets.IMAGE,key:"spinPressed",path:"".concat(t,"/buttons/spin_pressed.png")},{type:Urso.types.assets.IMAGE,key:"spinUnpressed",path:"".concat(t,"/buttons/spin_unpressed.png")},{type:Urso.types.assets.IMAGE,key:"infoUnpressed",path:"".concat(t,"/buttons/info_unpressed.png")},{type:Urso.types.assets.IMAGE,key:"winFieldPanel",path:"".concat(t,"/panels/win_panel.png")},{type:Urso.types.assets.IMAGE,key:"creditPanel",path:"".concat(t,"/panels/credit_panel.png")}],this.objects=[{type:Urso.types.objects.CONTAINER,name:"uiContainer",contents:[{type:Urso.types.objects.CONTAINER,name:"slotButtonsContainer",width:600,x:(screen.availWidth-600)/2+50,y:870,contents:[{type:Urso.types.objects.TOGGLE,class:"uiButton autoButton",anchorX:.5,anchorY:.5,buttonFrames:{pressedOver:"autoPressed",pressedOut:"autoPressed",pressedDisabled:"autoPressed",pressedDown:"autoPress",unpressedOver:"autoUnpressed",unpressedOut:"autoUnpressed",unpressedDown:"autoPress",unpressedDisabled:"autoUnpressed"}},{type:Urso.types.objects.BUTTON,class:"uiButton lineIncreaseCircularButton",anchorX:.5,anchorY:.5,x:160,y:-35,scaleX:.8,scaleY:.8,buttonFrames:{over:"linesUnpressed",out:"linesUnpressed",pressed:"linesPressed",disabled:"linesUnpressed"}},{type:Urso.types.objects.BUTTON,class:"uiButton betIncreaseCircularButton",anchorX:.5,anchorY:.5,x:300,scaleX:.8,scaleY:.8,buttonFrames:{over:"betOneUnpressed",out:"betOneUnpressed",pressed:"betOnePressed",disabled:"betOneUnpressed"}},{type:Urso.types.objects.BUTTON,anchorX:.5,anchorY:.5,x:440,y:-35,scaleX:.8,scaleY:.8,class:"uiButton betMaxButton",buttonFrames:{over:"betMaxUnpressed",out:"betMaxUnpressed",pressed:"betMaxPressed",disabled:"betMaxUnpressed"}},{type:Urso.types.objects.BUTTON,class:"uiButton spinButton",x:600,anchorX:.5,anchorY:.5,buttonFrames:{over:"spinUnpressed",out:"spinUnpressed",pressed:"spinPressed",disabled:"spinUnpressed"}},{type:Urso.types.objects.BUTTON,class:"uiButton skipButton",x:600,anchorX:.5,anchorY:.5,buttonFrames:{over:"spinUnpressed",out:"spinUnpressed",pressed:"spinUnpressed",disabled:"spinUnpressed"}}]},{type:Urso.types.objects.CONTAINER,name:"lightupPanelContainer",width:600,x:(screen.availWidth-600)/2+50,y:766,scaleX:1.3,contents:[{type:Urso.types.objects.TEXT,x:0,anchorX:0,anchorY:.5,class:"baseUi displayText linesVal",text:"",wordWrapWidth:440},{type:Urso.types.objects.TEXT,anchorX:.5,anchorY:.5,class:"baseUi displayText",text:"TOTAL BET:",x:300,wordWrapWidth:440},{type:Urso.types.objects.TEXT,class:"baseUi displayText totalBetVal",text:"",anchorX:0,anchorY:.5,x:420,wordWrapWidth:440}]},{type:Urso.types.objects.CONTAINER,name:"creditPanelContainer",x:1700,y:60,contents:[{type:Urso.types.objects.IMAGE,assetKey:"creditPanel",anchorX:.5,anchorY:.5},{type:Urso.types.objects.TEXT,class:"baseUi balanceVal",text:"",x:30,wordWrapWidth:440}]},{type:Urso.types.objects.CONTAINER,name:"totalBetPanelContainer",x:1600,y:125,contents:[{type:Urso.types.objects.IMAGE,name:"totalBetPanel",assetKey:"totalBetPanel",anchorX:.5,anchorY:.5}]},{type:Urso.types.objects.CONTAINER,name:"winPanelFieldContainer",x:screen.availWidth/2,y:950,contents:[{type:Urso.types.objects.IMAGE,name:"winFieldPanel",assetKey:"winFieldPanel",x:50,anchorX:.5,anchorY:.5},{type:Urso.types.objects.TEXT,class:"baseUi cheeringText",text:"Good Luck",x:50,y:85,wordWrapWidth:440,maxWidth:200}]}]}]}}},403:(t,e,i)=>{Urso.App.Templates.Scenes={Play:i(654)}},654:t=>{t.exports=class{constructor(){this.styles={},this.assets=[{type:Urso.types.assets.IMAGE,key:"bg",path:"images/background/Lucky FUNKZ.png"},{type:Urso.types.assets.IMAGE,key:"cursor",path:"images/hand.png"}],this.objects=[{type:Urso.types.objects.COMPONENT,componentName:"loader"},{type:Urso.types.objects.IMAGE,assetKey:"bg",x:screen.availWidth/2,anchorX:.5},{type:Urso.types.objects.COMPONENT,name:"slotMachine",componentName:"slotMachine",x:screen.availWidth/2+50,anchorX:.5,y:325,width:600,height:375,options:{id:"basic"}},{type:Urso.types.objects.COMPONENT,componentName:"autoSpin"},{type:Urso.types.objects.GROUP,groupName:"uiGroup"},{type:Urso.types.objects.COMPONENT,componentName:"winLines"},{type:Urso.types.objects.COMPONENT,componentName:"winCounter",x:50,height:375},{type:Urso.types.objects.COMPONENT,componentName:"ui"}]}}},992:()=>{(()=>{var t={8372:(t,e,i)=>{Urso.SlotBase.Components={},i(3907),i(8578),i(5110),i(9342),i(9121),i(8736),i(8338),i(2445),i(46),i(6711),i(729)},3907:(t,e,i)=>{Urso.SlotBase.Components.AutoSpin={Controller:i(2703),Template:i(2330)}},2703:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.Core.Components.StateDriven.Controller{constructor(){super(...arguments),e(this,"configActions",{resumeAutospinAction:{run:()=>this._runAutoSpin(),terminate:()=>this._terminateAutoSpin()},updateAutospinCounterAction:{guard:()=>this._guardResumeAutospin(),run:t=>this._runUpdateAutospinCounter(t)},checkAutospinAction:{guard:()=>this._guardResumeAutospin(),run:t=>this._runCheckAutospin(t)}}),e(this,"_onUpdateHandler",(()=>{this._finishAutoSpinAction()}))}create(){this.autoSpin=this.common.findOne("^auto"),this._setAutospinEnabled(!1)}_terminateAutoSpinCheck(){this.callFinish("autospinCheckAction")}_runAutoSpinCheck(){Urso.localData.get("autospin.enabled")&&this.callFinish("autospinCheckAction")}_runAutoSpin(){this._subscribeOnUpdate(),Urso.localData.get("autospin.enabled")&&this._finishAutoSpinAction()}_unsubscribeOnUpdate(){this.removeListener("modules.logic.ui.auto.update",this._onUpdateHandler)}_subscribeOnUpdate(){this.addListener("modules.logic.ui.auto.update",this._onUpdateHandler)}get _noAutoSpinsLeft(){return 0===Urso.localData.get("autospin.left")}_runAutoSpinChecks(){this._noAutoSpinsLeft&&this._setAutospinEnabled(!1)}_runCheckAutospin(t){this._runAutoSpinChecks(),t()}_runUpdateAutospinCounter(t){var e=Urso.localData.get("autospin.left");--e>=0&&Urso.localData.set("autospin.left",e),t()}_guardResumeAutospin(){return this._isAutoSpinEnabled}_finishAutoSpinAction(){this._unsubscribeOnUpdate(),this.callFinish("resumeAutospinAction")}_terminateAutoSpin(){this._finishAutoSpinAction()}_idleStateGuard(){return!this._isAutoSpinEnabled}get _isAutoSpinEnabled(){return Urso.localData.get("autospin.enabled")}_setAutospinEnabled(t){Urso.localData.set("autospin.enabled",t)}}t.exports=i},2330:t=>{t.exports=class{constructor(){this.objects=[]}}},8578:(t,e,i)=>{Urso.SlotBase.Components.Background={Controller:i(7384),Template:i(920)}},7384:t=>{class e extends Urso.Core.Components.Base.Controller{create(){this.emit("background.changeBackground","basic")}_changeBackgoundHandler(t){Urso.findAll(".backgroundImage").forEach((e=>{var i=t===e._originalModel.name;e.visible=i}))}_subscribeOnce(){this.addListener("background.changeBackground",this._changeBackgoundHandler)}}t.exports=e},920:t=>{t.exports=class{constructor(){this.styles={".backgroundImage.active":{visible:!0},".backgroundImage":{visible:!1}},this.objects=[{type:Urso.types.objects.IMAGE,name:"bonus",assetKey:"bonus",class:"backgroundImage"},{type:Urso.types.objects.IMAGE,name:"basic",assetKey:"basic",class:"backgroundImage"}]}}},5110:(t,e,i)=>{Urso.SlotBase.Components.Gamble={Controller:i(3282),Template:i(1571),View:i(4905)}},3282:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.Core.Components.StateDriven.Controller{constructor(){super(...arguments),e(this,"_gambleGameShowed",!1),e(this,"_viewInstance",!1),e(this,"_selectedIndex",-1),e(this,"configStates",{GAMBLE:{guard:()=>this._guardGambleState()},WAITING_FOR_GAMBLE:{guard:()=>this._guardWaitingForGambleState()}}),e(this,"configActions",{showGambleAction:{guard:()=>this._guardShowGamble(),run:()=>this._runShowGamble()},waitingForCardChoose:{run:()=>this._runWaitingForCardChoose()},serverSendGambleRequestAction:{run:()=>this._runServerSendGambleRequest()},updateGambleWinAction:{run:t=>this._runUpdateGambleWin(t)},hideGambleAction:{guard:()=>this._guardHideGamble(),run:()=>this._runHideGamble()}}),e(this,"_buttonPressHandler",(t=>this._buttonPressed(t))),e(this,"_serverResponseHandler",(t=>this._serverResponse(t)))}_guardGambleState(){return this._canGamble}_guardWaitingForGambleState(){return this._canGamble}_guardShowGamble(){return!this._gambleGameShowed}_runShowGamble(){this._gambleGameShowed=!0,this._view.show(this._showFinished.bind(this))}_runWaitingForCardChoose(){this._view.enableCards(),this._subscribeForButtonsPress()}_gambleButtonPressed(t){var{class:e}=t;this._view.disableCards(),this._unsubscribeForButtonsPress(),this._updateSelectedIndex(e),this.callFinish("waitingForCardChoose")}_isGambleButtonPressed(t){var{class:e}=t;return e.split(" ").includes("gambleCard")}_buttonPressed(t){this._isGambleButtonPressed(t)&&this._gambleButtonPressed(t)}_subscribeForButtonsPress(){this.addListener(Urso.events.MODULES_OBJECTS_BUTTON_PRESS,this._buttonPressHandler)}_unsubscribeForButtonsPress(){this.removeListener(Urso.events.MODULES_OBJECTS_BUTTON_PRESS,this._buttonPressHandler)}_runServerSendGambleRequest(){if(this._subscribeForServerResponse(),this._selectedIndex>=0){var t=Urso.getInstance("Modules.Transport.Models.GambleRequest",{data:{index:this._selectedIndex}});Urso.transport.send(t)}}_serverResponse(t){var{data:{canGamble:e,totalWin:i}}=t;Urso.localData.set("gamble",{canGamble:e,totalWin:i}),this._unsubscribeForServerResponse(),this.callFinish("serverSendGambleRequestAction")}_subscribeForServerResponse(){this.addListener("modules.transport.receive",this._serverResponseHandler)}_unsubscribeForServerResponse(){this.removeListener("modules.transport.receive",this._serverResponseHandler)}_runUpdateGambleWin(t){t()}_guardHideGamble(){return!this._canGamble&&this._gambleGameShowed}_runHideGamble(){this._gambleGameShowed=!1,this._view.hide(this._hideFinished.bind(this))}create(){this._view.create()}get _canGamble(){return Urso.localData.get("gamble.canGamble")}get _view(){return this._viewInstance||(this._viewInstance=this.getInstance("View")),this._viewInstance}_showFinished(){this.callFinish("showGambleAction")}_hideFinished(){this.callFinish("hideGambleAction")}_updateSelectedIndex(t){var e=t.split(" ");e.includes("red")||e.includes("black")?this._selectedIndex=0:Urso.logger.error("ComponentsGambleController: Undefined button was pressed!")}}t.exports=i},1571:t=>{t.exports=class{constructor(){var t,e,i;t=this,i=[],(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="objects"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}}},4905:t=>{t.exports=class{create(){this._reset()}get _container(){return Urso.findOne("^gambleContainer")}get _cards(){return Urso.findAll(".gambleCard")}show(t){this._setContainerVisibility(!0),t()}hide(t){this._setContainerVisibility(!1),t()}_setContainerVisibility(t){this._container.visible=t}_reset(){this._setContainerVisibility(!1),this.disableCards()}enableCards(){this._cards.forEach((t=>t.enable()))}disableCards(){this._cards.forEach((t=>t.disable()))}}},9342:(t,e,i)=>{Urso.Core.Components.Loader={Controller:i(3642)}},3642:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.Core.Components.StateDriven.Controller{constructor(){super(...arguments),e(this,"configStates",{INIT_GAME:{guard:()=>this._guardInitGame()}}),e(this,"configActions",{hideLoaderAction:{run:t=>this._runHideLoader(t)},finishGameInitAction:{run:t=>this._runFinishGameInit(t)}}),e(this,"_gameWasInitiated",!1)}_guardInitGame(){return!this._gameWasInitiated}_runHideLoader(t){this._hideLoader(),t()}_runFinishGameInit(t){this._gameWasInitiated=!0,t()}_hideLoader(){document.querySelector(".wrapper").style.display="none"}}t.exports=i},9121:(t,e,i)=>{Urso.SlotBase.Components.Paytable={Controller:i(2062)}},2062:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.Core.Components.StateDriven.Controller{constructor(){super(),e(this,"configStates",{SHOW_PAYTABLE:{guard:()=>this._needOpenGuard()}}),e(this,"configActions",{showPaytableAction:{run:()=>this._runShowPayTable()}}),this.OPEN_WINDOW="open_window",this.CLOSE_WINDOW="close_window",this.NEXT_PAGE="next_page",this.PREV_PAGE="prev_page",this._currentPage=0,this._basePayout=null,this._needOpen=!1,this._reset()}_runShowPayTable(){this._showPaytable()}_needOpenGuard(){return this._needOpen}_reset(){this._currentPage=0,this._setPageVisibility(this._currentPage)}_payTableSwitchHandler(){var{action:t=this.CLOSE_WINDOW}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Urso.localData.get("spinning")||this._doAction(t)}_showPaytable(){this._reset(),this._setWindowVisibility(!0),this._recalculatePaytable()}_doAction(t){switch(t){case this.OPEN_WINDOW:this._needOpen=!0;break;case this.CLOSE_WINDOW:this._setWindowVisibility(!1),this._needOpen=!1,this.callFinish("showPaytableAction");break;case this.NEXT_PAGE:this._setPageVisibility(++this._currentPage);break;case this.PREV_PAGE:this._setPageVisibility(--this._currentPage)}}_calculateBasePayout(){var t=Urso.localData.get("payoutsCfg"),e={};return t.forEach((t=>{var{payout:i,symbols:r}=t,n=r[0],s=r.length,o="".concat(n,"-").concat(s);e[o]=i})),e}_updatePaytableData(t){Object.values(t).forEach((e=>{var i=".s".concat(e);Urso.findAll(i).forEach((i=>{i.text=t[e]}))}))}_recalculatePaytable(){this._basePayout||(this._basePayout=this._calculateBasePayout());var t={},e=Urso.localData.get("bets.value");Object.keys(this._basePayout).forEach((i=>{t[i]=this._basePayout[i]*e})),this._updatePaytableData(t)}_setWindowVisibility(t){var e=Urso.findOne(".paytable");this._addRemoveActiveClass(e,t)}_addRemoveActiveClass(t,e){e?t.addClass("active"):t.removeClass("active")}_validatePageIndex(t,e){return t>e.length-1?0:t<0?e.length-1:t}_setPageVisibility(t){var e=Urso.findAll(".page");this._currentPage=this._validatePageIndex(t,e);var i="page".concat(this._currentPage);e.forEach((t=>{var e=t._originalModel.name===i;this._addRemoveActiveClass(t,e)}))}_subscribeOnce(){super._subscribeOnce(),this.addListener("components.paytable.switch",this._payTableSwitchHandler.bind(this))}}t.exports=i},8736:(t,e,i)=>{Urso.SlotBase.Components.PickBonus={Controller:i(227),Template:i(9582)},i(8231)},227:t=>{class e extends Urso.Core.Components.StateDriven.Controller{constructor(){super(),this.eventBlank="components.pickGame",this._pickObjects=[],this.picksAmount=5,this._start=this._start.bind(this)}create(){Urso.localData.set("pickBonus.selected",null),super.create(),this._createLinks(),this._reset()}get _allPickItems(){return this.common.findAll(".pickItem").map((t=>t._controller))}get _selectedPickItem(){return this._allPickItems.find((t=>t.id===Urso.localData.get("pickBonus.selected")))}set _isAllItemsInteractive(t){this._allPickItems.forEach((e=>{e.interactive=t}))}_guard(){return"PickBonus"===Urso.localData.get("slotMachine.state")}_createLinks(){this._container=this.common.findOne("^pickBonusContainer")}_switchTourchAnimationTo(t){this.common.findAll(".torch").forEach((e=>{e.play("main",t),e.visible=t}))}_start(){this._reset(),this.emit("components.bonusBg.show","pickBonus"),this._switchTourchAnimationTo(!0),this._isAllItemsInteractive=!1,setTimeout((()=>{this._isAllItemsInteractive=!0,this._show()}),1e3)}_reset(){this._container.visible=!1,this._switchTourchAnimationTo(!1),this._allPickItems.forEach((t=>t.reset())),this.emit("components.bonusBg.hide")}_show(){this._container.visible=!0}_pickItemClicked(t){this._isAllItemsInteractive=!1,Urso.localData.set("pickBonus.selected",t),this.emit("modules.logic.main.pickBonusRequest",t)}_updateState(t){this._selectedPickItem.winTextValue=t,this._selectedPickItem.loose=0===t,setTimeout((()=>{0===t?this.emit("components.winField.setText","LOOSE"):this.emit("components.winField.setText",t),this.emit("modules.logic.main.balanceRequest")}),2e3)}_balanceHandler(){null!=Urso.localData.get("pickBonus.selected")&&(Urso.localData.set("pickBonus.selected",null),this._reset(),this._finished())}_subscribeOnce(){super._subscribeOnce(),this.addListener("components.pickItem.clicked",this._pickItemClicked.bind(this)),this.addListener("pickBonus.updateState",this._updateState.bind(this)),this.addListener("components.balance.set",this._balanceHandler.bind(this))}}t.exports=e},8231:(t,e,i)=>{Urso.SlotBase.Components.PickBonus.PickItem={Controller:i(6639),Template:i(9210)}},6639:t=>{class e extends Urso.Core.Components.Base.Controller{constructor(t){super(t),this._id=t.id,this._event=t.event}create(){super.create(),this.reset()}get _looseImage(){return this.common.findOne(".loose")}get _pickItemContainer(){return this.common.findOne(".pickItemContainer")}get _openAnimation(){return this.common.findOne(".openAnimation")}get _winText(){return this.common.findOne(".winText")}get id(){return this._id}get _openedImage(){return this.common.findOne(".openedImage")}set interactive(t){this._pickItemContainer._baseObject.interactive=t,this._pickItemContainer._baseObject.buttonMode=t,t?(this._pickItemContainer._baseObject.on("click",this._onClick.bind(this)),this._pickItemContainer._baseObject.on("tap",this._onClick.bind(this))):this._pickItemContainer._baseObject.removeAllListeners()}set winTextValue(t){void 0===t&&(t=0),this._winText.visible=t>0,this._winText.text=t}set loose(t){this._looseImage.visible=t}set opened(t){this._openAnimation.visible=!t,this._openedImage.visible=t}_onClick(){this.emit(this._event,this._id),this.open()}_onComplete(){this.opened=!0}open(){this._openAnimation.onComplete=this._onComplete.bind(this),this._openAnimation.start()}reset(){this.loose=!1,this.interactive=!0,this.opened=!1,this.winTextValue=0}}t.exports=e},9210:t=>{t.exports=class{constructor(){this.objects=[{type:Urso.types.objects.CONTAINER,class:"pickItemContainer",contents:[{type:Urso.types.objects.IMAGE,assetKey:"coffin_empty"},{type:Urso.types.objects.IMAGE,class:"loose",assetKey:"coffin_loose",x:10,y:10},{type:Urso.types.objects.IMAGE,assetKey:"coffin_opening_15",class:"openedImage",x:-20,y:-20,scaleX:.75,scaleY:.75},{type:Urso.types.objects.TEXT,class:"baseUi winFieldValue winText",anchorX:.5,anchorY:.5,x:165,y:250,text:"0"},{type:Urso.types.objects.IMAGES_ANIMATION,class:"openAnimation",assetKey:"coffin_opening_00",x:-20,y:-20,scaleX:.75,scaleY:.75,duration:1e3,animationKeys:["coffin_opening_00","coffin_opening_01","coffin_opening_02","coffin_opening_03","coffin_opening_04","coffin_opening_05","coffin_opening_06","coffin_opening_07","coffin_opening_08","coffin_opening_09","coffin_opening_10","coffin_opening_11","coffin_opening_12","coffin_opening_13","coffin_opening_14","coffin_opening_15"]}]}]}}},9582:t=>{t.exports=class{constructor(){this.objects=[{type:Urso.types.objects.CONTAINER,name:"pickBonusContainer",contents:[{type:Urso.types.objects.COMPONENT,componentName:"bonusBg",options:{name:"pickBonus"}},{type:Urso.types.objects.CONTAINER,name:"pickItemsContainer",x:80,y:350,contents:[{type:Urso.types.objects.COMPONENT,componentName:"PickBonus.PickItem",class:"pickItem",options:{id:0,event:"components.pickItem.clicked"}},{type:Urso.types.objects.COMPONENT,componentName:"PickBonus.PickItem",class:"pickItem",x:357.5,options:{id:1,event:"components.pickItem.clicked"}},{type:Urso.types.objects.COMPONENT,componentName:"PickBonus.PickItem",class:"pickItem",x:715,options:{id:2,event:"components.pickItem.clicked"}},{type:Urso.types.objects.COMPONENT,componentName:"PickBonus.PickItem",class:"pickItem",x:1072.5,options:{id:3,event:"components.pickItem.clicked"}},{type:Urso.types.objects.COMPONENT,componentName:"PickBonus.PickItem",class:"pickItem",x:1430,options:{id:4,event:"components.pickItem.clicked"}}]}]}]}}},8338:(t,e,i)=>{Urso.SlotBase.Components.SlotMachine={Config:i(5545),Symbols:i(3925),Controller:i(2713),Service:i(8073),Symbol:i(3409),Tween:i(8625),Template:i(6273),Wheel:i(2966),Cascade:i(3290)}},5545:t=>{function e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function i(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t.exports=class{getBasicConfig(){return{reelsCount:5,rowsCount:3,vectors:!1,rowsXoffset:[],rowsYoffset:[],blurSymbolsCount:[5,10,15,20,25],blurAlpha:.5,borderSymbolsCount:2,regularEasingParam:0,dropEasingParam:0,spinCompleteDelay:200,hideMaskOnSpinComplete:!0,tint:{default:16777215,darken:5592405,duration:500},bounce:{top:!1,bottom:!1},symbolSpeed:3,spinStartInterval:100,speedUpReelsFactor:2.5,intrigueSpeedReelsFactor:1.5,intrigueAdditionalSymbols:20,symbolsBlurKeys:[],lastSymbolsBlurStaticKeys:[]}}getReel15Row1Config(){return i(i({},this.getBasicConfig()),{},{reelsCount:15,rowsCount:1,rowsXoffset:[0,0,0,0,0,-5,-5,-5,-5,-5,-10,-10,-10,-10,-10],rowsYoffset:[0,0,0,0,0,1,1,1,1,1,2,2,2,2,2],symbolWidth:158,symbolHeight:167})}getCascadeConfig(){return i(i({},this.getBasicConfig()),{},{regularEasingParam:75,borderSymbolsCount:0,cascadeDuration:400})}getDropConfig(){return i(i({},this.getBasicConfig()),{},{dropEasingParam:70,symbolSpeed:.2})}getAllConfigsMap(){return{basic:this.getBasicConfig(),reel15Row1:this.getReel15Row1Config(),cascade:this.getCascadeConfig(),drop:this.getDropConfig()}}getConfigById(t){return this.getAllConfigsMap()[t]||this.getBasicConfig()}}},2713:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.Core.Components.StateDriven.Controller{constructor(t){super(t),e(this,"_eventPrefix","components.slotMachine"),e(this,"configStates",{DROP:{guard:()=>this._hasWin()},FINISH_WIN_ROUND:{guard:()=>this._hasWin()}}),e(this,"configActions",{regularSpinStartAction:{run:()=>this._runRegularSpinStart()},updateSlotMachineDataAction:{run:()=>this._runUpdateSlotMachineData()},finishingSpinAction:{run:()=>this._runFinishingSpinAction(),terminate:()=>this._terminateFinishingSpinAction()},dropAction:{run:t=>this._runDrop(t)},updateSymbolsTintConfigAction:{run:t=>this._runUpdateSymbolsTintConfig(t)},setSymbolsDarkenTintAction:{run:t=>this._runSetSymbolsDarkenTint(t)},setSymbolsDefaultTintAction:{run:t=>this._runSetSymbolsDefaultTint(t)},updateTurboModeAction:{run:t=>this._runUpdateTurboMode(t)}}),e(this,"_symbolStopAllAnimationHandler",(()=>this._service.symbolStopAllAnimation())),e(this,"_spinCompleteHandler",(t=>this._spinComplete(t))),e(this,"_symbolAnimateHandler",(t=>this._symbolAnimate(t))),e(this,"_addComponentListener",((t,e)=>this.addListener("".concat(this._eventPrefix,".").concat(t),e))),e(this,"_removeComponentListener",((t,e)=>this.removeListener("".concat(this._eventPrefix,".").concat(t),e))),e(this,"_subscribeOnce",(()=>{super._subscribeOnce(),this._addComponentListener("symbolAnimate",this._symbolAnimateHandler),this._addComponentListener("symbolAnimateStop",this._symbolStopAllAnimationHandler),this._addComponentListener("spinComplete",this._spinCompleteHandler)})),this._id=t.id,this._service=this.getInstance("Service"),this.tween=this.getInstance("Tween")}create(){this._service.create(this._id)}update(){this.tween.update()}_runRegularSpinStart(){this._service.startSpin(),this.callFinish("regularSpinStartAction")}_runUpdateSlotMachineData(){this._setSpinNewSymbols(),this.callFinish("updateSlotMachineDataAction")}_setSpinNewSymbols(){var t=Urso.localData.get("slotMachine.spinStages.0.spinResult.rows");this._service.setSpinNewSymbols(t)}_runFinishingSpinAction(){this._service.finishSpin()}_terminateFinishingSpinAction(){this._service.speedUpReels()}_hasWin(){return this._getWinlines().length>0}_getWinlines(){return Urso.localData.get("slotMachine.spinStages.0.slotWin.lineWinAmounts")||[]}_runDrop(t){var e=this._getWinlines().reduce(((t,e)=>{var{wonSymbols:i}=e;return[...t,...i]}),[]);this._service.prepareDrop(e),t()}_runUpdateSymbolsTintConfig(t){this._service.updateSymbolsTintConfig(),t()}_runSetSymbolsDarkenTint(t){this._service.setSymbolsDarkenTint(),t()}_runSetSymbolsDefaultTint(t){this._service.setSymbolsDefaultTint(),t()}_guardStartTurboMode(){return Urso.localData.get("settings.turboMode")}_runUpdateTurboMode(t){this._service.updateTurboMode(),t()}_symbolAnimate(t){this._service.symbolAnimate(t)}_stopSymbolAnimateHandler(t){this._service.symbolStopAnimation(t)}_symbolStopAllAnimation(){this._service.symbolStopAllAnimation()}_drop(t){this._service.setDropMatrix(Urso.helper.transpose(t))}_spinComplete(){this._service.setBaseConfig(),this.callFinish("finishingSpinAction")}}t.exports=i},8073:t=>{function e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function i(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t.exports=class{constructor(){r(this,"_spinning",!1),this.id=null,this._view=this.getInstance("Wheel"),this._config=this.getInstance("Config"),this._symbolsCfg=this.getInstance("Symbols"),this._cfg=null,this._view.setService(this)}create(t){this.id=t,this.updateCfgById(t);var e=this._getInitialSymbols(),i=this._decorateWithBorder(e),r=this._getSymbolsConfigs(i);this._view.create(Urso.helper.transpose(r))}updateCfgById(t){this._id=t,this._cfg=this._config.getConfigById(t),this._view.setConfig(this._cfg)}startSpin(){return!this._spinning&&(this._spinning=!0,Urso.localData.set("spinning",!0),this._view.startSpin(),this.emit("components.slotMachine.spinStarted"),!0)}spinCompleted(t){var{spinCompleteDelay:e}=this._cfg;this._spinning=!1,Urso.localData.set("spinning",!1),this.emit("components.slotMachine.spinComplete",{type:t},e)}setSpinNewSymbols(t){var e=this._decorateWithBorder(t),i=Urso.helper.transpose(e),r=this._getSymbolsConfigs(i);this._view.setSpinNewSymbols(r)}_decorateWithBorder(t){var{reelsCount:e,borderSymbolsCount:i}=this._cfg;return[...this._getRandomSymbolMatrix(e,i),...t,...this._getRandomSymbolMatrix(e,i)]}showAllSymbolsAnimation(){for(var{reelsCount:t,rowsCount:e,borderSymbolsCount:i}=this._cfg,r=0;r<t;r++)for(var n=i;n<e-i;n++)this.symbolAnimate({reel:r,row:n})}finishSpin(){this._view.finishSpin()}symbolAnimate(t){var{reel:e,row:i}=t;i+=this._cfg.borderSymbolsCount,this._view.symbolAnimate({reel:e,row:i})}symbolStopAnimation(t){this._view.symbolStopAnimation(t)}speedUpReels(){this._view.speedUpReels()}intrigue(t){this._view.intrigue(t)}_getSymbolsKeysArray(){return Object.keys(this._getMappedSymbolsData())}_mappedSymbolReducer(){return[(t,e)=>{var{key:r,template:n}=e;return i(i({},t),{},{[r]:{key:r,template:n}})},{}]}_getMappedSymbolsData(){return this._symbolsCfg.get().reduce(...this._mappedSymbolReducer())}_getNewMatrix(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,{reelsCount:r,rowsCount:n}=this._cfg;return r=Number.isFinite(t)?t:r,n=Number.isFinite(e)?e:n,r&&n?new Array(n).fill([]).map((()=>new Array(r).fill(i))):[]}_getRandomSymbolMatrix(t,e){return this._getNewMatrix(t,e).map((t=>t.map((()=>this._getRandomSymbol()))))}_getRandomIndexFromArray(t){return+t[Urso.math.getRandomIntBetween(0,t.length-1)]}setBaseConfig(){this.updateCfgById(this.id)}_getInitialSymbols(){var t=Urso.localData.get("slotMachine.initialSymbols")||[];return 0===t.length&&(t=this._getRandomSymbolMatrix()),this._trimMatrix(t)}_trimMatrix(t){for(var e=this._getNewMatrix(),i=0;i<e.length;i++)for(var r=e[i],n=0;n<r.length;n++)e[i][n]=t[i][n];return e}_getRandomSymbol(){var t=this._getSymbolsKeysArray();return this._getRandomIndexFromArray(t)}_getSymbolsConfigs(t){return t.map((t=>t.map(this._getSymbolConfig(this._getMappedSymbolsData()))))}_getRandomSymbolConfig(){var t=this._getRandomSymbol();return this._getSymbolConfig(this._getMappedSymbolsData())(t)}_getSymbolConfig(t){return e=>t[e]}symbolStopAllAnimation(){this._view.symbolStopAllAnimation()}prepareDrop(t){var{borderSymbolsCount:e,reelsCount:i,rowsCount:r}=this._cfg,n=r+2*e,s=this._getNewMatrix(n,i,!1);t.forEach((t=>{var[i,r]=t;s[i][+r+e]=!0}));var o=this._config.getConfigById("drop");this._view.setConfig(o),this._view.setDropMatrix(s)}updateSymbolsTintConfig(){var{tint:t}=this._cfg;this._view.updateSymbolsTintConfig(t)}setSymbolsDarkenTint(){this._view.setSymbolsTint("darken")}setSymbolsDefaultTint(){this._view.setSymbolsTint("default")}updateTurboMode(){var t=Urso.localData.get("settings.turboMode");this._view.setTurboMode(t)}}},3290:(t,e,i)=>{var r=i(2966);t.exports=class extends r{constructor(){var t,e,i;super(...arguments),t=this,i=[],(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="_wasDropped"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}_getOneSymbolTweenDuration(){return this._dropMatrix?super._getOneSymbolTweenDuration():this._config.cascadeDuration}_moveAllSymbolsToTop(t){for(var e=this._symbols[t],i=0;i<e.length;i++)this._setSymbolToPosition(t,i),this._setSymbolConfig(t,i),this._setSymbolPositionForDrop(t,i)}_moveDone(t){return()=>this._dropMatrix?(t===this._config.reelsCount-1&&(this._dropMatrix=null),void this._onReelStopCallback(t)):this._wasDropped[t]?void this._onReelStopCallback(t):(this._moveAllSymbolsToTop(t),this._tweenReel(t),void(this._wasDropped[t]=!0))}_makeRegularMoveMatrix(){var{rowsCount:t}=this._config;return super._makeRegularMoveMatrix(t)}_startSpin(){super._startSpin(),this._wasDropped=new Array(this._symbols.length).fill(!1)}_getCurrentSymbolConfig(t){return this._spinNewSymbols[t].shift()}}},2966:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t.exports=class{constructor(){e(this,"_config",null),e(this,"_service",null),e(this,"_pool",null),e(this,"_dropMatrix",null),e(this,"_bounceTweens",!1),e(this,"_moveMatrix",[]),e(this,"_animatedSymbolsMap",{}),e(this,"_reelMoving",[]),e(this,"_turboModeEnabled",!1),this._symbols=[],this._symbolWidth=null,this._symbolHeight=null,this._spinning=!1,this._remainingBlurSymbolsCount=[],this._finishSpin=!1,this._spinNewSymbols=[],this._timeScale=1,this._intrigue=!1,this._intrigueStartsFrom=0,this._lastStoppedReelIndex=-1,this.tween=this.getInstance("Tween"),this._reelTweens=[]}setConfig(t){this._config=t}setService(t){this._service=t}create(t){this._createPool(),this._updateSlotMachineSymbols(t),this._setSlotMachineSizes(),this._setSymbolsPosition(),this._createMask(),this._switchMaskVisibility(!1),this._switchBorderSymbolsAllVisibility(!1)}_createMask(){var{borderSymbolsCount:t}=this._config,e=this._symbols.length,i=this._symbols[0].length-2*t;this.mask=Urso.objects.create({type:Urso.types.objects.MASK,name:"slotMachineMask",rectangle:[0,0,this._symbolWidth*e,this._symbolHeight*i]},this.common.object)}_switchBorderSymbolsAllVisibility(t){for(var{reelsCount:e}=this._config,i=0;i<e;i++)this._switchBorderSymbolsVisibility(i,t)}_switchBorderSymbolsVisibility(t,e){for(var{borderSymbolsCount:i}=this._config,r=this._symbols[t],n=0;n<i;n++){var{data:s}=r[n];e?s.show():s.hide()}for(var o=r.length-i;o<r.length;o++){var{data:a}=r[o];e?a.show():a.hide()}}_switchMaskVisibility(t){this.common.object._baseObject.mask=t?this.mask._baseObject:null,this.mask.visible=t}setDropMatrix(t){this._dropMatrix=t}_createPool(){var t=this._makeSymbol.bind(this),e=this._resetSymbol.bind(this);this._pool=new Urso.Game.Lib.ObjectPool(t,e)}_makeSymbol(){return this.getInstance("Symbol")}_resetSymbol(t){return t}_createSymbols(t){return t.map((t=>t.map((t=>{var e=this._pool.getElement("slotMachine");return e.data.setConfig(this._getSymbolsConfig(t)),e}))))}_setSymbolsPosition(){this._symbols.map(((t,e)=>t.map(this._setSymbolPosition(e))))}_setSymbolPosition(t){return(e,i)=>{var{data:r}=e,n=this._calculateSymbolPosition(r,t,i);r.setPosition(n)}}_calculateSymbolPosition(t,e,i){var{borderSymbolsCount:r}=this._config,{_symbolWidth:n,_symbolHeight:s}=this,{anchorX:o,anchorY:a}=t.getAnchors(),{xOffset:h,yOffset:l}=this._getSymbolOffset(e,i);return{x:n*e+o*n+h,y:s*i+a*s-r*s+l}}_getSymbolOffset(t){var{_symbolWidth:e,_symbolHeight:i}=this,{rowsXoffset:r=[],rowsYoffset:n=[]}=this._config;return{xOffset:(r[t]||0)*e,yOffset:(n[t]||0)*i}}_updateSlotMachineSymbols(t){this._clearSymbols(),this._symbols=this._createSymbols(t)}_clearSymbols(){this._symbols.forEach((t=>t.forEach((t=>this._pool.putElement(t)))))}_setBounce(t){var{bounce:e}=this._config;e&&e[t]&&(this._bounceTweens=[])}startSpin(){this._resetSpinState(),this._updateMoveData(),this._dropMatrix||(this._setBounce("top"),this._startSpin())}_updateMatrixForDrop(){this._switchBorderSymbolsAllVisibility(!0);for(var t=0;t<this._dropMatrix.length;t++)for(var e=this._dropMatrix[t],i=0,r=e.filter((t=>t)).length,n=e.length-1;n>=0;n--){var s=e[n];s&&(i++,this._setSymbolPositionForDrop(t,n,i+n)),this._moveMatrix[t][n]=s?r:i}}_sortSymbols(){this._symbols.forEach((t=>{t.sort(((t,e)=>t.data.getPosition().y-e.data.getPosition().y))}))}setSpinNewSymbols(t){this._spinNewSymbols=t,this._dropMatrix&&(this._updateMatrixForDrop(),this._sortSymbols(),this._updateSymbolsMatrix(),this._startSpin())}_updateSymbolsMatrix(){for(var t=0;t<this._spinNewSymbols.length;t++)for(var e=this._spinNewSymbols[t],i=0;i<e.length;i++){var r=this._getSymbolsConfig(e[i]),{data:n}=this._symbols[t][i];n.setConfig(r)}}get _isAnimationComplete(){return 0===Object.keys(this._animatedSymbolsMap).length}_animationCompletedHandler(t){return()=>{delete this._animatedSymbolsMap[t],this._isAnimationComplete&&Urso.observer.fire("components.slotMachine.cycleFinished")}}symbolAnimate(t){var{reel:e,row:i}=t,r="".concat(e,"_").concat(i);this._symbols[e][i].data.animate(this._animationCompletedHandler(r)),this._animatedSymbolsMap[r]=!0}symbolStopAnimation(t){var{reel:e,row:i}=t;this._symbols[e][i].data.stopAnimation()}symbolStopAllAnimation(){this._symbols.forEach(((t,e)=>t.forEach(((t,i)=>this.symbolStopAnimation({reel:e,row:i})))))}speedUpReels(){var{speedUpReelsFactor:t,reelsCount:e}=this._config;this._timeScale=t;for(var i=0;i<e;i++)this._bounceTweens[i]?this._bounceTweens[i].timeScale=this._timeScale:this._reelTweens[i].timeScale=this._timeScale}intrigue(t){if(this._intrigue)return!1;this._intrigue=!0,this._intrigueStartsFrom=t;for(var{intrigueAdditionalSymbols:e}=this._config,i=t;i<this._remainingBlurSymbolsCount.length;i++)this._remainingBlurSymbolsCount[i]+=e;return!0}_getSlotMachineMatrixSize(){var{borderSymbolsCount:t}=this._config;return{reels:this._symbols.length,rows:Math.max(...this._symbols.map((t=>t.length)))-2*t}}_setSlotMachineSizes(t,e){var{symbolHeight:i,symbolWidth:r}=this._config,{reels:n,rows:s}=this._getSlotMachineMatrixSize(),{width:o,height:a}=this.common.object;Number.isFinite(t)&&(o=t),Number.isFinite(e)&&(a=e),this._symbolWidth=r||o/n,this._symbolHeight=i||a/s,this._symbolWidth===~~this._symbolWidth&&this._symbolHeight===~~this._symbolHeight||Urso.logger.error("ComponentsSlotMachineView dimension error. Use int width/height values.")}_getSymbolsConfig(t){var{key:e,template:i}=t;return{key:e,template:i,parent:this.common.object}}_getSymbol(t){return this.getInstance("Symbol",t)}_startSpin(){for(var{reelsCount:t,spinStartInterval:e}=this._config,i=0;i<t;i++){var r=i*e;this._bounceTweens?this._startTopBounce(i,r):this._tweenReel(i,r)}this._switchMaskVisibility(!0),this._switchBorderSymbolsAllVisibility(!0)}_startTopBounce(t,e){var{bounce:i}=this._config;this._startBounce((()=>{this._tweenReel(t,0),delete this._bounceTweens[t],0===Object.keys(this._bounceTweens).length&&(this._bounceTweens=!1)}),t,e,i.top)}_startBounce(t,e,i,r){var{to:n,duration:s}=r,o=this._symbols[e],a=this.tween.add({x:0,y:0}).to(n,s,"none",!0,i);a.timeScale=this._getTweenTimeScale(),a.onComplete.addOnce(t);for(var h=function(t){var{data:e}=o[t],{y:i}=e.getPosition();a.onUpdateCallback(((t,r)=>{var s=Math.sin(Math.PI*r)*n.y;e.setPosition({y:i+s})}))},l=0;l<o.length;l++)h(l);this._bounceTweens[e]=a}_resetSpinState(){this._timeScale=1,this._intrigue=!1,this._intrigueStartsFrom=0,this._lastStoppedReelIndex=-1,this._spinning=!0,this._remainingBlurSymbolsCount=[...this._config.blurSymbolsCount],this._finishSpin=!1,this._spinNewSymbols=[],this._reelTweens=[]}_updateMoveData(){this._dropMatrix?this._moveMatrix=this._makeDropMatrix():this._moveMatrix=this._makeRegularMoveMatrix(1)}_makeDropMatrix(){return this._dropMatrix.map((t=>t.map((t=>~~t))))}_makeRegularMoveMatrix(t){return new Array(this._symbols.length).fill(new Array(this._symbols[0].length).fill(t))}_moveSymbolToTop(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=this._symbols[t],r=null!=e?e:this._symbols[t].length-1,[n]=i.splice(r,1);i.unshift(n)}_setSymbolToPosition(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{data:i}=this._symbols[t][e],r=this._calculateSymbolPosition(i,t,e);i.setPosition(r)}_setSymbolConfig(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{data:i}=this._symbols[t][e],r=this._getCurrentSymbolConfig(t);i.setConfig(r)}_moveDone(t){return()=>{this._dropMatrix?this._onReelStopCallback(t):(this._moveSymbolToTop(t),this._setSymbolToPosition(t),this._setSymbolConfig(t),this._checkCanTweenReel(t)?this._tweenReel(t):this._onReelStopCallback(t))}}_tweenReel(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._tweenReelSymbols(t,e)}_getReelTween(t){var e={y:0};return this._reelTweens[t]?this._reelTweens[t].target=e:this._reelTweens[t]=this.tween.add(e),this._reelTweens[t]}_calculateEasing(t){var{easingParam:e,rowIndex:i,progress:r,to:n}=t,s=0;return n.y>0&&(s=e*(i+1)*Math.sin(Math.PI*r)),{easeY:s}}_getEasingParam(){var{dropEasingParam:t,regularEasingParam:e}=this._config;return this._dropMatrix?t:e}_updateCallback(t){var{reelIndex:e,rowIndex:i,easingParam:r=0}=t,{data:n}=this._symbols[e][i],{y:s}=n.getPosition(),o=this._getReelFinishPosition(e,i);return(t,e)=>{var{target:a}=t,h={easingParam:r,rowIndex:i,progress:e,to:o},{easeY:l}=this._calculateEasing(h),u=s+this._symbolHeight*o.y,c=s+a.y*o.y+l;n.setPosition({y:c>u?u:c})}}_setupReelTween(t,e){t.onComplete.addOnce(this._moveDone(e));for(var i=this._getEasingParam(),r=0;r<this._symbols[e].length;r++)t.onUpdateCallback(this._updateCallback({reelIndex:e,rowIndex:r,easingParam:i}))}_setTweenTimeScale(t,e){var i=this._getTweenTimeScale(e);1!==i&&(t.timeScale=i)}_getReelFinishPosition(t,e){return{y:this._moveMatrix[t][e]}}_getBaseSymbolMoveData(){return{x:0,y:this._symbolHeight}}_setupTweenMove(t,e){var i=this._getOneSymbolTweenDuration();t.to(this._getBaseSymbolMoveData(),i,"none",!0,e)}_tweenReelSymbols(t,e){var i=this._getReelTween(t);this._setupReelTween(i,t),this._setupTweenMove(i,e),this._setTweenTimeScale(i,t)}_isIntrigueInProgress(t){return this._intrigue&&t>=this._intrigueStartsFrom&&t===this._lastStoppedReelIndex+1}_getTweenTimeScale(t){var{intrigueSpeedReelsFactor:e}=this._config,i=this._timeScale;return this._isIntrigueInProgress(t)&&(i*=e),i}_startBottomBounce(t){var{bounce:e}=this._config;this._startBounce((()=>{this._finishSpinIfNeeded(t),delete this._bounceTweens[t],0===Object.keys(this._bounceTweens).length&&(this._bounceTweens=!1)}),t,0,e.bottom)}_runLandingAnimations(){}_onReelStopCallback(t){this._lastStoppedReelIndex=t,this._reelMoving[t]=!1,this._runLandingAnimations(t),this._setBounce("bottom"),this._bounceTweens?this._startBottomBounce(t):this._finishSpinIfNeeded(t)}_finishSpinIfNeeded(t){var{reelsCount:e}=this._config;t===e-1&&this._onSpinStopCallback()}_onSpinStopCallback(){this._dropMatrix=null;var t=this._dropMatrix?"drop":"basic";this._service.spinCompleted(t),this._switchMaskVisibility(!1),this._switchBorderSymbolsAllVisibility(!1)}_checkCanTweenReel(t){return this._checkNeedUpdateRemainingBlurSymbolsCount(t),this._remainingBlurSymbolsCount[t]>0||this._spinNewSymbols[t].length>0}_getOneSymbolTweenDuration(){return this._symbolHeight/this._config.symbolSpeed}_getCurrentSymbolConfig(t){var e=null;this._remainingBlurSymbolsCount[t]>0?(this._remainingBlurSymbolsCount[t]--,e=this._service._getRandomSymbolConfig()):this._spinNewSymbols[t].length>0&&(e=this._spinNewSymbols[t].pop());var i=this._getSymbolsConfig(e);return i||Urso.logger.error("ComponentsSlotMachineView checkSymbolsPositions logic fatal error. Kernel is in panic."),i}_setSymbolPositionForDrop(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=this._symbols[t],n=null===i?r.length:i,{data:s}=r[e],o=-n*this._symbolHeight,{y:a}=s.getPosition();s.setPosition({y:a+o})}finishSpin(){this._finishSpin=!0}finishBounceSpin(){this._bounceTweens=[],this.finishSpin()}_checkNeedUpdateRemainingBlurSymbolsCount(t){if(!this._finishSpin&&0===this._remainingBlurSymbolsCount[t])for(var e=0;e<this._remainingBlurSymbolsCount.length;e++)this._remainingBlurSymbolsCount[e]++}updateSymbolsTintConfig(t){this._symbols.forEach((e=>e.forEach((e=>{var{data:i}=e;return i.setTintConfig(t)}))))}setSymbolsTint(t){this._symbols.forEach((e=>e.forEach((e=>{var{data:i}=e;return i.setTintType(t)}))))}setTurboMode(t){this._turboModeEnabled=t,this._updateTurboMode()}_updateTurboMode(){this._turboModeEnabled&&(this._remainingBlurSymbolsCount=this._getTurboModeBlurCounts())}_getTurboModeBlurCounts(){return this._remainingBlurSymbolsCount.map(((t,e)=>e))}}},3409:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t.exports=class{constructor(){e(this,"_key",null),e(this,"_animationTween",null),e(this,"_template",null),e(this,"_parent",null),e(this,"_texture",null),e(this,"_tintCfg",null),e(this,"_curTint",null),e(this,"_animationFinishCallbacks",[])}setConfig(t){var{key:e,template:i,parent:r}=t;this._key=e,this._template=i,this._parent=r,this._updateTexture()}_updateTexture(){this._texture?this._texture.changeTexture(this._template.assetKey):this._texture=Urso.objects.create(this._template,this._parent,!0)}hide(){this._texture.visible=!1}show(){this._texture.visible=!0}prepareToDrop(){this._texture.visible=!1}destroy(){this._texture.destroy(!0)}getAnchors(){var{anchorX:t,anchorY:e}=this._texture;return{anchorX:t,anchorY:e}}setPosition(t){var{x:e,y:i}=t;Number.isFinite(e)&&(this._texture.x=e),Number.isFinite(i)&&(this._texture.y=i)}getPosition(){if(!this._texture)return null;var{x:t,y:e}=this._texture;return{x:t,y:e}}animate(t){this.stopAnimation(),this._animationFinishCallbacks=[t],this._tintCfg&&(this._animationFinishCallbacks.unshift((()=>this._updateTint(this._curTint))),this._updateTint(this._tintCfg.default)),this._createAndRunAnimation()}_createAndRunAnimation(){this._animationTween=gsap.timeline({defaults:{duration:1}}),this._animationTween.to(this._texture,{scaleX:1.2,scaleY:1.2}).to(this._texture,{scaleX:1,scaleY:1,onComplete:this._makeOnAnimationCompleteClbk()})}_makeOnAnimationCompleteClbk(){return()=>{this._animationFinishCallbacks.forEach((t=>t())),this._animationTween=null}}setTintConfig(t){this._tintCfg=t}setTintType(t){this._curTint=this._tintCfg[t]||this._tintCfg.default,this._updateTint(this._curTint)}_updateTint(t){void 0!==t&&(this._texture.tint=t)}stopAnimation(){this._animationTween&&(this._animationTween.kill(),this._animationTween=null,this._texture.scaleX=1,this._texture.scaleY=1,this._makeOnAnimationCompleteClbk()())}}},3925:t=>{t.exports=class{get(){return[{key:"0",template:{type:Urso.types.objects.IMAGE,assetKey:"00",anchorX:.5,anchorY:.5}},{key:"1",template:{type:Urso.types.objects.IMAGE,assetKey:"01",anchorX:.5,anchorY:.5}},{key:"2",template:{type:Urso.types.objects.IMAGE,assetKey:"02",anchorX:.5,anchorY:.5}},{key:"3",template:{type:Urso.types.objects.IMAGE,assetKey:"03",anchorX:.5,anchorY:.5}},{key:"4",template:{type:Urso.types.objects.IMAGE,assetKey:"04",anchorX:.5,anchorY:.5}},{key:"5",template:{type:Urso.types.objects.IMAGE,assetKey:"05",anchorX:.5,anchorY:.5}},{key:"6",template:{type:Urso.types.objects.IMAGE,assetKey:"06",anchorX:.5,anchorY:.5}},{key:"7",template:{type:Urso.types.objects.IMAGE,assetKey:"07",anchorX:.5,anchorY:.5}},{key:"8",template:{type:Urso.types.objects.IMAGE,assetKey:"08",anchorX:.5,anchorY:.5}},{key:"9",template:{type:Urso.types.objects.IMAGE,assetKey:"09",anchorX:.5,anchorY:.5}},{key:"10",template:{type:Urso.types.objects.IMAGE,assetKey:"10",anchorX:.5,anchorY:.5}}]}}},6273:t=>{t.exports=class{constructor(){var t="images/symbols/";this.assets=[{type:Urso.types.assets.IMAGE,key:"00",path:"".concat(t,"00.png")},{type:Urso.types.assets.IMAGE,key:"01",path:"".concat(t,"01.png")},{type:Urso.types.assets.IMAGE,key:"02",path:"".concat(t,"02.png")},{type:Urso.types.assets.IMAGE,key:"03",path:"".concat(t,"03.png")},{type:Urso.types.assets.IMAGE,key:"04",path:"".concat(t,"04.png")},{type:Urso.types.assets.IMAGE,key:"05",path:"".concat(t,"05.png")},{type:Urso.types.assets.IMAGE,key:"06",path:"".concat(t,"06.png")},{type:Urso.types.assets.IMAGE,key:"07",path:"".concat(t,"07.png")},{type:Urso.types.assets.IMAGE,key:"08",path:"".concat(t,"08.png")},{type:Urso.types.assets.IMAGE,key:"09",path:"".concat(t,"09.png")},{type:Urso.types.assets.IMAGE,key:"10",path:"".concat(t,"10.png")}],this.objects=[]}}},8625:t=>{t.exports=class{constructor(){this.singleton=!0,this._tweens={},this._currentTime=0,this._tweenIndex=0,Object.defineProperties(this,{globalTimeScale:{get:function(){return Urso.scenes.timeScale},set:function(){Urso.logger.error("ComponentsSlotMachineTween: you cannot set globalTimeScale")}}}),this.tweens=this._tweens}update(){this._update()}removeAll(){for(var t in this._tweens)this._tweens[t].stop()}add(t){var e=this._keyGenerate(),i=this,r={id:e,isRunning:!1,enableUpdate:!1,target:t,to:this._to,start:this._start,pause:this._pause,resume:this._resume,stop:this._stop,points:[],manager:this,_timeScale:1,get timeScale(){return this._timeScale},set timeScale(t){if(this._timeScale===t||!this.points[0])return this._timeScale;var e=~~(i._currentTime-this.points[0].timeStart)*(i.globalTimeScale*this._timeScale);if(this.points[0].duration-e<=0)return this._timeScale;for(var r in this.points[0].duration-=e,this.points[0].timeStart=i._currentTime,this.points[0].propsTo)this.points[0].propsFrom[r]=this.target[r];return this._timeScale=t,this._timeScale},_started:!1,_paused:!1,_pauseTime:!1,_timeBonus:0,_complete:!1,_bkp:{points:[],obj:null},_functions:{onStart:[],onStartOnce:[],onUpdate:[],onComplete:[],onCompleteOnce:[]}};return r.onComplete={addOnce:function(t){return r._functions.onCompleteOnce.push(t),r},add:function(t){return r._functions.onComplete.push(t),r}},r.onStart={addOnce:function(t){return r._functions.onStartOnce.push(t),r},add:function(t){return r._functions.onStart.push(t),r}},r.onUpdateCallback=function(t){return r._functions.onUpdate.push(t),r},this._tweens[e]=r,r}_to(t,e,i,r,n){var s={};for(var o in t)s[o]=this.target[o];n||(n=0);var a={propsTo:t,duration:e,easing:i,propsFrom:s,timeStart:this.manager._currentTime+n,startDelay:n};return this.points.push(a),this._complete=!1,r&&this.start(),this}_start(){if(this.isRunning||!this.points||0===this.points.length&&0===this._bkp.points.length)return this;if(0===this.points.length&&this._bkp.points.length>0){this.points=this._bkp.points;var t=this._keyGenerate();this.manager._tweens[t]=this}this.points[0].timeStart=this.manager._currentTime+this.points[0].startDelay,this._bkp={points:Urso.helper.objectClone(this.points),obj:null},this._started=!0,this.isRunning=!0,this._complete=!1;for(var e=0;e<this._functions.onStartOnce.length;e++)this._functions.onStartOnce[e]();for(var i=0;i<this._functions.onStart.length;i++)this._functions.onStart[i]();return this._timeBonus>0&&this.manager._calcStep(this,!0),this}_pause(){return this._paused=!0,this.isRunning=!1,this._pauseTime=this.manager._currentTime,this}_resume(){return this.points&&this.points[0]&&(this.points[0].timeStart+=this.manager._currentTime-this._pauseTime),this._paused=!1,this.isRunning=!0,this._pauseTime=0,this}_stop(){return this._complete=!0,this.isRunning=!1,delete this.manager._tweens[this.id],this}_update(){var t=(new Date).getTime();if(this.gamePaused){var e=t-this._currentTime;for(var i in this._tweens)this._tweens[i].points&&this._tweens[i].points[0]&&(this._tweens[i].points[0].timeStart+=e);return!0}for(var r in this._currentTime=t,this._tweens)this._tweens[r]._complete||this._tweens[r]._started&&!this._tweens[r]._paused&&this._calcStep(this._tweens[r]);return!0}_keyGenerate(){return this._tweenIndex++,"".concat(this._currentTime,"_").concat(this._tweenIndex)}_calcStep(t,e){var i=t.points[0];if(this._currentTime<i.timeStart)return!1;for(var r=this._applyDelta(t,i,e),n={percent:+r.toFixed(3),vEnd:i.propsTo},s=0;s<t._functions.onUpdate.length;s++)t._functions.onUpdate[s](t,r,n);if(1===r)if(t.points.shift(),0===t.points.length){t._complete=!0,t.isRunning=!1;var{onComplete:o}=t._functions,{onCompleteOnce:a}=t._functions;t._functions.onStartOnce=[],t._functions.onCompleteOnce=[],t.enableUpdate||(t._functions.onStart=[],t._functions.onUpdate=[],t._functions.onComplete=[]);for(var h=0;h<a.length;h++)a[h]();for(var l=0;l<o.length;l++)o[l]()}else{var{startDelay:u}=t.points[0];for(var c in t.points[0].timeStart=this._currentTime+u,t.points[0].propsTo)t.points[0].propsFrom[c]=t.target[c];u?setTimeout((function(){this._calcStep(t)}),u):this._calcStep(t)}return!0}_applyDelta(t,e,i){t._timeBonus>0&&(e.timeStart-=t._timeBonus,t._timeBonus=0);var r=this._currentTime,n=(r-e.timeStart)*t.timeScale*(this.globalTimeScale/e.duration);for(var s in n>=1&&i&&(n=.99),n>1&&(n=1,t._timeBonus=~~(r-e.timeStart-e.duration/(t.timeScale*this.globalTimeScale))),e.propsTo)t.target[s]=e.propsFrom[s]+(e.propsTo[s]-e.propsFrom[s])*n;return n}_subscibe(){this.addListener(Urso.events.MODULES_SCENES_UPDATE,this._update.bind(this))}}},729:(t,e,i)=>{Urso.SlotBase.Components.Ui={Controller:i(9782)}},9782:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.Core.Components.Base.Controller{constructor(){super(...arguments),e(this,"_uiElements",{}),e(this,"_stateUpdateHandler",(t=>this._stateUpdate(t)))}_stateUpdate(t){Object.keys(t).forEach(this._applyState(t))}_applyState(t){return e=>{var{visible:i,enabled:r,text:n,checked:s}=t[e];Urso.findAll(e).forEach((t=>t?(void 0!==i&&(t.visible=i),void 0!==r&&t.enable&&t.disable&&t[r?"enable":"disable"](),void 0!==n&&void 0!==t.text&&(t.text=n),void 0!==s&&void 0!==t.switchStatus&&s!==("pressed"===t.status)&&t.switchStatus(),!0):Urso.logger.error("ComponentsUiController: Object with name '".concat(e,"' was not found!"))))}}_subscribeOnce(){this.addListener("components.ui.state.update",this._stateUpdateHandler)}}t.exports=i},6711:(t,e,i)=>{Urso.SlotBase.Components.WinCounter={Config:i(5375),Controller:i(6345)}},5375:t=>{t.exports=class{get(){return{winThresholdsDurations:{0:{type:"regular",durationFactor:2e3,showDuration:500,hideDuration:500,hideDelay:1e3},10:{type:"regular",durationFactor:20,showDuration:500,hideDuration:500,hideDelay:1e3}},smoothTransition:!1,showCurrencyType:"currency"}}}},6345:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.Core.Components.StateDriven.Controller{constructor(){super(...arguments),e(this,"configActions",{showWinCounterAction:{guard:()=>this._getTotalWin(),run:()=>this._runShowWinCounter(),terminate:()=>this._terminateShowWinCounter()}}),e(this,"_counterTween",null),e(this,"_showHideTween",null),e(this,"_showParams",null)}get _config(){return this.getInstance("Config").get()}get _counterText(){return this.common.findOne("^counterText")}get _bigWinCounterText(){return this.common.findOne("^bigWinCounterText")}get _bigWinAnimation(){return this.common.findOne("^bigWinAnimation")}get _currency(){var{showCurrencyType:t}=this._config,{currentCurrency:e,currentSymbol:i}=Urso.localData.get("balance.currency");switch(t){case"currency":return e;case"symbol":return i;default:return""}}_runShowWinCounter(){this._startCounterAnimation()}_terminateShowWinCounter(){this._startLastState()}_getTotalWin(){var t=Urso.localData.get("slotMachine"),{totalWin:e}=t.spinStages[0].slotWin;return e}_startCounterAnimation(){this._reset();var t=this._getTotalWin();this._showParams=this._getShowParams(t),this._runCounterTextAnimation(t),this._runShowAnimation(this._showParams)}_runShowAnimation(t){var{type:e}=t;"big"!==e?this._runRegularWinAnimation():this._runBigWinAnimation()}_runBigWinAnimation(){var{showAnimationName:t}=this._showParams;this._bigWinAnimation.play(t),this._bigWinAnimation._baseObject.state.clearListeners(),this._bigWinAnimation._baseObject.state.addListener({complete:()=>{this._bigWinAnimation._baseObject.state.clearListeners(),this._bigWinShowComplete()}})}_bigWinShowComplete(){var{loopAnimationName:t}=this._showParams;this._bigWinAnimation.play(t,!0)}_reset(){this._showParams=null,this._counterText.text=0,this._counterText.alpha=0,this._counterText.scaleX=0,this._counterText.scaleY=0}_runRegularWinAnimation(){var{showDuration:t}=this._showParams;this._showHideTween=gsap.to(this._counterText,{alpha:1,scaleX:1,scaleY:1,duration:t/1e3,ease:"back.out(2)"})}_runCounterTextAnimation(t){var e=this._getCounterDuration(t);this._counterTween=gsap.to(this._counterText,{text:t,onUpdate:()=>{this._setTextSafe(this._counterText,this._counterText.text),this._setTextSafe(this._bigWinCounterText,this._counterText.text)},duration:e,onComplete:()=>this._runHideAnimation()})}_runHideAnimation(){var{type:t}=this._showParams;"big"!==t?this._runRegularHideAnimation():this._runBigWinHideAnimation()}_runBigWinHideAnimation(){var{hideAnimationName:t,hideDelay:e}=this._showParams;setTimeout((()=>{this._bigWinAnimation._baseObject.state.clearListeners(),this._bigWinAnimation.play(t),this._bigWinAnimation._baseObject.state.addListener({complete:()=>{this._bigWinAnimation._baseObject.state.clearListeners(),this._winHideComplete()}})}),e)}_winHideComplete(){this._reset(),this.callFinish("showWinCounterAction")}_runRegularHideAnimation(){var{hideDuration:t,hideDelay:e}=this._showParams;this._showHideTween=gsap.to(this._counterText,{alpha:0,scaleX:0,scaleY:0,duration:t/1e3,delay:e/1e3,ease:"back.in(2)",onComplete:()=>this._winHideComplete()})}_killTweens(){this._counterTween&&this._counterTween.kill(),this._showHideTween&&this._showHideTween.kill(),this._showHideTween=null,this._counterTween=null}_getCounterDuration(t){var{durationFactor:e}=this._showParams;return t*(e/1e3)}_startLastState(){var{type:t}=this._showParams,e=this._getTotalWin();this._killTweens(),"regular"===t&&(this._counterText.alpha=1,this._counterText.scaleX=1,this._counterText.scaleY=1),this._setTextSafe(this._counterText,e),this._setTextSafe(this._bigWinCounterText,e),this._runHideAnimation()}_formatWinText(t){return Number(t).toFixed(2)}_setTextSafe(t,e){t&&(t.text=this._formatWinText(e))}_getFactorParams(t){var{winThresholdsDurations:e}=this._config,{value:i}=Urso.localData.get("totalBet"),r=Object.keys(e).sort().reverse(),n=t/i;return e[r.filter((t=>+t<=n)).shift()]}_getShowParams(t){return this._getFactorParams(t)}}t.exports=i},2445:(t,e,i)=>{Urso.SlotBase.Components.WinFrame={Controller:i(7842),Template:i(7197),View:i(9345)}},7842:t=>{class e extends Urso.Core.Components.Base.Controller{constructor(t){super(t),this.view=this.getInstance("View")}_winFrameHandler(t){this.view.createWinFrame(t)}_animateByOneStop(){this.view.animationStop()}_subscribeOnce(){this.addListener("component.slotMachine.symbol.startAnimation",this._winFrameHandler.bind(this)),this.addListener("components.slotMachine.spinCommand",this._animateByOneStop.bind(this))}}t.exports=e},7197:t=>{t.exports=class{constructor(){this.objects=[{type:Urso.types.objects.CONTAINER,name:"sparks",contents:[],x:320,y:160}]}}},9345:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t.exports=class{constructor(){e(this,"distance",220),e(this,"createdSparks",{})}_generateSparks(t){var e="".concat(t.x,"_").concat(t.y),i=Urso.objects.create({type:Urso.types.objects.EMITTER,name:"".concat(e,"_blue"),textures:["blueFrame"],autostart:!1,cfg:"winFrameCfg"},this.common.findOne("^sparks")),r=Urso.objects.create({type:Urso.types.objects.EMITTER,name:"".concat(e,"_purple"),textures:["purpleFrame"],autostart:!1,cfg:"winFrameCfg"},this.common.findOne("^sparks"));return this.createdSparks[e]=!0,[i,r]}_animateSparks(t,e,i){e.emitter.emit=!0,e.visible=!0,e.emitter.ownerPos.x=t.x-i/2,e.emitter.ownerPos.y=t.y-i/2,gsap.timeline({defaults:{duration:.25}}).to(e.emitter.spawnPos,{x:i,onStart:()=>{e.visible=!0,e.emitter.emit=!0}}).to(e.emitter.spawnPos,{y:i}).to(e.emitter.spawnPos,{x:0}).to(e.emitter.spawnPos,{y:0,onComplete:()=>{e.emitter.emit=!1,e.visible=!1}})}animationStop(){this.common.findOne("^sparks")._baseObject.children.forEach((t=>{t.visible=!1}))}createWinFrame(t){var e="".concat(t.x,"_").concat(t.y);this.createdSparks[e]||this._generateSparks(t),this._animateSparks(t,this.common.findOne("^".concat(e,"_blue")),this.distance),this._animateSparks(t,this.common.findOne("^".concat(e,"_purple")),-this.distance)}}},46:(t,e,i)=>{Urso.SlotBase.Components.WinLines={Controller:i(2437),Template:i(4012)}},2437:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.Core.Components.StateDriven.Controller{constructor(){super(...arguments),e(this,"_animateByOneIndex",-1),e(this,"configStates",{SHOW_WIN:{guard:()=>this._hasWin}}),e(this,"configActions",{showWinlinesAnimationAllAction:{guard:()=>this._hasWin,run:()=>this._runShowWinlinesAnimationAll(),terminate:()=>this._terminateShowWinlinesAnimationAll()},showWinlinesAnimationByOneAction:{guard:()=>this._hasWin,run:()=>this._runShowWinlinesAnimationByOne(),terminate:()=>this._terminateShowWinLinesAnimationByOne()}}),e(this,"_animateAllCycleFinishedHandler",(()=>{this._unsubscribeCycleFinished(this._animateAllCycleFinishedHandler),this.callFinish("showWinlinesAnimationAllAction")})),e(this,"_byOneCycleFinishedHandler",(()=>{this._startAnimateByOne()}))}get _hasWin(){return Urso.localData.get("slotMachine.spinStages.0.slotWin.lineWinAmounts")}_runShowWinlinesAnimationAll(){this._subscribeCycleFinished(this._animateAllCycleFinishedHandler),this._showWinlinesAnimationAll()}_terminateShowWinlinesAnimationAll(){this.emit("components.slotMachine.symbolAnimateStop")}_runShowWinlinesAnimationByOne(){this._subscribeCycleFinished(this._byOneCycleFinishedHandler),this._startAnimateByOne()}_terminateShowWinLinesAnimationByOne(){this._unsubscribeCycleFinished(this._byOneCycleFinishedHandler),this.callFinish("showWinlinesAnimationByOneAction")}_subscribeCycleFinished(t){this.addListener("components.slotMachine.cycleFinished",t)}_unsubscribeCycleFinished(t){this.removeListener("components.slotMachine.cycleFinished",t)}_showWinlinesAnimationAll(){for(var t=Urso.localData.get("slotMachine").spinStages[0].slotWin,{lineWinAmounts:e}=t,i=0;i<e.length;i++){var r=e[i];this._animateLine(r.selectedLine),this._runSymbolAnimation(r)}}_runSymbolAnimation(t){for(var e=0;e<t.wonSymbols.length;e++){var[i,r]=t.wonSymbols[e];this.emit("components.slotMachine.symbolAnimate",{reel:+i,row:+r})}}_animateLine(t){var e=this.common.findOne("^line".concat(t));if(e){e.visible=!0,e.setAnimationConfig({onComplete:()=>{e.visible=!1}});var i=this._getAnimationName(t);e.play(i)}}_getAnimationName(t){switch(+t){case 0:case 1:case 2:return"l0";case 6:case 5:return"l5";case 3:case 4:case 7:case 8:return"l7";default:return null}}_startAnimateByOne(){var t=Urso.localData.get("slotMachine").spinStages[0].slotWin;t.lineWinAmounts[this._animateByOneIndex]||(this._animateByOneIndex=0);var e=t.lineWinAmounts[this._animateByOneIndex++];this._runSymbolAnimation(e),this._animateLine(e.selectedLine)}_stopAllAnimation(){this.common.findAll(".winline").forEach((t=>{t._baseObject.animation.stop(),t._baseObject.animation.reset(),t.visible=!1})),this.emit("components.winlines.animateByOne.finished",null,1)}}t.exports=i},4012:t=>{t.exports=class{constructor(){this.objects=[]}}},4534:(t,e,i)=>{window.Urso.SlotBase={},i(8904),i(6697),i(8372)},8904:()=>{Urso.config.extendingChain=["Urso.Core","Urso.SlotBase"],Urso.config.title="Base Game"},6697:(t,e,i)=>{Urso.SlotBase.Modules={},i(8183),i(5201),i(5750)},8183:(t,e,i)=>{Urso.SlotBase.Modules.Logic={Controller:i(23),Main:i(9202)},i(2362)},23:t=>{class e extends Urso.Core.Modules.Logic.Controller{getAdditionalLogicBlocks(){return["Ui.Controller","Main"]}}t.exports=e},9202:t=>{t.exports=class{}},2362:(t,e,i)=>{Urso.SlotBase.Modules.Logic.Ui={Controller:i(4341),BaseUiElementController:i(1183),BaseInteractiveUiElementController:i(3576),Config:i(7691)},i(1529),i(2743)},3576:(t,e,i)=>{function r(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n=i(1183);t.exports=class extends n{constructor(){super(...arguments),r(this,"_type",null),r(this,"_canFireInteract",!1),r(this,"TYPES",{BUTTON:0,SLIDER:1,CHECKBOX:2,TOGGLE:3,TEXTINPUT:4,HITAREA:5}),r(this,"_interactHandler",(t=>this._interact(t)))}_subscribeByType(){var t="";switch(this._type){case this.TYPES.BUTTON:t=Urso.events.MODULES_OBJECTS_BUTTON_PRESS;break;case this.TYPES.SLIDER:t=Urso.events.MODULES_OBJECTS_SLIDER_HANDLE_DROP;break;case this.TYPES.CHECKBOX:t=Urso.events.MODULES_OBJECTS_CHECKBOX_PRESS;break;case this.TYPES.TOGGLE:t=Urso.events.MODULES_OBJECTS_TOGGLE_PRESS;break;case this.TYPES.TEXTINPUT:t=Urso.events.MODULES_OBJECTS_TEXTINPUT_BLUR;break;case this.TYPES.HITAREA:t=Urso.events.MODULES_OBJECTS_HIT_AREA_PRESS;break;default:return void Urso.logger.error("There is no or wrong type '".concat(this._type,"' was set!"))}this.addListener(t,this._interactHandler,!0)}_interact(t){(t.class||"").split(" ").includes(this._class)&&(this._interactDone(t),this._canFireInteract&&this.emit("modules.logic.ui.interact.done"))}_interactDone(){}_extendedSubscribeOnce(){super._extendedSubscribeOnce(),this._subscribeByType()}}},1183:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t.exports=class{constructor(){e(this,"_subscribed",!1),e(this,"_state",!1),e(this,"_class",null),e(this,"_actions",[]),e(this,"_stateChangedHandler",(t=>this._stateChanged(t))),e(this,"_actionStartHandler",(t=>this._actionStart(t))),e(this,"_actionFinishHandler",(t=>this._actionFinish(t)))}init(){this._subscribeOnce()}get _config(){return Urso.getInstance("Modules.Logic.Ui.Config").getConfig()}get _currency(){var{showCurrencyType:t}=this._config,{currentCurrency:e,currentSymbol:i}=Urso.localData.get("balance.currency");switch(t){case"currency":return e;case"symbol":return i;default:return""}}_stateChanged(t){this._state=t}_actionStart(t){this._actions.push(t),this._updateUiState()}_actionFinish(t){var e=this._actions.indexOf(t);e>=0&&this._actions.splice(e,1)}_getUiState(){var t={visible:this._checkVisible(),enabled:this._checkEnabled(),text:this._setText()};return this._beforeStateUpdate(t)}_checkVisible(){return!1}_checkEnabled(){return!1}_setText(){}_beforeStateUpdate(t){return t}_getSelector(){return".".concat(this._class)}_updateUiState(){var t=this._getUiState(),e=this._getSelector();this.emit("components.ui.state.update",{[e]:t})}_extendedSubscribeOnce(){}_subscribeOnce(){this._subscribed||(this._subscribed=!0,this.addListener(Urso.events.MODULES_STATES_MANAGER_STATE_CHANGE,this._stateChangedHandler,!0),this.addListener(Urso.events.MODULES_STATES_MANAGER_ACTION_START,this._actionStartHandler,!0),this.addListener(Urso.events.MODULES_STATES_MANAGER_ACTION_FINISH,this._actionFinishHandler,!0),this._extendedSubscribeOnce())}}},1529:(t,e,i)=>{Urso.SlotBase.Modules.Logic.Ui.Buttons={AutoSpinButtonController:i(5716),SpinButtonController:i(2882),SkipButtonController:i(1482),CollectButtonController:i(8127),BetIncreaseButtonController:i(5543),BetDecreaseButtonController:i(4283),BetMaxButtonController:i(4097),TurboModeButtonController:i(4531),BetIncreaseButtonCircularController:i(3258),BetDecreaseButtonCircularController:i(8726),LineIncreaseButtonController:i(6494),LineIncreaseButtonCircularController:i(943)}},5716:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.SlotBase.Modules.Logic.Ui.BaseInteractiveUiElementController{constructor(){super(...arguments),e(this,"_type",this.TYPES.TOGGLE),e(this,"_class","autoButton")}_checkVisible(){return!0}_checkEnabled(){return!0}_tryStartAutoSpin(){this.emit("modules.logic.ui.auto.update")}_interactDone(){this._switchAutoMode(),this._tryStartAutoSpin()}_switchAutoMode(){var{enabled:t}=Urso.localData.get("autospin");Urso.localData.set("autospin.enabled",!t)}}t.exports=i},8726:(t,e,i)=>{var r=i(4283);t.exports=class extends r{constructor(){var t,e,i;super(...arguments),t=this,i="betDecreaseButtonCircularController",(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="_class"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}get _needBlock(){return!1}get _nextValue(){var{bets:t,value:e}=Urso.localData.get("bets"),i=t[t.indexOf(e)-1];return void 0!==i?i:t[t.length-1]}}},4283:(t,e,i)=>{function r(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n=i(5543);t.exports=class extends n{constructor(){super(...arguments),r(this,"_class","betDecreaseButton"),r(this,"_enableStates",["IDLE","FINISH_WIN_ROUND"])}get _needBlock(){var{bets:t,value:e}=Urso.localData.get("bets");return 0===t.indexOf(e)}get _nextValue(){var{bets:t,value:e}=Urso.localData.get("bets");return t[t.indexOf(e)-1]}}},3258:(t,e,i)=>{var r=i(5543);t.exports=class extends r{constructor(){var t,e,i;super(...arguments),t=this,i="betIncreaseCircularButton",(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="_class"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}get _needBlock(){return!1}get _nextValue(){var{bets:t,value:e}=Urso.localData.get("bets"),i=t[t.indexOf(e)+1];return void 0!==i?i:t[0]}}},5543:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.SlotBase.Modules.Logic.Ui.BaseInteractiveUiElementController{constructor(){super(...arguments),e(this,"_type",this.TYPES.BUTTON),e(this,"_class","betIncreaseButton"),e(this,"_enableStates",["IDLE","FINISH_WIN_ROUND"]),e(this,"_betUpdatedHandler",(()=>this._updateUiState()))}_checkVisible(){return!0}get _needBlock(){var{bets:t,value:e}=Urso.localData.get("bets");return t.indexOf(e)===t.length-1}get _isInEnableState(){return this._enableStates.includes(this._state)}_checkEnabled(){return!this._needBlock&&this._isInEnableState}get _nextValue(){var{bets:t,value:e}=Urso.localData.get("bets");return t[t.indexOf(e)+1]}_interactDone(){Urso.localData.set("bets.value",this._nextValue),this.emit("modules.logic.ui.bet.updated")}_extendedSubscribeOnce(){super._extendedSubscribeOnce(),this.addListener("modules.logic.ui.bet.updated",this._betUpdatedHandler,!0)}}t.exports=i},4097:(t,e,i)=>{var r=i(5543);t.exports=class extends r{constructor(){var t,e,i;super(...arguments),t=this,i="betMaxButton",(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="_class"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}get _nextValue(){var{bets:t}=Urso.localData.get("bets");return t[t.length-1]}}},8127:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.SlotBase.Modules.Logic.Ui.BaseInteractiveUiElementController{constructor(){super(...arguments),e(this,"_type",this.TYPES.BUTTON),e(this,"_class","collectButton"),e(this,"_canFireInteract",!0)}_checkVisible(){return["WAITING_FOR_GAMBLE"].includes(this._state)}_checkEnabled(){return this._actions.includes("waitingForInteractionAction")&&this._actions.includes("showWinlinesAnimationByOneAction")}}t.exports=i},943:(t,e,i)=>{var r=i(6494);t.exports=class extends r{constructor(){var t,e,i;super(...arguments),t=this,i="lineIncreaseCircularButton",(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="_class"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}get _needBlock(){return!1}get _nextValue(){var{lines:t,value:e}=Urso.localData.get("lines"),i=t[t.indexOf(e)+1];return void 0!==i?i:t[0]}}},6494:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.SlotBase.Modules.Logic.Ui.BaseInteractiveUiElementController{constructor(){super(...arguments),e(this,"_type",this.TYPES.BUTTON),e(this,"_class","lineIncreaseButton"),e(this,"_enableStates",["IDLE","FINISH_WIN_ROUND"]),e(this,"_lineUpdatedHandler",(()=>this._updateUiState()))}_checkVisible(){return!0}get _needBlock(){var{lines:t,value:e}=Urso.localData.get("lines");return t.indexOf(e)===t.length-1}get _isInEnableState(){return this._enableStates.includes(this._state)}_checkEnabled(){return!this._needBlock&&this._isInEnableState}get _nextValue(){var{lines:t,value:e}=Urso.localData.get("lines");return t[t.indexOf(e)+1]}_interactDone(){Urso.localData.set("lines.value",this._nextValue),this.emit("modules.logic.ui.line.updated")}_extendedSubscribeOnce(){super._extendedSubscribeOnce(),this.addListener("modules.logic.ui.line.updated",this._lineUpdatedHandler,!0)}}t.exports=i},1482:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.SlotBase.Modules.Logic.Ui.BaseInteractiveUiElementController{constructor(){super(...arguments),e(this,"_type",this.TYPES.BUTTON),e(this,"_class","skipButton"),e(this,"_canFireInteract",!0)}_checkVisible(){return["FINISH_SPIN","SHOW_WIN","START_SPIN"].includes(this._state)}_checkEnabled(){return this._actions.includes("waitingForInteractionAction")}}t.exports=i},2882:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.SlotBase.Modules.Logic.Ui.BaseInteractiveUiElementController{constructor(){super(...arguments),e(this,"_type",this.TYPES.BUTTON),e(this,"_class","spinButton"),e(this,"_canFireInteract",!0)}_checkVisible(){return["IDLE","FINISH_WIN_ROUND"].includes(this._state)}_checkEnabled(){return this._actions.includes("waitingForInteractionAction")}}t.exports=i},4531:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.SlotBase.Modules.Logic.Ui.BaseInteractiveUiElementController{constructor(){super(...arguments),e(this,"_type",this.TYPES.TOGGLE),e(this,"_class","turboMode")}_checkVisible(){return!0}_checkEnabled(){return!0}_interactDone(){this._switchTurboMode()}_switchTurboMode(){var t=Urso.localData.get("settings.turboMode")||!1;Urso.localData.set("settings.turboMode",!t)}}t.exports=i},7691:t=>{t.exports=class{getConfig(){return{showCurrencyType:"symbol"}}getControllers(){return{Buttons:["AutoSpinButtonController","BetIncreaseButtonController","BetIncreaseButtonCircularController","BetDecreaseButtonController","BetDecreaseButtonCircularController","LineIncreaseButtonController","LineIncreaseButtonCircularController","BetMaxButtonController","SpinButtonController","SkipButtonController","CollectButtonController","TurboModeButtonController"],Info:["BetController","TotalBetController","BalanceController","LinesController","WinController","ClockController","CheeringController"]}}}},4341:t=>{t.exports=class{_getInstancePath(t){return"Modules.Logic.Ui".concat(t)}init(){var t=this.getInstance("Config").getControllers();this._initControllersRecursive(t)}_initControllersRecursive(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(Array.isArray(t))t.map((t=>this._initControllersRecursive(t,e)));else if("object"==typeof t)Object.keys(t).map((i=>this._initControllersRecursive(t[i],"".concat(e,".").concat(i))));else if("string"==typeof t){var i=this._getInstancePath("".concat(e,".").concat(t)),r=Urso.getInstance(i);r||Urso.logger.error("Wrong UI controllers path '".concat(i,"'!")),r.init()}else Urso.logger.error("Wrong UI controllers config!")}}},2743:(t,e,i)=>{Urso.SlotBase.Modules.Logic.Ui.Info={BetController:i(8901),TotalBetController:i(4324),BalanceController:i(4690),LinesController:i(3060),WinController:i(9609),ClockController:i(2286),CheeringController:i(9682)}},4690:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.SlotBase.Modules.Logic.Ui.BaseUiElementController{constructor(){super(...arguments),e(this,"_class","balanceVal"),e(this,"_updateHandler",(()=>this._update())),e(this,"_makeBetHandler",(()=>this._makeBet()))}_setText(){return this._getFormattedBalance()}_getFormattedBalance(){var t=Urso.localData.get("balance.totalAmount");return"".concat(t.toFixed(2)).concat(this._currency)}_checkVisible(){return!0}_update(){this._updateUiState()}_makeBet(){var t=Urso.localData.get("balance"),e=Urso.localData.get("totalBet"),i=+(t.totalAmount-e.value).toFixed(2);Urso.localData.set("balance.totalAmount",i),this._update()}_extendedSubscribeOnce(){super._extendedSubscribeOnce(),this.addListener("modules.logic.ui.balance.update",this._updateHandler,!0),this.addListener("modules.logic.ui.balance.makeBet",this._makeBetHandler,!0)}}t.exports=i},8901:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.SlotBase.Modules.Logic.Ui.BaseUiElementController{constructor(){super(...arguments),e(this,"_class","betVal"),e(this,"_updateHandler",(()=>this._update())),e(this,"_increaseHandler",(()=>this._increase())),e(this,"_decreaseHandler",(()=>this._decrease())),e(this,"_setMaxHandler",(()=>this._setMax())),e(this,"_setHandler",(t=>this._set(t)))}_setText(){return this._getFormattedBet()}_getFormattedBet(){var t=Urso.localData.get("bets.value");return"".concat(t.toFixed(2)).concat(this._currency)}_checkVisible(){return!0}_update(){this._updateUiState(),this.emit("modules.logic.ui.bet.updated")}_increase(){var{bets:t,value:e}=Urso.localData.get("bets"),i=t.indexOf(e),r=t[i+1]?i+1:0;Urso.localData.set("bets.value",t[r]),this._update()}_decrease(){var{bets:t,value:e}=Urso.localData.get("bets"),i=t.indexOf(e),r=t[i-1]?i-1:t.length-1;Urso.localData.set("bets.value",t[r]),this._update()}_setMax(){var{bets:t}=Urso.localData.get("bets");Urso.localData.set("bets.value",t[t.length-1]),this._update()}_set(t){var{bets:e}=Urso.localData.get("bets");return e.includes(t)?(Urso.localData.set("bets.value",t),this._update(),!0):(Urso.logger.error("There is no '".concat(t,"' in bets config!")),!1)}_extendedSubscribeOnce(){super._extendedSubscribeOnce(),this.addListener("modules.logic.ui.bet.update",this._updateHandler,!0),this.addListener("modules.logic.ui.bet.increase",this._increaseHandler,!0),this.addListener("modules.logic.ui.bet.decrease",this._decreaseHandler,!0),this.addListener("modules.logic.ui.bet.setMax",this._setMaxHandler,!0),this.addListener("modules.logic.ui.bet.set",this._setHandler,!0)}}t.exports=i},9682:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.SlotBase.Modules.Logic.Ui.BaseUiElementController{constructor(){super(...arguments),e(this,"_class","cheeringText"),e(this,"_wasFirstSpin",!1)}_setText(){return this._cheeringText}_checkVisible(){return!0}get _lastWin(){return Urso.localData.get("slotMachine.spinStages.0.slotWin.totalWin")||0}_stateChanged(t){super._stateChanged(t),"START_SPIN"===this._state&&(this._wasFirstSpin=!0)}get _cheeringText(){var t="Good luck";return["SHOW_WIN","IDLE"].includes(this._state)&&this._wasFirstSpin&&(t=this._lastWin>0?"WIN":"Try again"),t}}t.exports=i},2286:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.SlotBase.Modules.Logic.Ui.BaseUiElementController{constructor(){super(...arguments),e(this,"_class","clockVal"),e(this,"_interval",null)}init(){this._startTime()}_checkVisible(){return!0}_startTime(){this._updateUiState(),this._interval=setInterval((()=>this._updateUiState()),1e3)}_getFormattedTime(){var t=new Date,e=Urso.helper.ldgZero(t.getMinutes(),2),i=Urso.helper.ldgZero(t.getHours(),2);return"".concat(i,":").concat(e)}_setText(){return this._getFormattedTime()}}t.exports=i},3060:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.SlotBase.Modules.Logic.Ui.BaseUiElementController{constructor(){super(...arguments),e(this,"_class","linesVal"),e(this,"_updateLineHandler",(()=>this._updateUiState()))}_setText(){return Urso.localData.get("lines.value")}_checkVisible(){return!0}_extendedSubscribeOnce(){super._extendedSubscribeOnce(),this.addListener("modules.logic.ui.line.updated",this._updateLineHandler,!0)}}t.exports=i},4324:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.SlotBase.Modules.Logic.Ui.BaseUiElementController{constructor(){super(...arguments),e(this,"_class","totalBetVal"),e(this,"_updatedHandler",(()=>this._updated()))}_setText(){var t=Urso.localData.get("bets"),e=Urso.localData.get("lines"),i=Urso.localData.get("coins"),r=t.value*e.value*i.value;return Urso.localData.set("totalBet.value",r),this._getFormattedText(r)}_getFormattedText(t){return"".concat(t.toFixed(2)).concat(this._currency)}_checkVisible(){return!0}_updated(){this._updateUiState()}_extendedSubscribeOnce(){super._extendedSubscribeOnce(),this.addListener("modules.logic.ui.bet.updated",this._updatedHandler,!0),this.addListener("modules.logic.ui.line.updated",this._updatedHandler,!0)}}t.exports=i},9609:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.SlotBase.Modules.Logic.Ui.BaseUiElementController{constructor(){super(...arguments),e(this,"_class","winVal"),e(this,"_lastWin",0),e(this,"_resetHandler",(()=>this._reset())),e(this,"_showHandler",(t=>this._show(t)))}_setText(){return 0===this._lastWin?"":"".concat(this._lastWin.toFixed(2)).concat(this._currency)}_checkVisible(){return!0}_reset(){this._lastWin=0,this._updateUiState()}_show(t){this._lastWin=t,this._updateUiState()}_extendedSubscribeOnce(){super._extendedSubscribeOnce(),this.addListener("modules.logic.ui.win.show",this._showHandler,!0),this.addListener("modules.logic.ui.win.reset",this._resetHandler,!0)}}t.exports=i},5201:(t,e,i)=>{Urso.SlotBase.Modules.StatesManager={ConfigStates:i(9557)},i(160)},160:(t,e,i)=>{Urso.SlotBase.Modules.StatesManager.Actions={BaseTransportAction:i(840),TransportInitAction:i(1964),ServerSpinRequestAction:i(286),ServerBalanceRequestAction:i(9364),WaitingForInteractionAction:i(8666),UpdateServerSettingsAction:i(4983),ServerApiVersionRequestAction:i(7239),ServerCheckBrokenGameRequestAction:i(7401),ServerAuthRequestAction:i(6001),LoadDefaultSceneAction:i(8660),InitUiLogicAction:i(1104),UpdateBalanceAction:i(1666),MakeBetAction:i(9530),UpdateWinTextAction:i(650),ResetWinTextAction:i(786)}},8022:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.Core.Modules.StatesManager.Action{constructor(){super(...arguments),e(this,"event",null),e(this,"name",null),e(this,"_actionFinish",super._onFinish),e(this,"_eventHandler",(t=>this._processEvent(t)))}guard(){return!0}_processEvent(t){var e=t&&t.data?t.data:{};this._postProcessEvent(e)&&(this._removeListeners(),super._onFinish())}_postProcessEvent(){return!0}_preProcessEvent(){}_onFinish(){this.name&&this.event?(this._addListeners(),this._preProcessEvent()):Urso.logger.error("There no name: '".concat(this.name,"' or event: '").concat(this.event,"'"))}_addListeners(){this.addListener(this.event,this._eventHandler,!0)}_removeListeners(){this.removeListener(this.event,this._eventHandler,!0)}}t.exports=i},840:(t,e,i)=>{function r(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n=i(8022);t.exports=class extends n{constructor(){super(...arguments),r(this,"serverActionType",null),r(this,"event","modules.transport.receive")}guard(){return Urso.config.useTransport}_processEvent(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.serverActionType&&this.serverActionType!==t.type?null:super._processEvent(t)}sendRequest(t,e){this.emit("modules.transport.send",{requestName:t,data:e})}}},1104:t=>{class e extends Urso.Core.Modules.StatesManager.Action{constructor(){var t,e,i;super(...arguments),t=this,i="initUiLogicAction",(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="name"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}guard(){return!0}_initUiLogic(){Urso.getInstance("Modules.Logic.Ui.Controller").init()}_onFinish(){this._initUiLogic(),super._onFinish()}}t.exports=e},8660:(t,e,i)=>{function r(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n=i(8022);t.exports=class extends n{constructor(){super(...arguments),r(this,"name","loadDefaultSceneAction"),r(this,"event",Urso.events.MODULES_SCENES_DISPLAY_FINISHED)}_preProcessEvent(){Urso.scenes.display(Urso.config.defaultScene)}}},9530:t=>{class e extends Urso.Core.Modules.StatesManager.Action{constructor(){var t,e,i;super(...arguments),t=this,i="updateBalanceAction",(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="name"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}guard(){return!0}_onFinish(){this.emit("modules.logic.ui.balance.makeBet"),super._onFinish()}}t.exports=e},786:t=>{class e extends Urso.Core.Modules.StatesManager.Action{constructor(){var t,e,i;super(...arguments),t=this,i="resetWinTextAction",(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="name"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}guard(){return!0}_onFinish(){this.emit("modules.logic.ui.win.reset"),super._onFinish()}}t.exports=e},7239:(t,e,i)=>{var r=i(840);t.exports=class extends r{constructor(){var t,e,i;super(...arguments),t=this,i="serverApiVersionRequestAction",(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="name"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}_postProcessEvent(t){var{transportConfig:e}=t,{reconnectTimeout:i}=e;return Urso.localData.set("transport.reconnectTimeout",i),!0}_preProcessEvent(){this.sendRequest("ApiVersionRequest")}}},6001:(t,e,i)=>{var r=i(840);t.exports=class extends r{constructor(){var t,e,i;super(...arguments),t=this,i="serverAuthRequestAction",(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="name"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}_postProcessEvent(t){var{betMultiplier:e,bets:i,coinValues:r,defaultBet:n,defaultCoinValue:s,defaultLines:o,extrabet:a,gameParameters:h,sessionId:l}=t;this._sesId=l;var{avaliableLines:u,payouts:c,initialSymbols:d}=h,p=o[o.length-1];return Urso.localData.set("extraBet",{betMultiplier:e,extrabet:a}),Urso.localData.set("coins",{coins:r,value:s}),Urso.localData.set("bets",{bets:i,value:n}),Urso.localData.set("linesCfg",u),Urso.localData.set("lines",{lines:o,value:p}),Urso.localData.set("payoutsCfg",c),Urso.localData.set("slotMachine.initialSymbols",d),!0}_preProcessEvent(){this.sendRequest("AuthRequest")}}},9364:(t,e,i)=>{var r=i(840);t.exports=class extends r{constructor(t){var e,i,r;super(t),e=this,r="serverBalanceRequestAction",(i=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(i="name"))in e?Object.defineProperty(e,i,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[i]=r,this.name="serverBalanceRequestAction"}guard(){return!0}_postProcessEvent(t){var{currency:e,totalAmount:i}=t;return Urso.localData.set("balance",{currency:e,totalAmount:i}),!0}_preProcessEvent(){this.sendRequest("BalanceRequest")}}},7401:(t,e,i)=>{var r=i(840);t.exports=class extends r{constructor(){var t,e,i;super(...arguments),t=this,i="serverCheckBrokenGameRequestAction",(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="name"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}_processEvent(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.serverActionType&&this.serverActionType!==t.type?null:super._processEvent(t)}_preProcessEvent(){this.sendRequest("CheckBrokenGameRequest")}}},286:(t,e,i)=>{function r(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n=i(840);t.exports=class extends n{constructor(){super(...arguments),r(this,"name","serverSpinRequestAction"),r(this,"serverActionType","Spin")}_postProcessEvent(t){Urso.localData.set("slotMachine",t);var e=Urso.localData.get("slotMachine.spinStages.0.slotWin.canGamble");return Urso.localData.set("gamble.canGamble",e),!0}_preProcessEvent(){var t=Urso.localData.get("lines"),e=Urso.localData.get("coins"),i=Urso.localData.get("bets"),r=Urso.localData.get("extraBet"),n=Urso.localData.get("sessionId"),s=new Array(t.value).fill(1).map(((t,e)=>e)),o={coin:e.value,bet:i.value,extraBet:r.value,lines:s};this.sendRequest("SpinRequest",{sessionId:n,data:o})}}},1964:(t,e,i)=>{function r(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n=i(840);t.exports=class extends n{constructor(){super(...arguments),r(this,"name","transportInitAction"),r(this,"event","modules.transport.ready")}_preProcessEvent(){Urso.transport.init()}}},1666:t=>{class e extends Urso.Core.Modules.StatesManager.Action{constructor(){var t,e,i;super(...arguments),t=this,i="updateBalanceAction",(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="name"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}guard(){return!0}_onFinish(){this.emit("modules.logic.ui.balance.update"),super._onFinish()}}t.exports=e},4983:t=>{class e extends Urso.Core.Modules.StatesManager.Action{constructor(){var t,e,i;super(...arguments),t=this,i="updateServerSettingsAction",(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="name"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}guard(){return!0}_updateServerSettings(){}_onFinish(){this._updateServerSettings(),super._onFinish()}}t.exports=e},650:t=>{class e extends Urso.Core.Modules.StatesManager.Action{constructor(){var t,e,i;super(...arguments),t=this,i="updateWinTextAction",(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e="name"))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}_getWin(){return Urso.localData.get("slotMachine.spinStages.0.slotWin.totalWin")}guard(){return+this._getWin()>0}_updateWinText(){this.emit("modules.logic.ui.win.show",+this._getWin())}_onFinish(){this._updateWinText(),super._onFinish()}}t.exports=e},8666:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.Core.Modules.StatesManager.Action{constructor(){super(...arguments),e(this,"name","waitingForInteractionAction"),e(this,"_interactDoneHandler",(()=>this._interactDone())),e(this,"_keyPressHandler",(t=>this._keyPress(t)))}guard(){return!0}terminate(){super.terminate(),this._interactDone()}_interactDone(){Urso.observer.remove("modules.logic.ui.interact.done",this._interactDoneHandler,!0),document.removeEventListener("keypress",this._keyPressHandler),super._onFinish()}_keyPress(t){"Space"===t.code&&this._interactDone()}_onFinish(){this._terminating||(Urso.observer.add("modules.logic.ui.interact.done",this._interactDoneHandler,!0),document.addEventListener("keypress",this._keyPressHandler))}}t.exports=i},9557:t=>{class e extends Urso.Core.Modules.StatesManager.ConfigStates{constructor(){super(),this.contents={INIT_GAME:{sequence:[{all:[{sequence:[{action:"updateServerSettingsAction"},{action:"transportInitAction"},{action:"serverApiVersionRequestAction"},{action:"serverCheckBrokenGameRequestAction"},{action:"serverAuthRequestAction"},{action:"serverBalanceRequestAction"}]},{sequence:[{action:"loadDefaultSceneAction"},{action:"finishGameInitAction"}]}]},{all:[{action:"initUiLogicAction"},{action:"updateBalanceAction"},{action:"updateBetLinesAction"},{action:"hideLoaderAction"}]}]},IDLE:{race:[{action:"showWinlinesAnimationByOneAction"},{action:"waitingForInteractionAction"},{action:"resumeAutospinAction"}]},RESET_WIN_STATE:{all:[{action:"resetWinTextAction"}]},START_SPIN:{sequence:[{action:"makeBetAction"},{action:"regularSpinStartAction"},{action:"serverSpinRequestAction"},{action:"updateSlotMachineDataAction"}]},FINISH_SPIN:{race:[{action:"finishingSpinAction"},{action:"waitingForInteractionAction"}]},SHOW_WIN:{sequence:[{all:[{action:"showWinlinesAnimationAllAction"},{race:[{action:"waitingForInteractionAction"},{action:"showWinCounterAction"}]}]},{action:"updateWinTextAction"},{all:[{action:"serverBalanceRequestAction"}]}]}}}get(){return this.contents}}t.exports=e},5750:(t,e,i)=>{Urso.SlotBase.Modules.Transport={BaseModel:i(4691),Controller:i(2863)},i(6302)},4691:t=>{t.exports=class{constructor(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.action=t,this.result=!0,this.sesId=e,this.data=i}}},2863:t=>{function e(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i extends Urso.Core.Modules.Transport.Controller{constructor(){super(...arguments),e(this,"sendRequestHandler",(t=>this.sendRequest(t))),e(this,"onTransportReadyHandler",(()=>this.onTransportReady())),e(this,"onTransportMessageHandler",(t=>this.onTransportMessage(t)))}init(){this._updateService(),this.setupServerCommunication(),this._service.init()}sendRequest(t){var{requestName:e,data:i}=t,r=Urso.helper.capitaliseFirstLetter(e),n=this.getInstance("Models.".concat(r),i);return n?(Urso.transport.send(n),!0):(Urso.logger.error("Transport model ".concat(e," not found!")),!1)}onTransportReady(){this.emit("modules.transport.ready",null,100)}onTransportMessage(t){if(!t)return!1;var{action:e="",data:i={}}=t,r=e.replace("Response","");return this.emit("modules.transport.receive",{type:r,data:i}),!0}setupServerCommunication(){Urso.transport.setReadyHandler(this.onTransportReadyHandler),Urso.transport.setResponseHandler(this.onTransportMessageHandler)}_subscribeOnce(){this.addListener("modules.transport.send",this.sendRequestHandler.bind(this),!0)}}t.exports=i},6302:(t,e,i)=>{Urso.SlotBase.Modules.Transport.Models={ApiVersionRequest:i(2231),AuthRequest:i(6970),BalanceRequest:i(8883),CheckBrokenGameRequest:i(3533),SpinRequest:i(3075),GambleRequest:i(9470),PickBonusRequest:i(1149)}},2231:t=>{class e extends Urso.SlotBase.Modules.Transport.BaseModel{constructor(){super("ApiVersionRequest",!1,{})}}t.exports=e},6970:t=>{class e extends Urso.SlotBase.Modules.Transport.BaseModel{constructor(){super("AuthRequest",!1,{})}}t.exports=e},8883:t=>{class e extends Urso.SlotBase.Modules.Transport.BaseModel{constructor(){var{sessionId:t,data:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super("BalanceRequest",t,e)}}t.exports=e},3533:t=>{class e extends Urso.SlotBase.Modules.Transport.BaseModel{constructor(){super("CheckBrokenGameRequest",!1,{})}}t.exports=e},9470:t=>{class e extends Urso.SlotBase.Modules.Transport.BaseModel{constructor(t){var{sessionId:e,data:i}=t;super("GambleRequest",e,i)}}t.exports=e},1149:t=>{class e extends Urso.SlotBase.Modules.Transport.BaseModel{constructor(t){var{sessionId:e,data:i}=t;super("PickBonusRequest",e,i)}}t.exports=e},3075:t=>{class e extends Urso.SlotBase.Modules.Transport.BaseModel{constructor(t){var{sessionId:e,data:i}=t;super("SpinRequest",e,i)}}t.exports=e},9658:t=>{class e extends Urso.Core.App{run(){Urso.statesManager.start()}}t.exports=e},8450:()=>{(()=>{var t={8372:(t,e,i)=>{Urso.Core.Components={},i(812),i(4123),i(7682),i(7953),i(7328),i(9342),i(3665),i(3767)},812:(t,e,i)=>{Urso.Core.Components.Base={Controller:i(1091)}},1091:t=>{t.exports=class{constructor(t){this._templateName="Template",this._inputValidation(t),this.common={find:null,findAll:null,findOne:null,object:null},this.options=t}_requiredOptionsModel(){}_inputValidation(t){var e=this._requiredOptionsModel();if(e)for(var i in e)t&&typeof t[i]===e[i]||Urso.logger.error("Component params model error",this)}loadUpdate(){}assetsMount(){var t=this.getInstance(this._templateName);return{styles:t.styles,assets:t.assets}}objectsMount(){return this.getInstance(this._templateName).objects}create(){}update(t){}_subscribeOnce(){}destroy(){}}},4123:(t,e,i)=>{Urso.Core.Components.Debug={Controller:i(2598),Coords:i(1920),Fps:i(3590),Template:i(3872),Timescale:i(8282)}},2598:(t,e,i)=>{ComponentsBaseController=i(1091);class r extends ComponentsBaseController{constructor(t){super(t),this._logicBlocks=["coords","fps","timescale"],this._visible=!0,this._comObject=!1,this._created}create(){return this._created=!0,this._comObject=this.common.findOne("^debugContainer"),this._show(!0),Urso.helper.logicBlocksDo(this,"create"),!0}update(){this._created&&Urso.helper.logicBlocksDo(this,"update")}_show(t){this._visible=void 0!==t?t:!this._visible,this._comObject.visible=this._visible}}t.exports=r},1920:t=>{t.exports=class{constructor(){this._coordsText,this.create=this.create.bind(this),this.update=this.update.bind(this)}create(){return this._coordsText=this.common.findOne("^debugCoords"),this.update(),!0}update(){var t=Urso.scenes.getMouseCoords();this._coordsText.text="x:"+Math.floor(t.x)+"; y:"+Math.floor(t.y)}}},3590:t=>{t.exports=class{constructor(){this._coordsText,this.create=this.create.bind(this),this.update=this.update.bind(this),this.lastUpdateTime=0,this.frames=0}create(){return this._coordsText=this.common.findOne("^debugFps"),this.update(),!0}update(){var t=Urso.time.get();if(this.frames++,!(t-this.lastUpdateTime<1e3)){var e=Math.round(1e3*this.frames/(t-this.lastUpdateTime));this.lastUpdateTime=t,this.frames=0;var i=Urso.scenes.getFpsData();this._coordsText.text="fps: ".concat(e,", sceneFps: ").concat(i.fps,", limit: ").concat(i.limit)}}}},3872:t=>{t.exports=class{constructor(){this.objects=[{type:Urso.types.objects.CONTAINER,name:"debugContainer",contents:[{type:Urso.types.objects.TEXT,name:"debugCoords",text:"x:0, y:0",fontFamily:"Helvetica",fontSize:15,fill:"#00FF00"},{type:Urso.types.objects.TEXT,name:"debugFps",text:"fps: 0",y:15,fontFamily:"Helvetica",fontSize:15,fill:"#00FF00"},{type:Urso.types.objects.TEXT,name:"debugTimescaleValue",text:"1",x:"50%",y:"30%",visible:!1,anchorX:.5,anchorY:.5,fontFamily:"Verdana",fontSize:100,fontStyle:"italic",fontWeight:"bold",fill:["#ffffff","#00ff99"],stroke:"#4a1850",strokeThickness:5,dropShadow:!0,dropShadowColor:"#000000",dropShadowBlur:4,dropShadowAngle:Math.PI/6,dropShadowDistance:6}]}]}}},8282:t=>{t.exports=class{constructor(){this._timescaleText,this.create=this.create.bind(this),this.scaleStep=.5,this.scaleInfoDuration=2e3,this._minusButtonsCodes=[109,189],this._plusButtonsCodes=[107,187],this._hideId}create(){return document.addEventListener("keydown",this.keyPressTest.bind(this)),this._timescaleText=this.common.findOne("^debugTimescaleValue"),!0}keyPressTest(t){var e=window.event?event:t;if(e.altKey){var i=0;if(this._minusButtonsCodes.includes(e.keyCode)&&(i=-1),this._plusButtonsCodes.includes(e.keyCode)&&(i=1),i){var r=Urso.scenes.timeScale>=1?this.scaleStep*i:this.scaleStep*i*.1,n=Urso.scenes.timeScale+r;n<.1&&(n=.1),Urso.scenes.timeScale=Urso.math.roundToDigits(n,2),this._timescaleText.text=Urso.scenes.timeScale,this._timescaleText.visible=!0,this._hideId&&clearTimeout(this._hideId),this._hideId=setTimeout((()=>this._timescaleText.visible=!1),this.scaleInfoDuration)}}}}},7682:(t,e,i)=>{Urso.Core.Components.DeviceRotate={Controller:i(1542)}},1542:(t,e,i)=>{ComponentsBaseController=i(1091);class r extends ComponentsBaseController{constructor(t){super(t),this._div=null,this._orientation=null,this._resolutionsConfig=null}create(){Urso.device.desktop||(this._resolutionsConfig=Urso.getInstance("Modules.Scenes.ResolutionsConfig").contents||[],this._createDom(),this._updateOrientation(),this._updateVisibility())}_createDom(){this._div=document.createElement("div"),this._div.className="fullscreen",this._div.style.touchAction="none",this._div.style.visibility="hidden",document.body.prepend(this._div);var t=document.createElement("div");t.className="fullscreen-info",this._div.appendChild(t);var e=document.createElement("img");e.src="/assets/images/fullscreen/rotate.png";var i=document.createElement("span");i.innerText="Please rotate device",t.appendChild(e),t.appendChild(i)}get _showOnLandscape(){return!this._resolutionsConfig.find((t=>t.orientation===Urso.device.ScreenOrientation.LANDSCAPE))}get _showOnPortrait(){return!this._resolutionsConfig.find((t=>t.orientation===Urso.device.ScreenOrientation.PORTRAIT))}get _isPortrait(){return this._orientation===Urso.device.ScreenOrientation.PORTRAIT}get _needShow(){return this._orientation===Urso.device.ScreenOrientation.PORTRAIT&&this._showOnPortrait||this._orientation!==Urso.device.ScreenOrientation.PORTRAIT&&this._showOnLandscape}set _isVisible(t){this._div.style.visibility=t?"visible":"hidden"}_updateOrientation(){this._orientation=innerWidth>innerHeight?Urso.device.ScreenOrientation.LANDSCAPE:Urso.device.ScreenOrientation.PORTRAIT}_updateVisibility(){this._isVisible=this._needShow}_resizeHandler(){this._updateOrientation(),this._updateVisibility()}_subscribeOnce(){Urso.device.desktop||this.addListener(Urso.events.EXTRA_BROWSEREVENTS_WINDOW_RESIZE,this._resizeHandler.bind(this))}}t.exports=r},7953:(t,e,i)=>{Urso.Core.Components.Fullscreen={Android:i(9807),Controller:i(3339),Desktop:i(1742),Ios:i(628)}},9807:t=>{t.exports=class{constructor(){this._div=null,this._orientation=null}init(){this._createDom(),this._addListeners(),this._updateOrientation(),this._updateResize()}_createDom(){this._div=document.createElement("div"),this._div.className="fullscreen fullscreen-android",document.body.prepend(this._div);var t=document.createElement("div");t.className="fullscreen-info",this._div.appendChild(t);var e=document.createElement("img");e.src="/assets/images/fullscreen/hand.png";var i=document.createElement("span");i.innerText="Tap to enter fullscreen",t.appendChild(e),t.appendChild(i)}_updateOrientation(){this._orientation=innerWidth>innerHeight?Urso.device.ScreenOrientation.LANDSCAPE:Urso.device.ScreenOrientation.PORTRAIT}get isFullscreen(){return document.webkitIsFullScreen||document.mozFullScreen||document.fullscreen}get _orientationsConfig(){return Urso.getInstance("Modules.Scenes.ResolutionsConfig").contents||[]}get _isPortrait(){return this._orientation===Urso.device.ScreenOrientation.PORTRAIT}get _needShowOnCurrentOrientation(){return this._isPortrait&&this._showOnPortrait||!this._isPortrait&&this._showOnLandscape}get _showOnLandscape(){return this._orientationsConfig.find((t=>t.orientation===Urso.device.ScreenOrientation.LANDSCAPE))}get _showOnPortrait(){return this._orientationsConfig.find((t=>t.orientation===Urso.device.ScreenOrientation.PORTRAIT))}set isVisible(t){this._div.style.visibility=t?"visible":"hidden"}_requestFullscreen(){document.body.webkitRequestFullScreen?document.body.webkitRequestFullScreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.requestFullScreen&&document.body.requestFullScreen()}_updateResize(){this.isVisible=this._needShowOnCurrentOrientation&&!this.isFullscreen}_resizeHandler(){this._updateOrientation(),this._updateResize()}_addListeners(){window.addEventListener("touchend",(t=>{this.isFullscreen||this._requestFullscreen(),this._updateResize()}))}_subscribeOnce(){this.addListener(Urso.events.EXTRA_BROWSEREVENTS_WINDOW_RESIZE,this._resizeHandler.bind(this))}}},3339:(t,e,i)=>{ComponentsBaseController=i(1091);class r extends ComponentsBaseController{constructor(t){super(t),this._fullscreenActivator=null,this._resolutionsConfig=null,this.lastResizeFullscreenResult,this.createActivator(),this._resizeHandler()}createActivator(){this._isCriOS||(this._resolutionsConfig=Urso.getInstance("Modules.Scenes.ResolutionsConfig").contents||[],Urso.device.desktop?this._fullscreenActivator=this.getInstance("Desktop"):Urso.device.iOS?this._fullscreenActivator=this.getInstance("Ios"):Urso.device.android&&(this._fullscreenActivator=this.getInstance("Android")),this._fullscreenActivator&&this._fullscreenActivator.init())}get _isCriOS(){return navigator.userAgent.includes("CriOS")}get _orientationsConfig(){return Urso.getInstance("Modules.Scenes.ResolutionsConfig")._orientations||[]}get _showOnLandscape(){return this._resolutionsConfig.find((t=>t.orientation===Urso.device.ScreenOrientation.LANDSCAPE))}get _showOnPortrait(){return this._resolutionsConfig.find((t=>t.orientation===Urso.device.ScreenOrientation.PORTRAIT))}get _isPortrait(){return innerWidth>innerHeight?Urso.device.ScreenOrientation.PORTRAIT:Urso.device.ScreenOrientation.LANDSCAPE}get isFullscreen(){return!!this._fullscreenActivator&&this._fullscreenActivator.isFullscreen}_resizeHandler(){var t=this.isFullscreen;this.lastResizeFullscreenResult!==t&&(this.lastResizeFullscreenResult=t,Urso.localData.set("fullscreen.isFullscreen",t),this.emit(Urso.events.COMPONENTS_FULLSCREEN_CHANGE,t))}_subscribeOnce(){this.addListener(Urso.events.EXTRA_BROWSEREVENTS_WINDOW_RESIZE,this._resizeHandler.bind(this))}}t.exports=r},1742:t=>{t.exports=class{init(){}get isFullscreen(){return document.webkitIsFullScreen||document.mozFullScreen||document.fullscreen}_requestFullscreen(){document.body.webkitRequestFullScreen?document.body.webkitRequestFullScreen():document.body.mozRequestFullScreen?document.body.mozRequestFullScreen():document.body.requestFullScreen&&document.body.requestFullScreen()}_cancelFullscreen(){document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.cancelFullScreen&&document.cancelFullScreen()}_switchFullscreen(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===t&&(t=!this.isFullscreen),t?this._requestFullscreen():this._cancelFullscreen()}_fullscreenSwitchHandler(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._switchFullscreen(t)}_subscribeOnce(){this.addListener(Urso.events.COMPONENTS_FULLSCREEN_SWITCH,this._fullscreenSwitchHandler.bind(this))}}},628:t=>{t.exports=class{constructor(){this._div=null,this._orientation=null,this._scrollTimeout=null}init(){this._createDom(),this._addListeners(),this._updateResize()}_createDom(){this._div=document.createElement("div"),this._div.className="fullscreen fullscreen-ios",document.body.prepend(this._div);var t=document.createElement("div");t.className="fullscreen-info",this._div.appendChild(t);var e=document.createElement("img");e.src="/assets/images/fullscreen/scroll.png";var i=document.createElement("span");i.innerText="Swipe up to enter fullscreen",t.appendChild(e),t.appendChild(i)}_addListeners(){window.addEventListener("touchmove",(t=>{this._updateResize(),t.touches.length>1&&t.preventDefault()}))}get isFullscreen(){return this._isFullscreen}get _isFullscreen(){var t=screen.width/screen.height,e=this._isPortrait?innerWidth/innerHeight:innerHeight/innerWidth;return!(this._isPortrait?e-t<.1:e>.51)}_updateOrientation(){this._orientation=innerWidth>innerHeight?Urso.device.ScreenOrientation.LANDSCAPE:Urso.device.ScreenOrientation.PORTRAIT}_updateResize(){this._updateOrientation(),this.isVisible=this._needShowOnCurrentOrientation&&this._isFullscreen}get _orientationsConfig(){return Urso.getInstance("Modules.Scenes.ResolutionsConfig").contents||[]}get _isPortrait(){return this._orientation===Urso.device.ScreenOrientation.PORTRAIT}get _needShowOnCurrentOrientation(){return this._isPortrait&&this._showOnPortrait||!this._isPortrait&&this._showOnLandscape}get _showOnLandscape(){return this._orientationsConfig.find((t=>t.orientation===Urso.device.ScreenOrientation.LANDSCAPE))}get _showOnPortrait(){return this._orientationsConfig.find((t=>t.orientation===Urso.device.ScreenOrientation.PORTRAIT))}set isVisible(t){this._div.style.zIndex=t?1:-1,clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout((()=>{t&&window.scrollTo(0,0)}),200)}_resizeHandler(){this._updateResize()}_fullscreenSwitchHandler(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._switchFullscreen(t)}_subscribeOnce(){this.addListener(Urso.events.EXTRA_BROWSEREVENTS_WINDOW_RESIZE,this._resizeHandler.bind(this))}}},7328:(t,e,i)=>{Urso.Core.Components.LayersSwitcher={Controller:i(3873),Config:i(3194)}},3194:t=>{t.exports=class{constructor(){this.allLayers=["^granny","^mainButton","^logo",".backround","^bonusPopup",".baseGame",".bonusGame"],this.groupsLayers={mainElements:["^logo","^mainButton",".baseGame"],background:[".backround"],granny:["^granny"],bonusGame:[".bonusGame","^bonusPopup"]}}}},3873:t=>{class e extends Urso.Core.Components.Base.Controller{constructor(){super(...arguments),this._config=this.getInstance("Config")}_showGroup(t){var e=this._config.groupsLayers[t];e?this._config.allLayers.forEach((t=>{var i=!!e.includes(t);Urso.findAll(t).forEach((t=>{t.visible=i}))})):Urso.logger.error("ComponentsLayersSwitcherController: group '".concat(t,"' was not found!"))}_subscribeOnce(){this.addListener(Urso.events.COMPONENTS_LAYERS_SWITCHER_SWITCH,(t=>{this._showGroup(t)}))}}t.exports=e},9342:(t,e,i)=>{Urso.Core.Components.Loader={Controller:i(3642),Template:i(1093)}},3642:t=>{class e extends Urso.Core.Components.Base.Controller{constructor(t){super(t),Urso.objects.create(this.getInstance("Template").objects)}assetsMount(){return!1}objectsMount(){return!1}loadUpdate(t){this.setLoadProgress(t)}create(){this.setMask()}setMask(){this.loaderBg&&this.loaderBgMask&&(this.loaderBg._baseObject.mask=this.loaderBgMask._baseObject)}formatAmountText(t){return"".concat(t,"%")}setLoadProgress(t){this.componentCreated&&(this.loaderBgMask._baseObject.scale.x=t,this.loadAmountText.text=this.formatAmountText(t))}get componentCreated(){return!!this.loadAmountText&&!!this.loaderBg&&!!this.loaderBgMask}get loadAmountText(){return Urso.findOne(".loadAmountText")}get loaderBg(){return Urso.findOne("^loaderBg")}get loaderBgMask(){return Urso.findOne("^loaderBgMask")}}t.exports=e},1093:t=>{t.exports=class{constructor(){this.styles={".loadingTextStyle":{fill:16777215,fontSize:32,fontWeight:"bold"}},this.assets=[],this.objects=[{type:Urso.types.objects.CONTAINER,name:"loaderContainer",contents:[{type:Urso.types.objects.GRAPHICS,name:"bgLoader",figure:{rectangle:[0,20,500,20],fillColor:6747458}},{type:Urso.types.objects.CONTAINER,contents:[{type:Urso.types.objects.GRAPHICS,figure:{rectangle:[4,24,492,13]}},{type:Urso.types.objects.GRAPHICS,name:"loaderBg",figure:{rectangle:[4,24,492,13],fillColor:6747458}},{type:Urso.types.objects.GRAPHICS,name:"loaderBgMask",figure:{rectangle:[4,24,492,13]}},{type:Urso.types.objects.CONTAINER,x:260,y:50,contents:[{type:Urso.types.objects.TEXT,class:"loadingTextStyle loadAmountText",anchorX:.5,text:"100%"}]}]}]}]}}},3665:(t,e,i)=>{Urso.Core.Components.SoundInitialPopup={Controller:i(9249),Template:i(8161)}},9249:(t,e,i)=>{ComponentsBaseController=i(1091);class r extends ComponentsBaseController{constructor(){super(),this.yesButton=null,this.noButton=null}create(){this.yesButton=this.common.findOne("^soundInitialPopupButtonYesGraphics"),this.noButton=this.common.findOne("^soundInitialPopupButtonNoGraphics")}_tintHandler(t){var{buttonName:e,pointerOver:i}=t;("yes"===e?this.yesButton:this.noButton)._baseObject.tint=i?13942377:16777215}_buttonPressHandler(t){var{name:e}=t;switch(e){case"soundInitialPopupButtonYesHit":this.emit(Urso.events.MODULES_SOUND_MANAGER_SET_GLOBAL_VOLUME,1);break;case"soundInitialPopupButtonNoHit":this.emit(Urso.events.MODULES_SOUND_MANAGER_SET_GLOBAL_VOLUME,0);break;default:return}this.common.object.visible=!1}_subscribeOnce(){this.addListener("components.soundInitialPopup.pointerAction.popupButton",this._tintHandler.bind(this)),this.addListener(Urso.events.MODULES_OBJECTS_HIT_AREA_PRESS,this._buttonPressHandler.bind(this))}}t.exports=r},8161:t=>{t.exports=class{constructor(){this.objects=[{type:Urso.types.objects.HITAREA,x:-50,y:-50,width:2e3,height:1200},{type:Urso.types.objects.GRAPHICS,figure:{rectangle:[0,0,1920,1080],fillColor:"black"}},{type:Urso.types.objects.TEXT,y:-100,alignX:"center",alignY:"center",anchorX:.5,anchorY:.5,fill:"gray",fontFamilu:"Helvetica",fontSize:72,fontWeight:800,text:"Enable sound?"},{type:Urso.types.objects.CONTAINER,x:600,y:650,with:200,height:70,contents:[{type:Urso.types.objects.GRAPHICS,name:"soundInitialPopupButtonYesGraphics",figure:{rectangle:[0,0,200,70],fillColor:14199811}},{type:Urso.types.objects.TEXT,anchorX:.5,anchorY:.5,x:100,alignY:"center",fill:"black",fontFamilu:"Helvetica",fontSize:40,fontWeight:800,text:"YES"},{type:Urso.types.objects.HITAREA,name:"soundInitialPopupButtonYesHit",width:200,height:70,onOverCallback:()=>this.emit("components.soundInitialPopup.pointerAction.popupButton",{buttonName:"yes",pointerOver:!0}),onOutCallback:()=>this.emit("components.soundInitialPopup.pointerAction.popupButton",{buttonName:"yes",pointerOver:!1})}]},{type:Urso.types.objects.CONTAINER,x:1150,y:650,with:200,height:70,contents:[{type:Urso.types.objects.GRAPHICS,name:"soundInitialPopupButtonNoGraphics",figure:{rectangle:[0,0,200,70],fillColor:14199811}},{type:Urso.types.objects.TEXT,anchorX:.5,anchorY:.5,x:100,alignY:"center",fill:"black",fontFamilu:"Helvetica",fontSize:40,fontWeight:800,text:"NO"},{type:Urso.types.objects.HITAREA,name:"soundInitialPopupButtonNoHit",width:200,height:70,onOverCallback:()=>this.emit("components.soundInitialPopup.pointerAction.popupButton",{buttonName:"no",pointerOver:!0}),onOutCallback:()=>this.emit("components.soundInitialPopup.pointerAction.popupButton",{buttonName:"no",pointerOver:!1})}]}]}}},3767:(t,e,i)=>{Urso.Core.Components.StateDriven={Controller:i(168)}},168:(t,e,i)=>{function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}ComponentsBaseController=i(1091);class n extends ComponentsBaseController{constructor(){super(...arguments),r(this,"configStates",{}),r(this,"configActions",{}),r(this,"_finishCallbacks",{}),r(this,"_callbacksCache",{stateGuards:{},actionTerminates:{},actionGuards:{},actionRuns:{}})}callFinish(t){this._finishCallbacks[t]?(this._finishCallbacks[t](),delete this._finishCallbacks[t]):Urso.logger.error("ComponentsStateDrivenController: no finish for actionKey",t,this)}_processStates(){for(var t in this.configStates)this._callbacksCache.stateGuards[t]=this.configStates[t].guard.bind(this),Urso.statesManager.setStateGuard(t,this._callbacksCache.stateGuards[t])}_processActions(){var t=this,e=function(e){var i=t.configActions[e];if(!i.run)return Urso.logger.error("ComponentsStateDrivenController: no run function in config",e,t),"continue";t._callbacksCache.actionRuns[e]=r=>{t._saveFinish(e,r),i.run((()=>t.callFinish(e)))},Urso.statesManager.addActionRun(e,t._callbacksCache.actionRuns[e]),i.terminate&&(t._callbacksCache.actionTerminates[e]=i.terminate.bind(t),Urso.statesManager.addActionTerminate(e,t._callbacksCache.actionTerminates[e])),i.guard&&(t._callbacksCache.actionGuards[e]=i.guard.bind(t),Urso.statesManager.addActionGuard(e,t._callbacksCache.actionGuards[e]))};for(var i in this.configActions)e(i)}_saveFinish(t,e){this._finishCallbacks[t]&&Urso.logger.error("ComponentsStateDrivenController: actionKey alredy exists",t,e,this),this._finishCallbacks[t]=e}_subscribeOnce(){this._processStates(),this._processActions()}destroy(){this._removeCallback(Urso.statesManager.removeStateGuard,this._callbacksCache.stateGuards),this._removeCallback(Urso.statesManager.removeActionGuard,this._callbacksCache.actionGuards),this._removeCallback(Urso.statesManager.removeActionTerminate,this._callbacksCache.actionTerminates),this._removeCallback(Urso.statesManager.removeActionRun,this._callbacksCache.actionRuns)}_removeCallback(t,e){for(var i in e)t(i,e[i])}}t.exports=n},4534:(t,e,i)=>{i(8372),i(8754),i(3788),i(6697),i(2698)},8904:t=>{t.exports={title:"Urso",appVersion:0,mode:"development",defaultLogLevel:"ERROR,WARNING,INFO,LOG",extendingChain:["Urso.Core"],defaultScene:"play",useBinPath:!1,useTransport:!1,fps:{limit:60,optimizeLowPerformance:!1}}},8754:(t,e,i)=>{"use strict";i.r(e);var r=i(2857),n=i(331),s=i(6617),o=function(t){function e(e,i,r){void 0===e&&(e=4),void 0===i&&(i=3),void 0===r&&(r=!1),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",r?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}"),this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new s.E9,this.pixelSize=1,this._clamp=r,this._kernels=null,Array.isArray(e)?this.kernels=e:(this._blur=e,this.quality=i)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={kernels:{configurable:!0},clamp:{configurable:!0},pixelSize:{configurable:!0},quality:{configurable:!0},blur:{configurable:!0}};return e.prototype.apply=function(t,e,i,r){var n,s=this._pixelSize.x/e._frame.width,o=this._pixelSize.y/e._frame.height;if(1===this._quality||0===this._blur)n=this._kernels[0]+.5,this.uniforms.uOffset[0]=n*s,this.uniforms.uOffset[1]=n*o,t.applyFilter(this,e,i,r);else{for(var a,h=t.getFilterTexture(),l=e,u=h,c=this._quality-1,d=0;d<c;d++)n=this._kernels[d]+.5,this.uniforms.uOffset[0]=n*s,this.uniforms.uOffset[1]=n*o,t.applyFilter(this,l,u,1),a=l,l=u,u=a;n=this._kernels[c]+.5,this.uniforms.uOffset[0]=n*s,this.uniforms.uOffset[1]=n*o,t.applyFilter(this,l,i,r),t.returnFilterTexture(h)}},e.prototype._updatePadding=function(){this.padding=Math.ceil(this._kernels.reduce((function(t,e){return t+e+.5}),0))},e.prototype._generateKernels=function(){var t=this._blur,e=this._quality,i=[t];if(t>0)for(var r=t,n=t/e,s=1;s<e;s++)r-=n,i.push(r);this._kernels=i,this._updatePadding()},i.kernels.get=function(){return this._kernels},i.kernels.set=function(t){Array.isArray(t)&&t.length>0?(this._kernels=t,this._quality=t.length,this._blur=Math.max.apply(Math,t)):(this._kernels=[0],this._quality=1)},i.clamp.get=function(){return this._clamp},i.pixelSize.set=function(t){"number"==typeof t?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):t instanceof s.E9?(this._pixelSize.x=t.x,this._pixelSize.y=t.y):(this._pixelSize.x=1,this._pixelSize.y=1)},i.pixelSize.get=function(){return this._pixelSize},i.quality.get=function(){return this._quality},i.quality.set=function(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()},i.blur.get=function(){return this._blur},i.blur.set=function(t){this._blur=t,this._generateKernels()},Object.defineProperties(e.prototype,i),e}(n.wn),a=i(9907),h=i(8281),l="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",u="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\n\nuniform vec2 shift;\nuniform vec4 inputSize;\n\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);\n\n    // Premultiply alpha\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}",c=function(t){function e(e){e&&e.constructor!==Object&&(console.warn("DropShadowFilter now uses options instead of (rotation, distance, blur, color, alpha)"),e={rotation:e},void 0!==arguments[1]&&(e.distance=arguments[1]),void 0!==arguments[2]&&(e.blur=arguments[2]),void 0!==arguments[3]&&(e.color=arguments[3]),void 0!==arguments[4]&&(e.alpha=arguments[4])),e=Object.assign({rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:a.X.FILTER_RESOLUTION},e),t.call(this);var i=e.kernels,r=e.blur,n=e.quality,h=e.pixelSize,c=e.resolution;this._tintFilter=new t(l,u),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.uniforms.shift=new s.E9,this._tintFilter.resolution=c,this._blurFilter=i?new o(i):new o(r,n),this.pixelSize=h,this.resolution=c;var d=e.shadowOnly,p=e.rotation,f=e.distance,m=e.alpha,_=e.color;this.shadowOnly=d,this.rotation=p,this.distance=f,this.alpha=m,this.color=_,this._updatePadding()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={resolution:{configurable:!0},distance:{configurable:!0},rotation:{configurable:!0},alpha:{configurable:!0},color:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return e.prototype.apply=function(t,e,i,r){var n=t.getFilterTexture();this._tintFilter.apply(t,e,n,1),this._blurFilter.apply(t,n,i,r),!0!==this.shadowOnly&&t.applyFilter(this,e,i,0),t.returnFilterTexture(n)},e.prototype._updatePadding=function(){this.padding=this.distance+2*this.blur},e.prototype._updateShift=function(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))},i.resolution.get=function(){return this._resolution},i.resolution.set=function(t){this._resolution=t,this._tintFilter&&(this._tintFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)},i.distance.get=function(){return this._distance},i.distance.set=function(t){this._distance=t,this._updatePadding(),this._updateShift()},i.rotation.get=function(){return this.angle/s.ZX},i.rotation.set=function(t){this.angle=t*s.ZX,this._updateShift()},i.alpha.get=function(){return this._tintFilter.uniforms.alpha},i.alpha.set=function(t){this._tintFilter.uniforms.alpha=t},i.color.get=function(){return(0,h.rgb2hex)(this._tintFilter.uniforms.color)},i.color.set=function(t){(0,h.hex2rgb)(t,this._tintFilter.uniforms.color)},i.kernels.get=function(){return this._blurFilter.kernels},i.kernels.set=function(t){this._blurFilter.kernels=t},i.blur.get=function(){return this._blurFilter.blur},i.blur.set=function(t){this._blurFilter.blur=t,this._updatePadding()},i.quality.get=function(){return this._blurFilter.quality},i.quality.set=function(t){this._blurFilter.quality=t},i.pixelSize.get=function(){return this._blurFilter.pixelSize},i.pixelSize.set=function(t){this._blurFilter.pixelSize=t},Object.defineProperties(e.prototype,i),e}(n.wn);function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function p(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var f,m,_,g,v,y,b,x,T,S,E,w,A,I,C,O,M,P,R,D,N,U,F,L,k,B,G,X,j={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},V={duration:.5,overwrite:!1,delay:0},Y=1e8,H=1e-8,W=2*Math.PI,z=W/4,q=0,K=Math.sqrt,Z=Math.cos,$=Math.sin,J=function(t){return"string"==typeof t},Q=function(t){return"function"==typeof t},tt=function(t){return"number"==typeof t},et=function(t){return void 0===t},it=function(t){return"object"==typeof t},rt=function(t){return!1!==t},nt=function(){return"undefined"!=typeof window},st=function(t){return Q(t)||J(t)},ot="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},at=Array.isArray,ht=/(?:-?\.?\d|\.)+/gi,lt=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ut=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,ct=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,dt=/[+-]=-?[.\d]+/,pt=/[^,'"\[\]\s]+/gi,ft=/[\d.+\-=]+(?:e[-+]\d*)*/i,mt={},_t={},gt=function(t){return(_t=jt(t,mt))&&Ci},vt=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},yt=function(t,e){return!e&&console.warn(t)},bt=function(t,e){return t&&(mt[t]=e)&&_t&&(_t[t]=e)||mt},xt=function(){return 0},Tt={},St=[],Et={},wt={},At={},It=30,Ct=[],Ot="",Mt=function(t){var e,i,r=t[0];if(it(r)||Q(r)||(t=[t]),!(e=(r._gsap||{}).harness)){for(i=Ct.length;i--&&!Ct[i].targetTest(r););e=Ct[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new Qe(t[i],e)))||t.splice(i,1);return t},Pt=function(t){return t._gsap||Mt(ve(t))[0]._gsap},Rt=function(t,e,i){return(i=t[e])&&Q(i)?t[e]():et(i)&&t.getAttribute&&t.getAttribute(e)||i},Dt=function(t,e){return(t=t.split(",")).forEach(e)||t},Nt=function(t){return Math.round(1e5*t)/1e5||0},Ut=function(t,e){for(var i=e.length,r=0;t.indexOf(e[r])<0&&++r<i;);return r<i},Ft=function(){var t,e,i=St.length,r=St.slice(0);for(Et={},St.length=0,t=0;t<i;t++)(e=r[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Lt=function(t,e,i,r){St.length&&Ft(),t.render(e,i,r),St.length&&Ft()},kt=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(pt).length<2?e:J(t)?t.trim():t},Bt=function(t){return t},Gt=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},Xt=function(t,e){for(var i in e)i in t||"duration"===i||"ease"===i||(t[i]=e[i])},jt=function(t,e){for(var i in e)t[i]=e[i];return t},Vt=function t(e,i){for(var r in i)"__proto__"!==r&&"constructor"!==r&&"prototype"!==r&&(e[r]=it(i[r])?t(e[r]||(e[r]={}),i[r]):i[r]);return e},Yt=function(t,e){var i,r={};for(i in t)i in e||(r[i]=t[i]);return r},Ht=function(t){var e=t.parent||m,i=t.keyframes?Xt:Gt;if(rt(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},Wt=function(t,e,i,r){void 0===i&&(i="_first"),void 0===r&&(r="_last");var n=e._prev,s=e._next;n?n._next=s:t[i]===e&&(t[i]=s),s?s._prev=n:t[r]===e&&(t[r]=n),e._next=e._prev=e.parent=null},zt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},qt=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Kt=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Zt=function t(e){return!e||e._ts&&t(e.parent)},$t=function(t){return t._repeat?Jt(t._tTime,t=t.duration()+t._rDelay)*t:0},Jt=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},Qt=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},te=function(t){return t._end=Nt(t._start+(t._tDur/Math.abs(t._ts||t._rts||H)||0))},ee=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=Nt(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),te(t),i._dirty||qt(i,t)),t},ie=function(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=Qt(t.rawTime(),e),(!e._dur||fe(0,e.totalDuration(),i)-e._tTime>H)&&e.render(i,!0)),qt(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},re=function(t,e,i,r){return e.parent&&zt(e),e._start=Nt((tt(i)?i:i||t!==m?ce(t,i,e):t._time)+e._delay),e._end=Nt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,i,r,n){void 0===i&&(i="_first"),void 0===r&&(r="_last");var s,o=t[r];if(n)for(s=e[n];o&&o[n]>s;)o=o._prev;o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[r]=e,e._prev=o,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),ae(e)||(t._recent=e),r||ie(t,e),t},ne=function(t,e){return(mt.ScrollTrigger||vt("scrollTrigger",e))&&mt.ScrollTrigger.create(e,t)},se=function(t,e,i,r){return oi(t,e),t._initted?!i&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&b!==Ge.frame?(St.push(t),t._lazy=[e,r],1):void 0:1},oe=function t(e){var i=e.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||t(i))},ae=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},he=function(t,e,i,r){var n=t._repeat,s=Nt(e)||0,o=t._tTime/t._tDur;return o&&!r&&(t._time*=s/t._dur),t._dur=s,t._tDur=n?n<0?1e10:Nt(s*(n+1)+t._rDelay*n):s,o&&!r?ee(t,t._tTime=t._tDur*o):t.parent&&te(t),i||qt(t.parent,t),t},le=function(t){return t instanceof ei?qt(t):he(t,t._dur)},ue={_start:0,endTime:xt,totalDuration:xt},ce=function t(e,i,r){var n,s,o,a=e.labels,h=e._recent||ue,l=e.duration()>=Y?h.endTime(!1):e._dur;return J(i)&&(isNaN(i)||i in a)?(s=i.charAt(0),o="%"===i.substr(-1),n=i.indexOf("="),"<"===s||">"===s?(n>=0&&(i=i.replace(/=/,"")),("<"===s?h._start:h.endTime(h._repeat>=0))+(parseFloat(i.substr(1))||0)*(o?(n<0?h:r).totalDuration()/100:1)):n<0?(i in a||(a[i]=l),a[i]):(s=parseFloat(i.charAt(n-1)+i.substr(n+1)),o&&r&&(s=s/100*(at(r)?r[0]:r).totalDuration()),n>1?t(e,i.substr(0,n-1),r)+s:l+s)):null==i?l:+i},de=function(t,e,i){var r,n,s=tt(e[1]),o=(s?2:1)+(t<2?0:1),a=e[o];if(s&&(a.duration=e[1]),a.parent=i,t){for(r=a,n=i;n&&!("immediateRender"in r);)r=n.vars.defaults||{},n=rt(n.vars.inherit)&&n.parent;a.immediateRender=rt(r.immediateRender),t<2?a.runBackwards=1:a.startAt=e[o-1]}return new ui(e[0],a,e[o+1])},pe=function(t,e){return t||0===t?e(t):e},fe=function(t,e,i){return i<t?t:i>e?e:i},me=function(t){if("string"!=typeof t)return"";var e=ft.exec(t);return e?t.substr(e.index+e[0].length):""},_e=[].slice,ge=function(t,e){return t&&it(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&it(t[0]))&&!t.nodeType&&t!==_},ve=function(t,e,i){return!J(t)||i||!g&&Xe()?at(t)?function(t,e,i){return void 0===i&&(i=[]),t.forEach((function(t){var r;return J(t)&&!e||ge(t,1)?(r=i).push.apply(r,ve(t)):i.push(t)}))||i}(t,i):ge(t)?_e.call(t,0):t?[t]:[]:_e.call((e||v).querySelectorAll(t),0)},ye=function(t){return t.sort((function(){return.5-Math.random()}))},be=function(t){if(Q(t))return t;var e=it(t)?t:{each:t},i=qe(e.ease),r=e.from||0,n=parseFloat(e.base)||0,s={},o=r>0&&r<1,a=isNaN(r)||o,h=e.axis,l=r,u=r;return J(r)?l=u={center:.5,edges:.5,end:1}[r]||0:!o&&a&&(l=r[0],u=r[1]),function(t,o,c){var d,p,f,m,_,g,v,y,b,x=(c||e).length,T=s[x];if(!T){if(!(b="auto"===e.grid?0:(e.grid||[1,Y])[1])){for(v=-Y;v<(v=c[b++].getBoundingClientRect().left)&&b<x;);b--}for(T=s[x]=[],d=a?Math.min(b,x)*l-.5:r%b,p=a?x*u/b-.5:r/b|0,v=0,y=Y,g=0;g<x;g++)f=g%b-d,m=p-(g/b|0),T[g]=_=h?Math.abs("y"===h?m:f):K(f*f+m*m),_>v&&(v=_),_<y&&(y=_);"random"===r&&ye(T),T.max=v-y,T.min=y,T.v=x=(parseFloat(e.amount)||parseFloat(e.each)*(b>x?x-1:h?"y"===h?x/b:b:Math.max(b,x/b))||0)*("edges"===r?-1:1),T.b=x<0?n-x:n,T.u=me(e.amount||e.each)||0,i=i&&x<0?We(i):i}return x=(T[t]-T.min)/T.max||0,Nt(T.b+(i?i(x):x)*T.v)+T.u}},xe=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(i){var r=Math.round(parseFloat(i)/t)*t*e;return(r-r%1)/e+(tt(i)?0:me(i))}},Te=function(t,e){var i,r,n=at(t);return!n&&it(t)&&(i=n=t.radius||Y,t.values?(t=ve(t.values),(r=!tt(t[0]))&&(i*=i)):t=xe(t.increment)),pe(e,n?Q(t)?function(e){return r=t(e),Math.abs(r-e)<=i?r:e}:function(e){for(var n,s,o=parseFloat(r?e.x:e),a=parseFloat(r?e.y:0),h=Y,l=0,u=t.length;u--;)(n=r?(n=t[u].x-o)*n+(s=t[u].y-a)*s:Math.abs(t[u]-o))<h&&(h=n,l=u);return l=!i||h<=i?t[l]:e,r||l===e||tt(e)?l:l+me(e)}:xe(t))},Se=function(t,e,i,r){return pe(at(t)?!e:!0===i?!!(i=0):!r,(function(){return at(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+.99*i))/i)*i*r)/r}))},Ee=function(t,e,i){return pe(i,(function(i){return t[~~e(i)]}))},we=function(t){for(var e,i,r,n,s=0,o="";~(e=t.indexOf("random(",s));)r=t.indexOf(")",e),n="["===t.charAt(e+7),i=t.substr(e+7,r-e-7).match(n?pt:ht),o+=t.substr(s,e-s)+Se(n?i:+i[0],n?0:+i[1],+i[2]||1e-5),s=r+1;return o+t.substr(s,t.length-s)},Ae=function(t,e,i,r,n){var s=e-t,o=r-i;return pe(n,(function(e){return i+((e-t)/s*o||0)}))},Ie=function(t,e,i){var r,n,s,o=t.labels,a=Y;for(r in o)(n=o[r]-e)<0==!!i&&n&&a>(n=Math.abs(n))&&(s=r,a=n);return s},Ce=function(t,e,i){var r,n,s=t.vars,o=s[e];if(o)return r=s[e+"Params"],n=s.callbackScope||t,i&&St.length&&Ft(),r?o.apply(n,r):o.call(n)},Oe=function(t){return zt(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&Ce(t,"onInterrupt"),t},Me=function(t){var e=(t=!t.name&&t.default||t).name,i=Q(t),r=e&&!i&&t.init?function(){this._props=[]}:t,n={init:xt,render:yi,add:ni,kill:xi,modifier:bi,rawVars:0},s={targetTest:0,get:0,getSetter:mi,aliases:{},register:0};if(Xe(),t!==r){if(wt[e])return;Gt(r,Gt(Yt(t,n),s)),jt(r.prototype,jt(n,Yt(t,s))),wt[r.prop=e]=r,t.targetTest&&(Ct.push(r),Tt[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}bt(e,r),t.register&&t.register(Ci,r,Ei)},Pe=255,Re={aqua:[0,Pe,Pe],lime:[0,Pe,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Pe],navy:[0,0,128],white:[Pe,Pe,Pe],olive:[128,128,0],yellow:[Pe,Pe,0],orange:[Pe,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Pe,0,0],pink:[Pe,192,203],cyan:[0,Pe,Pe],transparent:[Pe,Pe,Pe,0]},De=function(t,e,i){return(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)*Pe+.5|0},Ne=function(t,e,i){var r,n,s,o,a,h,l,u,c,d,p=t?tt(t)?[t>>16,t>>8&Pe,t&Pe]:0:Re.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Re[t])p=Re[t];else if("#"===t.charAt(0)){if(t.length<6&&(r=t.charAt(1),n=t.charAt(2),s=t.charAt(3),t="#"+r+r+n+n+s+s+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(p=parseInt(t.substr(1,6),16))>>16,p>>8&Pe,p&Pe,parseInt(t.substr(7),16)/255];p=[(t=parseInt(t.substr(1),16))>>16,t>>8&Pe,t&Pe]}else if("hsl"===t.substr(0,3))if(p=d=t.match(ht),e){if(~t.indexOf("="))return p=t.match(lt),i&&p.length<4&&(p[3]=1),p}else o=+p[0]%360/360,a=+p[1]/100,r=2*(h=+p[2]/100)-(n=h<=.5?h*(a+1):h+a-h*a),p.length>3&&(p[3]*=1),p[0]=De(o+1/3,r,n),p[1]=De(o,r,n),p[2]=De(o-1/3,r,n);else p=t.match(ht)||Re.transparent;p=p.map(Number)}return e&&!d&&(r=p[0]/Pe,n=p[1]/Pe,s=p[2]/Pe,h=((l=Math.max(r,n,s))+(u=Math.min(r,n,s)))/2,l===u?o=a=0:(c=l-u,a=h>.5?c/(2-l-u):c/(l+u),o=l===r?(n-s)/c+(n<s?6:0):l===n?(s-r)/c+2:(r-n)/c+4,o*=60),p[0]=~~(o+.5),p[1]=~~(100*a+.5),p[2]=~~(100*h+.5)),i&&p.length<4&&(p[3]=1),p},Ue=function(t){var e=[],i=[],r=-1;return t.split(Le).forEach((function(t){var n=t.match(ut)||[];e.push.apply(e,n),i.push(r+=n.length+1)})),e.c=i,e},Fe=function(t,e,i){var r,n,s,o,a="",h=(t+a).match(Le),l=e?"hsla(":"rgba(",u=0;if(!h)return t;if(h=h.map((function(t){return(t=Ne(t,e,1))&&l+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),i&&(s=Ue(t),(r=i.c).join(a)!==s.c.join(a)))for(o=(n=t.replace(Le,"1").split(ut)).length-1;u<o;u++)a+=n[u]+(~r.indexOf(u)?h.shift()||l+"0,0,0,0)":(s.length?s:h.length?h:i).shift());if(!n)for(o=(n=t.split(Le)).length-1;u<o;u++)a+=n[u]+h[u];return a+n[o]},Le=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in Re)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),ke=/hsl[a]?\(/,Be=function(t){var e,i=t.join(" ");if(Le.lastIndex=0,Le.test(i))return e=ke.test(i),t[1]=Fe(t[1],e),t[0]=Fe(t[0],e,Ue(t[1])),!0},Ge=(O=Date.now,M=500,P=33,R=O(),D=R,U=N=1e3/240,L=function t(e){var i,r,n,s,o=O()-D,a=!0===e;if(o>M&&(R+=o-P),((i=(n=(D+=o)-R)-U)>0||a)&&(s=++A.frame,I=n-1e3*A.time,A.time=n/=1e3,U+=i+(i>=N?4:N-i),r=1),a||(S=E(t)),r)for(C=0;C<F.length;C++)F[C](n,I,s,e)},A={time:0,frame:0,tick:function(){L(!0)},deltaRatio:function(t){return I/(1e3/(t||60))},wake:function(){y&&(!g&&nt()&&(_=g=window,v=_.document||{},mt.gsap=Ci,(_.gsapVersions||(_.gsapVersions=[])).push(Ci.version),gt(_t||_.GreenSockGlobals||!_.gsap&&_||{}),w=_.requestAnimationFrame),S&&A.sleep(),E=w||function(t){return setTimeout(t,U-1e3*A.time+1|0)},T=1,L(2))},sleep:function(){(w?_.cancelAnimationFrame:clearTimeout)(S),T=0,E=xt},lagSmoothing:function(t,e){M=t||1e8,P=Math.min(e,M,0)},fps:function(t){N=1e3/(t||240),U=1e3*A.time+N},add:function(t){F.indexOf(t)<0&&F.push(t),Xe()},remove:function(t){var e;~(e=F.indexOf(t))&&F.splice(e,1)&&C>=e&&C--},_listeners:F=[]}),Xe=function(){return!T&&Ge.wake()},je={},Ve=/^[\d.\-M][\d.\-,\s]/,Ye=/["']/g,He=function(t){for(var e,i,r,n={},s=t.substr(1,t.length-3).split(":"),o=s[0],a=1,h=s.length;a<h;a++)i=s[a],e=a!==h-1?i.lastIndexOf(","):i.length,r=i.substr(0,e),n[o]=isNaN(r)?r.replace(Ye,"").trim():+r,o=i.substr(e+1).trim();return n},We=function(t){return function(e){return 1-t(1-e)}},ze=function t(e,i){for(var r,n=e._first;n;)n instanceof ei?t(n,i):!n.vars.yoyoEase||n._yoyo&&n._repeat||n._yoyo===i||(n.timeline?t(n.timeline,i):(r=n._ease,n._ease=n._yEase,n._yEase=r,n._yoyo=i)),n=n._next},qe=function(t,e){return t&&(Q(t)?t:je[t]||function(t){var e,i,r,n,s=(t+"").split("("),o=je[s[0]];return o&&s.length>1&&o.config?o.config.apply(null,~t.indexOf("{")?[He(s[1])]:(e=t,i=e.indexOf("(")+1,r=e.indexOf(")"),n=e.indexOf("(",i),e.substring(i,~n&&n<r?e.indexOf(")",r+1):r)).split(",").map(kt)):je._CE&&Ve.test(t)?je._CE("",t):o}(t))||e},Ke=function(t,e,i,r){void 0===i&&(i=function(t){return 1-e(1-t)}),void 0===r&&(r=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var n,s={easeIn:e,easeOut:i,easeInOut:r};return Dt(t,(function(t){for(var e in je[t]=mt[t]=s,je[n=t.toLowerCase()]=i,s)je[n+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=je[t+"."+e]=s[e]})),s},Ze=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},$e=function t(e,i,r){var n=i>=1?i:1,s=(r||(e?.3:.45))/(i<1?i:1),o=s/W*(Math.asin(1/n)||0),a=function(t){return 1===t?1:n*Math.pow(2,-10*t)*$((t-o)*s)+1},h="out"===e?a:"in"===e?function(t){return 1-a(1-t)}:Ze(a);return s=W/s,h.config=function(i,r){return t(e,i,r)},h},Je=function t(e,i){void 0===i&&(i=1.70158);var r=function(t){return t?--t*t*((i+1)*t+i)+1:0},n="out"===e?r:"in"===e?function(t){return 1-r(1-t)}:Ze(r);return n.config=function(i){return t(e,i)},n};Dt("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var i=e<5?e+1:e;Ke(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},(function(t){return 1-Math.pow(1-t,i)}),(function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow(2*(1-t),i)/2}))})),je.Linear.easeNone=je.none=je.Linear.easeIn,Ke("Elastic",$e("in"),$e("out"),$e()),k=7.5625,G=1/(B=2.75),Ke("Bounce",(function(t){return 1-X(1-t)}),X=function(t){return t<G?k*t*t:t<.7272727272727273?k*Math.pow(t-1.5/B,2)+.75:t<.9090909090909092?k*(t-=2.25/B)*t+.9375:k*Math.pow(t-2.625/B,2)+.984375}),Ke("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),Ke("Circ",(function(t){return-(K(1-t*t)-1)})),Ke("Sine",(function(t){return 1===t?1:1-Z(t*z)})),Ke("Back",Je("in"),Je("out"),Je()),je.SteppedEase=je.steps=mt.SteppedEase={config:function(t,e){void 0===t&&(t=1);var i=1/t,r=t+(e?0:1),n=e?1:0;return function(t){return((r*fe(0,.99999999,t)|0)+n)*i}}},V.ease=je["quad.out"],Dt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return Ot+=t+","+t+"Params,"}));var Qe=function(t,e){this.id=q++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Rt,this.set=e?e.getSetter:mi},ti=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,he(this,+t.duration,1,1),this.data=t.data,T||Ge.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,he(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Xe(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(ee(this,t),!i._dp||i.parent||ie(i,this);i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&re(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===H||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Lt(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+$t(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+$t(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?Jt(this._tTime,i)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?Qt(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,Kt(this.totalTime(fe(-this._delay,this._tDur,e),!0))},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Xe(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==H&&(this._tTime-=H)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&re(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(rt(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Qt(e.rawTime(t),this):this._tTime:this._tTime},e.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(e._ts||1),e=e._dp;return i},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,le(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,le(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(ce(this,t),rt(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,rt(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,i=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<this.endTime(!0)-H))},e.eventCallback=function(t,e,i){var r=this.vars;return arguments.length>1?(e?(r[t]=e,i&&(r[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(t){var e=this;return new Promise((function(i){var r=Q(t)?t:Bt,n=function(){var t=e.then;e.then=null,Q(r)&&(r=r(e))&&(r.then||r===e)&&(e.then=t),i(r),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?n():e._prom=n}))},e.kill=function(){Oe(this)},t}();Gt(ti.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var ei=function(t){function e(e,i){var r;return void 0===e&&(e={}),(r=t.call(this,e)||this).labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=rt(e.sortChildren),m&&re(e.parent||m,d(r),i),e.reversed&&r.reverse(),e.paused&&r.paused(!0),e.scrollTrigger&&ne(d(r),e.scrollTrigger),r}p(e,t);var i=e.prototype;return i.to=function(t,e,i){return de(0,arguments,this),this},i.from=function(t,e,i){return de(1,arguments,this),this},i.fromTo=function(t,e,i,r){return de(2,arguments,this),this},i.set=function(t,e,i){return e.duration=0,e.parent=this,Ht(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new ui(t,e,ce(this,i),1),this},i.call=function(t,e,i){return re(this,ui.delayedCall(0,t,e),i)},i.staggerTo=function(t,e,i,r,n,s,o){return i.duration=e,i.stagger=i.stagger||r,i.onComplete=s,i.onCompleteParams=o,i.parent=this,new ui(t,i,ce(this,n)),this},i.staggerFrom=function(t,e,i,r,n,s,o){return i.runBackwards=1,Ht(i).immediateRender=rt(i.immediateRender),this.staggerTo(t,e,i,r,n,s,o)},i.staggerFromTo=function(t,e,i,r,n,s,o,a){return r.startAt=i,Ht(r).immediateRender=rt(r.immediateRender),this.staggerTo(t,e,r,n,s,o,a)},i.render=function(t,e,i){var r,n,s,o,a,h,l,u,c,d,p,f,_=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=this!==m&&t>g-H&&t>=0?g:t<H?0:t,b=this._zTime<0!=t<0&&(this._initted||!v);if(y!==this._tTime||i||b){if(_!==this._time&&v&&(y+=this._time-_,t+=this._time-_),r=y,c=this._start,h=!(u=this._ts),b&&(v||(_=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(p=this._yoyo,a=v+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*a+t,e,i);if(r=Nt(y%a),y===g?(o=this._repeat,r=v):((o=~~(y/a))&&o===y/a&&(r=v,o--),r>v&&(r=v)),d=Jt(this._tTime,a),!_&&this._tTime&&d!==o&&(d=o),p&&1&o&&(r=v-r,f=1),o!==d&&!this._lock){var x=p&&1&d,T=x===(p&&1&o);if(o<d&&(x=!x),_=x?0:v,this._lock=1,this.render(_||(f?0:Nt(o*a)),e,!v)._lock=0,this._tTime=y,!e&&this.parent&&Ce(this,"onRepeat"),this.vars.repeatRefresh&&!f&&(this.invalidate()._lock=1),_&&_!==this._time||h!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,g=this._tDur,T&&(this._lock=2,_=x?v:-1e-4,this.render(_,!0),this.vars.repeatRefresh&&!f&&this.invalidate()),this._lock=0,!this._ts&&!h)return this;ze(this,f)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(l=function(t,e,i){var r;if(i>e)for(r=t._first;r&&r._start<=i;){if(!r._dur&&"isPause"===r.data&&r._start>e)return r;r=r._next}else for(r=t._last;r&&r._start>=i;){if(!r._dur&&"isPause"===r.data&&r._start<e)return r;r=r._prev}}(this,Nt(_),Nt(r)))&&(y-=r-(r=l._start)),this._tTime=y,this._time=r,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,_=0),!_&&r&&!e&&(Ce(this,"onStart"),this._tTime!==y))return this;if(r>=_&&t>=0)for(n=this._first;n;){if(s=n._next,(n._act||r>=n._start)&&n._ts&&l!==n){if(n.parent!==this)return this.render(t,e,i);if(n.render(n._ts>0?(r-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(r-n._start)*n._ts,e,i),r!==this._time||!this._ts&&!h){l=0,s&&(y+=this._zTime=-1e-8);break}}n=s}else{n=this._last;for(var S=t<0?t:r;n;){if(s=n._prev,(n._act||S<=n._end)&&n._ts&&l!==n){if(n.parent!==this)return this.render(t,e,i);if(n.render(n._ts>0?(S-n._start)*n._ts:(n._dirty?n.totalDuration():n._tDur)+(S-n._start)*n._ts,e,i),r!==this._time||!this._ts&&!h){l=0,s&&(y+=this._zTime=S?-1e-8:H);break}}n=s}}if(l&&!e&&(this.pause(),l.render(r>=_?0:-1e-8)._zTime=r>=_?1:-1,this._ts))return this._start=c,te(this),this.render(t,e,i);this._onUpdate&&!e&&Ce(this,"onUpdate",!0),(y===g&&g>=this.totalDuration()||!y&&_)&&(c!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||((t||!v)&&(y===g&&this._ts>0||!y&&this._ts<0)&&zt(this,1),e||t<0&&!_||!y&&!_&&g||(Ce(this,y===g&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<g&&this.timeScale()>0)&&this._prom())))}return this},i.add=function(t,e){var i=this;if(tt(e)||(e=ce(this,e,t)),!(t instanceof ti)){if(at(t))return t.forEach((function(t){return i.add(t,e)})),this;if(J(t))return this.addLabel(t,e);if(!Q(t))return this;t=ui.delayedCall(0,t)}return this!==t?re(this,t,e):this},i.getChildren=function(t,e,i,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===r&&(r=-Y);for(var n=[],s=this._first;s;)s._start>=r&&(s instanceof ui?e&&n.push(s):(i&&n.push(s),t&&n.push.apply(n,s.getChildren(!0,e,i)))),s=s._next;return n},i.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},i.remove=function(t){return J(t)?this.removeLabel(t):Q(t)?this.killTweensOf(t):(Wt(this,t),t===this._recent&&(this._recent=this._last),qt(this))},i.totalTime=function(e,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Nt(Ge.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,i),this._forcing=0,this):this._tTime},i.addLabel=function(t,e){return this.labels[t]=ce(this,e),this},i.removeLabel=function(t){return delete this.labels[t],this},i.addPause=function(t,e,i){var r=ui.delayedCall(0,e||xt,i);return r.data="isPause",this._hasPause=1,re(this,r,ce(this,t))},i.removePause=function(t){var e=this._first;for(t=ce(this,t);e;)e._start===t&&"isPause"===e.data&&zt(e),e=e._next},i.killTweensOf=function(t,e,i){for(var r=this.getTweensOf(t,i),n=r.length;n--;)ii!==r[n]&&r[n].kill(t,e);return this},i.getTweensOf=function(t,e){for(var i,r=[],n=ve(t),s=this._first,o=tt(e);s;)s instanceof ui?Ut(s._targets,n)&&(o?(!ii||s._initted&&s._ts)&&s.globalTime(0)<=e&&s.globalTime(s.totalDuration())>e:!e||s.isActive())&&r.push(s):(i=s.getTweensOf(n,e)).length&&r.push.apply(r,i),s=s._next;return r},i.tweenTo=function(t,e){e=e||{};var i,r=this,n=ce(r,t),s=e,o=s.startAt,a=s.onStart,h=s.onStartParams,l=s.immediateRender,u=ui.to(r,Gt({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:n,overwrite:"auto",duration:e.duration||Math.abs((n-(o&&"time"in o?o.time:r._time))/r.timeScale())||H,onStart:function(){if(r.pause(),!i){var t=e.duration||Math.abs((n-(o&&"time"in o?o.time:r._time))/r.timeScale());u._dur!==t&&he(u,t,0,1).render(u._time,!0,!0),i=1}a&&a.apply(u,h||[])}},e));return l?u.render(0):u},i.tweenFromTo=function(t,e,i){return this.tweenTo(e,Gt({startAt:{time:ce(this,t)}},i))},i.recent=function(){return this._recent},i.nextLabel=function(t){return void 0===t&&(t=this._time),Ie(this,ce(this,t))},i.previousLabel=function(t){return void 0===t&&(t=this._time),Ie(this,ce(this,t),1)},i.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+H)},i.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var r,n=this._first,s=this.labels;n;)n._start>=i&&(n._start+=t,n._end+=t),n=n._next;if(e)for(r in s)s[r]>=i&&(s[r]+=t);return qt(this)},i.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},i.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),qt(this)},i.totalDuration=function(t){var e,i,r,n=0,s=this,o=s._last,a=Y;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(r=s.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),(i=o._start)>a&&s._sort&&o._ts&&!s._lock?(s._lock=1,re(s,o,i-o._delay,1)._lock=0):a=i,i<0&&o._ts&&(n-=i,(!r&&!s._dp||r&&r.smoothChildTiming)&&(s._start+=i/s._ts,s._time-=i,s._tTime-=i),s.shiftChildren(-i,!1,-1/0),a=0),o._end>n&&o._ts&&(n=o._end),o=e;he(s,s===m&&s._time>n?s._time:n,1,1),s._dirty=0}return s._tDur},e.updateRoot=function(t){if(m._ts&&(Lt(m,Qt(t,m)),b=Ge.frame),Ge.frame>=It){It+=j.autoSleep||120;var e=m._first;if((!e||!e._ts)&&j.autoSleep&&Ge._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Ge.sleep()}}},e}(ti);Gt(ei.prototype,{_lock:0,_hasPause:0,_forcing:0});var ii,ri=function(t,e,i,r,n,s,o){var a,h,l,u,c,d,p,f,m=new Ei(this._pt,t,e,0,1,vi,null,n),_=0,g=0;for(m.b=i,m.e=r,i+="",(p=~(r+="").indexOf("random("))&&(r=we(r)),s&&(s(f=[i,r],t,e),i=f[0],r=f[1]),h=i.match(ct)||[];a=ct.exec(r);)u=a[0],c=r.substring(_,a.index),l?l=(l+1)%5:"rgba("===c.substr(-5)&&(l=1),u!==h[g++]&&(d=parseFloat(h[g-1])||0,m._pt={_next:m._pt,p:c||1===g?c:",",s:d,c:"="===u.charAt(1)?parseFloat(u.substr(2))*("-"===u.charAt(0)?-1:1):parseFloat(u)-d,m:l&&l<4?Math.round:0},_=ct.lastIndex);return m.c=_<r.length?r.substring(_,r.length):"",m.fp=o,(dt.test(r)||p)&&(m.e=0),this._pt=m,m},ni=function(t,e,i,r,n,s,o,a,h){Q(r)&&(r=r(n||0,t,s));var l,u=t[e],c="get"!==i?i:Q(u)?h?t[e.indexOf("set")||!Q(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():u,d=Q(u)?h?pi:di:ci;if(J(r)&&(~r.indexOf("random(")&&(r=we(r)),"="===r.charAt(1)&&((l=parseFloat(c)+parseFloat(r.substr(2))*("-"===r.charAt(0)?-1:1)+(me(c)||0))||0===l)&&(r=l)),c!==r)return isNaN(c*r)||""===r?(!u&&!(e in t)&&vt(e,r),ri.call(this,t,e,c,r,d,a||j.stringFilter,h)):(l=new Ei(this._pt,t,e,+c||0,r-(c||0),"boolean"==typeof u?gi:_i,0,d),h&&(l.fp=h),o&&l.modifier(o,this,t),this._pt=l)},si=function(t,e,i,r,n,s){var o,a,h,l;if(wt[t]&&!1!==(o=new wt[t]).init(n,o.rawVars?e[t]:function(t,e,i,r,n){if(Q(t)&&(t=ai(t,n,e,i,r)),!it(t)||t.style&&t.nodeType||at(t)||ot(t))return J(t)?ai(t,n,e,i,r):t;var s,o={};for(s in t)o[s]=ai(t[s],n,e,i,r);return o}(e[t],r,n,s,i),i,r,s)&&(i._pt=a=new Ei(i._pt,n,t,0,1,o.render,o,0,o.priority),i!==x))for(h=i._ptLookup[i._targets.indexOf(n)],l=o._props.length;l--;)h[o._props[l]]=a;return o},oi=function t(e,i){var r,n,s,o,a,h,l,u,c,d,p,_,g,v=e.vars,y=v.ease,b=v.startAt,x=v.immediateRender,T=v.lazy,S=v.onUpdate,E=v.onUpdateParams,w=v.callbackScope,A=v.runBackwards,I=v.yoyoEase,C=v.keyframes,O=v.autoRevert,M=e._dur,P=e._startAt,R=e._targets,D=e.parent,N=D&&"nested"===D.data?D.parent._targets:R,U="auto"===e._overwrite&&!f,F=e.timeline;if(F&&(!C||!y)&&(y="none"),e._ease=qe(y,V.ease),e._yEase=I?We(qe(!0===I?y:I,V.ease)):0,I&&e._yoyo&&!e._repeat&&(I=e._yEase,e._yEase=e._ease,e._ease=I),e._from=!F&&!!v.runBackwards,!F){if(_=(u=R[0]?Pt(R[0]).harness:0)&&v[u.prop],r=Yt(v,Tt),P&&P.render(-1,!0).kill(),b)if(zt(e._startAt=ui.set(R,Gt({data:"isStart",overwrite:!1,parent:D,immediateRender:!0,lazy:rt(T),startAt:null,delay:0,onUpdate:S,onUpdateParams:E,callbackScope:w,stagger:0},b))),i<0&&!x&&!O&&e._startAt.render(-1,!0),x){if(i>0&&!O&&(e._startAt=0),M&&i<=0)return void(i&&(e._zTime=i))}else!1===O&&(e._startAt=0);else if(A&&M)if(P)!O&&(e._startAt=0);else if(i&&(x=!1),s=Gt({overwrite:!1,data:"isFromStart",lazy:x&&rt(T),immediateRender:x,stagger:0,parent:D},r),_&&(s[u.prop]=_),zt(e._startAt=ui.set(R,s)),i<0&&e._startAt.render(-1,!0),x){if(!i)return}else t(e._startAt,H);for(e._pt=0,T=M&&rt(T)||T&&!M,n=0;n<R.length;n++){if(l=(a=R[n])._gsap||Mt(R)[n]._gsap,e._ptLookup[n]=d={},Et[l.id]&&St.length&&Ft(),p=N===R?n:N.indexOf(a),u&&!1!==(c=new u).init(a,_||r,e,p,N)&&(e._pt=o=new Ei(e._pt,a,c.name,0,1,c.render,c,0,c.priority),c._props.forEach((function(t){d[t]=o})),c.priority&&(h=1)),!u||_)for(s in r)wt[s]&&(c=si(s,r,e,p,a,N))?c.priority&&(h=1):d[s]=o=ni.call(e,a,s,"get",r[s],p,N,0,v.stringFilter);e._op&&e._op[n]&&e.kill(a,e._op[n]),U&&e._pt&&(ii=e,m.killTweensOf(a,d,e.globalTime(0)),g=!e.parent,ii=0),e._pt&&T&&(Et[l.id]=1)}h&&Si(e),e._onInit&&e._onInit(e)}e._onUpdate=S,e._initted=(!e._op||e._pt)&&!g},ai=function(t,e,i,r,n){return Q(t)?t.call(e,i,r,n):J(t)&&~t.indexOf("random(")?we(t):t},hi=Ot+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",li=(hi+",id,stagger,delay,duration,paused,scrollTrigger").split(","),ui=function(t){function e(e,i,r,n){var s;"number"==typeof i&&(r.duration=i,i=r,r=null);var o,a,h,l,u,c,p,_,g=(s=t.call(this,n?i:Ht(i))||this).vars,v=g.duration,y=g.delay,b=g.immediateRender,x=g.stagger,T=g.overwrite,S=g.keyframes,E=g.defaults,w=g.scrollTrigger,A=g.yoyoEase,I=i.parent||m,C=(at(e)||ot(e)?tt(e[0]):"length"in i)?[e]:ve(e);if(s._targets=C.length?Mt(C):yt("GSAP target "+e+" not found. https://greensock.com",!j.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=T,S||x||st(v)||st(y)){if(i=s.vars,(o=s.timeline=new ei({data:"nested",defaults:E||{}})).kill(),o.parent=o._dp=d(s),o._start=0,S)Gt(o.vars.defaults,{ease:"none"}),x?C.forEach((function(t,e){return S.forEach((function(i,r){return o.to(t,i,r?">":e*x)}))})):S.forEach((function(t){return o.to(C,t,">")}));else{if(l=C.length,p=x?be(x):xt,it(x))for(u in x)~hi.indexOf(u)&&(_||(_={}),_[u]=x[u]);for(a=0;a<l;a++){for(u in h={},i)li.indexOf(u)<0&&(h[u]=i[u]);h.stagger=0,A&&(h.yoyoEase=A),_&&jt(h,_),c=C[a],h.duration=+ai(v,d(s),a,c,C),h.delay=(+ai(y,d(s),a,c,C)||0)-s._delay,!x&&1===l&&h.delay&&(s._delay=y=h.delay,s._start+=y,h.delay=0),o.to(c,h,p(a,c,C))}o.duration()?v=y=0:s.timeline=0}v||s.duration(v=o.duration())}else s.timeline=0;return!0!==T||f||(ii=d(s),m.killTweensOf(C),ii=0),re(I,d(s),r),i.reversed&&s.reverse(),i.paused&&s.paused(!0),(b||!v&&!S&&s._start===Nt(I._time)&&rt(b)&&Zt(d(s))&&"nested"!==I.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-y))),w&&ne(d(s),w),s}p(e,t);var i=e.prototype;return i.render=function(t,e,i){var r,n,s,o,a,h,l,u,c,d=this._time,p=this._tDur,f=this._dur,m=t>p-H&&t>=0?p:t<H?0:t;if(f){if(m!==this._tTime||!t||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=t<0){if(r=m,u=this.timeline,this._repeat){if(o=f+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*o+t,e,i);if(r=Nt(m%o),m===p?(s=this._repeat,r=f):((s=~~(m/o))&&s===m/o&&(r=f,s--),r>f&&(r=f)),(h=this._yoyo&&1&s)&&(c=this._yEase,r=f-r),a=Jt(this._tTime,o),r===d&&!i&&this._initted)return this;s!==a&&(u&&this._yEase&&ze(u,h),!this.vars.repeatRefresh||h||this._lock||(this._lock=i=1,this.render(Nt(o*s),!0).invalidate()._lock=0))}if(!this._initted){if(se(this,t<0?t:r,i,e))return this._tTime=0,this;if(f!==this._dur)return this.render(t,e,i)}if(this._tTime=m,this._time=r,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=l=(c||this._ease)(r/f),this._from&&(this.ratio=l=1-l),r&&!d&&!e&&(Ce(this,"onStart"),this._tTime!==m))return this;for(n=this._pt;n;)n.r(l,n.d),n=n._next;u&&u.render(t<0?t:!r&&h?-1e-8:u._dur*l,e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,i),Ce(this,"onUpdate")),this._repeat&&s!==a&&this.vars.onRepeat&&!e&&this.parent&&Ce(this,"onRepeat"),m!==this._tDur&&m||this._tTime!==m||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!f)&&(m===this._tDur&&this._ts>0||!m&&this._ts<0)&&zt(this,1),e||t<0&&!d||!m&&!d||(Ce(this,m===p?"onComplete":"onReverseComplete",!0),this._prom&&!(m<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,i,r){var n,s,o,a=t.ratio,h=e<0||!e&&(!t._start&&oe(t)&&(t._initted||!ae(t))||(t._ts<0||t._dp._ts<0)&&!ae(t))?0:1,l=t._rDelay,u=0;if(l&&t._repeat&&(u=fe(0,t._tDur,e),s=Jt(u,l),o=Jt(t._tTime,l),t._yoyo&&1&s&&(h=1-h),s!==o&&(a=1-h,t.vars.repeatRefresh&&t._initted&&t.invalidate())),h!==a||r||t._zTime===H||!e&&t._zTime){if(!t._initted&&se(t,e,r,i))return;for(o=t._zTime,t._zTime=e||(i?H:0),i||(i=e&&!o),t.ratio=h,t._from&&(h=1-h),t._time=0,t._tTime=u,n=t._pt;n;)n.r(h,n.d),n=n._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!i&&Ce(t,"onUpdate"),u&&t._repeat&&!i&&t.parent&&Ce(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===h&&(h&&zt(t,1),i||(Ce(t,h?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,i);return this},i.targets=function(){return this._targets},i.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},i.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?Oe(this):this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,ii&&!0!==ii.vars.overwrite)._first||Oe(this),this.parent&&i!==this.timeline.totalDuration()&&he(this,this._dur*this.timeline._tDur/i,0,1),this}var r,n,s,o,a,h,l,u=this._targets,c=t?ve(t):u,d=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var i=t.length,r=i===e.length;r&&i--&&t[i]===e[i];);return i<0}(u,c))return"all"===e&&(this._pt=0),Oe(this);for(r=this._op=this._op||[],"all"!==e&&(J(e)&&(a={},Dt(e,(function(t){return a[t]=1})),e=a),e=function(t,e){var i,r,n,s,o=t[0]?Pt(t[0]).harness:0,a=o&&o.aliases;if(!a)return e;for(r in i=jt({},e),a)if(r in i)for(n=(s=a[r].split(",")).length;n--;)i[s[n]]=i[r];return i}(u,e)),l=u.length;l--;)if(~c.indexOf(u[l]))for(a in n=d[l],"all"===e?(r[l]=e,o=n,s={}):(s=r[l]=r[l]||{},o=e),o)(h=n&&n[a])&&("kill"in h.d&&!0!==h.d.kill(a)||Wt(this,h,"_pt"),delete n[a]),"all"!==s&&(s[a]=1);return this._initted&&!this._pt&&p&&Oe(this),this},e.to=function(t,i){return new e(t,i,arguments[2])},e.from=function(t,e){return de(1,arguments)},e.delayedCall=function(t,i,r,n){return new e(i,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:i,onReverseComplete:i,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:n})},e.fromTo=function(t,e,i){return de(2,arguments)},e.set=function(t,i){return i.duration=0,i.repeatDelay||(i.repeat=0),new e(t,i)},e.killTweensOf=function(t,e,i){return m.killTweensOf(t,e,i)},e}(ti);Gt(ui.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Dt("staggerTo,staggerFrom,staggerFromTo",(function(t){ui[t]=function(){var e=new ei,i=_e.call(arguments,0);return i.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,i)}}));var ci=function(t,e,i){return t[e]=i},di=function(t,e,i){return t[e](i)},pi=function(t,e,i,r){return t[e](r.fp,i)},fi=function(t,e,i){return t.setAttribute(e,i)},mi=function(t,e){return Q(t[e])?di:et(t[e])&&t.setAttribute?fi:ci},_i=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},gi=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},vi=function(t,e){var i=e._pt,r="";if(!t&&e.b)r=e.b;else if(1===t&&e.e)r=e.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+r,i=i._next;r+=e.c}e.set(e.t,e.p,r,e)},yi=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},bi=function(t,e,i,r){for(var n,s=this._pt;s;)n=s._next,s.p===r&&s.modifier(t,e,i),s=n},xi=function(t){for(var e,i,r=this._pt;r;)i=r._next,r.p===t&&!r.op||r.op===t?Wt(this,r,"_pt"):r.dep||(e=1),r=i;return!e},Ti=function(t,e,i,r){r.mSet(t,e,r.m.call(r.tween,i,r.mt),r)},Si=function(t){for(var e,i,r,n,s=t._pt;s;){for(e=s._next,i=r;i&&i.pr>s.pr;)i=i._next;(s._prev=i?i._prev:n)?s._prev._next=s:r=s,(s._next=i)?i._prev=s:n=s,s=e}t._pt=r},Ei=function(){function t(t,e,i,r,n,s,o,a,h){this.t=e,this.s=r,this.c=n,this.p=i,this.r=s||_i,this.d=o||this,this.set=a||ci,this.pr=h||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=Ti,this.m=t,this.mt=i,this.tween=e},t}();Dt(Ot+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return Tt[t]=1})),mt.TweenMax=mt.TweenLite=ui,mt.TimelineLite=mt.TimelineMax=ei,m=new ei({sortChildren:!1,defaults:V,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),j.stringFilter=Be;var wi={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((function(t){return Me(t)}))},timeline:function(t){return new ei(t)},getTweensOf:function(t,e){return m.getTweensOf(t,e)},getProperty:function(t,e,i,r){J(t)&&(t=ve(t)[0]);var n=Pt(t||{}).get,s=i?Bt:kt;return"native"===i&&(i=""),t?e?s((wt[e]&&wt[e].get||n)(t,e,i,r)):function(e,i,r){return s((wt[e]&&wt[e].get||n)(t,e,i,r))}:t},quickSetter:function(t,e,i){if((t=ve(t)).length>1){var r=t.map((function(t){return Ci.quickSetter(t,e,i)})),n=r.length;return function(t){for(var e=n;e--;)r[e](t)}}t=t[0]||{};var s=wt[e],o=Pt(t),a=o.harness&&(o.harness.aliases||{})[e]||e,h=s?function(e){var r=new s;x._pt=0,r.init(t,i?e+i:e,x,0,[t]),r.render(1,r),x._pt&&yi(1,x)}:o.set(t,a);return s?h:function(e){return h(t,a,i?e+i:e,o,1)}},isTweening:function(t){return m.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=qe(t.ease,V.ease)),Vt(V,t||{})},config:function(t){return Vt(j,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,r=t.plugins,n=t.defaults,s=t.extendTimeline;(r||"").split(",").forEach((function(t){return t&&!wt[t]&&!mt[t]&&yt(e+" effect requires "+t+" plugin.")})),At[e]=function(t,e,r){return i(ve(t),Gt(e||{},n),r)},s&&(ei.prototype[e]=function(t,i,r){return this.add(At[e](t,it(i)?i:(r=i)&&{},this),r)})},registerEase:function(t,e){je[t]=qe(e)},parseEase:function(t,e){return arguments.length?qe(t,e):je},getById:function(t){return m.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var i,r,n=new ei(t);for(n.smoothChildTiming=rt(t.smoothChildTiming),m.remove(n),n._dp=0,n._time=n._tTime=m._time,i=m._first;i;)r=i._next,!e&&!i._dur&&i instanceof ui&&i.vars.onComplete===i._targets[0]||re(n,i,i._start-i._delay),i=r;return re(m,n,0),n},utils:{wrap:function t(e,i,r){var n=i-e;return at(e)?Ee(e,t(0,e.length),i):pe(r,(function(t){return(n+(t-e)%n)%n+e}))},wrapYoyo:function t(e,i,r){var n=i-e,s=2*n;return at(e)?Ee(e,t(0,e.length-1),i):pe(r,(function(t){return e+((t=(s+(t-e)%s)%s||0)>n?s-t:t)}))},distribute:be,random:Se,snap:Te,normalize:function(t,e,i){return Ae(t,e,0,1,i)},getUnit:me,clamp:function(t,e,i){return pe(i,(function(i){return fe(t,e,i)}))},splitColor:Ne,toArray:ve,selector:function(t){return t=ve(t)[0]||yt("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return ve(e,i.querySelectorAll?i:i===t?yt("Invalid scope")||v.createElement("div"):t)}},mapRange:Ae,pipe:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(i){return t(parseFloat(i))+(e||me(i))}},interpolate:function t(e,i,r,n){var s=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!s){var o,a,h,l,u,c=J(e),d={};if(!0===r&&(n=1)&&(r=null),c)e={p:e},i={p:i};else if(at(e)&&!at(i)){for(h=[],l=e.length,u=l-2,a=1;a<l;a++)h.push(t(e[a-1],e[a]));l--,s=function(t){t*=l;var e=Math.min(u,~~t);return h[e](t-e)},r=i}else n||(e=jt(at(e)?[]:{},e));if(!h){for(o in i)ni.call(d,e,o,"get",i[o]);s=function(t){return yi(t,d)||(c?e.p:e)}}}return pe(r,s)},shuffle:ye},install:gt,effects:At,ticker:Ge,updateRoot:ei.updateRoot,plugins:wt,globalTimeline:m,core:{PropTween:Ei,globals:bt,Tween:ui,Timeline:ei,Animation:ti,getCache:Pt,_removeLinkedListItem:Wt,suppressOverwrites:function(t){return f=t}}};Dt("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return wi[t]=ui[t]})),Ge.add(ei.updateRoot),x=wi.to({},{duration:0});var Ai=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},Ii=function(t,e){return{name:t,rawVars:1,init:function(t,i,r){r._onInit=function(t){var r,n;if(J(i)&&(r={},Dt(i,(function(t){return r[t]=1})),i=r),e){for(n in r={},i)r[n]=e(i[n]);i=r}!function(t,e){var i,r,n,s=t._targets;for(i in e)for(r=s.length;r--;)(n=t._ptLookup[r][i])&&(n=n.d)&&(n._pt&&(n=Ai(n,i)),n&&n.modifier&&n.modifier(e[i],t,s[r],i))}(t,i)}}}},Ci=wi.registerPlugin({name:"attr",init:function(t,e,i,r,n){var s,o;for(s in e)(o=this.add(t,"setAttribute",(t.getAttribute(s)||0)+"",e[s],r,n,0,0,s))&&(o.op=s),this._props.push(s)}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i])}},Ii("roundProps",xe),Ii("modifiers"),Ii("snap",Te))||wi;ui.version=ei.version=Ci.version="3.7.1",y=1,nt()&&Xe(),je.Power0,je.Power1,je.Power2,je.Power3,je.Power4,je.Linear,je.Quad,je.Cubic,je.Quart,je.Quint,je.Strong,je.Elastic,je.Back,je.SteppedEase,je.Bounce,je.Sine,je.Expo,je.Circ;var Oi,Mi,Pi,Ri,Di,Ni,Ui,Fi={},Li=180/Math.PI,ki=Math.PI/180,Bi=Math.atan2,Gi=/([A-Z])/g,Xi=/(?:left|right|width|margin|padding|x)/i,ji=/[\s,\(]\S/,Vi={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Yi=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Hi=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Wi=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},zi=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},qi=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Ki=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Zi=function(t,e,i){return t.style[e]=i},$i=function(t,e,i){return t.style.setProperty(e,i)},Ji=function(t,e,i){return t._gsap[e]=i},Qi=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},tr=function(t,e,i,r,n){var s=t._gsap;s.scaleX=s.scaleY=i,s.renderTransform(n,s)},er=function(t,e,i,r,n){var s=t._gsap;s[e]=i,s.renderTransform(n,s)},ir="transform",rr=ir+"Origin",nr=function(t,e){var i=Mi.createElementNS?Mi.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Mi.createElement(t);return i.style?i:Mi.createElement(t)},sr=function t(e,i,r){var n=getComputedStyle(e);return n[i]||n.getPropertyValue(i.replace(Gi,"-$1").toLowerCase())||n.getPropertyValue(i)||!r&&t(e,ar(i)||i,1)||""},or="O,Moz,ms,Ms,Webkit".split(","),ar=function(t,e,i){var r=(e||Di).style,n=5;if(t in r&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);n--&&!(or[n]+t in r););return n<0?null:(3===n?"ms":n>=0?or[n]:"")+t},hr=function(){"undefined"!=typeof window&&window.document&&(Oi=window,Mi=Oi.document,Pi=Mi.documentElement,Di=nr("div")||{style:{}},nr("div"),ir=ar(ir),rr=ir+"Origin",Di.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Ui=!!ar("perspective"),Ri=1)},lr=function t(e){var i,r=nr("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=this.parentNode,s=this.nextSibling,o=this.style.cssText;if(Pi.appendChild(r),r.appendChild(this),this.style.display="block",e)try{i=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(i=this._gsapBBox());return n&&(s?n.insertBefore(this,s):n.appendChild(this)),Pi.removeChild(r),this.style.cssText=o,i},ur=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},cr=function(t){var e;try{e=t.getBBox()}catch(i){e=lr.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===lr||(e=lr.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+ur(t,["x","cx","x1"])||0,y:+ur(t,["y","cy","y1"])||0,width:0,height:0}},dr=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!cr(t))},pr=function(t,e){if(e){var i=t.style;e in Fi&&e!==rr&&(e=ir),i.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),i.removeProperty(e.replace(Gi,"-$1").toLowerCase())):i.removeAttribute(e)}},fr=function(t,e,i,r,n,s){var o=new Ei(t._pt,e,i,0,1,s?Ki:qi);return t._pt=o,o.b=r,o.e=n,t._props.push(i),o},mr={deg:1,rad:1,turn:1},_r=function t(e,i,r,n){var s,o,a,h,l=parseFloat(r)||0,u=(r+"").trim().substr((l+"").length)||"px",c=Di.style,d=Xi.test(i),p="svg"===e.tagName.toLowerCase(),f=(p?"client":"offset")+(d?"Width":"Height"),m=100,_="px"===n,g="%"===n;return n===u||!l||mr[n]||mr[u]?l:("px"!==u&&!_&&(l=t(e,i,r,"px")),h=e.getCTM&&dr(e),!g&&"%"!==u||!Fi[i]&&!~i.indexOf("adius")?(c[d?"width":"height"]=m+(_?u:n),o=~i.indexOf("adius")||"em"===n&&e.appendChild&&!p?e:e.parentNode,h&&(o=(e.ownerSVGElement||{}).parentNode),o&&o!==Mi&&o.appendChild||(o=Mi.body),(a=o._gsap)&&g&&a.width&&d&&a.time===Ge.time?Nt(l/a.width*m):((g||"%"===u)&&(c.position=sr(e,"position")),o===e&&(c.position="static"),o.appendChild(Di),s=Di[f],o.removeChild(Di),c.position="absolute",d&&g&&((a=Pt(o)).time=Ge.time,a.width=o[f]),Nt(_?s*l/m:s&&l?m/s*l:0))):(s=h?e.getBBox()[d?"width":"height"]:e[f],Nt(g?l/s*m:l/100*s)))},gr=function(t,e,i,r){var n;return Ri||hr(),e in Vi&&"transform"!==e&&~(e=Vi[e]).indexOf(",")&&(e=e.split(",")[0]),Fi[e]&&"transform"!==e?(n=Cr(t,r),n="transformOrigin"!==e?n[e]:n.svg?n.origin:Or(sr(t,rr))+" "+n.zOrigin+"px"):(!(n=t.style[e])||"auto"===n||r||~(n+"").indexOf("calc("))&&(n=xr[e]&&xr[e](t,e,i)||sr(t,e)||Rt(t,e)||("opacity"===e?1:0)),i&&!~(n+"").trim().indexOf(" ")?_r(t,e,n,i)+i:n},vr=function(t,e,i,r){if(!i||"none"===i){var n=ar(e,t,1),s=n&&sr(t,n,1);s&&s!==i?(e=n,i=s):"borderColor"===e&&(i=sr(t,"borderTopColor"))}var o,a,h,l,u,c,d,p,f,m,_,g,v=new Ei(this._pt,t.style,e,0,1,vi),y=0,b=0;if(v.b=i,v.e=r,i+="","auto"==(r+="")&&(t.style[e]=r,r=sr(t,e)||r,t.style[e]=i),Be(o=[i,r]),r=o[1],h=(i=o[0]).match(ut)||[],(r.match(ut)||[]).length){for(;a=ut.exec(r);)d=a[0],f=r.substring(y,a.index),u?u=(u+1)%5:"rgba("!==f.substr(-5)&&"hsla("!==f.substr(-5)||(u=1),d!==(c=h[b++]||"")&&(l=parseFloat(c)||0,_=c.substr((l+"").length),(g="="===d.charAt(1)?+(d.charAt(0)+"1"):0)&&(d=d.substr(2)),p=parseFloat(d),m=d.substr((p+"").length),y=ut.lastIndex-m.length,m||(m=m||j.units[e]||_,y===r.length&&(r+=m,v.e+=m)),_!==m&&(l=_r(t,e,c,m)||0),v._pt={_next:v._pt,p:f||1===b?f:",",s:l,c:g?g*p:p-l,m:u&&u<4||"zIndex"===e?Math.round:0});v.c=y<r.length?r.substring(y,r.length):""}else v.r="display"===e&&"none"===r?Ki:qi;return dt.test(r)&&(v.e=0),this._pt=v,v},yr={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},br=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,r,n,s=e.t,o=s.style,a=e.u,h=s._gsap;if("all"===a||!0===a)o.cssText="",r=1;else for(n=(a=a.split(",")).length;--n>-1;)i=a[n],Fi[i]&&(r=1,i="transformOrigin"===i?rr:ir),pr(s,i);r&&(pr(s,ir),h&&(h.svg&&s.removeAttribute("transform"),Cr(s,1),h.uncache=1))}},xr={clearProps:function(t,e,i,r,n){if("isFromStart"!==n.data){var s=t._pt=new Ei(t._pt,e,i,0,0,br);return s.u=r,s.pr=-10,s.tween=n,t._props.push(i),1}}},Tr=[1,0,0,1,0,0],Sr={},Er=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},wr=function(t){var e=sr(t,ir);return Er(e)?Tr:e.substr(7).match(lt).map(Nt)},Ar=function(t,e){var i,r,n,s,o=t._gsap||Pt(t),a=t.style,h=wr(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(h=[(n=t.transform.baseVal.consolidate().matrix).a,n.b,n.c,n.d,n.e,n.f]).join(",")?Tr:h:(h!==Tr||t.offsetParent||t===Pi||o.svg||(n=a.display,a.display="block",(i=t.parentNode)&&t.offsetParent||(s=1,r=t.nextSibling,Pi.appendChild(t)),h=wr(t),n?a.display=n:pr(t,"display"),s&&(r?i.insertBefore(t,r):i?i.appendChild(t):Pi.removeChild(t))),e&&h.length>6?[h[0],h[1],h[4],h[5],h[12],h[13]]:h)},Ir=function(t,e,i,r,n,s){var o,a,h,l=t._gsap,u=n||Ar(t,!0),c=l.xOrigin||0,d=l.yOrigin||0,p=l.xOffset||0,f=l.yOffset||0,m=u[0],_=u[1],g=u[2],v=u[3],y=u[4],b=u[5],x=e.split(" "),T=parseFloat(x[0])||0,S=parseFloat(x[1])||0;i?u!==Tr&&(a=m*v-_*g)&&(h=T*(-_/a)+S*(m/a)-(m*b-_*y)/a,T=T*(v/a)+S*(-g/a)+(g*b-v*y)/a,S=h):(T=(o=cr(t)).x+(~x[0].indexOf("%")?T/100*o.width:T),S=o.y+(~(x[1]||x[0]).indexOf("%")?S/100*o.height:S)),r||!1!==r&&l.smooth?(y=T-c,b=S-d,l.xOffset=p+(y*m+b*g)-y,l.yOffset=f+(y*_+b*v)-b):l.xOffset=l.yOffset=0,l.xOrigin=T,l.yOrigin=S,l.smooth=!!r,l.origin=e,l.originIsAbsolute=!!i,t.style[rr]="0px 0px",s&&(fr(s,l,"xOrigin",c,T),fr(s,l,"yOrigin",d,S),fr(s,l,"xOffset",p,l.xOffset),fr(s,l,"yOffset",f,l.yOffset)),t.setAttribute("data-svg-origin",T+" "+S)},Cr=function(t,e){var i=t._gsap||new Qe(t);if("x"in i&&!e&&!i.uncache)return i;var r,n,s,o,a,h,l,u,c,d,p,f,m,_,g,v,y,b,x,T,S,E,w,A,I,C,O,M,P,R,D,N,U=t.style,F=i.scaleX<0,L="px",k="deg",B=sr(t,rr)||"0";return r=n=s=h=l=u=c=d=p=0,o=a=1,i.svg=!(!t.getCTM||!dr(t)),_=Ar(t,i.svg),i.svg&&(A=(!i.uncache||"0px 0px"===B)&&!e&&t.getAttribute("data-svg-origin"),Ir(t,A||B,!!A||i.originIsAbsolute,!1!==i.smooth,_)),f=i.xOrigin||0,m=i.yOrigin||0,_!==Tr&&(b=_[0],x=_[1],T=_[2],S=_[3],r=E=_[4],n=w=_[5],6===_.length?(o=Math.sqrt(b*b+x*x),a=Math.sqrt(S*S+T*T),h=b||x?Bi(x,b)*Li:0,(c=T||S?Bi(T,S)*Li+h:0)&&(a*=Math.abs(Math.cos(c*ki))),i.svg&&(r-=f-(f*b+m*T),n-=m-(f*x+m*S))):(N=_[6],R=_[7],O=_[8],M=_[9],P=_[10],D=_[11],r=_[12],n=_[13],s=_[14],l=(g=Bi(N,P))*Li,g&&(A=E*(v=Math.cos(-g))+O*(y=Math.sin(-g)),I=w*v+M*y,C=N*v+P*y,O=E*-y+O*v,M=w*-y+M*v,P=N*-y+P*v,D=R*-y+D*v,E=A,w=I,N=C),u=(g=Bi(-T,P))*Li,g&&(v=Math.cos(-g),D=S*(y=Math.sin(-g))+D*v,b=A=b*v-O*y,x=I=x*v-M*y,T=C=T*v-P*y),h=(g=Bi(x,b))*Li,g&&(A=b*(v=Math.cos(g))+x*(y=Math.sin(g)),I=E*v+w*y,x=x*v-b*y,w=w*v-E*y,b=A,E=I),l&&Math.abs(l)+Math.abs(h)>359.9&&(l=h=0,u=180-u),o=Nt(Math.sqrt(b*b+x*x+T*T)),a=Nt(Math.sqrt(w*w+N*N)),g=Bi(E,w),c=Math.abs(g)>2e-4?g*Li:0,p=D?1/(D<0?-D:D):0),i.svg&&(A=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!Er(sr(t,ir)),A&&t.setAttribute("transform",A))),Math.abs(c)>90&&Math.abs(c)<270&&(F?(o*=-1,c+=h<=0?180:-180,h+=h<=0?180:-180):(a*=-1,c+=c<=0?180:-180)),i.x=r-((i.xPercent=r&&(i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+L,i.y=n-((i.yPercent=n&&(i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-n)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+L,i.z=s+L,i.scaleX=Nt(o),i.scaleY=Nt(a),i.rotation=Nt(h)+k,i.rotationX=Nt(l)+k,i.rotationY=Nt(u)+k,i.skewX=c+k,i.skewY=d+k,i.transformPerspective=p+L,(i.zOrigin=parseFloat(B.split(" ")[2])||0)&&(U[rr]=Or(B)),i.xOffset=i.yOffset=0,i.force3D=j.force3D,i.renderTransform=i.svg?Fr:Ui?Ur:Pr,i.uncache=0,i},Or=function(t){return(t=t.split(" "))[0]+" "+t[1]},Mr=function(t,e,i){var r=me(e);return Nt(parseFloat(e)+parseFloat(_r(t,"x",i+"px",r)))+r},Pr=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Ur(t,e)},Rr="0deg",Dr="0px",Nr=") ",Ur=function(t,e){var i=e||this,r=i.xPercent,n=i.yPercent,s=i.x,o=i.y,a=i.z,h=i.rotation,l=i.rotationY,u=i.rotationX,c=i.skewX,d=i.skewY,p=i.scaleX,f=i.scaleY,m=i.transformPerspective,_=i.force3D,g=i.target,v=i.zOrigin,y="",b="auto"===_&&t&&1!==t||!0===_;if(v&&(u!==Rr||l!==Rr)){var x,T=parseFloat(l)*ki,S=Math.sin(T),E=Math.cos(T);T=parseFloat(u)*ki,x=Math.cos(T),s=Mr(g,s,S*x*-v),o=Mr(g,o,-Math.sin(T)*-v),a=Mr(g,a,E*x*-v+v)}m!==Dr&&(y+="perspective("+m+Nr),(r||n)&&(y+="translate("+r+"%, "+n+"%) "),(b||s!==Dr||o!==Dr||a!==Dr)&&(y+=a!==Dr||b?"translate3d("+s+", "+o+", "+a+") ":"translate("+s+", "+o+Nr),h!==Rr&&(y+="rotate("+h+Nr),l!==Rr&&(y+="rotateY("+l+Nr),u!==Rr&&(y+="rotateX("+u+Nr),c===Rr&&d===Rr||(y+="skew("+c+", "+d+Nr),1===p&&1===f||(y+="scale("+p+", "+f+Nr),g.style[ir]=y||"translate(0, 0)"},Fr=function(t,e){var i,r,n,s,o,a=e||this,h=a.xPercent,l=a.yPercent,u=a.x,c=a.y,d=a.rotation,p=a.skewX,f=a.skewY,m=a.scaleX,_=a.scaleY,g=a.target,v=a.xOrigin,y=a.yOrigin,b=a.xOffset,x=a.yOffset,T=a.forceCSS,S=parseFloat(u),E=parseFloat(c);d=parseFloat(d),p=parseFloat(p),(f=parseFloat(f))&&(p+=f=parseFloat(f),d+=f),d||p?(d*=ki,p*=ki,i=Math.cos(d)*m,r=Math.sin(d)*m,n=Math.sin(d-p)*-_,s=Math.cos(d-p)*_,p&&(f*=ki,o=Math.tan(p-f),n*=o=Math.sqrt(1+o*o),s*=o,f&&(o=Math.tan(f),i*=o=Math.sqrt(1+o*o),r*=o)),i=Nt(i),r=Nt(r),n=Nt(n),s=Nt(s)):(i=m,s=_,r=n=0),(S&&!~(u+"").indexOf("px")||E&&!~(c+"").indexOf("px"))&&(S=_r(g,"x",u,"px"),E=_r(g,"y",c,"px")),(v||y||b||x)&&(S=Nt(S+v-(v*i+y*n)+b),E=Nt(E+y-(v*r+y*s)+x)),(h||l)&&(o=g.getBBox(),S=Nt(S+h/100*o.width),E=Nt(E+l/100*o.height)),o="matrix("+i+","+r+","+n+","+s+","+S+","+E+")",g.setAttribute("transform",o),T&&(g.style[ir]=o)},Lr=function(t,e,i,r,n,s){var o,a,h=360,l=J(n),u=parseFloat(n)*(l&&~n.indexOf("rad")?Li:1),c=s?u*s:u-r,d=r+c+"deg";return l&&("short"===(o=n.split("_")[1])&&(c%=h)!=c%180&&(c+=c<0?h:-360),"cw"===o&&c<0?c=(c+36e9)%h-~~(c/h)*h:"ccw"===o&&c>0&&(c=(c-36e9)%h-~~(c/h)*h)),t._pt=a=new Ei(t._pt,e,i,r,c,Hi),a.e=d,a.u="deg",t._props.push(i),a},kr=function(t,e){for(var i in e)t[i]=e[i];return t},Br=function(t,e,i){var r,n,s,o,a,h,l,u=kr({},i._gsap),c=i.style;for(n in u.svg?(s=i.getAttribute("transform"),i.setAttribute("transform",""),c[ir]=e,r=Cr(i,1),pr(i,ir),i.setAttribute("transform",s)):(s=getComputedStyle(i)[ir],c[ir]=e,r=Cr(i,1),c[ir]=s),Fi)(s=u[n])!==(o=r[n])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(n)<0&&(a=me(s)!==(l=me(o))?_r(i,n,s,l):parseFloat(s),h=parseFloat(o),t._pt=new Ei(t._pt,r,n,a,h-a,Yi),t._pt.u=l||0,t._props.push(n));kr(r,u)};Dt("padding,margin,Width,Radius",(function(t,e){var i="Top",r="Right",n="Bottom",s="Left",o=(e<3?[i,r,n,s]:[i+s,i+r,n+r,n+s]).map((function(i){return e<2?t+i:"border"+i+t}));xr[e>1?"border"+t:t]=function(t,e,i,r,n){var s,a;if(arguments.length<4)return s=o.map((function(e){return gr(t,e,i)})),5===(a=s.join(" ")).split(s[0]).length?s[0]:a;s=(r+"").split(" "),a={},o.forEach((function(t,e){return a[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,a,n)}}));var Gr,Xr,jr={name:"css",register:hr,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,r,n){var s,o,a,h,l,u,c,d,p,f,m,_,g,v,y,b,x,T,S,E=this._props,w=t.style,A=i.vars.startAt;for(c in Ri||hr(),e)if("autoRound"!==c&&(o=e[c],!wt[c]||!si(c,e,i,r,t,n)))if(l=typeof o,u=xr[c],"function"===l&&(l=typeof(o=o.call(i,r,t,n))),"string"===l&&~o.indexOf("random(")&&(o=we(o)),u)u(this,t,c,o,i)&&(y=1);else if("--"===c.substr(0,2))s=(getComputedStyle(t).getPropertyValue(c)+"").trim(),o+="",Le.lastIndex=0,Le.test(s)||(d=me(s),p=me(o)),p?d!==p&&(s=_r(t,c,s,p)+p):d&&(o+=d),this.add(w,"setProperty",s,o,r,n,0,0,c),E.push(c);else if("undefined"!==l){if(A&&c in A?(s="function"==typeof A[c]?A[c].call(i,r,t,n):A[c],c in j.units&&!me(s)&&(s+=j.units[c]),"="===(s+"").charAt(1)&&(s=gr(t,c))):s=gr(t,c),h=parseFloat(s),(f="string"===l&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0)&&(o=o.substr(2)),a=parseFloat(o),c in Vi&&("autoAlpha"===c&&(1===h&&"hidden"===gr(t,"visibility")&&a&&(h=0),fr(this,w,"visibility",h?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==c&&"transform"!==c&&~(c=Vi[c]).indexOf(",")&&(c=c.split(",")[0])),m=c in Fi)if(_||((g=t._gsap).renderTransform&&!e.parseTransform||Cr(t,e.parseTransform),v=!1!==e.smoothOrigin&&g.smooth,(_=this._pt=new Ei(this._pt,w,ir,0,1,g.renderTransform,g,0,-1)).dep=1),"scale"===c)this._pt=new Ei(this._pt,g,"scaleY",g.scaleY,(f?f*a:a-g.scaleY)||0),E.push("scaleY",c),c+="X";else{if("transformOrigin"===c){x=void 0,T=void 0,S=void 0,T=(x=(b=o).split(" "))[0],S=x[1]||"50%","top"!==T&&"bottom"!==T&&"left"!==S&&"right"!==S||(b=T,T=S,S=b),x[0]=yr[T]||T,x[1]=yr[S]||S,o=x.join(" "),g.svg?Ir(t,o,0,v,0,this):((p=parseFloat(o.split(" ")[2])||0)!==g.zOrigin&&fr(this,g,"zOrigin",g.zOrigin,p),fr(this,w,c,Or(s),Or(o)));continue}if("svgOrigin"===c){Ir(t,o,1,v,0,this);continue}if(c in Sr){Lr(this,g,c,h,o,f);continue}if("smoothOrigin"===c){fr(this,g,"smooth",g.smooth,o);continue}if("force3D"===c){g[c]=o;continue}if("transform"===c){Br(this,o,t);continue}}else c in w||(c=ar(c)||c);if(m||(a||0===a)&&(h||0===h)&&!ji.test(o)&&c in w)a||(a=0),(d=(s+"").substr((h+"").length))!==(p=me(o)||(c in j.units?j.units[c]:d))&&(h=_r(t,c,s,p)),this._pt=new Ei(this._pt,m?g:w,c,h,f?f*a:a-h,m||"px"!==p&&"zIndex"!==c||!1===e.autoRound?Yi:zi),this._pt.u=p||0,d!==p&&(this._pt.b=s,this._pt.r=Wi);else if(c in w)vr.call(this,t,c,s,o);else{if(!(c in t)){vt(c,o);continue}this.add(t,c,s||t[c],o,r,n)}E.push(c)}y&&Si(this)},get:gr,aliases:Vi,getSetter:function(t,e,i){var r=Vi[e];return r&&r.indexOf(",")<0&&(e=r),e in Fi&&e!==rr&&(t._gsap.x||gr(t,"x"))?i&&Ni===i?"scale"===e?Qi:Ji:(Ni=i||{})&&("scale"===e?tr:er):t.style&&!et(t.style[e])?Zi:~e.indexOf("-")?$i:mi(t,e)},core:{_removeProperty:pr,_getMatrix:Ar}};Ci.utils.checkPrefix=ar,Xr=Dt("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(Gr="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){Fi[t]=1})),Dt(Gr,(function(t){j.units[t]="deg",Sr[t]=1})),Vi[Xr[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+Gr,Dt("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");Vi[e[1]]=Xr[e[0]]})),Dt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){j.units[t]="px"})),Ci.registerPlugin(jr);var Vr=Ci.registerPlugin(jr)||Ci,Yr=(Vr.core.Tween,i(7088)),Hr=i.n(Yr);window.PIXI=r,window.PIXI.particles=i(4655),window.PIXI.particlesFx=i(3155),r.filters.DropShadowFilter=c,window.PIXI.spine=i(329),i(8030),i(5697),window.gsap=Vr,i(1233),window.Howler=Hr(),i(2639),Urso.Core.Extra={BrowserEvents:i(7720)}},7720:t=>{t.exports=class{constructor(){this.singleton=!0,this.RESIZE_DELAY=250,this.resizeHandler=this.resizeHandler.bind(this),this.visibilitychangeHandler=this.visibilitychangeHandler.bind(this),this._pointerEventsHandler=this._pointerEventsHandler.bind(this),this._resizeTimeoutId,this.init()}init(){document.addEventListener("visibilitychange",this.visibilitychangeHandler),window.addEventListener("resize",this.resizeHandler),window.addEventListener("orientationchange",this.resizeHandler),document.addEventListener("fullscreenchange",this.resizeHandler),document.addEventListener("webkitfullscreenchange",this.resizeHandler),document.addEventListener("mozfullscreenchange",this.resizeHandler),document.addEventListener("mousedown",this._pointerEventsHandler),document.addEventListener("mousemove",this._pointerEventsHandler),document.addEventListener("mouseup",this._pointerEventsHandler),document.addEventListener("touchstart",this._pointerEventsHandler),document.addEventListener("touchmove",this._pointerEventsHandler),document.addEventListener("touchend",this._pointerEventsHandler),document.addEventListener("wheel",this._pointerEventsHandler)}visibilitychangeHandler(){this.emit(Urso.events.EXTRA_BROWSEREVENTS_WINDOW_VISIBILITYCHANGE,document.visibilityState)}resizeHandler(){this._resizeTimeoutId&&Urso.clearTimeout(this._resizeTimeoutId),this.emit(Urso.events.EXTRA_BROWSEREVENTS_WINDOW_PRE_RESIZE),this._resizeTimeoutId=Urso.setTimeout((()=>this.emit(Urso.events.EXTRA_BROWSEREVENTS_WINDOW_RESIZE)),this.RESIZE_DELAY)}_pointerEventsHandler(t){this.emit(Urso.events.EXTRA_BROWSEREVENTS_POINTER_EVENT,t)}}},2639:()=>{PIXI.Text.prototype.drawLetterSpacing=function(t,e,i,r){void 0===r&&(r=!1);var n=this._style.letterSpacing,s="letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype;if((0===n||s)&&(!this.fillCustomColors||0===this.fillCustomColors.length))return s&&(this.context.letterSpacing=n,this.context.textLetterSpacing=n),void(r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i));var o=e,a=this.text.indexOf(t),h=this.text.length,l=new Array(h);if(this.fillCustomColors)for(var u in this.fillCustomColors){var c=this.fillCustomColors[u];l.fill(c.color,c.position,h)}for(var d=Array.from?Array.from(t):t.split(""),p=this.context.measureText(t).width,f=0,m=0;m<d.length;++m){var _=d[m];r?this.context.strokeText(_,o,i):(l[a+m]&&(this.context.fillStyle=l[a+m]),this.context.fillText(_,o,i)),o+=p-(f=this.context.measureText(t.substring(m+1)).width)+n,p=f}},PIXI.Container.prototype.renderAdvanced=function(t){var e=this.filters,i=this._mask,r=[];if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n])}var s=e&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==constants.MASK_TYPES.NONE));if(s&&t.batch.flush(),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t),n=0;for(var o=this.children.length;n<o;++n)this.children[n].ignoreParentMask&&i?i&&r.push(n):this.children[n].render(t)}s&&t.batch.flush(),i&&t.mask.pop(this),r.length>0&&(r.forEach((e=>this.children[e].render(t))),t.batch.flush()),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()}},1233:()=>{Urso.setTimeout=(t,e)=>gsap.delayedCall(e/1e3,t),Urso.clearTimeout=t=>{t.kill()}},3788:(t,e,i)=>{Urso.Core.Lib={Cache:i(5040),Composition:i(2898),Device:i(5519),Helper:i(5176),Loader:i(809),LocalData:i(1661),Logger:i(2198),Math:i(6945),ObjectPool:i(9929),Time:i(8103),Tween:i(5540)}},5040:t=>{t.exports=class{constructor(){this.assetsList={image:{},atlas:{},json:{},binary:{},spine:{},bitmapFont:{},sound:{},texture:{},file:{}},this.globalAtlas=new PIXI.spine.TextureAtlas}addFile(t,e){this.assetsList.file[t]=e}addAtlas(t,e){this.assetsList.atlas[t]=e}addBinary(t,e){this.assetsList.binary[t]=e}addBitmapFont(t,e){this.assetsList.bitmapFont[t]=e}addContainer(t,e){this.assetsList.container[t]=e}addImage(t,e){this.assetsList.image[t]=e}addJson(t,e){this.assetsList.json[t]=e}addSound(t,e){this.assetsList.sound[t]=e}addTexture(t,e){this.assetsList.texture[t]=e,this.globalAtlas.addTexture(t,e)}addSpine(t,e){this.assetsList.spine[t]=e}getFile(t){return this.assetsList.file[t]}getAtlas(t){return this.assetsList.atlas[t]}getBinary(t){return this.assetsList.binary[t]}getBitmapFont(t){return this.assetsList.bitmapFont[t]}getContainer(t){return this.assetsList.container[t]}getImage(t){return this.assetsList.image[t]}getJson(t){return this.assetsList.json[t]}getSound(t){return this.assetsList.sound[t]}getSpine(t){return this.assetsList.spine[t]}getTexture(t){return this.assetsList.texture[t]}getGlobalAtlas(){return this.globalAtlas}}},2898:t=>{class e{static inherit(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];class n{get base(){return i}constructor(){var t=0;for(var i of this.base){var r,n=new i((r=t++)<0||arguments.length<=r?void 0:arguments[r]);e.copy(this,n)}}}for(var s of i)e.copy(n,s),e.copy(n.prototype,s.prototype,!0);return n}static copy(t,i,r){for(var n of Reflect.ownKeys(i))if("constructor"!==n&&"prototype"!==n&&"name"!==n){var s=Object.getOwnPropertyDescriptor(i,n);Object.defineProperty(t,n,s)}r&&Object.getPrototypeOf(i)!==Object.prototype&&e.copy(t,Object.getPrototypeOf(i))}}t.exports=e},5519:t=>{LibDevice=function(){this.deviceReadyAt=0,this.initialized=!1,this.desktop=!1,this.iOS=!1,this.cocoonJS=!1,this.cocoonJSApp=!1,this.cordova=!1,this.node=!1,this.nodeWebkit=!1,this.electron=!1,this.ejecta=!1,this.crosswalk=!1,this.android=!1,this.chromeOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.windowsPhone=!1,this.canvas=!1,this.canvasBitBltShift=null,this.webGL=!1,this.file=!1,this.fileSystem=!1,this.localStorage=!1,this.worker=!1,this.css3D=!1,this.pointerLock=!1,this.typedArray=!1,this.vibration=!1,this.getUserMedia=!0,this.quirksMode=!1,this.touch=!1,this.mspointer=!1,this.wheelEvent=null,this.arora=!1,this.chrome=!1,this.chromeVersion=0,this.epiphany=!1,this.firefox=!1,this.firefoxVersion=0,this.ie=!1,this.ieVersion=0,this.trident=!1,this.tridentVersion=0,this.mobileSafari=!1,this.midori=!1,this.opera=!1,this.safari=!1,this.webApp=!1,this.silk=!1,this.audioData=!1,this.webAudio=!1,this.ogg=!1,this.opus=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.webm=!1,this.oggVideo=!1,this.h264Video=!1,this.mp4Video=!1,this.webmVideo=!1,this.vp9Video=!1,this.hlsVideo=!1,this.iPhone=!1,this.iPhone4=!1,this.iPhone5=!1,this.iPad=!1,this.pixelRatio=0,this.littleEndian=!1,this.LITTLE_ENDIAN=!1,this.support32bit=!1,this.fullscreen=!1,this.requestFullscreen="",this.cancelFullscreen="",this.fullscreenKeyboard=!1,this.ScreenOrientation={LANDSCAPE:"landscape",PORTRAIT:"portrait"}},LibDevice=new LibDevice,LibDevice.whenReady=function(t,e,i){var r=this._readyCheck;if(this.deviceReadyAt||!r)t.call(e,this);else if(r._monitor||i)r._queue=r._queue||[],r._queue.push([t,e]);else{r._monitor=r.bind(this),r._queue=r._queue||[],r._queue.push([t,e]);var n=void 0!==window.cordova,s=navigator.isCocoonJS;"complete"===document.readyState||"interactive"===document.readyState?window.setTimeout(r._monitor,0):n&&!s?document.addEventListener("deviceready",r._monitor,!1):(document.addEventListener("DOMContentLoaded",r._monitor,!1),window.addEventListener("load",r._monitor,!1))}},LibDevice._readyCheck=function(){var t=this._readyCheck;if(document.body){if(!this.deviceReadyAt){var e;for(this.deviceReadyAt=Date.now(),document.removeEventListener("deviceready",t._monitor),document.removeEventListener("DOMContentLoaded",t._monitor),window.removeEventListener("load",t._monitor),this._initialize(),this.initialized=!0;e=t._queue.shift();){var i=e[0],r=e[1];i.call(r,this)}this._readyCheck=null,this._initialize=null}}else window.setTimeout(t._monitor,20)},LibDevice._initialize=function(){var t,e,i,r=this;!function(){var t=navigator.userAgent;/Playstation Vita/.test(t)?r.vita=!0:/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?r.kindle=!0:/Android/.test(t)?r.android=!0:/CrOS/.test(t)?r.chromeOS=!0:/iP[ao]d|iPhone/i.test(t)?r.iOS=!0:/Linux/.test(t)?r.linux=!0:/Mac OS/.test(t)?r.macOS=!0:/Windows/.test(t)&&(r.windows=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(r.android=!1,r.iOS=!1,r.macOS=!1,r.windows=!0,r.windowsPhone=!0);var e=/Silk/.test(t);(r.windows||r.macOS||r.linux&&!e||r.chromeOS)&&(r.desktop=!0),(r.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(r.desktop=!1)}(),function(){r.audioData=!!window.Audio,r.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var t=document.createElement("audio");try{t.canPlayType&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(r.ogg=!0),(t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||t.canPlayType("audio/opus;").replace(/^no$/,""))&&(r.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(r.mp3=!0),t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(r.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(r.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(r.webm=!0))}catch(t){}}(),function(){var t=document.createElement("video");try{t.canPlayType&&(t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(r.oggVideo=!0),t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(r.h264Video=!0,r.mp4Video=!0),t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(r.webmVideo=!0),t.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(r.vp9Video=!0),t.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(r.hlsVideo=!0))}catch(t){}}(),function(){var t=navigator.userAgent;if(/Arora/.test(t)?r.arora=!0:/Chrome\/(\d+)/.test(t)&&!r.windowsPhone?(r.chrome=!0,r.chromeVersion=parseInt(RegExp.$1,10)):/Epiphany/.test(t)?r.epiphany=!0:/Firefox\D+(\d+)/.test(t)?(r.firefox=!0,r.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&r.iOS?r.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(r.ie=!0,r.ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(t)?r.midori=!0:/Opera/.test(t)?r.opera=!0:/Safari/.test(t)&&!r.windowsPhone?r.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(r.ie=!0,r.trident=!0,r.tridentVersion=parseInt(RegExp.$1,10),r.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(r.silk=!0),navigator.standalone&&(r.webApp=!0),void 0!==window.cordova&&(r.cordova=!0),"undefined"!=typeof process&&(r.node=!0),r.node&&"object"==typeof process.versions&&(r.nodeWebkit=!!process.versions["node-webkit"],r.electron=!!process.versions.electron),navigator.isCocoonJS&&(r.cocoonJS=!0),r.cocoonJS)try{r.cocoonJSApp="undefined"!=typeof CocoonJS}catch(t){r.cocoonJSApp=!1}void 0!==window.ejecta&&(r.ejecta=!0),/Crosswalk/.test(t)&&(r.crosswalk=!0)}(),function(){var t,e=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var n in document.body.insertBefore(e,null),i)void 0!==e.style[n]&&(e.style[n]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(i[n]));document.body.removeChild(e),r.css3D=void 0!==t&&t.length>0&&"none"!==t}(),r.pixelRatio=window.devicePixelRatio||1,r.iPhone=-1!=navigator.userAgent.toLowerCase().indexOf("iphone"),r.iPhone4=2==r.pixelRatio&&r.iPhone,r.iPhone5=2===r.pixelRatio&&r.iPhone&&(320===screen.availWidth&&568===screen.availHeight||568===screen.availWidth&&320===screen.availHeight),r.iPad=-1!=navigator.userAgent.toLowerCase().indexOf("ipad"),"undefined"!=typeof Int8Array?r.typedArray=!0:r.typedArray=!1,"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(r.littleEndian=(t=new ArrayBuffer(4),e=new Uint8Array(t),i=new Uint32Array(t),e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041==i[0]||2712847316!=i[0]&&null),r.LITTLE_ENDIAN=r.littleEndian),r.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==r.littleEndian&&function(){if(void 0===Uint8ClampedArray)return!1;var t=document.createElement("canvas").getContext("2d");return!!t&&t.createImageData(1,1).data instanceof Uint8ClampedArray}(),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(r.vibration=!0),function(){r.canvas=!!window.CanvasRenderingContext2D||r.cocoonJS;try{r.localStorage=!!localStorage.getItem}catch(t){r.localStorage=!1}r.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),r.fileSystem=!!window.requestFileSystem,r.webGL=function(){try{var t=document.createElement("canvas");return t.screencanvas=!1,!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(t){return!1}}(),r.webGL=!!r.webGL,r.worker=!!window.Worker,r.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,r.quirksMode="CSS1Compat"!==document.compatMode,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,r.getUserMedia=r.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,r.firefox&&r.firefoxVersion<21&&(r.getUserMedia=!1),!r.iOS&&(r.ie||r.firefox||r.chrome)&&(r.canvasBitBltShift=!0),(r.safari||r.mobileSafari)&&(r.canvasBitBltShift=!1)}(),function(){for(var t=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],e=document.createElement("div"),i=0;i<t.length;i++)if(e[t[i]]){r.fullscreen=!0,r.requestFullscreen=t[i];break}var n=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"];if(r.fullscreen)for(var s=0;s<n.length;s++)if(document[n[s]]){r.cancelFullscreen=n[s];break}window.Element&&Element.ALLOW_KEYBOARD_INPUT&&(r.fullscreenKeyboard=!0)}(),("ontouchstart"in document.documentElement||window.navigator.maxTouchPoints&&window.navigator.maxTouchPoints>=1)&&(r.touch=!0),(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&(r.mspointer=!0),r.cocoonJS||("onwheel"in window||r.ie&&"WheelEvent"in window?r.wheelEvent="wheel":"onmousewheel"in window?r.wheelEvent="mousewheel":r.firefox&&"MouseScrollEvent"in window&&(r.wheelEvent="DOMMouseScroll"))},LibDevice.canPlayAudio=function(t){return!!("mp3"===t&&this.mp3||"ogg"===t&&(this.ogg||this.opus)||"m4a"===t&&this.m4a||"opus"===t&&this.opus||"wav"===t&&this.wav||"webm"===t&&this.webm)},LibDevice.canPlayVideo=function(t){return!!("webm"===t&&(this.webmVideo||this.vp9Video)||"mp4"===t&&(this.mp4Video||this.h264Video)||("ogg"===t||"ogv"===t)&&this.oggVideo||"mpeg"===t&&this.hlsVideo)},LibDevice.isConsoleOpen=function(){return!(!window.console||!window.console.firebug)||!(!window.console||(console.profile(),console.profileEnd(),console.clear&&console.clear(),!console.profiles))&&console.profiles.length>0},LibDevice.isAndroidStockBrowser=function(){var t=window.navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/);return t&&t[1]<537},t.exports=LibDevice},5176:t=>{t.exports=class{constructor(){this._arFactor=Math.PI/180}parseGetParams(t){var e={},i=window.location.href.substring(1).split("?");if(i[1])for(var r=i[1].split("&"),n=0;n<r.length;n++){var s=r[n].split("=");e[s[0]]=void 0===s[1]?"":s[1]}return t?e[t]:e}arraysGetUniqElements(t,e){var i,r,n=[],s={},o=function(t){for(r of t)s[r]?s[r].counter++:s[r]={counter:1,value:r}};for(i in o(t),o(e),s)1===s[i].counter&&n.push(s[i].value);return n}stringReplace(t,e,i){return i.split(t).join(e)}capitaliseFirstLetter(t){return t.charAt(0).toUpperCase()+t.slice(1)}initial(t){return t.pop(),t}ldgZero(t,e){for(var i=t+"";i.length<e;)i="0"+i;return i}mergeArrays(t,e){return t.concat(e.filter((function(e){return t.indexOf(e)<0})))}objectFlip(t){var e={};return Object.keys(t).forEach((i=>{e[t[i]]=i})),e}recursiveSet(t,e,i){var r=(t="string"==typeof t?t.split("."):t).shift();return t.length>0?(i[r]||(i[r]={}),this.recursiveSet(t,e,i[r])):i[r]=e,!0}rowsToCols(t){return Object.keys(t[0]).map((e=>t.map((t=>t[e]))))}recursiveGet(t,e,i){if(void 0===e)return i;for(var r of t="string"==typeof t?t.split("."):t){if(void 0===e[r])return i;e=e[r]}return e}recursiveDelete(t,e){t="string"==typeof t?t.split("."):t;for(var i=0;i<t.length;i++){var r=t[i];if(void 0===e[r])return!1;i===t.length-1?delete e[r]:e=e[r]}return!0}transpose(t){return Object.keys(t[0]).map((e=>t.map((t=>t[e]))))}mergeObjectsRecursive(t,e,i){var r=i?t:this.objectClone(t);for(var n in e)"object"==typeof e[n]&&"object"==typeof t[n]?r[n]=this.mergeObjectsRecursive(t[n],e[n],i):r[n]=e[n];return r}renameObjectsKey(t,e,i){e!==i&&(Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(t,e)),delete t[e])}objectClone(t,e){if(!t||"object"!=typeof t)return t;void 0===e&&(e=999);var i,r,n="function"==typeof t.pop?[]:{};if(t.hasOwnProperty)for(i in t)t.hasOwnProperty(i)&&(r=t[i],n[i]="imageSrc"===i?r:r&&"object"==typeof r?e?this.objectClone(r,e-1):"[object Object]":r);return n}getObjectSize(t){return Object.keys(t).length}objectApply(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:999;if(!i)return t;for(var r in e){var n=e[r];t[r]?"array"==typeof n||"object"==typeof n?t[r]=this.objectApply(t[r],e[r],i-1):e[r]!==t[r]&&(t[r]=n):t[r]=n}return t}checkDeepEqual(t,e){return JSON.stringify(t)===JSON.stringify(e)}checkEqual(t,e){var i=t=>{var e={},r=Object.keys(t);for(var n in r.sort(),r)if(r.hasOwnProperty(n)){var s=r[n],o=t[s];"object"==typeof t[s]&&(o=i(o)),e[s]=o}return e},r=i(t),n=i(e);return this.checkDeepEqual(r,n)}checkArraysPartialEntry(t,e){if(!t||!e)return!1;t=t.sort();for(var i=(e=e.sort()).length-1,r=t.length-1;r>=0;r--)if(JSON.stringify(t[r])===JSON.stringify(e[i])&&i--,-1===i)return!0;return!1}mobileAndTabletCheck(){var t,e=!1;return t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e}reactive(t,e,i){for(var r=Object.getOwnPropertyDescriptor(t,e),n=t;!r&&n.__proto__;){n=n.__proto__;var s=Object.getOwnPropertyDescriptor(n,e);s&&(s.value||s.set||s.get)&&(r=s)}if(!r)return!1;if(void 0!==r.value){var o=r.value;r.get=function(){return o},r.set=function(t){o=t},delete r.value,delete r.writable}var a=r.set;return r.set=function(e){a&&a.call(t,e),i.call(t,e)},Object.defineProperty(t,e,r),!0}getLengthBy2Points(t,e){return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))}getAngleBy3Points(t,e,i){var r=0,n=this.getLengthBy2Points(t,i),s=this.getLengthBy2Points(t,e),o=this.getLengthBy2Points(e,i);if(0!==s&&0!==o){var a=(s*s+o*o-n*n)/(2*s*o);r=Math.acos(a)}return r}getRadian(t){return t*this._arFactor}getAngle(t){return t/this._arFactor}logicBlocksDo(){var t=Array.prototype.slice.call(arguments),e=t.shift(),i=t.shift();if(!e._logicBlocksInstances)for(var r in e._logicBlocksInstances={},e._logicBlocks){var n=e._logicBlocks[r],s=this.capitaliseFirstLetter(n);e._logicBlocksInstances[n]=e.getInstance(s)}var o=[];for(var a in e._logicBlocksInstances)if(e._logicBlocksInstances[a][i]){var h=e._logicBlocksInstances[a][i].apply(this,t);o.push(h)}return o}}},809:t=>{t.exports=class{constructor(){this._isRunning=!1,this._assetsQuery=[],this._onLoadUpdate=()=>{}}isRunning(){return this._isRunning}addAsset(t){this._assetsQuery.push(t)}_getLoadPath(t){var{path:e}=t;if(0===e.indexOf("http"))return e;if(!Urso.config.useBinPath)return"assets/".concat(e);var i=Urso.getInstance("Modules.Assets.Service").getQuality(),r=e.split("/");return"images"===r[0]&&r.splice(1,0,i),"bin/".concat(r.join("/"))}_storeAsset(t,e){if(e.error)return Urso.logger.warn("LibLoader error: ",e.error,t);switch(t.type){case Urso.types.assets.ATLAS:Urso.cache.addAtlas(t.key,e);break;case Urso.types.assets.BITMAPFONT:Urso.cache.addBitmapFont(t.key,e);break;case Urso.types.assets.FONT:Urso.cache.addFile(t.key,e);break;case Urso.types.assets.CONTAINER:Urso.cache.addContainer(t.key,e);break;case Urso.types.assets.IMAGE:Urso.cache.addImage(t.key,e);break;case Urso.types.assets.JSON:Urso.cache.addJson(t.key,e);break;case Urso.types.assets.SOUND:Urso.cache.addSound(t.key,e);break;case Urso.types.assets.SPINE:Urso.cache.addSpine(t.key,e)}}setOnLoadUpdate(t){t&&(this._onLoadUpdate=t)}start(t){if(this._isRunning)return!1;this._isRunning=!0;var e=new PIXI.Loader,i=Urso.config.appVersion;i&&(e.defaultQueryString="appVersion=".concat(i)),this._assetsQuery.forEach((t=>{var i=t.params||!1;t.type===Urso.types.assets.SPINE&&t.noAtlas&&(i||(i={}),i.metadata={spineAtlas:Urso.cache.getGlobalAtlas()});var r=this._getLoadPath(t);e.add(t.key,r,i,(e=>this._storeAsset(t,e)))})),this._onLoadUpdate({progress:0}),e.onProgress.add(this._onLoadUpdate),e.load(function(e,i){this._onLoadUpdate({progress:100}),this._assetsQuery=[],this._isRunning=!1,t()}.bind(this))}}},1661:t=>{t.exports=class{constructor(){this._data={}}get(t){return Urso.helper.recursiveGet(t,this._data)}set(t,e){return Urso.helper.recursiveSet(t,e,this._data),!0}}},2198:t=>{var e=["ERROR","WARNING","INFO","LOG"];t.exports=class{constructor(){this._logLevel={},this._setupLevels(),this._logLevel.LOG?window.log=console.log.bind(console):window.log=console.log=()=>{}}log(){this._logLevel.LOG&&console.log.apply(console,arguments)}info(){this._logLevel.INFO&&console.info.apply(this,arguments)}warn(){this._logLevel.WARNING&&console.warn.apply(this,arguments)}error(){this._logLevel.ERROR&&console.error.apply(this,arguments)}_setupLevels(){var t=(Urso.helper.parseGetParams("logLevel")||Urso.config.defaultLogLevel).split(",");for(var[i,r]of Object.entries(e)){var n=!1;(t.includes(i)||t.includes(r))&&(n=!0),this._logLevel[r]=n}console.log("LibLogger log Level: ".concat(JSON.stringify(this._logLevel)))}}},6945:t=>{t.exports=class{intMakeBetween(t,e,i){return Math.max.apply(Math,[e,Math.min.apply(Math,[i,t])])}getRandomInt(t){return this.getRandomIntBetween(0,t)}getRandomIntBetween(t,e){return Math.floor(Math.random()*(e-t+1))+t}roundToDigits(t,e){if(isNaN(t)||isNaN(e))return!1;var i=Math.pow(10,e);return Math.round(t*i)/i}}},9929:t=>{function e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class i{constructor(t,i,r){e(this,"free",!0),e(this,"putCacheTimeKey",0),e(this,"key",null),e(this,"branchKey",0),e(this,"data",null),this.data=t,this.key=i,this.branchKey=r}}t.exports=class{constructor(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e(this,"_pool",{}),e(this,"resetFunction",(()=>{})),e(this,"constructorFunction",(()=>{})),e(this,"_maxSize",0),e(this,"_lastBranchKeys",{}),e(this,"_putTimeCache",{}),this.resetFunction=i,this.constructorFunction=t,this._maxSize=n,this._createInitial(r)}getElement(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",e=arguments.length>1?arguments[1]:void 0;this._checkPoolKey(t);var i=this._pool[t];for(var r of Object.values(i))if(r.free)return r.free=!1,r.putCacheTimeKey&&(delete this._putTimeCache[r.putCacheTimeKey],r.putCacheTimeKey=0),r;var n=this._createElement(t,e);return n.free=!1,n}putElement(t){if(t.free=!0,this.resetFunction(t.data),this._maxSize){var e=this._getElementBranchKey("_putTimeCache",this._putTimeCache);this._putTimeCache[e]=t,t.putCacheTimeKey=e}this._checkMaxSize()}_checkMaxSize(){this._maxSize&&this._getPoolSize()>this._maxSize&&this._removeOldestInactiveElement()}_removeOldestInactiveElement(){var t=Object.keys(this._putTimeCache)[0],e=this._putTimeCache[t];delete this._pool[e.key][e.branchKey],e.free=!1,e.putCacheTimeKey=0,e.key=null,e.branchKey=0,e.data=null,delete this._putTimeCache[t]}_getPoolSize(){var t=0;for(var e of Object.values(this._pool))t+=Object.keys(e).length;return t}_createElement(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.resetFunction(this.constructorFunction(t,e)),n=this._getElementBranchKey(t,this._pool[t]),s=new i(r,t,n);return this._pool[t][n]=s,s}_getElementBranchKey(t,e){var i=Urso.time.get();return e[i]&&(i=this._lastBranchKeys[t]+1),this._lastBranchKeys[t]=i,i}_createInitial(t){if(t){for(var e=[],i=0;i<t;i++)e.push(this.getElement());e.forEach((t=>{this.putElement(t)}))}}_checkPoolKey(t){this._pool[t]||(this._pool[t]={})}_debugGetPoolData(){return this._pool}}},8103:t=>{t.exports=class{get(t){return t||(t=new Date),t.getTime()}getUnixtime(t){return t||(t=new Date),~~(t.getTime()/1e3)}}},5540:t=>{t.exports=class{constructor(){this.singleton=!0,this._tweenIndex=0,this._tweens={}}removeAll(){for(var t in this._tweens)this._tweens[t].stop();this._tweens={}}add(t){var e=this._keyGenerate(),i=gsap.timeline({repeat:1,onComplete:()=>{this._onCompleteHandler(e)},onUpdate:()=>{this._onUpdateHandler(e)}}),r={id:e,isRunning:!1,target:t,to:this._to,start:this._start,pause:this._pause,resume:this._resume,stop:this._stop,_timeScale:1,get timeScale(){return this._timeScale},set timeScale(t){return this._timeScale},_timeline:i,_complete:!1,_paused:!0,_functions:{onStart:[],onUpdate:[],onComplete:[]}};return r.onComplete={add:t=>(r._functions.onComplete.push(t),r)},r.onStart={add:t=>(r._functions.onStart.push(t),r)},r.onUpdate={add:t=>(r._functions.onUpdate.push(t),r)},this._tweens[e]=r,r}_keyGenerate(){return this._tweenIndex++,(new Date).getTime()+"_"+this._tweenIndex}_to(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=Urso.helper.objectClone(t,10);return s.duration=e/1e3,s.easing=i,s.delay=n,this._timeline.to(this.target,s),r&&this.start(),this}_start(){for(var t=0;t<this._functions.onStart.length;t++)this._functions.onStart[t]();return this.resume(),this}_pause(){return this._paused=!0,this.isRunning=!1,this._timeline.pause(),this}_resume(){return this._paused=!1,this.isRunning=!0,this._timeline.resume(),this}_stop(){return this.pause(),this._timeline.kill(),this._complete=!0,this}_onUpdateHandler(t){for(var e=this._tweens[t],i=~~(100*e._timeline.progress()),r=0;r<e._functions.onUpdate.length;r++)e._functions.onUpdate[r](e,i)}_onCompleteHandler(t){for(var e=this._tweens[t]._functions.onComplete,i=0;i<e.length;i++)e[i]()}}},6697:(t,e,i)=>{Urso.Core.Modules={},i(4042),i(7526),i(5487),i(8183),i(2350),i(9759),i(2623),i(119),i(5201),i(7281),i(5750)},4042:(t,e,i)=>{Urso.Core.Modules.Assets={BaseModel:i(4846),Config:i(5347),Controller:i(1100),Service:i(8787)},i(4369)},4846:t=>{t.exports=class{constructor(t){this.simpleClass=!0,this.setupParams(t),this._templatePath=!1}setupParams(t){this.id=Urso.helper.recursiveGet("id",t,!1),this.type=Urso.helper.recursiveGet("type",t,null),this.key=Urso.helper.recursiveGet("key",t,!1),this.path=Urso.helper.recursiveGet("path",t,!1),this.useBinPath=Urso.helper.recursiveGet("useBinPath",t,!1)||"development"!==Urso.config.mode,this.loadingGroup=Urso.helper.recursiveGet("loadingGroup",t,!1),this.placeHolder=Urso.helper.recursiveGet("placeHolder",t,!1)}}},5347:t=>{t.exports=class{constructor(){this.singleton=!0,this.defaultQualityFactor=1,this.qualityFactors={medium:.5,hd:.75,high:1},this.loadingGroups={initial:0},this.lazyLoadGroups=[]}}},1100:t=>{t.exports=class{constructor(){this.singleton=!0}updateQuality(){Urso.config.useBinPath&&this.getInstance("Service").updateQuality(),console.log("[ASSETS] Quality set to",this.getInstance("Service").getQuality())}getQuality(){return this.getInstance("Service").getQuality()}getCurrentResolution(){return this.getInstance("Service").getCurrentResolution()}preload(t,e){this.getInstance("Service").sortAssets(t),this.getInstance("Service").startLoad(e)}loadGroup(t,e){this.getInstance("Service").loadGroup(t,e)}}},4369:(t,e,i)=>{Urso.Core.Modules.Assets.Models={Audiosprite:i(6931),Atlas:i(56),BitmapFont:i(2191),Container:i(6760),Image:i(8298),Json:i(6202),Sound:i(8587),Font:i(5836),Spine:i(6578)}},56:t=>{class e extends Urso.Core.Modules.Assets.BaseModel{constructor(t){super(t),this.type=Urso.types.assets.ATLAS}}t.exports=e},6931:(t,e,i)=>{var{Howler:r}=i(7088);class n extends Urso.Core.Modules.Assets.BaseModel{constructor(t){super(t),this.type=Urso.types.assets.AUDIOSPRITE,this.codecs=["ogg","m4a","mp3","wav"];var e=this.codecs.filter((t=>r.codecs(t)))[0];this.contents=Urso.helper.recursiveGet("contents",t,[{type:Urso.types.assets.JSON,key:"".concat(this.key,"_audiospriteJson"),path:"".concat(this.path,".json")},{type:Urso.types.assets.SOUND,key:"".concat(this.key,"_audiospriteSound"),path:"".concat(this.path,".").concat(e)}]),this.path=!1,this.key=!1}setupParams(t){super.setupParams(t),this.path=Urso.helper.recursiveGet("path",t,!1)}}t.exports=n},2191:t=>{class e extends Urso.Core.Modules.Assets.BaseModel{constructor(t){super(t),this.type=Urso.types.assets.BITMAPFONT}}t.exports=e},6760:t=>{class e extends Urso.Core.Modules.Assets.BaseModel{constructor(t){super(t),this.type=Urso.types.assets.CONTAINER,this.key=!1,this.path=!1}setupParams(t){super.setupParams(t),this.contents=Urso.helper.recursiveGet("contents",t,[])}}t.exports=e},5836:t=>{class e extends Urso.Core.Modules.Assets.BaseModel{constructor(t){super(t),this.type=Urso.types.assets.FONT}}t.exports=e},8298:t=>{class e extends Urso.Core.Modules.Assets.BaseModel{constructor(t){super(t),this.type=Urso.types.assets.IMAGE}setupParams(t){super.setupParams(t),this.preloadGPU=Urso.helper.recursiveGet("preloadGPU",t,!1)}}t.exports=e},6202:t=>{class e extends Urso.Core.Modules.Assets.BaseModel{constructor(t){super(t),this.type=Urso.types.assets.JSON}}t.exports=e},8587:t=>{class e extends Urso.Core.Modules.Assets.BaseModel{constructor(t){super(t),this.type=Urso.types.assets.SOUND,this.params={loadType:1,xhrType:"blob"}}}t.exports=e},6578:t=>{class e extends Urso.Core.Modules.Assets.BaseModel{constructor(t){super(t),this.type=Urso.types.assets.SPINE}setupParams(t){super.setupParams(t),this.noAtlas=Urso.helper.recursiveGet("noAtlas",t,!1)}}t.exports=e},8787:t=>{t.exports=class{constructor(){this.singleton=!0,this.assets={},this._currentQuality="auto",this._addedAssetsCache=[],this.lazyLoadProcessStarted=!1}getQuality(){return this._currentQuality}updateQuality(){this._currentQuality=this._detectQuality(),Urso.addInstancesMode(this._currentQuality+"Quality")}sortAssets(t){if(this.assets[this.getInstance("Config").loadingGroups.initial]=[],Array.isArray(t))for(var e of t)this._addAsset(e);else this._addAsset(t)}startLoad(t){this.loadGroup(this.getInstance("Config").loadingGroups.initial,(()=>{t(),this._startLazyLoad()}).bind(this))}loadUpdate(t){Urso.scenes.loadUpdate(Math.floor(t.progress))}loadGroup(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};if(!this.assets[t])return Urso.logger.error("ModulesAssetsService group error, no assets:"+t+" Check ModulesAssetsConfig please");this._loadGroupAtlases(t,(()=>{this._loadGroupRestAssets(t,e)}))}_loadGroupAtlases(t,e){var i=this.assets[t].filter((t=>t.type===Urso.types.assets.ATLAS));if(!i.length)return e();var r=Urso.getInstance("Lib.Loader");for(var n of i)this._addAssetToLoader(n,r);r.start((()=>{this._processLoadedAtlases(t),e()}))}_loadGroupRestAssets(t,e){var i=Urso.getInstance("Lib.Loader");i.setOnLoadUpdate(this.loadUpdate.bind(this));var r=[];for(var n of this.assets[t])n.type!==Urso.types.assets.ATLAS&&(Urso.cache.getFile(n.path)||(n.type===Urso.types.assets.SPINE&&n.noAtlas?r.push(n):this._addAssetToLoader(n,i)));i.start((()=>{this._processLoadedAssets(t),this._loadNoAtlasSpines(r,(()=>{this.emit(Urso.events.MODULES_ASSETS_GROUP_LOADED,t),e()}))}))}_loadNoAtlasSpines(t,e){if(!t.length)return e();var i=Urso.getInstance("Lib.Loader");for(var r of t)this._addAssetToLoader(r,i);i.start(e)}_processLoadedAtlases(t){var e=this.assets[t].filter((t=>t.type===Urso.types.assets.ATLAS));for(var i of e)for(var r=i.key,n=Urso.cache.getAtlas(r),s=n.url.split("/").slice(0,-1).join("/"),o=0;o<n.spritesheet._frames.length;o++){var a=n.spritesheet._frames[o],h=n.textures[o],l=a.filename;a.filename.includes("/")||(l=s+"/"+a.filename),Urso.cache.addFile(l,h)}}_processLoadedAssets(t){for(var e of this.assets[t])e.type===Urso.types.assets.IMAGE&&this._processLoadedImage(e),e.type===Urso.types.assets.BITMAPFONT&&this._processLoadedBitmapFont(e),e.type===Urso.types.assets.FONT&&this._processLoadedFont(e);delete this.assets[t]}_processLoadedFont(t){var e=Urso.cache.getFile(t.key),i=new FontFace(t.key,e.data);i.load().then((()=>{document.fonts.add(i)}))}_processLoadedBitmapFont(t){this._updateFontKey(t.key)}_updateFontKey(t){var e=Urso.cache.getBitmapFont(t);if(!PIXI.BitmapFont.available[t]&&e){var i=PIXI.BitmapFont.available[e.bitmapFont.font];i&&(PIXI.BitmapFont.available[t]=i,delete PIXI.BitmapFont.available[e.bitmapFont.font])}}getCurrentResolution(){var{qualityFactors:t,defaultQualityFactor:e}=this.getInstance("Config");return t[this._currentQuality]||e||1}_processLoadedImage(t){var e=this.getCurrentResolution(),i=t.key,r=Urso.cache.getImage(i);if(r){var n=new PIXI.BaseTexture(r.data,{resolution:e}),s=new PIXI.Texture(n);Urso.cache.addTexture(i,s)}else{var o=Urso.cache.getFile(t.path);if(!o)return Urso.logger.error("ModulesAssetsService process Loaded Image error: no image ",t);Urso.cache.addTexture(i,o)}if(t.preloadGPU){var a=Urso.objects.create({type:Urso.types.objects.IMAGE,assetKey:i,x:-1e4,y:-1e4},!1,!0);setTimeout((()=>{a.destroy()}),1)}}_addAsset(t,e){if(t.type!==Urso.types.assets.CONTAINER){var i="".concat(t.type,"_").concat(t.key);if(this._addedAssetsCache.includes(i))return;this._addedAssetsCache.push(i)}var r;switch(t.type){case Urso.types.assets.IMAGE:r=this.getInstance("Models.Image",t);break;case Urso.types.assets.CONTAINER:r=this.getInstance("Models.Container",t);break;case Urso.types.assets.ATLAS:r=this.getInstance("Models.Atlas",t);break;case Urso.types.assets.AUDIOSPRITE:r=this.getInstance("Models.Audiosprite",t);break;case Urso.types.assets.JSON:r=this.getInstance("Models.Json",t);break;case Urso.types.assets.SPINE:r=this.getInstance("Models.Spine",t);break;case Urso.types.assets.BITMAPFONT:r=this.getInstance("Models.BitmapFont",t);break;case Urso.types.assets.FONT:r=this.getInstance("Models.Font",t);break;case Urso.types.assets.SOUND:r=this.getInstance("Models.Sound",t);break;default:Urso.logger.error("ModulesAssetsService asset type error",t)}if(r.loadingGroup=e||r.loadingGroup||this.getInstance("Config").loadingGroups.initial,r.contents)for(var n of r.contents)this._addAsset(n,r.loadingGroup);else this.assets[r.loadingGroup]||(this.assets[r.loadingGroup]=[]),this.assets[r.loadingGroup].push(r)}_startLazyLoad(){this.lazyLoadProcessStarted||(this.lazyLoadProcessStarted=!0,this._continueLazyLoad())}_continueLazyLoad(t){t||(t=0);var e=this.getInstance("Config").lazyLoadGroups;if(t>=e.length)this.emit(Urso.events.MODULES_ASSETS_LAZYLOAD_FINISHED);else{var i=e[t];i||Urso.logger.error("ModulesAssetsService lazy loading groupName error"),this.loadGroup(i,(()=>{this._continueLazyLoad(t+1)}))}}_qualityReducer(t,e){return[(i,r)=>{if(null===i)return r;var n=t[i],s=t[r];return n>s&&s>=e||s>=e&&e>n||e>=s&&s>n?r:i},null]}_detectQuality(){var{qualityFactors:t}=this.getInstance("Config"),e=Urso.helper.parseGetParams().quality;return e&&t[e]?e:this._calculateQuality(t)}_calculateQuality(t){var{android:e,iOS:i,iPad:r,macOS:n}=Urso.device,s=e||i||r;if(n&&!s)return"high";if(n&&r)return"medium";var o=Urso.getInstance("Modules.Scenes.ResolutionsConfig").contents[0],{devicePixelRatio:a}=window,{width:h,height:l}=screen;s&&(h=h>l?h:l),i&&(h*=a);var u=h/o.width;return Object.keys(t).reduce(...this._qualityReducer(t,u))}_addAssetToLoader(t,e){t.path?e.addAsset(t):t.contents||Urso.logger.error("ModulesAssetsService model error",t)}}},7526:(t,e,i)=>{Urso.Core.Modules.I18n={Config:i(6333),Controller:i(9215)}},6333:t=>{t.exports=class{constructor(){this.singleton=!0,this.locales={de:"i18n/de.json",en:"i18n/en.json",ru:"i18n/ru.json"}}}},9215:t=>{function e(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,i(t,e,"get"))}function i(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}var r=new WeakMap;t.exports=class{constructor(){r.set(this,{writable:!0,value:null})}get(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e(this,r)&&e(this,r)[t]?this._interpolate(e(this,r)[t],i):t}setLocale(t){var e,n,s=Urso.cache.getJson(t);if(!s)return Urso.logger.error("ModulesI18nController setLocale error, no loaded json:"+t+". Check assets please");e=r,n=s.data,function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(this,i(this,e,"set"),n),this.emit(Urso.events.MODULES_I18N_NEW_LOCALE_WAS_SET,t)}loadAndSetLocale(t,e){Urso.cache.getJson(t)&&this.setLocale(t),e?this._loadLocaleByPath(t,e):this._loadLocaleByConfig(t)}_loadLocaleByConfig(t){var e=this.getInstance("Config").locales[t];if(!e)return Urso.logger.error("ModulesI18nController _loadLocaleByConfig error, no locale data in config:"+t+". Check ModulesI18nConfig please");this._loadLocaleByPath(t,e)}_loadLocaleByPath(t,e){var i={type:Urso.types.assets.JSON,key:t,path:e};Urso.assets.preload(i,(()=>this.setLocale(t)))}_interpolate(t,e){for(var[i,r]of Object.entries(e))t=Urso.helper.stringReplace("${"+i+"}",r,t);return t}}},5487:(t,e,i)=>{Urso.Core.Modules.Instances={Controller:i(8440)}},8440:t=>{t.exports=class{constructor(){this._modes=[],this._cache={},this._counter=0,this.getInstance=this.getInstance.bind(this),this.getByPath=this.getByPath.bind(this),this._setComonFunctions=this._setComonFunctions.bind(this),this.getModes=this.getModes.bind(this),this.addMode=this.addMode.bind(this),this.removeMode=this.removeMode.bind(this)}getByPath(t,e,i){return this._findClass({path:t,callback:t=>t,noModes:e,modeName:i})}getModes(){return this._modes}addMode(t){return-1===this._modes.indexOf(t)&&(this._modes.push(t),Urso.observer.emit(Urso.events.MODULES_INSTANCES_MODES_CHANGED),!0)}removeMode(t,e){var i=this._modes.indexOf(t);return-1!==i&&(this._modes.splice(i,1),e||Urso.observer.emit(Urso.events.MODULES_INSTANCES_MODES_CHANGED),!0)}getInstance(t,e,i,r){return this._findClass({path:t,callback:i=>{if("function"!=typeof i&&Urso.logger.error("getInstance type error"),i._instance&&i._instance.singleton)return i._instance;this._setComonFunctions(i,t);var r=new i(e);return r.singleton&&(i._instance=r),r._iuid=this._getUid(),this._launchDefaultFunctions(r),r},noModes:i,modeName:r})}_getUid(){return this._counter++,"instance"+this._counter}_setComonFunctions(t,e){t.prototype.getInstance=this._entityGetInstance(e),t.prototype.addListener=this._entityAddListener,t.prototype.removeListener=this._entityRemoveListener,t.prototype.emit=this._entityEmit}_setComonEntityFunctions(t,e){e.common&&!t.common&&(t.common=e.common,t.__entities&&t.__entities.forEach((e=>this._setComonEntityFunctions(e,t))))}_launchDefaultFunctions(t){t&&t._subscribe&&t._subscribe(),t&&t._subscribeOnce&&!t.__subscribedOnce&&(t.__subscribedOnce=!0,t._subscribeOnce())}_entityGetInstance(t){var e=Urso.helper.initial(t.split(".")).join("."),i=this;return function(t,r,n,s){var o=i.getInstance(e+"."+t,r,n,s);return o&&!o.simpleClass&&(i._addEntityToClass(o,this),i._setComonEntityFunctions(o,this)),o}}_addEntityToClass(t,e){e.__entities||(e.__entities=[]),e.__entities.includes(t)||e.__entities.push(t)}_entityAddListener(){Urso.observer.add.apply(Urso.observer,arguments)}_entityRemoveListener(){Urso.observer.remove.apply(Urso.observer,arguments)}_entityEmit(){Urso.observer.fire.apply(Urso.observer,arguments)}_findClass(t){var e=[t.path,t.modeName||"none",t.noModes||"false"].join("_");if(e in this._cache)return!!this._cache[e]&&t.callback(this._cache[e]);var i=this._getClassByPath(t.path,t.noModes);if(!i)return!1;var r=t.path;return"function"==typeof i?i.prototype.__path=r:"object"==typeof i&&(i.__path=r),this._cache[e]=i,t.callback(this._cache[e])}_getClassByPath(t,e){var i=t.split("."),r=Urso.helper.mergeArrays(["Urso","Game"],i);return this._checkPathExist(r,e)}_checkPathExist(t,e){for(var i,r=window,n=[],s=0;s<t.length;s++){var o=!e&&this._modes&&s===t.length-1;if(o&&r.modifications&&(i=this._checkPathWithModes(r.modifications,t,s)),o&&r.mixins&&(n=this._getMixins(r.mixins,t,s)),i)r=i;else{if(!r[t[s]])return!1;r=r[t[s]]}}return n.forEach((t=>{r=t(r)})),r}_checkPathWithModes(t,e,i){for(var r of this._modes){var n=Urso.helper.capitaliseFirstLetter(r);if(t[n]){var s=this._checkPathWithModes(t[n],e,i);if(s)return s}}return!!t[e[i]]&&t[e[i]]}_getMixins(t,e,i){var r=[];for(var n of this._modes){var s=Urso.helper.capitaliseFirstLetter(n);t[s]&&t[s][e[i]]&&r.push(t[s][e[i]])}return r}}},8183:(t,e,i)=>{Urso.Core.Modules.Logic={Controller:i(23),Sounds:i(5976)},i(7263)},7263:(t,e,i)=>{Urso.Core.Modules.Logic.Config={Sounds:i(9647)}},9647:t=>{t.exports=class{constructor(){this.singleton=!0,this.soundsConfig=this.getSoundsConfig()}getSoundsConfig(){return{main:[{soundKey:"sound1",event:"sound1.play.once",action:"play"},{soundKey:"sound_check",event:"soundCheck.play.once",action:"play"},{soundKey:"sound_check",event:"soundCheck.stop",action:"stop"},{soundKey:"sound_check",event:"soundCheck.pause",action:"pause"},{soundKey:"sound_check",event:"soundCheck.resume",action:"resume"},{soundKey:"sound_check",event:"soundCheck.play.loop",action:"play",relaunch:!0,loop:!0}]}}}},23:t=>{t.exports=class{constructor(){this._baseLogicBlocks=["sounds","buttons"];var t=this.getAdditionalLogicBlocks();this.logicBlocks=[...this._baseLogicBlocks,...t],this._instances={},this._init()}_init(){this._createLogicInstances()}getAdditionalLogicBlocks(){return[]}_createLogicInstances(){for(var t=0;t<this.logicBlocks.length;t++){var e=this.logicBlocks[t],i=Urso.helper.capitaliseFirstLetter(e);this._instances[e]=this.getInstance(i)}}do(){var t=[],e=[...arguments],i=e.shift();for(var r in this._instances){var n=this._instances[r];n&&n[i]&&(t[r]=n[i].apply(this,e))}return t}_subscribe(){}}},5976:t=>{var e=["action","relaunch","loop","volume"];function i(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function r(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?i(Object(r),!0).forEach((function(e){n(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t.exports=class{constructor(){this._cfg=null,this._setDefaultConfig(),this._loadedSounds={}}_setDefaultConfig(){var t=this.getInstance("Config.Sounds");this._cfg=t.soundsConfig}_parseConfig(){var t={};return Object.keys(this._cfg).forEach((i=>{this._cfg[i].forEach((i=>{var{action:n="play",relaunch:s=!1,loop:o=!1,volume:a=1}=i,h=function(t,e){if(null==t)return{};var i,r,n=function(t,e){if(null==t)return{};var i,r,n={},s=Object.keys(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)>=0||(n[i]=t[i]);return n}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}(i,e);t[i.soundKey]||(t[i.soundKey]={events:{}}),t[i.soundKey].events[i.event]=r(r({},h),{},{action:n,relaunch:s,loop:o,volume:a})}))})),t}_getUploadedSounds(t){var e={};for(var i in t)this._loadedSounds[i]||(this._loadedSounds[i]=t[i],e[i]=t[i]);return e}_getLoadedAudiospritesData(){var t=Urso.cache.assetsList.sound,e={};for(var[i,r]of Object.entries(t)){var n=i.replace("_audiospriteSound",""),s=n+"_audiospriteJson",o=Urso.cache.assetsList.json[s];o&&(e[n]={json:o.data,audiosprite:r.data})}return e}_groupLoadedHandler(){var t=this._getLoadedAudiospritesData();if(0===Object.keys(t).length)return!1;var e=this._getUploadedSounds(t);if(0===Object.keys(e).length)return!1;var i=this._parseConfig(),n={sounds:r({},e),eventsCfg:i};return this.emit(Urso.events.MODULES_SOUND_MANAGER_UPDATE_CFG,n),!0}_subscribe(){this.addListener(Urso.events.MODULES_ASSETS_GROUP_LOADED,this._groupLoadedHandler.bind(this),!0)}}},2350:(t,e,i)=>{Urso.Core.Modules.Objects={BaseModel:i(311),Cache:i(624),Controller:i(3449),Find:i(2991),PropertyAdapter:i(6147),Proxy:i(7171),Selector:i(418),Service:i(8663),Styles:i(2285)},i(7866)},311:t=>{t.exports=class{constructor(t){this.simpleClass=!0,this.setupParams(t),this.parent=!1,this.destroyed=!1,this._originalModel=t,this._classes=[],this._styles={},this._baseObject=null,this._uid=Urso.helper.recursiveGet("_uid",t,!1),this._templatePath=!1,this._parsed=!1,this._transitions={tweens:{}}}setupParams(t){this.type=Urso.helper.recursiveGet("type",t,null),this.id=Urso.helper.recursiveGet("id",t,!1),this.name=Urso.helper.recursiveGet("name",t,!1),this.class=Urso.helper.recursiveGet("class",t,!1),this.x=Urso.helper.recursiveGet("x",t,0),this.y=Urso.helper.recursiveGet("y",t,0),this.z=Urso.helper.recursiveGet("z",t,0),this.anchorX=Urso.helper.recursiveGet("anchorX",t,0),this.anchorY=Urso.helper.recursiveGet("anchorY",t,0),this.scaleX=Urso.helper.recursiveGet("scaleX",t,1),this.scaleY=Urso.helper.recursiveGet("scaleY",t,1),this.alignX=Urso.helper.recursiveGet("alignX",t,"left"),this.alignY=Urso.helper.recursiveGet("alignY",t,"top"),this.width=Urso.helper.recursiveGet("width",t,!1),this.height=Urso.helper.recursiveGet("height",t,!1),this.maxWidth=Urso.helper.recursiveGet("maxWidth",t,!1),this.maxHeight=Urso.helper.recursiveGet("maxHeight",t,!1),this.stretchingType=Urso.helper.recursiveGet("stretchingType",t,!1),this.angle=Urso.helper.recursiveGet("angle",t,0),this.visible=Urso.helper.recursiveGet("visible",t,!0),this.alpha=Urso.helper.recursiveGet("alpha",t,1),this.blendMode=Urso.helper.recursiveGet("blendMode",t,1),this.ignoreParentMask=Urso.helper.recursiveGet("ignoreParentMask",t,!1),this.transitionDelay=Urso.helper.recursiveGet("transitionDelay",t,!1),this.transitionDuration=Urso.helper.recursiveGet("transitionDuration",t,!1),this.transitionProperty=Urso.helper.recursiveGet("transitionProperty",t,!1),this.append=Urso.helper.recursiveGet("append",t,!0),this.custom=Urso.helper.recursiveGet("custom",t,{})}getAbsoluteSize(){return{width:this._baseObject.width,height:this._baseObject.height}}destroy(t){Urso.objects.destroy(this,t)}_customDestroy(){}addChild(t,e){Urso.objects.addChild(this,t,e)}get transform(){return this._baseObject.transform}addChildAt(t,e,i){Urso.objects.addChild(this,t,i)}removeChild(t,e){Urso.objects.removeChild(this,t,e)}setId(t,e){return this.id&&Urso.objects.removeIdFromCache(this.id,this),Urso.objects._safeSetValueToTarget(this,"id",t),t&&Urso.objects.addIdToCache(t,this),e||Urso.objects.refreshStyles(),this}setName(t,e){return this.name&&Urso.objects.removeNameFromCache(this.name,this),Urso.objects._safeSetValueToTarget(this,"name",t),t&&Urso.objects.addNameToCache(t,this),e||Urso.objects.refreshStyles(),this}addClass(t,e){var i,r=this.class;if(r){if(r.split(" ").includes(t))return this;i=this.class+" "+t}else i=t;return Urso.objects._safeSetValueToTarget(this,"class",i),Urso.objects.addClassToCache(t,this),e||Urso.objects.refreshByChangedClassName(t),this}removeClass(t,e){if(!this.class)return this;var i=this.class.split(" "),r=i.indexOf(t);return-1===r||(i.splice(r,1),Urso.objects._safeSetValueToTarget(this,"class",i.join(" ")),Urso.objects.removeClassFromCache(t,this),e||Urso.objects.refreshByChangedClassName(t)),this}toGlobal(){var t=Urso.objects.getWorld(),e=t._baseObject.scale,i={x:t.x,y:t.y},r=this._baseObject.toGlobal(i);return{x:Math.floor(r.x/e.x),y:Math.floor(r.y/e.y)}}toLocal(t){var e=Urso.objects.getWorld(),i={x:e.x,y:e.y},r=this.parent?this.parent._baseObject:e._baseObject,n=t?t._baseObject:r,s=this._baseObject.toLocal(i,n);return{x:-~~s.x,y:-~~s.y}}generateTexture(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=Urso.scenes.generateTexture(this._baseObject);return t&&Urso.cache.addTexture(t,e),e}}},624:t=>{t.exports=class{constructor(){this.singleton=!0,this._data=null,this.reset()}reset(){this._data={ids:{},names:{},classes:{}}}addId(t,e){this._data.ids[t]&&Urso.logger.error("ModulesObjectsCache error: id will be uniq "+t),this._data.ids[t]=e}removeId(t,e){this._data.ids[t]||Urso.logger.error("ModulesObjectsCache error: no id to remove "+t),this._data.ids[t]._uid!==e._uid&&Urso.logger.error("ModulesObjectsCache error: invalid object with id "+t),delete this._data.ids[t]}addName(t,e){this._data.names[t]&&Urso.logger.error("ModulesObjectsCache error: name will be uniq "+t),this._data.names[t]=e}removeName(t,e){this._data.names[t]||Urso.logger.error("ModulesObjectsCache error: no name to remove "+t),this._data.names[t]._uid!==e._uid&&Urso.logger.error("ModulesObjectsCache error: invalid object with name "+t),delete this._data.names[t]}addClass(t,e){var i=t.split(" ");for(var r of i)this._addClass(r,e)}removeClass(t,e){var i=t.split(" ");for(var r of i)this._removeClass(r,e)}getId(t){return this._data.ids[t]||!1}getName(t){return this._data.names[t]||!1}getClass(t){return!!this._data.classes[t]&&Object.values(this._data.classes[t])}_addClass(t,e){this._data.classes[t]||(this._data.classes[t]={}),this._data.classes[t][e._uid]||(this._data.classes[t][e._uid]=e)}_removeClass(t,e){this._data.classes[t]&&(this._data.classes[t][e._uid]&&delete this._data.classes[t][e._uid],Object.keys(this._data.classes[t]).length||delete this._data.classes[t])}}},3449:t=>{t.exports=class{constructor(){this.singleton=!0,Urso.find=this.find.bind(this),Urso.findOne=this.findOne.bind(this),Urso.findAll=this.findAll.bind(this),this._newResolutionHandler=this._newResolutionHandler.bind(this),this._resetWorld=this._resetWorld.bind(this),this._applyClassesToWorld=this._applyClassesToWorld.bind(this)}create(t,e,i){var r;if(Array.isArray(t))for(var n of(r=[],t))r.push(this._createSingleObject(n,e,i));else r=this._createSingleObject(t,e,i);return i||this.refreshStyles(e),r}_createSingleObject(t,e,i){return t._parsed?this.getInstance("Service").add(t,e):Urso.scenes.addObject(t,e,i)}find(t){return this.getInstance("Find").do(t)}findOne(t){var e=this.getInstance("Find").do(t,!0);return!!e&&e[0]}findAll(t){return this.getInstance("Find").do(t)||[]}addIdToCache(t,e){this.getInstance("Cache").addId(t,e)}removeIdFromCache(t,e){this.getInstance("Cache").removeId(t,e)}addNameToCache(t,e){this.getInstance("Cache").addName(t,e)}removeNameFromCache(t,e){this.getInstance("Cache").removeName(t,e)}addClassToCache(t,e){this.getInstance("Cache").addClass(t,e)}removeClassFromCache(t,e){this.getInstance("Cache").removeClass(t,e)}refreshStyles(t){return this.getInstance("Styles").refresh(t)}refreshByChangedClassName(t){return this.getInstance("Styles").refreshByChangedClassName(t)}getWorld(){return this.getInstance("Service").getWorld()}addChild(t,e,i){this.getInstance("Service").addChild(t,e,i)}removeChild(t,e,i){this.getInstance("Service").removeChild(t,e,i)}destroy(t,e){this.getInstance("Service").destroy(t,e)}_safeSetValueToTarget(t,e,i){this.getInstance("Proxy").safeSetValueToTarget(t,e,i)}_updateCommonProperties(t){this.getInstance("Service")._updateCommonProperties(t)}_newResolutionHandler(t){this.getInstance("Service").updateWorldBounds(t)}_resetWorld(){this.getInstance("Service").resetWorld()}_applyClassesToWorld(){this.getInstance("Service").applyClassesToWorld()}_subscribeOnce(){this.addListener(Urso.events.MODULES_SCENES_NEW_RESOLUTION,this._newResolutionHandler,!0),this.addListener(Urso.events.MODULES_SCENES_NEW_SCENE_INIT,this._resetWorld,!0),this.addListener(Urso.events.MODULES_INSTANCES_MODES_CHANGED,this._applyClassesToWorld,!0)}}},2991:t=>{t.exports=class{constructor(){this.singleton=!0,this._selector=this.getInstance("Selector")}do(t,e){var i=[],r=this._selector.parse(t),n=r[r.length-1][0],s=this.getInstance("Cache")["get"+Urso.helper.capitaliseFirstLetter(n.type)](n.value);if("class"!==n.type&&s&&(s=[s]),!s||0===s.length)return!1;if(e&&1===r.length&&1===r[0].length)return s;for(var o of s){var a=this._selector.testObjectWithParsedSelector(o,r);if(a&&i.push(o),a&&e)return i}return i}}},7866:(t,e,i)=>{Urso.Core.Modules.Objects.Models={AtlasImage:i(1257),BitmapText:i(3814),Button:i(1421),ButtonComposite:i(594),Checkbox:i(6116),Collection:i(7825),Component:i(9188),Container:i(2685),DragContainer:i(567),Emitter:i(3266),EmitterFx:i(259),Graphics:i(2929),Group:i(5648),HitArea:i(5330),Image:i(7893),ImagesAnimation:i(8546),Mask:i(6418),NineSlicePlane:i(8689),Scrollbox:i(9724),Slider:i(8948),Spine:i(4258),Text:i(9770),TextInput:i(1097),Toggle:i(1306),World:i(5753)}},1257:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.ATLASIMAGE,this._addBaseObject()}setupParams(t){super.setupParams(t),this.assetKey=Urso.helper.recursiveGet("assetKey",t,!1),this.filenameKey=Urso.helper.recursiveGet("filenameKey",t,!1)}changeTexture(t,e){e&&(this.assetKey=e),t&&(this.filenameKey=t),this._addBaseObject()}_addBaseObject(){var t=Urso.cache.getAtlas(this.assetKey);t||Urso.logger.error("ModulesObjectsModelsImage assets error: no atlas "+this.assetKey);var e=this.filenameKey;if(!t.textures[e]&&"string"==typeof this.filenameKey){var i=t.data.frames.findIndex((t=>t.filename===this.filenameKey));-1!==i&&(e=i)}var r=t.textures[e];this._baseObject?this._baseObject.texture=r:this._baseObject=new PIXI.Sprite(r)}}t.exports=e},3814:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.BITMAPTEXT,this._addBaseObject()}setupParams(t){super.setupParams(t),this.text=Urso.helper.recursiveGet("text",t,!1),this.localeId=Urso.helper.recursiveGet("localeId",t,!1),this.localeVariables=Urso.helper.recursiveGet("localeVariables",t,{}),this.fontName=Urso.helper.recursiveGet("fontName",t,!1),this.fontSize=Urso.helper.recursiveGet("fontSize",t,!1)}_addBaseObject(){this.localeId&&(this._originalModel.text=this.text=Urso.i18n.get(this.localeId,this.localeVariables)),this._baseObject=new PIXI.BitmapText(this.text,{fontName:this.fontName,fontSize:this.fontSize})}_newLocaleHandler(){this.text=this._baseObject.text=Urso.i18n.get(this.localeId,this.localeVariables)}_subscribeOnce(){this.localeId&&this.addListener(Urso.events.MODULES_I18N_NEW_LOCALE_WAS_SET,this._newLocaleHandler.bind(this))}}t.exports=e},1421:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this._isOver=!1,this._isDown=!1,this._isDisabled=!1,this._textures,this.type=Urso.types.objects.BUTTON,this._addBaseObject(),this.enable=this.enable.bind(this),this.disable=this.disable.bind(this)}setupParams(t){super.setupParams(t),this.action=Urso.helper.recursiveGet("action",t,(()=>{this.emit(Urso.events.MODULES_OBJECTS_BUTTON_PRESS,{name:this.name,class:this.class})})),this.keyDownAction=Urso.helper.recursiveGet("keyDownAction",t,!1),this.mouseOverAction=Urso.helper.recursiveGet("mouseOverAction",t,!1),this.mouseOutAction=Urso.helper.recursiveGet("mouseOutAction",t,!1),this.noActionOnMouseOut=Urso.helper.recursiveGet("noActionOnMouseOut",t,!!Urso.device.desktop),this.buttonFrames={over:Urso.helper.recursiveGet("buttonFrames.over",t,!1),out:Urso.helper.recursiveGet("buttonFrames.out",t,!1),pressed:Urso.helper.recursiveGet("buttonFrames.pressed",t,!1),disabled:Urso.helper.recursiveGet("buttonFrames.disabled",t,!1)},this.pixelPerfectOver=Urso.helper.recursiveGet("pixelPerfectOver",t,!0),this.pixelPerfectClick=Urso.helper.recursiveGet("pixelPerfectClick",t,!0)}setButtonFrame(t,e){this.buttonFrames[t]=e,this._isOver?this._changeTexture("over"):this._isDown?this._changeTexture("pressed"):this._isDisabled?this._changeTexture("disabled"):this._changeTexture("out")}enable(){if(!this._isDisabled)return!1;this._isOver?this._changeTexture("over"):this._changeTexture("out"),this._isDisabled=!1,this._baseObject.buttonMode=!0}disable(){if(this._isDisabled)return!1;this._changeTexture("disabled"),this._isDisabled=!0,this._baseObject.buttonMode=!1}_addBaseObject(){this._baseObject=new PIXI.Sprite,this._changeTexture("out"),this._baseObject.interactive=!0,this._baseObject.buttonMode=!0,this.pixelPerfectOver,this.pixelPerfectClick,this._baseObject.on("pointerdown",this._onButtonDown.bind(this)).on("pointerup",this._onButtonUp.bind(this)).on("pointerupoutside",this._onButtonUp.bind(this)).on("pointerover",this._onButtonOver.bind(this)).on("pointerout",this._onButtonOut.bind(this))}_onButtonDown(){return!this._isDisabled&&(this._isDown=!0,this.keyDownAction&&this.keyDownAction(),!this._isDisabled&&void this._changeTexture("pressed"))}_onButtonUp(){return!(this._isDisabled||!this._isDown)&&(this._isDown=!1,this.action&&(this.noActionOnMouseOut&&!this._isOver||this.action()),!this._isDisabled&&void(this._isOver?this._changeTexture("over"):this._changeTexture("out")))}_onButtonOver(){if(this._isOver=!0,this._isDisabled)return!1;this._isDown||(this.mouseOverAction&&this.mouseOverAction(),this._changeTexture("over"))}_onButtonOut(){if(this._isOver=!1,this._isDisabled)return!1;this._isDown||(this.mouseOutAction&&this.mouseOutAction(),this._changeTexture("out"))}_changeTexture(t){var e=Urso.cache.getTexture(this.buttonFrames[t]);return e?(this._baseObject.texture=e,!0):"out"===t?(Urso.logger.error("ModulesObjectsModelsButton assets error: no out image "+this.buttonFrames.out),!1):(this._changeTexture("out"),!1)}}t.exports=e},594:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.BUTTONCOMPOSITE,this._addBaseObject()}setupParams(t){super.setupParams(t),this.action=Urso.helper.recursiveGet("action",t,(()=>{console.log(123321),this.emit("buttonPressed")})),this.buttonFrames={over:Urso.helper.recursiveGet("buttonFrames.over",t,!1),out:Urso.helper.recursiveGet("buttonFrames.out",t,!1),pressed:Urso.helper.recursiveGet("buttonFrames.pressed",t,!1),disabled:Urso.helper.recursiveGet("buttonFrames.disabled",t,!1)}}_addBaseObject(){}}t.exports=e},6116:(t,e,i)=>{var r=i(1306);t.exports=class extends r{constructor(t){super(t),this._isDisabled=!1,this._lable=null,this._checkbox=null,this.type=Urso.types.objects.CHECKBOX,this._createCheckbox(),this.enable=this.enable.bind(this),this.disable=this.disable.bind(this)}setupParams(t){super.setupParams(t),this.contents=[],this.action=Urso.helper.recursiveGet("action",t,(()=>{this.emit(Urso.events.MODULES_OBJECTS_CHECKBOX_PRESS,{name:this.name,status:this.status,class:this.class})})),this.lable=Urso.helper.recursiveGet("lable",t,!1),this.defaultStatus=Urso.helper.recursiveGet("defaultStatus",t,"unpressed")}_createCheckbox(){this.status=this.defaultStatus,this._checkbox=this._createObject(this.buttonFrames["".concat(this.defaultStatus,"Out")]),this.lable&&(this._lable=this._createObject(this.lable))}_createObject(t){t=Urso.helper.objectClone(t);var e=Urso.objects.create(t,this);return e._baseObject.interactive=!0,e._baseObject.buttonMode=!0,e._baseObject.on("pointerdown",this._onButtonDown.bind(this)).on("pointerup",this._onButtonUp.bind(this)).on("pointerupoutside",this._onButtonUp.bind(this)).on("pointerover",this._onButtonOver.bind(this)).on("pointerout",this._onButtonOut.bind(this)),e}_addBaseObject(){this._baseObject=new PIXI.Container}_drawGraphics(t){var{polygon:e,rectangle:i,fillColor:r}=t;(e||i)&&(this._checkbox._baseObject.clear(),this._checkbox._baseObject.beginFill(r),e&&e.length?this._checkbox._baseObject.drawPolygon(e):i&&i.length&&this._checkbox._baseObject.drawRect(...i),this._checkbox._baseObject.endFill())}_changeTexture(t){if(!this.buttonFrames[t])return t==="".concat(this.status,"Out")?(Urso.logger.error("ModulesObjectsModelsButton assets error: no out image "+this.buttonFrames.out),!1):(this._changeTexture("".concat(this.status,"Out")),!1);this.buttonFrames[t].type===Urso.types.objects.GRAPHICS?this._drawGraphics(this.buttonFrames[t].figure):this._checkbox.changeTexture(this.buttonFrames[t].assetKey)}}},7825:t=>{t.exports=class{constructor(t){return this._children=t||[],this._setProperty=this._setProperty.bind(this),this._methods={setProperty:this._setProperty,addClass:this._runFunc("addClass"),removeClass:this._runFunc("removeClass")},this._makeCollection()}_makeCollection(){for(var t in this._methods)this._defineProp(this._children,t,this._methods[t]);return this._children}_defineProp(t,e,i){Object.defineProperty(t,e,{enumerable:!1,configurable:!1,writable:!1,value:i})}_checkAllHasProperty(t){return this._children.every((e=>e.hasOwnProperty(t)))}_setProperty(t,e){var i=this._checkAllHasProperty(t);return i&&this._children.forEach((i=>{i[t]=e})),i}_runFunc(t){return e=>{this._children.forEach((i=>{i[t]&&i[t](e)}))}}}},9188:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.COMPONENT,this.instance=null,this._controller=Urso.helper.recursiveGet("_controller",t,!1),this._addBaseObject()}setupParams(t){super.setupParams(t),this.componentName=Urso.helper.recursiveGet("componentName",t,!1),this.options=Urso.helper.recursiveGet("options",t,!1),this.contents=Urso.helper.recursiveGet("contents",t,[])}_addBaseObject(){this._baseObject=new PIXI.Container,this.name||(this.name="component_"+this._uid),this._setComonFunctions()}_setComonFunctions(){this.instance=this._controller,this._setupFind(this.instance)}_setupFind(t){t.common.find=t=>Urso.find("^".concat(this.name," ").concat(t)),t.common.findOne=t=>Urso.findOne("^".concat(this.name," ").concat(t)),t.common.findAll=t=>Urso.findAll("^".concat(this.name," ").concat(t))}}t.exports=e},2685:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.CONTAINER,this._addBaseObject()}setupParams(t){super.setupParams(t),this.contents=Urso.helper.recursiveGet("contents",t,[])}_addBaseObject(){this._baseObject=new PIXI.Container}}t.exports=e},567:(t,e,i)=>{function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var n=i(2685),s=[];t.exports=class extends n{constructor(t){super(t),r(this,"_mask",null),r(this,"_interactiveLayer",null),r(this,"_startPosition",null),r(this,"_startY",0),r(this,"_offsetStartY",0),r(this,"_needBlock",!1),r(this,"_needMoveSlider",!0),r(this,"_moveStartedY",0),r(this,"_dragStarted",!1),r(this,"_minMoveDurationForEasing",100),r(this,"_minMoveDistanceForEasing",50),r(this,"_minMoveDistance",15),r(this,"_currentPosition",0),this.type=Urso.types.objects.DRAGCONTAINER,this._onScrollSliderMove=this._onScrollSliderMove.bind(this),this._sliderHandleDrop=this._sliderHandleDrop.bind(this),this._setSliderHandler=this._setSliderHandler.bind(this),this._switchBlock=this._switchBlock.bind(this),this._pointerEventsHandler=this._pointerEventsHandler.bind(this),this._onResolutionChange=this._onResolutionChange.bind(this),this._setupDragContainer(),s.push(this)}setupParams(t){super.setupParams(t),this.speed=Urso.helper.recursiveGet("speed",t,1),this.dragIndex=Urso.helper.recursiveGet("dragIndex",t,0),this.sliderClass=Urso.helper.recursiveGet("sliderClass",t,!1),this.onMoveCallback=Urso.helper.recursiveGet("onMoveCallback",t,!1),this.easingTime=Urso.helper.recursiveGet("easingTime",t,1.5),this.easingDistance=Urso.helper.recursiveGet("easingDistance",t,200),this.zIndex=Urso.helper.recursiveGet("zIndex",t,10),this.width=Urso.helper.recursiveGet("width",t,200),this.height=Urso.helper.recursiveGet("height",t,200)}get _moveInProgress(){return this._interactiveLayer.visible}set _moveInProgress(t){this._interactiveLayer.visible=t}resize(t){this._resizeInteractiveLayer(),this._resizeMask(),t&&(this._mask.y=0)}_setupDragContainer(){this._setMask(),this._resizeInteractiveLayer(),this._resizeMask(),this._setResizeReactively(),this._currentPosition=this._baseObject.y}_setResizeReactively(){Urso.helper.reactive(this,"width",(()=>this.resize())),Urso.helper.reactive(this,"height",(()=>this.resize()))}_setMask(){this._mask=this._makeMask(),this._interactiveLayer=this._makeInteractiveLayer(),this._interactiveLayer.on("pointermove",(t=>this._onPointerMove(t))),this._baseObject.addChild(this._mask),this._baseObject.addChild(this._interactiveLayer),this._baseObject.mask=this._mask}_isActive(t){var{x:e,y:i}=t;return s.filter((t=>{var r=this._getObjectPoints(t);return this._checkPointerOver({x:e,y:i},...r)})).filter((t=>t._baseObject.worldVisible)).filter((t=>!t._needBlock)).filter((t=>{var e=t.getAbsoluteSize().height;return t.height-e<0})).sort(((t,e)=>e.dragIndex-t.dragIndex))[0]===this}_changeSliderVisibility(){this._slider&&(this._slider.visible=this.height<this._baseObject.height)}_getPointerRelativePosition(t,e,i){var r=i.x-e.x,n=i.y-e.y;return r*(t.y-e.y)-n*(t.x-e.x)}_checkPointerOver(t,e,i,r,n){var s=this._getPointerRelativePosition(t,e,i),o=this._getPointerRelativePosition(t,i,r),a=this._getPointerRelativePosition(t,r,n),h=this._getPointerRelativePosition(t,n,e);return s<0&&o<0&&a<0&&h<0||s>0&&o>0&&a>0&&h>0}_getObjectPoints(t){var{x:e,y:i}=t._mask.toGlobal(new PIXI.Point(0,0)),{width:r,height:n}=t._mask,{scaleX:s,scaleY:o}=this._getScaleAndPositionRecursive(this);return[{x:e,y:i},{x:e+r*s,y:i},{x:e+r*s,y:i+n*o},{x:e,y:i+n*o}]}_getScaleAndPositionRecursive(t){var{scaleX:e,scaleY:i,parent:r,x:n,y:s}=t;if(!r)return{scaleX:e,scaleY:i,x:n,y:s};var{scaleX:o,scaleY:a,x:h,y:l}=this._getScaleAndPositionRecursive(r);return{scaleX:e*o,scaleY:i*a,x:n+h,y:s+l}}_documentPointerMove(t){if(this._movePossible){this._moveInProgress=!0;var e=t.offsetY||t.changedTouches[0].offsetY||t.changedTouches[0].clientY;Math.abs(this._moveStartedY-e)>this._minMoveDistance&&!this._dragStarted&&(this._dragStarted=!0,this.emit(Urso.events.MODULES_OBJECTS_DRAGCONTAINER_DRAG_STARTED,{name:this.name,className:this.class,id:this.id}))}}_documentPointerEnd(){this._movePossible=!1;var t=Date.now()-this._lastMoveTime;this.emit(Urso.events.MODULES_OBJECTS_DRAGCONTAINER_SWITCHBLOCK,{names:["*"],needBlock:!1}),this._wasMoved&&t<this._minMoveDurationForEasing?this._startMoveEasing():this._startPosition=null,this._onMoveComplete(),this._wasMoved=!1}_startMoveEasing(){var t=this._getEasingTargetY();if(t){var e={y:this._baseObject.y};this._easingTween=gsap.to(e,this.easingTime,{y:t,ease:"power2",onUpdate:()=>{this._move(e.y,!0),this._isBorder&&this._killTweens()},onComplete:()=>{this._startPosition=null}})}else this._startPosition=null}_killTweens(){this._easingTween&&(this._easingTween.pause(),this._easingTween.kill(!0),this._easingTween=null,this._startPosition=null)}_getEasingTargetY(){var t=this._moveStartY>this._baseObject.y?-1:1;return!(Math.abs(this._moveStartY-this._baseObject.y)<this._minMoveDistanceForEasing)&&this._baseObject.y+this.easingDistance*t}_onMoveComplete(){this._moveInProgress=!1,this._dragStarted=!1,this._isWheelMove=!1,this.emit(Urso.events.MODULES_OBJECTS_DRAGCONTAINER_DRAG_FINISHED,{name:this.name,className:this.class,id:this.id}),this._isBorder=!1}_getValidatedY(t,e,i){t>0&&(this._startY=-i,t=0),e>t&&(this._startY=e-i,this._isBorder=!0,t=e);var r=this.height-this._calcMaxY(this._baseObject);return t<r&&(t=r,this._isBorder=!0),t}_calcMaxY(t){var e=0;return t.children.forEach((t=>{if(!t.isMask){var i=t.y+t.height;i>e&&(e=i)}})),e}_validateY(t,e){var i=e?t*this.speed:(t-this._startPosition.y)*this.speed,r=this._mask.height-this._baseObject.height,n=e?t:this._startY+i;return this._getValidatedY(n,r,i)}_move(t,e){this._lastMoveTime=Date.now(),this._onMoveCallback();var i=this._validateY(t,e);this._setNewPosition(i),this._needMoveSlider&&this._setSliderPosition(i)}_onMoveCallback(){this.onMoveCallback&&this.onMoveCallback()}_setSlider(){this.sliderClass&&(this._slider=Urso.findOne(".".concat(this.sliderClass)))}_setSliderPosition(t){if(this._slider){var{height:e}=this.getAbsoluteSize(),i=t/(e-this.height),{_sliderHandle:r,_sliderSize:n}=this._slider;r.y=-n*i}}_documentPointerStart(){this._startY=this._getCurrentY(),this._moveStartY=this._getCurrentY(),this._startTime=Date.now(),this._movePossible=!0,this._killTweens()}_setNewPosition(t){this._baseObject.y=t,this._mask.y=-t,this._interactiveLayer.y=-t,this._currentPosition=t}_getCurrentY(){return this._baseObject.y}_documentWheelScroll(t){var{x:e,y:i,deltaY:r}=t;if(Urso.device.desktop&&(e=Urso.scenes.getMouseCoords().x,i=Urso.scenes.getMouseCoords().y),this._isActive({x:e,y:i})){this._isWheelMove=!0,this._killTweens();var{x:n,y:s}=this._baseObject;this._startPosition={x:n,y:s},this._moveStartY=this._getCurrentY();var o=s-r;this.emit(Urso.events.MODULES_OBJECTS_DRAGCONTAINER_SCROLL,{name:this.name,className:this.class,id:this.id}),this._move(o,!0),this._startMoveEasing()}}_onPointerMove(t){var{data:{global:{x:e,y:i}}}=t;this._startPosition||(this._startPosition={x:e,y:i}),this._isActive({x:e,y:i})?(this._wasMoved=!0,this._move(i)):this._moveInProgress=!1}_resizeMask(){this._mask.width=this.width,this._mask.height=this.height}_resizeInteractiveLayer(){this._interactiveLayer.width=this.width,this._interactiveLayer.height=this.height}_makeInteractiveLayer(){var t=new PIXI.Graphics;return t.beginFill(16777215),t.drawRect(0,0,1,1),t.endFill(),t.zIndex=this.zIndex,t.alpha=0,t.visible=!1,t.interactive=!0,t}_makeMask(){var t=new PIXI.Graphics;return t.lineStyle(0),t.beginFill(16777215),t.drawRect(0,0,1,1),t.endFill(),t}_onScrollSliderMove(t){var{position:e,class:i}=t;if(i===this.sliderClass)if(this.height>=this._baseObject.height)this._slider._moveSlider({x:0,y:0},!0,!0);else{var{_sliderSize:r}=this._slider,n=this._mask.height-this._baseObject.height,s=e>0?e/r*n:0;this._needMoveSlider=!1,this._move(s,!0)}}_sliderHandleDrop(t){var{class:e}=t;e===this.sliderClass&&(this._needMoveSlider=!0)}_switchBlock(t){if(t){var{names:e,needBlock:i}=t;(e.includes(this.name)||e.includes("*"))&&(this._needBlock=i)}}_setSliderHandler(t){t&&t!==this.name||this._setSlider()}_pointerEventsHandler(t){switch(t.type){case"mousedown":this._moveStartedY=t.offsetY,this._documentPointerStart(t);break;case"touchstart":this._offsetStartY=t.changedTouches[0].offsetY,this._moveStartedY=t.changedTouches[0].offsetY||t.changedTouches[0].clientY,this._documentPointerStart(t);break;case"mousemove":case"touchmove":this._documentPointerMove(t);break;case"touchend":case"mouseup":this._documentPointerEnd(t);break;case"wheel":this._documentWheelScroll(t)}}_onResolutionChange(){this._setNewPosition(this._currentPosition)}_customDestroy(){this.removeListener(Urso.events.EXTRA_BROWSEREVENTS_POINTER_EVENT,this._pointerEventsHandler),this.removeListener(Urso.events.MODULES_OBJECTS_SLIDER_HANDLE_MOVE,this._onScrollSliderMove),this.removeListener(Urso.events.MODULES_OBJECTS_SLIDER_HANDLE_DROP,this._sliderHandleDrop),this.removeListener(Urso.events.MODULES_SCENES_DISPLAY_FINISHED,this._setSliderHandler),this.removeListener(Urso.events.MODULES_OBJECTS_DRAGCONTAINER_SETSLIDER,this._setSliderHandler),this.removeListener(Urso.events.MODULES_OBJECTS_DRAGCONTAINER_SWITCHBLOCK,this._switchBlock),this.removeListener(Urso.events.MODULES_SCENES_NEW_RESOLUTION,this._onResolutionChange)}_subscribeOnce(){this.addListener(Urso.events.EXTRA_BROWSEREVENTS_POINTER_EVENT,this._pointerEventsHandler),this.addListener(Urso.events.MODULES_OBJECTS_SLIDER_HANDLE_MOVE,this._onScrollSliderMove),this.addListener(Urso.events.MODULES_OBJECTS_SLIDER_HANDLE_DROP,this._sliderHandleDrop),this.addListener(Urso.events.MODULES_SCENES_DISPLAY_FINISHED,this._setSliderHandler),this.addListener(Urso.events.MODULES_OBJECTS_DRAGCONTAINER_SETSLIDER,this._setSliderHandler),this.addListener(Urso.events.MODULES_OBJECTS_DRAGCONTAINER_SWITCHBLOCK,this._switchBlock),this.addListener(Urso.events.MODULES_SCENES_NEW_RESOLUTION,this._onResolutionChange)}}},3266:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.EMITTER,this.emitter=null,this._addBaseObject(),this._addEmitter()}setupParams(t){super.setupParams(t),this.autostart=Urso.helper.recursiveGet("autostart",t,!1),this.cfg=Urso.helper.recursiveGet("cfg",t,!1),this.textures=Urso.helper.recursiveGet("textures",t,[])}_addBaseObject(){this._baseObject=new PIXI.ParticleContainer,this._baseObject.setProperties({scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0})}_addEmitter(){var t=Urso.cache.getJson(this.cfg),e=[];if(!t||!t.data)throw new SyntaxError("Config error in ".concat(this.name," emitter"));for(var i of this.textures){var r=Urso.cache.getTexture(i);r&&e.push(r)}if(e.length>1){var n={framerate:20,loop:!0,textures:e};this.emitter=new PIXI.particles.Emitter(this._baseObject,n,t.data),this.emitter.particleConstructor=PIXI.particles.AnimatedParticle}else this.emitter=new PIXI.particles.Emitter(this._baseObject,e,t.data);this.emitter.emit=this.autostart,this.emitter.autoUpdate=!0}play(){this.emitter.emit=!0}}t.exports=e},259:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.EMITTERFX,this.emitter=null,this.update=this.update.bind(this),this._addBaseObject(),this._createBundle()}setupParams(t){super.setupParams(t),this.autostart=Urso.helper.recursiveGet("autostart",t,!1),this.cfg=Urso.helper.recursiveGet("cfg",t,!1),this.spritesheetFilter=Urso.helper.recursiveGet("spritesheetFilter",t,!1)}update(t){this._emitter&&this._bundle.update(t*PIXI.settings.TARGET_FPMS)}play(t){this._isActive=!0,t=t||this._defaultEmitterName,this._emitter=this._bundle.getParticleEmitter(t),this._emitter.init(this._baseObject,!0,1)}stop(){this._emitter&&(this._emitter.stop(),this._emitter.on.completed.add((()=>{this._isActive||(this._emitter=null)})),this._isActive=!1)}_addBaseObject(){this._baseObject=new PIXI.Container}_createBundle(){this._bundle=new PIXI.particlesFx.FX;var t=Urso.cache.getJson(this.cfg).data;this.spritesheetFilter&&(t.spritesheetFilter=this.spritesheetFilter),this._defaultEmitterName=t.emitters[0].name,this._bundle.initBundle(t),this.autostart&&this.play()}_subscribeOnce(){this.addListener(Urso.events.MODULES_SCENES_UPDATE,this.update)}_customDestroy(){this.removeListener(Urso.events.MODULES_SCENES_UPDATE,this.update),this._emitter&&this._emitter.stop(!1),this._bundle=null,this._emitter=null}}t.exports=e},2929:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.GRAPHICS,this._addBaseObject(),this._drawPoligon()}setupParams(t){super.setupParams(t),this.polygon=Urso.helper.recursiveGet("figure.polygon",t,[]),this.rectangle=Urso.helper.recursiveGet("figure.rectangle",t,[]),this.fillColor=Urso.helper.recursiveGet("figure.fillColor",t,0)}_drawPoligon(){(this.polygon.length||this.rectangle.length)&&(this._baseObject.beginFill(this.fillColor),this.polygon.length?this._baseObject.drawPolygon(this.polygon):this.rectangle.length&&this._baseObject.drawRect(...this.rectangle),this._baseObject.endFill())}_addBaseObject(){this._baseObject=new PIXI.Graphics}}t.exports=e},5648:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.GROUP,this._addBaseObject()}setupParams(t){super.setupParams(t),this.groupName=Urso.helper.recursiveGet("groupName",t,!1)}_addBaseObject(){this._baseObject=new PIXI.Container}}t.exports=e},5330:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this._isDisabled=!1,this.type=Urso.types.objects.HITAREA,this._addBaseObject(),this.enable=this.enable.bind(this),this.disable=this.disable.bind(this)}setupParams(t){super.setupParams(t),this.action=Urso.helper.recursiveGet("action",t,(t=>{this.emit(Urso.events.MODULES_OBJECTS_HIT_AREA_PRESS,{position:t,name:this.name,class:this.class})})),this.onOverCallback=Urso.helper.recursiveGet("onOverCallback",t,!1),this.onOutCallback=Urso.helper.recursiveGet("onOutCallback",t,!1),this.onTouchMoveCallback=Urso.helper.recursiveGet("onTouchMoveCallback",t,!1)}enable(){if(!this._isDisabled)return!1;this._isDisabled=!1}disable(){if(this._isDisabled)return!1;this._isDisabled=!0}_addBaseObject(){this._baseObject=new PIXI.Graphics,this._baseObject.lineStyle(0),this._baseObject.beginFill(16777215),this._baseObject.drawRect(0,0,this.width,this.height),this._baseObject.endFill(),this._baseObject.alpha=0,this._baseObject.cacheAsBitmap=!0,this._baseObject.interactive=!0,this._baseObject.buttonMode=!0,this._baseObject.on("pointerup",this._onPressUp.bind(this)).on("pointerover",this._onOver.bind(this)).on("pointerout",this._onOut.bind(this)).on("touchmove",this._onTouchmove.bind(this))}_onTouchmove(t){var e=this._getEventLocalPosition(t);this.onTouchMoveCallback&&this.onTouchMoveCallback(e)}_onPressUp(t){if(this._isDisabled)return!1;if(this.action){var e=this._getEventLocalPosition(t);this.action(e)}}_onOver(){if(this._isDisabled)return!1;this.onOverCallback&&this.onOverCallback()}_onOut(){if(this._isDisabled)return!1;this.onOutCallback&&this.onOutCallback()}_getEventLocalPosition(t){var e=Urso.objects.getWorld()._baseObject.scale;return{x:t.data.global.x/e.x,y:t.data.global.y/e.y}}}t.exports=e},7893:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.IMAGE,this._addBaseObject()}setupParams(t){super.setupParams(t),this.assetKey=Urso.helper.recursiveGet("assetKey",t,!1)}changeTexture(t){this.assetKey=t,this._addBaseObject()}_addBaseObject(){var t=Urso.cache.getTexture(this.assetKey);t||Urso.logger.error("ModulesObjectsModelsImage assets error: no image with key: "+this.assetKey),this._baseObject?this._baseObject.texture=t:this._baseObject=new PIXI.Sprite(t)}}t.exports=e},8546:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.IMAGESANIMATION,this._tween=null,this._currentFrame=-1,this._defaultTexture,this._animationTextures={},this._addBaseObject()}setupParams(t){super.setupParams(t),this.assetKey=Urso.helper.recursiveGet("assetKey",t,!1),this.duration=Urso.helper.recursiveGet("duration",t,0),this.animationKeys=Urso.helper.recursiveGet("animationKeys",t,[]),this.loop=Urso.helper.recursiveGet("loop",t,!1),this.autostart=Urso.helper.recursiveGet("autostart",t,!1),this.onComplete=Urso.helper.recursiveGet("onComplete",t,!1)}_addBaseObject(){var t=Urso.cache.getTexture(this.assetKey);t||Urso.logger.error("ModulesObjectsModelsImage assets error: no image "+this.assetKey),this._defaultTexture=t,this._baseObject=new PIXI.Sprite(this._defaultTexture),this._createAnimationTextures(),this.autostart&&this.start()}start(){this._createTween()}stop(){if(!this._tween)return!1;this._stopAnimation()}_createAnimationTextures(){for(var t in this.animationKeys){var e=Urso.cache.getTexture(this.animationKeys[t]);e&&(this._animationTextures[t]=e)}return this._animationTextures}_createTween(){var t={x:this.animationKeys.length,duration:this.duration/1e3,ease:"none"};this.loop&&(t.repeat=-1),this._tween=gsap.to({x:0},t),this._tween.eventCallback("onUpdate",this._onUpdate.bind(this)),this._tween.eventCallback("onComplete",(()=>{this._baseObject.texture=this._defaultTexture,this._onComplete()}))}_onUpdate(){if(this._tween){var t=~~this._tween.targets()[0].x,e=(this.animationKeys.length,this.animationKeys[t]);this._currentFrame!==e&&(this._baseObject.texture=this._animationTextures[t],this._currentFrame=e)}}_onComplete(){this.onComplete&&this.onComplete()}_stopAnimation(){this._tween.kill(),this._baseObject.texture=this._defaultTexture,this._onComplete()}}t.exports=e},6418:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.MASK,this._addBaseObject()}setupParams(t){super.setupParams(t),this.rectangle=Urso.helper.recursiveGet("rectangle",t,!1),this.rectangles=Urso.helper.recursiveGet("rectangles",t,!1)}_addBaseObject(){var t=new PIXI.Graphics;if(t.lineStyle(0),t.beginFill(16777215),this.rectangle)this._drawRect(t,this.rectangle);else if(this.rectangles)for(var e of this.rectangles)this._drawRect(t,e);t.endFill(),this._baseObject=t}_drawRect(t,e){t.drawRect(e[0],e[1],e[2],e[3])}}t.exports=e},8689:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.NINESLICEPLANE,this._addBaseObject()}setupParams(t){super.setupParams(t),this.assetKey=Urso.helper.recursiveGet("assetKey",t,!1),this.leftWidth=Urso.helper.recursiveGet("leftWidth",t,!1),this.topHeight=Urso.helper.recursiveGet("topHeight",t,!1),this.rightWidth=Urso.helper.recursiveGet("rightWidth",t,!1),this.bottomHeight=Urso.helper.recursiveGet("bottomHeight",t,!1)}_addBaseObject(){var t=Urso.cache.getTexture(this.assetKey);t||Urso.logger.error("ModulesObjectsModelsImage assets error: no image with key: "+this.assetKey),this._baseObject=new PIXI.NineSlicePlane(t,this.leftWidth,this.topHeight,this.rightWidth,this.bottomHeight)}}t.exports=e},9724:(t,e,i)=>{class r extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.SCROLLBOX,this._addBaseObject(),this._createScrollContent()}setupParams(t){super.setupParams(t),this.scrollContent=Urso.helper.recursiveGet("scrollContent",t,[]),this.dragScroll=Urso.helper.recursiveGet("dragScroll",t,!0),this.scrollType=Urso.helper.recursiveGet("scrollType",t,"auto"),this.width=Urso.helper.recursiveGet("width",t,!1),this.height=Urso.helper.recursiveGet("height",t,!1)}_getScrollboxParams(){return{boxWidth:this.width,boxHeight:this.height,dragScroll:this.dragScroll,fade:!0,fadeScrollbarTime:300}}_setScrollWidth(){"hiddenHorizontal"!==this.scrollType&&"hidden"!==this.scrollType||(this._baseObject.scrollWidth=this.width,this._baseObject.overflowX="hidden")}_setScrollHeight(){"hiddenVertical"!==this.scrollType&&"hidden"!==this.scrollType||(this._baseObject.scrollHeight=this.height,this._baseObject.overflowY="hidden")}_createScrollContent(){this.scrollContent.forEach((t=>{var e=Urso.objects.create(t);this._baseObject.content.addChild(e._baseObject)})),this._baseObject.update()}_addBaseObject(){var t=this._getScrollboxParams(),e=i(9).y;this._baseObject=new e(t),this._setScrollHeight(),this._setScrollWidth()}}t.exports=r},8948:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.SLIDER,this._sliderBg=null,this._sliderHandle=null,this._baseObject=null,this._handleIsPulling=!1,this._points=[],this._addBaseObject()}setupParams(t){super.setupParams(t),this.contents=[],this.points=Urso.helper.recursiveGet("points",t,[0,1]),this.defaultValue=Urso.helper.recursiveGet("defaultValue",t,!1),this.bgTexture=Urso.helper.recursiveGet("bgTexture",t,!1),this.fillTexture=Urso.helper.recursiveGet("fillTexture",t,!1),this.handleTexture=Urso.helper.recursiveGet("handleTexture",t,!1),this.minValueTextModel=Urso.helper.recursiveGet("minValueTextModel",t,!1),this.maxValueTextModel=Urso.helper.recursiveGet("maxValueTextModel",t,!1),this.currentValueTextModel=Urso.helper.recursiveGet("currentValueTextModel",t,!1),this.isVertical=Urso.helper.recursiveGet("isVertical",t,!1)}_setVariables(){this.isVertical?(this.positionKey="y",this.sizeKey="height"):(this.positionKey="x",this.sizeKey="width")}_createSliderTextures(){this._sliderBg=this._createTexture(this.bgTexture),this.fillTexture&&(this._fillTexture=this._createFillTexture(this.fillTexture)),this._sliderHandle=this._createTexture(this.handleTexture),this._setEvents(this._sliderBg._baseObject),this._setEvents(this._sliderHandle._baseObject)}_createFillTexture(t){var e=this._createTexture(t),{width:i,height:r}=e._baseObject;return this._fillMask=Urso.objects.create({type:Urso.types.objects.GRAPHICS,figure:{rectangle:[0,0,i,r]},x:-i*e.anchorX,y:-r*e.anchorY},this),e._baseObject.mask=this._fillMask._baseObject,e}_createValueText(){this.minValueTextModel&&(this.minValueText=Urso.objects.create(this.minValueTextModel,this),this.minValueText.text=this._points[0]),this.maxValueTextModel&&(this.maxValueText=Urso.objects.create(this.maxValueTextModel,this),this.maxValueText.text=this._points.length<=2?"100":this._points[this._points.length-1]),this.currentValueTextModel&&(this.currentValueText=Urso.objects.create(this.currentValueTextModel,this))}_createTexture(t){if(t.type===Urso.types.objects.GRAPHICS||t.type===Urso.types.objects.IMAGE)return Urso.objects.create(t,this);Urso.logger.error("ModulesObjectsModelsSlider objects error: textures should be GRAPHICS or IMAGE type")}_setEvents(t){t.interactive=!0,t.buttonMode=!0,t.on("pointerdown",this._onPointerDown.bind(this)).on("pointerup",this._onPointerUp.bind(this)).on("pointerupoutside",this._onPointerUp.bind(this)).on("touchmove",this._onTouchmove.bind(this))}_onTouchmove(t){var e=this._getEventLocalPosition(t);this._onPointerMove(e)}_getEventLocalPosition(t){var e=Urso.objects.getWorld()._baseObject.scale;return{x:t.data.global.x/e.x,y:t.data.global.y/e.y}}_addBaseObject(){this._baseObject=new PIXI.Container,this._setPoints(),this._setVariables(),this._createSliderTextures(),this._createValueText(),this._setDefaultValue()}_onPointerDown(t){t.target===this._sliderHandle._baseObject&&(this._handleIsDragging=!0)}_onPointerMove(t){var{x:e,y:i}=t;if(this._handleIsDragging){var r=this.isVertical?i:e,n=this.toGlobal(this[this.positionKey])[this.positionKey];r<n?this._sliderHandle[this.positionKey]=0:r>=n+this._sliderBg._baseObject[this.sizeKey]?this._sliderHandle[this.positionKey]=this._sliderBg._baseObject[this.sizeKey]:this._sliderHandle[this.positionKey]=r-n,this._updateValueOnMove()}}_updateValueOnMove(){var{value:t}=this._calculateClosestPoint(this._sliderHandle);this.currentValueText&&(this.currentValueText.text=t);var e={class:this.class,name:this.name,position:this._sliderHandle[this.positionKey]};this.emit(Urso.events.MODULES_OBJECTS_SLIDER_HANDLE_MOVE,e)}_onPointerUp(t){var e;this._handleIsDragging=!1,e=t.target===this._sliderBg._baseObject?t.data.getLocalPosition(t.target):this._sliderHandle;var{coord:i,value:r}=this._calculateClosestPoint(e);this._dropHandle(i,r)}_setPoints(){if(this.points.length>1)this._points=[...this.points];else for(var t=this.points[0]>0?0:this.points[0],e=this.points[0]>0?this.points[0]:0,i=t;i<=e;i++)this._points.push(i)}_setDefaultValue(){this.defaultValue||(this.defaultValue=this._points[0]),this._points.includes(this.defaultValue)||(this.defaultValue=this._points[0]);var t=this._points.indexOf(this.defaultValue)*this._sliderBg._baseObject[this.sizeKey]/(this._points.length-1);this._setNewValue(t,this.defaultValue)}_dropHandle(t,e){var i={class:this.class,name:this.name,position:t,value:e};this.emit(Urso.events.MODULES_OBJECTS_SLIDER_HANDLE_DROP,i),this._setNewValue(t,e)}_calculateClosestPoint(t){var e,i,{x:r,y:n}=t,s=this.isVertical?n:r;if(this._points.length<=2)i=s,e=~~(100/this._sliderBg._baseObject[this.sizeKey]*s);else for(var o=0;o<this._points.length;o++){var a=o*this._sliderBg._baseObject[this.sizeKey]/(this._points.length-1);"number"==typeof i&&s-a<i-s||(i=a,e=this._points[o])}return{coord:i,value:e}}_setFillMask(){if(this._fillMask){var t=100*(this._sliderHandle[this.positionKey]-this._sliderBg[this.positionKey])/this._fillTexture._baseObject[this.sizeKey]*.01,e=this.isVertical?"scaleY":"scaleX";this._fillMask[e]=t}}_setNewValue(t,e){this._sliderHandle[this.positionKey]=t,this.currentValueText&&(this.currentValueText.text=e),this._setFillMask()}_subscribeOnce(){this.addListener(Urso.events.MODULES_SCENES_MOUSE_NEW_POSITION,this._onPointerMove.bind(this))}}t.exports=e},4258:t=>{function e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function i(t){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?e(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class n extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.SPINE,this._addBaseObject()}setupParams(t){super.setupParams(t),this.assetKey=Urso.helper.recursiveGet("assetKey",t,!1),this.animation={timeScale:Urso.helper.recursiveGet("animation.timeScale",t,1),name:Urso.helper.recursiveGet("animation.name",t,!1),loop:Urso.helper.recursiveGet("animation.loop",t,!1),onComplete:Urso.helper.recursiveGet("animation.onComplete",t,!1)},t.animation=this.animation,this.contents=Urso.helper.recursiveGet("contents",t,[])}play(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._baseObject.state.setAnimation(i,t,e)}setMix(t,e,i){this._baseObject.stateData.setMix(t,e,i)}clearListeners(){this._baseObject.state.clearListeners(),this._baseObject.state.addListener({event:this._eventHandler.bind(this)})}setSkinByName(t){this._baseObject.skeleton.setSkinByName(t)}setToSetupPose(){this._baseObject.skeleton.setToSetupPose()}playAndThen(t,e){this.playInSequenceAndThen([t],e)}playInSequence(t){this._playInSequenceAndThen(t)}playInSequenceAndThen(t,e){this._playInSequenceAndThen(t,e)}_playInSequenceAndThen(t,e){this.stop();var i=()=>{},r=0,n={complete:()=>{r++,t[r]?this.play(t[r]):(e&&e(),i())}};i=()=>this._baseObject.state.removeListener(n),this._baseObject.state.addListener(n),this.play(t[0])}stopTrack(t){this._baseObject.state.clearTrack(t)}stop(){this._baseObject.state.clearTracks()}reset(){this._baseObject.state.setEmptyAnimations()}addToSlot(t,e){this._addToSlot(t,e,!1)}replaceSlotWith(t,e){this._addToSlot(t,e,!0)}setAnimationConfig(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.animation=i(i({},this.animation),t),t.onComplete&&(0!==this._baseObject.state.listeners.length&&Urso.logger.warn("ModulesObjectsModelsSpine setAnimationConfig warning: animation state listeners will be cleared"),this._baseObject.state.clearListeners(),this._baseObject.state.addListener({complete:this.animation.onComplete}))}getChildByName(t){return this.children[this._baseObject.skeleton.findSlotIndex(t)]}findSlot(t){return this._baseObject.skeleton.findSlot(t)}findBone(t){return this._baseObject.skeleton.findBone(t)}findAnimation(t){return this._baseObject.spineData.findAnimation(t)}findEvent(t){return this._baseObject.spineData.findEvent(t)}_addBaseObject(){var t=Urso.cache.getSpine(this.assetKey);t||Urso.logger.error("ModulesObjectsModelsSpine assets error: no spine object "+this.assetKey),this._baseObject=new PIXI.spine.Spine(t.spineData),Object.defineProperty(this._baseObject.state,"timeScale",{get:this.getTimeScale.bind(this)}),this.animation.onComplete&&this._baseObject.state.addListener({complete:this.animation.onComplete}),this.animation.name&&this.play(this.animation.name,this.animation.loop),this._baseObject.state.addListener({event:this._eventHandler.bind(this)})}_eventHandler(t,e){this.emit(Urso.events.MODULES_OBJECTS_SPINE_EVENT,{eventName:e.data.name,name:this.name,class:this.class})}_addToSlot(t,e,i){var r=this._baseObject,n=r.spineData.slots.findIndex((e=>{var{name:i}=e;return i===t})),s=r.slotContainers[n];s?(e._baseObject.scale.y=-1,Urso.objects.removeChild(e.parent,e,!0),i&&s.removeChildren(),this.addChild(e),s.addChild(e._baseObject),Urso.objects.refreshStyles()):Urso.logger.warn("ModulesObjectsModelsSpine _addToSlot error: no spine slot "+t)}getTimeScale(){return Urso.scenes.timeScale*this.animation.timeScale}}t.exports=n},9770:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.TEXT,this._addBaseObject()}setupParams(t){super.setupParams(t),this.text=Urso.helper.recursiveGet("text",t,!1),this.localeId=Urso.helper.recursiveGet("localeId",t,!1),this.localeVariables=Urso.helper.recursiveGet("localeVariables",t,{}),this.lineHeight=Urso.helper.recursiveGet("lineHeight",t,0),this.fontFamily=Urso.helper.recursiveGet("fontFamily",t,"Arial"),this.fontSize=Urso.helper.recursiveGet("fontSize",t,!1),this.fontStyle=Urso.helper.recursiveGet("fontStyle",t,!1),this.fontWeight=Urso.helper.recursiveGet("fontWeight",t,!1),this.fill=Urso.helper.recursiveGet("fill",t,"#000000"),this.fillCustomColors=Urso.helper.recursiveGet("fillCustomColors",t,!1),this.stroke=Urso.helper.recursiveGet("stroke",t,"black"),this.strokeThickness=Urso.helper.recursiveGet("strokeThickness",t,0),this.dropShadow=Urso.helper.recursiveGet("dropShadow",t,!1),this.dropShadowColor=Urso.helper.recursiveGet("dropShadowColor",t,"#000000"),this.dropShadowBlur=Urso.helper.recursiveGet("dropShadowBlur",t,0),this.dropShadowAngle=Urso.helper.recursiveGet("dropShadowAngle",t,0),this.dropShadowDistance=Urso.helper.recursiveGet("dropShadowBlur",t,0),this.wordWrap=Urso.helper.recursiveGet("wordWrap",t,!1),this.wordWrapWidth=Urso.helper.recursiveGet("wordWrapWidth",t,100),this.leading=Urso.helper.recursiveGet("leading",t,0),this.textAlign=Urso.helper.recursiveGet("textAlign",t,"left")}_addBaseObject(){this.localeId&&(this._originalModel.text=this.text=Urso.i18n.get(this.localeId,this.localeVariables));var t={fontFamily:this.fontFamily,leading:this.leading,align:this.textAlign};this._baseObject=new PIXI.Text(this.text,t),this.fillCustomColors&&(this._baseObject.fillCustomColors=this.fillCustomColors)}_newLocaleHandler(){this.text=this._baseObject.text=Urso.i18n.get(this.localeId,this.localeVariables)}_subscribeOnce(){this.localeId&&this.addListener(Urso.events.MODULES_I18N_NEW_LOCALE_WAS_SET,this._newLocaleHandler.bind(this))}}t.exports=e},1097:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.TEXTINPUT,this.text="",this._addBaseObject(),this._setRestrictedSymbosl()}setupParams(t){super.setupParams(t),this.input=Urso.helper.recursiveGet("input",t,!1),this.box=Urso.helper.recursiveGet("box",t,!1),this.numbersOnly=Urso.helper.recursiveGet("numbersOnly",t,!1),this.allowedSymbols=Urso.helper.recursiveGet("allowedSymbols",t,!1),this.maxLength=Urso.helper.recursiveGet("maxLength",t,!1)}restrictInput(t){this._baseObject.restrict=t}disable(){this._baseObject.disabled=!0}enable(){this._baseObject.disabled=!1}_setRestrictedSymbosl(){if(this.numbersOnly){var t=new RegExp("^[0-9]*");this.restrictInput(t)}else this.allowedSymbols&&this.restrictInput(this.allowedSymbols)}_onBlur(){var t={name:this.name,class:this.class,id:this.id,text:this.text};this.emit(Urso.events.MODULES_OBJECTS_TEXTINPUT_BLUR,t)}_onInput(){this.text=this._baseObject.text;var t={name:this.name,class:this.class,id:this.id,text:this.text};this.emit(Urso.events.MODULES_OBJECTS_TEXTINPUT_INPUT,t)}_addBaseObject(){this._baseObject=new PIXI.TextInput({input:this.input,box:this.box}),this.maxLength&&(this._baseObject.maxLength=this.maxLength),this._baseObject.on("blur",this._onBlur.bind(this)),this._baseObject.on("input",this._onInput.bind(this))}}t.exports=e},1306:(t,e,i)=>{var r=i(1421);t.exports=class extends r{constructor(t){super(t),this.status="unpressed",this.type=Urso.types.objects.TOGGLE,this._addBaseObject(),this.enable=this.enable.bind(this),this.disable=this.disable.bind(this)}setupParams(t){super.setupParams(t),this.action=Urso.helper.recursiveGet("action",t,(()=>{this.emit(Urso.events.MODULES_OBJECTS_TOGGLE_PRESS,{name:this.name,status:this.status,class:this.class})})),this.buttonFrames={pressedOver:Urso.helper.recursiveGet("buttonFrames.pressedOver",t,!1),pressedOut:Urso.helper.recursiveGet("buttonFrames.pressedOut",t,!1),unpressedOver:Urso.helper.recursiveGet("buttonFrames.unpressedOver",t,!1),unpressedOut:Urso.helper.recursiveGet("buttonFrames.unpressedOut",t,!1),pressedDown:Urso.helper.recursiveGet("buttonFrames.pressedDown",t,!1),unpressedDown:Urso.helper.recursiveGet("buttonFrames.unpressedDown",t,!1),pressedDisabled:Urso.helper.recursiveGet("buttonFrames.pressedDisabled",t,!1),unpressedDisabled:Urso.helper.recursiveGet("buttonFrames.unpressedDisabled",t,!1)}}setButtonFrame(t,e){this.buttonFrames[t]=e,this._isOver?this._changeTexture("".concat(this.status,"Over")):this._isDown?this._changeTexture("".concat(this.status,"Down")):this._isDisabled?this._changeTexture("".concat(this.status,"Disabled")):this._changeTexture("".concat(this.status,"Out"))}enable(){if(!this._isDisabled)return!1;this._isOver?this._changeTexture("".concat(this.status,"Over")):this._changeTexture("".concat(this.status,"Out")),this._isDisabled=!1,this._baseObject.buttonMode=!0}disable(){if(this._isDisabled)return!1;this._changeTexture("".concat(this.status,"Disabled")),this._isDisabled=!0,this._baseObject.buttonMode=!1}_addBaseObject(){this._baseObject=new PIXI.Sprite,this._changeTexture("unpressedOut"),this._baseObject.interactive=!0,this._baseObject.buttonMode=!0,this.pixelPerfectOver,this.pixelPerfectClick,this._baseObject.on("pointerdown",this._onButtonDown.bind(this)).on("pointerup",this._onButtonUp.bind(this)).on("pointerupoutside",this._onButtonUp.bind(this)).on("pointerover",this._onButtonOver.bind(this)).on("pointerout",this._onButtonOut.bind(this))}_onButtonDown(){return!this._isDisabled&&(this._isDown=!0,this.keyDownAction&&this.keyDownAction(),!this._isDisabled&&(this._changeTexture("".concat(this.status,"Down")),void(this.status="pressed"===this.status?"unpressed":"pressed")))}_onButtonUp(){return!this._isDisabled&&(this._isDown=!1,this.action&&this.action(),!this._isDisabled&&void(this._isOver?this._changeTexture("".concat(this.status,"Over")):this._changeTexture("".concat(this.status,"Out"))))}_onButtonOver(){if(this._isOver=!0,this._isDisabled||this._isDown)return!1;this.mouseOverAction&&this.mouseOverAction(),this._changeTexture("".concat(this.status,"Over"))}_onButtonOut(){if(this._isOver=!1,this._isDisabled||this._isDown)return!1;this.mouseOutAction&&this.mouseOutAction(),this._changeTexture("".concat(this.status,"Out"))}switchStatus(){this.status="pressed"===this.status?"unpressed":"pressed",this._isOver?this._changeTexture("".concat(this.status,"Over")):this._changeTexture("".concat(this.status,"Out"))}_changeTexture(t){var e=Urso.cache.getTexture(this.buttonFrames[t]);return e?(this._baseObject.texture=e,!0):t==="".concat(this.status,"Out")?(Urso.logger.error("ModulesObjectsModelsButton assets error: no out image "+this.buttonFrames.out),!1):(this._changeTexture("".concat(this.status,"Out")),!1)}}},5753:t=>{class e extends Urso.Core.Modules.Objects.BaseModel{constructor(t){super(t),this.type=Urso.types.objects.WORLD,this._addBaseObject()}setupParams(t){super.setupParams(t),this.contents=Urso.helper.recursiveGet("contents",t,[])}_addBaseObject(){this._baseObject=Urso.scenes.getPixiWorld()}}t.exports=e},6147:t=>{t.exports=class{constructor(){this.singleton=!0,this._dependencies={x:this._updateHorizontal.bind(this),y:this._updateVertical.bind(this),anchorX:this._updateHorizontal.bind(this),anchorY:this._updateVertical.bind(this),scaleX:this._adaptScaleX.bind(this),scaleY:this._adaptScaleY.bind(this),alignX:this._updateHorizontal.bind(this),alignY:this._updateVertical.bind(this),width:this._updateHorizontal.bind(this),height:this._updateVertical.bind(this),angle:this._updateAngle.bind(this),stretchingType:this._adaptStretchingType.bind(this),parent:this._parentChangeHandler.bind(this)},this._parentToChildDependencies={width:{children:["width"]},height:{children:["height"]},anchorX:{children:["x"]},anchorY:{children:["y"]},stretchingType:{children:["width","height"]}},this._parentTypes=[Urso.types.objects.COMPONENT,Urso.types.objects.CONTAINER,Urso.types.objects.DRAGCONTAINER,Urso.types.objects.GROUP,Urso.types.objects.SCROLLBOX,Urso.types.objects.SLIDER,Urso.types.objects.SPINE,Urso.types.objects.WORLD],this._typesWithoutAnchor=[Urso.types.objects.CHECKBOX,Urso.types.objects.EMITTER,Urso.types.objects.EMITTERFX,Urso.types.objects.GRAPHICS,Urso.types.objects.HITAREA,Urso.types.objects.MASK,Urso.types.objects.NINESLICEPLANE,Urso.types.objects.SLIDER,Urso.types.objects.SPINE,Urso.types.objects.TEXTINPUT,Urso.types.objects.WORLD]}isAdaptiveProperty(t){return Object.keys(this._dependencies).includes(t)}propertyChangeHandler(t,e){this._adaptProperty(t,e),this._adaptChildProperties(t,e)}_adaptProperty(t,e){this._dependencies[e]&&this._dependencies[e](t)}_updateHorizontal(t){var e=this._getXAsNumber(t);e+=this._adaptAnchorX(t),e+=this._adaptAlignX(t),t._baseObject.x=e,this._adaptWidth(t)}_updateAngle(t){t._baseObject.angle=t.angle,this._canBeParent(t)&&(this._updateHorizontal(t),this._updateVertical(t))}_updateVertical(t){var e=this._getYAsNumber(t);e+=this._adaptAnchorY(t),e+=this._adaptAlignY(t),t._baseObject.y=e,this._adaptHeight(t)}_setPropertyWithoutAdaption(t,e,i){t[e]=i}_adaptChildProperties(t,e){var{children:i}=this._parentToChildDependencies[e]||{},r=this._canBeParent(t)&&t.hasOwnProperty("contents");if(i&&r)for(var n of i)for(var s of t.contents)this.propertyChangeHandler(s,n)}_parentChangeHandler(t){if(null!=t.parent)for(var e of this._propertiesDependentOnParent())this.propertyChangeHandler(t,e)}_propertiesDependentOnParent(){var t=[];for(var e of Object.keys(this._parentToChildDependencies)){var{children:i}=this._parentToChildDependencies[e];if(i)for(var r of i)t.push(r)}return t}_adaptAnchorX(t){return("number"!=typeof t.anchorX||t.anchorX<0||t.anchorX>1)&&Urso.logger.error("AnchorX value is not valid!",t),this._canBeParent(t)&&!this._typesWithoutAnchor.includes(t.type)?0===t.anchorX?0:t.angle?this._getAnchorOffsetByAngle(t,"x"):-this._getWidthAsNumber(t)*t.anchorX:(this._typesWithoutAnchor.includes(t.type)?Urso.logger.warn():t._baseObject.anchor.x=t.anchorX,0)}_adaptAnchorY(t){return("number"!=typeof t.anchorY||t.anchorY<0||t.anchorY>1)&&Urso.logger.error("AnchorY value is not valid!",t),this._canBeParent(t)&&!this._typesWithoutAnchor.includes(t.type)?0===t.anchorY?0:t.angle?this._getAnchorOffsetByAngle(t,"y"):-this._getHeightAsNumber(t)*t.anchorY:(this._typesWithoutAnchor.includes(t.type)?Urso.logger.warn():t._baseObject.anchor.y=t.anchorY,0)}_getAnchorOffsetByAngle(t,e){var i=this._getWidthAsNumber(t),r=this._getHeightAsNumber(t),n=i*t.anchorX,s=r*t.anchorY,o=Math.sqrt(Math.pow(n,2)+Math.pow(s,2)),a=Math.atan(n/s),h=Urso.helper.getAngle(a),l=t.angle+h;return-o*Math["x"===e?"cos":"sin"](Urso.helper.getRadian(l))}_adaptScaleX(t){if(1!==t.scaleX&&"boolean"!=typeof t.width)return Urso.logger.error("ScaleX value cannot be set. Width already used!!"),void this._setPropertyWithoutAdaption(t,"scaleX",1);"number"==typeof t.scaleX?t._baseObject.scale.x=t.scaleX:Urso.logger.error("ScaleX value is not valid!")}_adaptScaleY(t){if(1!==t.scaleY&&"boolean"!=typeof t.height)return Urso.logger.error("ScaleY value cannot be set. Height already used!!"),void this._setPropertyWithoutAdaption(t,"scaleY",1);"number"==typeof t.scaleY&&t.scaleY>=0?t._baseObject.scale.y=t.scaleY:Urso.logger.error("ScaleY value is not valid!")}_adaptAlignX(t){if("string"!=typeof t.alignX)return Urso.logger.error("AlignX value is not string!"),0;switch(t.alignX){case"left":return 0;case"right":return t.parent?this._getWidthAsNumber(t.parent):0;case"center":return(t.parent?this._getWidthAsNumber(t.parent):0)/2;default:return Urso.logger.error("AlignX string is not valid!"),0}}_adaptAlignY(t){if("string"!=typeof t.alignY)return Urso.logger.error("AlignY value is not string!"),0;switch(t.alignY){case"top":return 0;case"bottom":return t.parent?this._getHeightAsNumber(t.parent):0;case"center":return(t.parent?this._getHeightAsNumber(t.parent):0)/2;default:return Urso.logger.error("AlignY string is not valid!"),0}}_adaptWidth(t){if("boolean"!=typeof t.width&&1!==t.scaleX)return Urso.logger.error("Width value cannot be set. ScaleX already used!!",t),void this._setPropertyWithoutAdaption(t,"width",!1);if(t.width){if(!this._isValueANumberOrPercentsString(t.width))return Urso.logger.error("Width value is not valid!!");this._canBeParent(t)||(t._baseObject.width=this._getWidthAsNumber(t))}}_adaptHeight(t){if("boolean"!=typeof t.height&&1!==t.scaleY)return Urso.logger.error("Height value cannot be set. ScaleY already used!!",t),void this._setPropertyWithoutAdaption(t,"height",!1);if(t.height){if(!this._isValueANumberOrPercentsString(t.height))return Urso.logger.error("Height value not valid!");this._canBeParent(t)||(t._baseObject.height=this._getHeightAsNumber(t))}}_getXAsNumber(t){return this._getPropertyAsNumber(t,"x","width")}_getYAsNumber(t){return this._getPropertyAsNumber(t,"y","height")}_getWidthAsNumber(t){return this._getPropertyAsNumber(t,"width","width")}_getHeightAsNumber(t){return this._getPropertyAsNumber(t,"height","height")}_getPropertyAsNumber(t,e,i){switch(typeof t[e]){case"number":return t[e];case"string":var r=this._getPropertyAsNumber(t.parent,i,i);return this._getRoundedPercentageOfNumber(t[e],r);case"boolean":return this._getPropertyAsNumber(t.parent,e,i);default:return void Urso.logger.error("Property value not number or string!",t,e)}}_getRoundedPercentageOfNumber(t,e){return~~(parseFloat(t)*e/100)}_canBeParent(t){return this._parentTypes.includes(t.type)}_isValueANumberOrPercentsString(t){return"number"==typeof t||"string"==typeof t&&t.endsWith("%")}_adaptStretchingType(t){if("100%"===t.width&&"100%"===t.height&&t.stretchingType)switch(t.stretchingType){case"inscribed":this._inscribe(t);break;case"circumscribed":this._circumscribe(t);break;case"false":break;default:Urso.logger.error("StretchingType value not valid!")}}_setPropertyAndAdaptIt(t,e,i){t[e]=i,this.propertyChangeHandler(t,e)}_setStreching(t,e){var{scale:i,objectWidth:r,objectHeight:n}=e;1===t.scaleX?this._setPropertyAndAdaptIt(t,"width",r*i):this._setPropertyAndAdaptIt(t,"scaleX",i),1===t.scaleY?this._setPropertyAndAdaptIt(t,"height",n*i):this._setPropertyAndAdaptIt(t,"scaleY",i)}_getObjectValuesForStreching(t){var e=this._getWidthAsNumber(t),i=this._getHeightAsNumber(t);return{objectWidth:e,objectHeight:i,scaleX:this._getWidthAsNumber(t.parent)/e,scaleY:this._getHeightAsNumber(t.parent)/i}}_inscribe(t){var{objectWidth:e,objectHeight:i,scaleX:r,scaleY:n}=this._getObjectValuesForStreching(t),s=Math.min(r,n);this._setStreching(t,{scale:s,objectWidth:e,objectHeight:i})}_circumscribe(t){var{objectWidth:e,objectHeight:i,scaleX:r,scaleY:n}=this._getObjectValuesForStreching(t),s=Math.max(r,n);this._setStreching(t,{scale:s,objectWidth:e,objectHeight:i})}}},7171:t=>{t.exports=class{constructor(){this.singleton=!0,this._safeFlag=!1,this._customSetLogic=this._customSetLogic.bind(this),this._customGetLogic=this._customGetLogic.bind(this),this._propertyAdapter=this.getInstance("PropertyAdapter")}get(t){var e=this,i=new Proxy(t,{get(t,i,r){var n=Reflect.get(t,i,r);return e._customGetLogic({target:t,proxy:r},i,n)},set(t,r,n,s){var o=t._baseObject[r],a=Reflect.set(t,r,n,s);return e._customSetLogic(t,r,n,i,o),a}});return i}_setProperty(t,e,i,r){this._propertyAdapter.isAdaptiveProperty(e)?this._propertyAdapter.propertyChangeHandler(t,e):Urso.helper.recursiveSet(e,i,t._baseObject),this._checkNeedTransitions(t,e,i,r)}safeSetValueToTarget(t,e,i){this._safeFlag=!0;var r=t._originalModel[e];t[e]=i,t._originalModel[e]=r,this._safeFlag=!1}_customGetLogic(t,e,i){var r=t.target,n=this._getAliases()[e];return void 0!==i&&void 0!==n||!n?i:Urso.helper.recursiveGet(n,r._baseObject,i)}_customSetLogic(t,e,i,r,n){this._getOriginalModelExceptions().includes(e)||(t._originalModel[e]=i);var s=this._getAliases()[e];return!!s&&(s.startsWith("function.")?(this._runCustomFunction(s,t),!0):(this._checkSelectorProperties(e),this._setProperty(t,s,i,n),"text"===s&&t._baseObject.updateText(!0),this._checkMaxSize(t),void 0!==t._baseObject.dirty&&(t._baseObject.dirty=!0),!0))}_checkMaxSize(t){if(t.maxWidth||t.maxHeight){var e=!1,i=t._baseObject;!i._texture||i._texture.orig.width&&i._texture.orig.height||i.updateText(!0);var r=i._texture?Math.abs(i.scale.x)*i._texture.orig.width:i.width,n=i._texture?Math.abs(i.scale.y)*i._texture.orig.height:i.height;if(t.maxWidth&&(t.maxWidth<r||t.maxWidth>r&&t._baseObject.scale.x<1)&&(e=!0),t.maxHeight&&(t.maxHeight<n||t.maxHeight>n&&t._baseObject.scale.y<1)&&(e=!0),e){var s=1;if(t.maxWidth&&(s=Math.abs(t._baseObject.scale.x*t.maxWidth/t._baseObject.width)),t.maxHeight){var o=Math.abs(t._baseObject.scale.y*t.maxHeight/t._baseObject.height);s>o&&(s=o)}s>1&&(s=1),t._baseObject.scale.x=s*Math.sign(t._baseObject.scale.x),t._baseObject.scale.y=s*Math.sign(t._baseObject.scale.y)}}}_runCustomFunction(t,e){var i=t.replace("function.","");e[i]&&e[i]()}_checkSelectorProperties(t){!this._safeFlag&&this._getSelectorProperties().includes(t)&&(Urso.logger.error("ModulesObjectsProxy error: you are trying to change selector property: "+t),Urso.logger.error("Notice: use functions addClass, removeClass, setId, setName"))}_checkNeedTransitions(t,e,i,r){if(void 0!==r&&t.transitionProperty&&t.transitionDuration&&t.transitionProperty.split(" ").includes(e)){var n=t._baseObject[e],s=t._transitions.tweens[e];s&&s.kill(),t._baseObject[e]=r;var o={duration:t.transitionDuration/1e3,ease:"none"};o[e]=n,t.transitionDelay&&(o.delay=t.transitionDelay/1e3);var a=gsap.to(t._baseObject,o);t._transitions.tweens[e]=a,a.eventCallback("onComplete",(()=>{t._transitions.tweens[e]=null}))}}_getSelectorProperties(){return["id","name","class"]}_getOriginalModelExceptions(){return["parent","contents"]}_getAliases(){return{id:"id",name:"name",class:"class",x:"x",y:"y",z:"z",angle:"angle",anchorX:"anchor.x",anchorY:"anchor.y",width:"width",height:"height",stretchingType:"stretchingType",scaleX:"scale.x",scaleY:"scale.y",alignX:"alignX",alignY:"alignY",parent:"parent",rightOffset:"rightOffset",bottomOffset:"bottomOffset",alpha:"alpha",visible:"visible",text:"text",frame:"frame",blendMode:"blendMode",tint:"tint",action:"events.onInputUp._bindings.0._listener","btnFrames.over":"frames.over","btnFrames.out":"frames.out","btnFrames.down":"frames.down","btnFrames.up":"frames.up",align:"align",filters:"filters",lineSpacing:"lineSpacing",maxWidth:"maxWidth",maxHeight:"maxHeight",lineHeight:"style.lineHeight",fontFamily:"style.fontFamily",fontSize:"style.fontSize",fontStyle:"style.fontStyle",fontWeight:"style.fontWeight",fill:"style.fill",fillCustomColors:"fillCustomColors",stroke:"style.stroke",strokeThickness:"style.strokeThickness",dropShadow:"style.dropShadow",dropShadowColor:"style.dropShadowColor",dropShadowBlur:"style.dropShadowBlur",dropShadowAngle:"style.dropShadowAngle",dropShadowDistance:"style.dropShadowDistance",wordWrap:"style.wordWrap",wordWrapWidth:"style.wordWrapWidth","leading ":"style.leading","textAlign ":"style.align",enabled:"input.enabled",cacheAsBitmap:"cacheAsBitmap",ignoreParentMask:"ignoreParentMask",toGlobal:"toGlobal"}}}},418:t=>{t.exports=class{constructor(){this.singleton=!0}testObject(t,e){var i=this.parse(e);return this.testObjectWithParsedSelector(t,i)}testObjectWithParsedSelector(t,e){var i=e[e.length-1];if(!this._testObjectsProperties(t,i))return!1;if(1===e.length)return!0;for(var r=t.parent,n=e.length-2;n>=0;n--){for(var s=e[n],o=0;1!==o&&r;)this._testObjectsProperties(r,s)&&(o=1),r=r.parent;if(1===o&&0===n)return!0;if(0===o)return!1}}_testObjectsProperties(t,e){for(var i of e)if("class"===i.type){if(!t[i.type]||!t[i.type].split(" ").includes(i.value))return!1}else if(t[i.type]!==i.value)return!1;return!0}parse(t){var e=t.split(" "),i=[];for(var r of e){var n=this._parseSelectorPart(r);n||Urso.logger.error("ModulesObjectsService error, cannot parse selector part: "+r),i.push(n)}return i}_parseSelectorPart(t){var e="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",i={id:new RegExp("^#("+e+")"),name:new RegExp("^\\^("+e+")"),class:new RegExp("^\\.("+e+")")},r=[];for(var n in i){var s=i[n].exec(t);if(s){r.push({type:n,value:s[1]});var o=Urso.helper.stringReplace(s[0],"",t),a=this._parseSelectorPart(o);if(a)return Urso.helper.mergeArrays(r,a)}}return!!(r&&r.length>0)&&r}}},8663:t=>{t.exports=class{constructor(){this.singleton=!0,this._world=null,this._counter=0,this._objectsTypesFlipped}_checkWorld(){return this._world||this.resetWorld(),this._world}resetWorld(){var t=this.getInstance("Models.World",{name:"WORLD"}),e=this.getInstance("Proxy").get(t);this._world=e,this.updateWorldBounds({template:Urso.scenes.getTemplateSize()}),this.getInstance("Cache").reset(),this.applyClassesToWorld(),this._addToCache(e)}updateWorldBounds(t){this._world&&(Urso.objects._safeSetValueToTarget(this._world,"width",t.template.width),Urso.objects._safeSetValueToTarget(this._world,"height",t.template.height))}applyClassesToWorld(){this._world&&(this._world.class&&this._world.class.split(" ").forEach((t=>this._world.removeClass(t,!0))),Urso.getInstancesModes().forEach((t=>this._world.addClass(t,!0))),Urso.objects.refreshStyles())}_getUid(){return this._counter++,"object_"+this._counter}getWorld(){return this._world}add(t,e){var i,r,n=this._checkWorld();switch(e||(e=n),t.contents&&(r=t.contents,t.contents=[]),this._objectsTypesFlipped||(this._objectsTypesFlipped=Urso.helper.objectFlip(Urso.types.objects)),t._uid=this._getUid(),t.type){case Urso.types.objects.ATLASIMAGE:i=this.getInstance("Models.AtlasImage",t);break;case Urso.types.objects.BITMAPTEXT:i=this.getInstance("Models.BitmapText",t);break;case Urso.types.objects.DRAGCONTAINER:i=this.getInstance("Models.DragContainer",t);break;case Urso.types.objects.EMITTERFX:i=this.getInstance("Models.EmitterFx",t);break;case Urso.types.objects.HITAREA:i=this.getInstance("Models.HitArea",t);break;case Urso.types.objects.IMAGESANIMATION:i=this.getInstance("Models.ImagesAnimation",t);break;case Urso.types.objects.NINESLICEPLANE:i=this.getInstance("Models.NineSlicePlane",t);break;case Urso.types.objects.TEXTINPUT:i=this.getInstance("Models.TextInput",t);break;default:var s=Urso.helper.capitaliseFirstLetter(this._objectsTypesFlipped[t.type].toLowerCase());i=this.getInstance("Models.".concat(s),t)}i||Urso.logger.error("ModulesObjectsCreate model type error",t.type,t),i._baseObject||Urso.logger.error("ModulesObjectsCreate baseObject error",i);var o=this.getInstance("Proxy").get(i);if(t.type===Urso.types.objects.COMPONENT&&(t._controller.common.object=o),this.addChild(e,o,!0),this._updateCommonProperties(o),i.type===Urso.types.objects.MASK&&(e._baseObject.mask=i._baseObject),r)for(var a of r)this.add(a,o);return this._addToCache(o),o}addChild(t,e,i){if(e.parent&&this.removeChild(e.parent,e,!0),e._baseObject){t.contents.push(e);var r=e._baseObject;t._baseObject.addChild(r),e.parent=t,i||Urso.objects.refreshStyles()}else t._baseObject.addChild(e)}removeChild(t,e,i){e.parent=null;var r=t.contents.indexOf(e);t.contents.splice(r,1),t._baseObject.removeChild(e._baseObject),i||Urso.objects.refreshStyles()}destroy(t,e){if(t.parent&&this.removeChild(t.parent,t,!0),t.contents)for(;t.contents.length>0;)this.destroy(t.contents[0],!0);t._customDestroy(),t._baseObject&&t._baseObject.destroy({children:!0}),this._removeFromCache(t),this.getInstance("Styles").removeFromCache(t),t._controller&&(t._controller.common.object&&(t._controller.common.object=null),t._controller=null,t.instance=null),e||Urso.objects.refreshStyles(),t.destroyed=!0}_updateCommonProperties(t){for(var e in t._originalModel)if(t._originalModel.hasOwnProperty(e)){var i=t._originalModel[e];Urso.objects._safeSetValueToTarget(t,e,i)}}_addToCache(t){t.id&&this.getInstance("Cache").addId(t.id,t),t.name&&this.getInstance("Cache").addName(t.name,t),t.class&&this.getInstance("Cache").addClass(t.class,t)}_removeFromCache(t){t.id&&this.getInstance("Cache").removeId(t.id,t),t.name&&this.getInstance("Cache").removeName(t.name,t),t.class&&this.getInstance("Cache").removeClass(t.class,t)}}},2285:t=>{t.exports=class{constructor(){this.singleton=!0,this._cache={},this._tempObject=this.getInstance("BaseModel",{}),this._tempTextObject=this.getInstance("Models.Text",{}),this._selector=this.getInstance("Selector")}refresh(t){t||(t=this.getInstance("Controller").getWorld());var e=Urso.template.get().styles;this._removeInactualStylesAndAddNew(t,e)}_removeAllStylesAndReAdd(t,e){for(var[i,r]of(this._globalResetStyles(),Object.entries(e)))this._apply(i,r)}_removeInactualStylesAndAddNew(t,e){for(var[i,r]of(this._resetInactualStyles(),Object.entries(e)))this._apply(i,r)}refreshByChangedClassName(t){var e=Urso.template.get().styles;for(var[i,r]of(this._restoreDefaultsByCache(t),Object.entries(e)))i.includes("."+t)&&this._apply(i,r)}removeFromCache(t){for(var e in this._cache)this._cache[e][t._uid]&&this._deleteFromCacheBySelector(e,t)}_deleteFromCacheBySelector(t,e){delete this._cache[t][e._uid],Object.keys(this._cache[t]).length||delete this._cache[t]}_apply(t,e){var i=this.getInstance("Controller").findAll(t);for(var r of i)if(!r._styles[t])for(var[n,s]of(this._addObjectToCache(t,r),r._styles[t]=e,Object.entries(e)))void 0===r._originalModel[n]&&Urso.objects._safeSetValueToTarget(r,n,s)}_addObjectToCache(t,e){this._cache[t]||(this._cache[t]={}),this._cache[t][e._uid]=e}_globalResetStyles(){for(var[t,e]of Object.entries(this._cache)){for(var[i,r]of Object.entries(e))this._removeSelectorStyles(r,t,!0);delete this._cache[t]}}_resetInactualStyles(){for(var[t,e]of Object.entries(this._cache))for(var[i,r]of Object.entries(e))this._selector.testObject(r,t)||(this._removeSelectorStyles(r,t),this._deleteFromCacheBySelector(t,r))}_restoreDefaultsByCache(t){for(var[e,i]of Object.entries(this._cache))if(e.includes("."+t)){for(var[r,n]of Object.entries(i))this._removeSelectorStyles(n,e);delete this._cache[e]}}_removeSelectorStyles(t,e,i){delete t._styles[e];var r=Urso.template.get().styles[e];if(r)for(var[n,s]of Object.entries(r))this._restoreValueByKey(n,t,i)}_restoreValueByKey(t,e,i){if(!e._originalModel[t]){var r=e.type===Urso.types.objects.TEXT?this._tempTextObject:this._tempObject;if(Urso.objects._safeSetValueToTarget(e,t,r[t]),!i)for(var[n,s]of Object.entries(e._styles))void 0!==s[t]&&Urso.objects._safeSetValueToTarget(e,t,s[t])}}}},9759:(t,e,i)=>{Urso.Core.Modules.Observer={Controller:i(8262),Events:i(9593)}},8262:t=>{t.exports=class{constructor(){Urso.events=this.getInstance("Events").list,this._observers={},this._prefix="",this._prefixDelimiter="_@",this._counter=0,this._getUid=this._getUid.bind(this)}fire(t,e,i){return t?i?setTimeout((()=>{this.fire(t,e)}).bind(this),i):(this._fireLocal(t,e),void this._fireLocal(t+this._getCurPrefix(),e)):Urso.logger.error("ModulesObserverController fire error:",t)}add(t,e,i){if(!t||!e)return Urso.logger.error("ModulesObserverController add error:",t,e);i?this._addLocal(t,e):this._addLocal(t+this._getCurPrefix(),e)}remove(t,e,i){i?this._removeLocal(t,e):this._removeLocal(t+this._getCurPrefix(),e)}setPrefix(t){this._prefix=t}_getUid(){return this._counter++,"observer_"+this._counter}_addLocal(t,e){this._observers[t]||(this._observers[t]={});var i=this._getUid();e._ouid=i,this._observers[t][i]=e}_removeLocal(t,e){if(!this._observers[t]||!e._ouid)return Urso.logger.error("ModulesObserverController remove error, no observer with",t,e);var i=e._ouid;delete this._observers[t][i],0===Urso.helper.getObjectSize(this._observers[t])&&delete this._observers[t]}_fireLocal(t,e){if(!this._observers[t])return!1;for(var[,i]of Object.entries(this._observers[t]))i(e);return!0}clearAllLocal(){for(var t in this._observers)t.endsWith(this._getCurPrefix())&&delete this._observers[t]}clear(){return this._observers={},!0}_getCurPrefix(){return this._prefixDelimiter+this._prefix}}},9593:t=>{t.exports=class{constructor(){this.singleton=!0,this.list={COMPONENTS_FULLSCREEN_CHANGE:"components.fullscreen.change",COMPONENTS_FULLSCREEN_SWITCH:"components.fullscreen.switch",COMPONENTS_LAYERS_SWITCHER_SWITCH:"components.layersSwitcher.switch",MODULES_ASSETS_GROUP_LOADED:"modules.assets.group.loaded",MODULES_ASSETS_LOAD_PROGRESS:"modules.assets.load.progress",MODULES_ASSETS_LAZYLOAD_FINISHED:"modules.assets.lazyLoad.finished",MODULES_I18N_NEW_LOCALE_WAS_SET:"modules.i18n.new.locale.was.set",MODULES_INSTANCES_MODES_CHANGED:"modules.instances.modes.changed",MODULES_OBJECTS_BUTTON_PRESS:"modules.objects.button.press",MODULES_OBJECTS_DRAGCONTAINER_DRAG_STARTED:"modules.objects.dragContainer.dragStarted",MODULES_OBJECTS_DRAGCONTAINER_DRAG_FINISHED:"modules.objects.dragContainer.dragFinished",MODULES_OBJECTS_DRAGCONTAINER_SCROLL:"modules.objects.dragContainer.scroll",MODULES_OBJECTS_DRAGCONTAINER_SETSLIDER:"modules.objects.dragContainer.setSlider",MODULES_OBJECTS_DRAGCONTAINER_SWITCHBLOCK:"modules.objects.dragContainer.switchBlock",MODULES_OBJECTS_HIT_AREA_PRESS:"modules.objects.hitArea.press",MODULES_OBJECTS_SLIDER_HANDLE_MOVE:"modules.objects.slider.handleMove",MODULES_OBJECTS_SLIDER_HANDLE_DROP:"modules.objects.slider.handleDrop",MODULES_OBJECTS_SPINE_EVENT:"modules.objects.spine.event",MODULES_OBJECTS_TOGGLE_PRESS:"modules.objects.toggle.press",MODULES_OBJECTS_TEXTINPUT_BLUR:"modules.objects.textinput.blur",MODULES_OBJECTS_TEXTINPUT_INPUT:"modules.objects.textinput.input",MODULES_OBJECTS_CHECKBOX_PRESS:"modules.objects.checkbox.press",MODULES_LOGIC_SOUNDS_DO:"modules.soundManager.do",MODULES_SOUND_MANAGER_CONTEXT_UNLOCKED:"modules.soundManager.contextUnlocked",MODULES_SOUND_MANAGER_UPDATE_CFG:"modules.soundManager.updateCfg",MODULES_SOUND_MANAGER_SET_GLOBAL_VOLUME:"modules.soundManager.setGlobalVolume",MODULES_STATES_MANAGER_STATE_CHANGE:"modules.statesManager.stateChange",MODULES_STATES_MANAGER_ACTION_START:"modules.statesManager.actionStart",MODULES_STATES_MANAGER_ACTION_FINISH:"modules.statesManager.actionFinish",MODULES_SCENES_ORIENTATION_CHANGE:"modules.scenes.orientation.change",MODULES_SCENES_NEW_RESOLUTION:"modules.scenes.newResolution",MODULES_SCENES_NEW_SCENE_INIT:"modules.scenes.newSceneInit",MODULES_SCENES_DISPLAY_START:"modules.scenes.display.start",MODULES_SCENES_DISPLAY_FINISHED:"modules.scenes.display.finished",MODULES_SCENES_MOUSE_NEW_POSITION:"modules.scenes.mouse.newPosition",MODULES_SCENES_PAUSE:"modules.scenes.pause",MODULES_SCENES_RESUME:"modules.scenes.resume",MODULES_SCENES_UPDATE:"modules.scenes.update",EXTRA_BROWSEREVENTS_POINTER_EVENT:"extra.browserEvents.window.pointer.event",EXTRA_BROWSEREVENTS_WINDOW_PRE_RESIZE:"extra.browserEvents.window.pre.resize",EXTRA_BROWSEREVENTS_WINDOW_RESIZE:"extra.browserEvents.window.resize",EXTRA_BROWSEREVENTS_WINDOW_VISIBILITYCHANGE:"extra.browserEvents.window.visibilitychange"}}}},2623:(t,e,i)=>{Urso.Core.Modules.Scenes={Controller:i(9761),Model:i(3938),PixiWrapper:i(8866),Resolutions:i(1840),ResolutionsConfig:i(2453),Service:i(294)}},9761:t=>{t.exports=class{constructor(){this.singleton=!0,this._service,this.init()}init(){this._service=this.getInstance("Service")}display(t){this._service.display(t)}getFps(){return this.getInstance("PixiWrapper").getFps()}getFpsData(){return this.getInstance("PixiWrapper").getFpsData()}pause(){this._service.pause()}resume(){this._service.resume()}loadUpdate(t){this._service.loadUpdate(t)}getPixiWorld(){return this.getInstance("PixiWrapper").getPixiWorld()}getTemplateSize(){return this.getInstance("Resolutions").getTemplateSize()}getMouseCoords(){return this.getInstance("PixiWrapper").getCachedMouseCoords()}addObject(t,e,i){return this._service.addObject(t,e,i)}generateTexture(t){return this.getInstance("PixiWrapper").generateTexture(t)}get timeScale(){return this._service.getTimeScale()}set timeScale(t){return this._service.setTimeScale(t)}}},3938:t=>{t.exports=class{loadUpdate(){}preload(){}create(){}update(){}render(){}destroy(){}}},8866:t=>{t.exports=class{constructor(){this.singleton=!0,this._renderer,this.scenes={},this.world,this._root,this._loaderScene,this._loopStopped=!1,this._loopPaused=!1,this._loopLastCall=0,this._loop=this._loop.bind(this),this.passiveCallIntervalId=null,this._mouseCoords={x:0,y:0},this._maxFPSLimit=Urso.config.fps.limit,this._lastUpdateTime=0,this._frames=0,this._currentFPS=Urso.config.fps.limit,this._lastTimeCheckFPS=0}init(){this._setPixiSettings(),PIXI.utils.skipHello(),this.renderer=new PIXI.Renderer({preserveDrawingBuffer:!0,width:1,height:1}),document.body.appendChild(this.renderer.view),this._root=new PIXI.Container,this._createWorld(),this.interaction=Urso.helper.recursiveGet("plugins.interaction",this.renderer)||new PIXI.InteractionManager(this.renderer),this._loaderScene=this.getInstance("Model"),this._requestAnimFrame(this._loop),this.getInstance("Resolutions")}isPaused(){return this._loopPaused}pause(){this._loopPaused=!0,PIXI.spine.settings.GLOBAL_AUTO_UPDATE=!1}resume(){this._loopLastCall=Date.now(),this._loopPaused=!1,this._update(),PIXI.spine.settings.GLOBAL_AUTO_UPDATE=!0}resize(t,e){this.renderer.resize(t,e)}hideCanvas(){this.renderer.view.style.display="none"}showCanvas(){this.renderer.view.style.display=""}setWorldScale(t,e){this.world.scale.x=t,this.world.scale.y=e}setCanvasWidth(t){this.renderer.view.style.width=t+"px"}setCanvasHeight(t){this.renderer.view.style.height=t+"px"}getPixiWorld(){return this.world}setNewScene(t){this._createWorld(),this.currentScene=t}getFps(){return this._currentFPS}getFpsData(){return{fps:this._currentFPS,limit:this._maxFPSLimit}}getCachedMouseCoords(){return this._mouseCoords}generateTexture(t){return this.renderer.generateTexture(t)}_setPixiSettings(){PIXI.settings.SCALE_MODE=PIXI.SCALE_MODES.LINEAR,PIXI.settings.TEXT_RESOLUTION=1,(Urso.device.iOS||Urso.device.macOS)&&(PIXI.settings.PRECISION_FRAGMENT=PIXI.PRECISION.HIGH)}_createWorld(){this.world&&this._root.removeChild(this.world),this.world=new PIXI.Container,this._root.addChild(this.world)}_requestAnimFrame(t){(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,0)})(t)}_getDeltaTime(){var t=Date.now(),e=Urso.scenes.timeScale*(t-this._loopLastCall);return this._loopLastCall=t,Urso.math.intMakeBetween(e,0,1e3)}_getDeltaFrame(t){return 60*t/1e3}_loop(){if(this._loopStopped)return!1;if(this._requestAnimFrame(this._loop),!this._loopPaused){if(!this._fpsCheckAllowUpdate())return;this._update()}return!0}_fpsCheckAllowUpdate(){var t=Urso.time.get();return this._updateCurrentFPS(t),Urso.config.fps.optimizeLowPerformance&&(this._currentFPS<60?this._maxFPSLimit=30:this._maxFPSLimit=Urso.config.fps.limit),!(t-this._lastUpdateTime<~~(1e3/this._maxFPSLimit)||(this._lastUpdateTime=t,0))}_updateCurrentFPS(t){this._frames++,t-this._lastTimeCheckFPS<1e3||(this._currentFPS=Math.round(1e3*this._frames/(t-this._lastTimeCheckFPS)),this._lastTimeCheckFPS=t,this._frames=0)}_update(){if(this.currentScene){var t=this._getDeltaTime(),e=this._getDeltaFrame(t);this.interaction.update(e),this._checkMouse(),this.emit(Urso.events.MODULES_SCENES_UPDATE,t),this.currentScene.update(t),this.currentScene.render(),this.renderer.render(this._root)}}_checkMouse(){var t=this._getMouseCoords();if(Urso.helper.checkDeepEqual(this._mouseCoords,t))return!0;this._mouseCoords=t,this.emit(Urso.events.MODULES_SCENES_MOUSE_NEW_POSITION,this._mouseCoords)}_getMouseCoords(){var t={x:~~(this.interaction.mouse.global.x/this.world.scale.x),y:~~(this.interaction.mouse.global.y/this.world.scale.y)};return t.x=this._validateCoordinate(t.x),t.y=this._validateCoordinate(t.y),t}_validateCoordinate(t){return t>0?t:0}_visibilityChangeHandler(t){t?this.passiveCallIntervalId&&(clearInterval(this.passiveCallIntervalId),this.passiveCallIntervalId=null):this.passiveCallIntervalId=setInterval((()=>{this._loopStopped||this._loopPaused||this._update()}),16)}_subscribeOnce(){this.addListener(Urso.events.EXTRA_BROWSEREVENTS_WINDOW_VISIBILITYCHANGE,this._visibilityChangeHandler.bind(this),!0)}}},1840:t=>{t.exports=class{constructor(){this.singleton=!0,this._activeResolution=!1,this._templateSize={orientation:0,width:0,height:0},this._currentOrientation=null,this.refreshSceneSize=this.refreshSceneSize.bind(this),this.preResize=this.preResize.bind(this),this.refreshSceneSize()}_subscribeOnce(){this.addListener(Urso.events.EXTRA_BROWSEREVENTS_WINDOW_PRE_RESIZE,this.preResize,!0),this.addListener(Urso.events.EXTRA_BROWSEREVENTS_WINDOW_RESIZE,this.refreshSceneSize,!0),this.addListener(Urso.events.MODULES_SCENES_NEW_SCENE_INIT,this.refreshSceneSize,!0)}getTemplateSize(){return this._templateSize}preResize(){Urso.helper.mobileAndTabletCheck()&&this.getInstance("PixiWrapper").hideCanvas()}refreshSceneSize(){var t=this._getWindowSize(),e=this._getOrientation(t),i=this._getResolutionConfig(t),r=t.width/t.height,n=this._getOptimalRatio(i,r,e),s=Urso.helper.objectClone(i);return s.name="currentResolution",s.base=i,s.width=n>r?Math.floor(t.width):Math.floor(Math.floor(t.height)*n),s.height=n>r?Math.floor(Math.floor(t.width)/n):Math.floor(t.height),this._templateSize=this._calculateTemplateSize(s),this._applyResolutionToPixi(s),console.log("[SCENE] New Orientation",e),console.log("[SCENE] New Resolution",s,"windowSize:",t),console.log("[SCENE] New Template Size",this._templateSize),this._currentOrientation!==this._templateSize.orientation&&(this._currentOrientation=this._templateSize.orientation,Object.values(Urso.device.ScreenOrientation).forEach((t=>Urso.removeInstancesMode(t+"Orientation",!0))),Urso.addInstancesMode(this._templateSize.orientation+"Orientation"),this.emit(Urso.events.MODULES_SCENES_ORIENTATION_CHANGE,this._templateSize.orientation)),this.emit(Urso.events.MODULES_SCENES_NEW_RESOLUTION,{resolution:s,template:this._templateSize}),!0}_getWindowSize(){var t={width:window.innerWidth,height:window.innerHeight};return window.devicePixelRatio&&1!==window.devicePixelRatio&&(t.width*=window.devicePixelRatio,t.height*=window.devicePixelRatio),t}_getOrientation(t){return t.width>t.height?Urso.device.ScreenOrientation.LANDSCAPE:Urso.device.ScreenOrientation.PORTRAIT}_getResolutionConfig(t){var e=this._getOrientation(t),i=t.width>t.height?"width":"height",r=this.getInstance("ResolutionsConfig").get(),n=r[0];for(var s of r)s.orientation===e&&(n.orientation!==e||n[i]<s[i]&&s[i]<t[i]||t[i]<n[i]&&s[i]<n[i])&&(n=s);return n}_getOptimalRatio(t,e,i){var r=t.width/t.height;if(t.adaptive){var n=Urso.helper.mobileAndTabletCheck()?"mobile":"desktop",s=this.getInstance("ResolutionsConfig").getAdaptive()[n];if(s.supported){var o=s.limits[i];r=Urso.math.intMakeBetween(e,o.min,o.max)}}return r}_calculateTemplateSize(t){this._templateSize.orientation=t.orientation,this._templateSize.width=t.base.width,this._templateSize.height=t.base.height;var e=["width","height"];if(t.adaptive){var i=t.width/t.height>t.base.width/t.base.height?0:1,r=1===i?0:1;this._templateSize[e[i]]=~~(t[e[i]]*t.base[e[r]]/t[e[r]])}return this._templateSize}_applyResolutionToPixi(t){var e=Math.min(this.getInstance("ResolutionsConfig").maxSize()/Math.max(t.width,t.height),1),i=window.devicePixelRatio,r={width:~~(t.width*e),height:~~(t.height*e)};return this.getInstance("PixiWrapper").showCanvas(),this.getInstance("PixiWrapper").resize(r.width,r.height),this.getInstance("PixiWrapper").setWorldScale(r.width/this._templateSize.width,r.height/this._templateSize.height),this.getInstance("PixiWrapper").setCanvasWidth(t.width/i),this.getInstance("PixiWrapper").setCanvasHeight(t.height/i),this._activeResolution=t,!0}}},2453:t=>{t.exports=class{constructor(){this.singleton=!0,this._orientations=[Urso.device.ScreenOrientation.LANDSCAPE,Urso.device.ScreenOrientation.PORTRAIT],this.contents=[{name:"default",width:1920,height:1080,orientation:Urso.device.ScreenOrientation.LANDSCAPE,adaptive:!0}],this.adaptiveConfig={desktop:{supported:!0,limits:{landscape:{min:1,max:2},portrait:{min:.5,max:1}}},mobile:{supported:!0,limits:{landscape:{min:1,max:2},portrait:{min:.5,max:1}}}}}get(){return this.contents}getAdaptive(){return this.adaptiveConfig}maxSize(){return Math.max(this.maxWidth(),this.maxHeight())}maxWidth(){return this._maxDimension.call(this,"width")}maxHeight(){return this._maxDimension.call(this,"height")}_maxDimension(t){return this.contents.reduce(((e,i)=>i[t]>e?i[t]:e),0)}}},294:t=>{t.exports=class{constructor(){this.singleton=!0,this._displayInProgress=!1,this._currentSceneName=!1,this._currentSceneTemplate=!1,this._sceneModel,this.timeScale=1,this._pixiWrapper,this.init(),this._assetsLoadedHandler=this._assetsLoadedHandler.bind(this)}init(){this._pixiWrapper=this.getInstance("PixiWrapper"),this._pixiWrapper.init()}pause(){this.getInstance("PixiWrapper").pause(),this.emit(Urso.events.MODULES_SCENES_PAUSE)}resume(){this.getInstance("PixiWrapper").resume(),this.emit(Urso.events.MODULES_SCENES_RESUME)}getTimeScale(){return this.getInstance("PixiWrapper").isPaused()?0:this.timeScale}setTimeScale(t){this.timeScale=t,gsap.globalTimeline.timeScale(this.timeScale)}addObject(t,e,i){var r=Urso.template.parse({objects:[t]},!0);return r.assets.length?(Urso.assets.preload(r.assets,(()=>this._newTemplateAssetsLoadedHandler(r,e,i))),null):this._newTemplateAssetsLoadedHandler(r,e,i)}_newTemplateAssetsLoadedHandler(t,e,i){var r=t.objects[0],n=Urso.objects.create(r,e,i);return t.components.forEach((t=>t.create())),this._currentSceneTemplate.components=Urso.helper.mergeArrays(this._currentSceneTemplate.components,t.components),n}display(t){if(this._displayInProgress)return console.warn("Scenes.display is busy ",this._currentSceneName),!1;var e=Urso.template.scene(t);if(!e)return console.error("Scenes.display error: no template for scene",t),!1;console.log("[SCENE] display:",t),this._displayInProgress=!0,this.emit(Urso.events.MODULES_SCENES_DISPLAY_START,t),this._sceneModel&&this._sceneModel.destroy(),this._currentSceneName=t,Urso.observer.clearAllLocal(),Urso.observer.setPrefix(t),this._currentSceneTemplate=Urso.template.parse(e),console.log("[SCENE] current template:",this._currentSceneTemplate),this._sceneModel=this.getInstance("Model"),this._sceneModel.loadUpdate=t=>{this._currentSceneTemplate.components.forEach((e=>e.loadUpdate(t)))},this._sceneModel.create=()=>{this._currentSceneTemplate.components.forEach((t=>t.create()))},this._sceneModel.update=t=>{this._currentSceneTemplate.components.forEach((e=>e.update(t)))},this._sceneModel.destroy=()=>{this._currentSceneTemplate.components.forEach((t=>t.destroy()))},this.getInstance("PixiWrapper").setNewScene(this._sceneModel),this.emit(Urso.events.MODULES_SCENES_NEW_SCENE_INIT,t),Urso.assets.preload(this._currentSceneTemplate.assets,this._assetsLoadedHandler)}loadUpdate(t){this._sceneModel&&(this._sceneModel.loadUpdate(t),this.emit(Urso.events.MODULES_ASSETS_LOAD_PROGRESS,t))}_assetsLoadedHandler(){Urso.objects.create(this._currentSceneTemplate.objects),this._sceneModel.create(),this._displayInProgress=!1,this.emit(Urso.events.MODULES_SCENES_DISPLAY_FINISHED)}}},119:(t,e,i)=>{Urso.Core.Modules.SoundManager={Controller:i(1929),SoundSprite:i(882)}},1929:t=>{t.exports=class{constructor(){this._systemVolume=1,this._globalVolume=0,this._howler=null,this._codecsToCheck=["ogg","m4a","mp3","wav"],this._selectedCodec=null,this._sounds={},this._setCodec(),this._updateSoundsCfgHandler=this._updateSoundsCfgHandler.bind(this),this._doHandler=this._doHandler.bind(this)}_setCodec(){for(var t of this._codecsToCheck)if(Howler.Howler.codecs(t))return void(this._selectedCodec=t)}_createSounds(t){var{eventsCfg:e,sounds:i}=t;for(var r in i)if(!this._sounds[r]){var{audiosprite:n,json:s}=i[r],o=this.getInstance("SoundSprite",{sprite:s.sprite,name:r,audiosprite:n});this._sounds[r]=o,o.updateEvents(e)}}_setEventsHandler(){var t=Urso.localData.get("sounds.cfg")||{};for(var e in this._sounds)t[e]&&this._sounds[e].updateEvents(t[e])}_checkSoundExists(t){if(this._sounds[t])return!0;Urso.logger.error("Sound with key ".concat(t," wasn't found!"))}_updateSoundsCfgHandler(t){this._createSounds(t)}_doHandler(t){var{action:e,name:i,behavior:r}=t;this._checkSoundExists(i)&&this._sounds[i][e](r)}_globalVolumeChange(t){this._globalVolume=Urso.math.intMakeBetween(t,0,1),this._updateSoundVolume()}_visibilityChange(t){this._systemVolume=~~("visible"===t),this._updateSoundVolume()}_updateSoundVolume(){var t=this._globalVolume*this._systemVolume;for(var e in this._sounds)this._sounds[e].setAllVolume(t)}_subscribe(){this.addListener(Urso.events.MODULES_SOUND_MANAGER_UPDATE_CFG,this._updateSoundsCfgHandler,!0),this.addListener(Urso.events.MODULES_LOGIC_SOUNDS_DO,this._doHandler,!0),this.addListener(Urso.events.MODULES_SOUND_MANAGER_SET_GLOBAL_VOLUME,this._globalVolumeChange.bind(this),!0),this.addListener(Urso.events.EXTRA_BROWSEREVENTS_WINDOW_VISIBILITYCHANGE,this._visibilityChange.bind(this),!0)}}},882:t=>{var e=["fadeTo","fadeDuration","startSound","soundKey"],i=["action","volume"];function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function n(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){if(null==t)return{};var i,r,n=function(t,e){if(null==t)return{};var i,r,n={},s=Object.keys(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)>=0||(n[i]=t[i]);return n}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}t.exports=class{constructor(t){var{name:e,sprite:i,audiosprite:r}=t;this._player=null,this._totalVolume=0,this._makePlayer(i,r),this._name=e,this._sprite=i,this._soundsState=this._initSoundsState(),this._eventsCfg={},this._fadeTweens={},this._eventsQueue=[],this._isAudioUnlocked=!1,this._reactToEvent=this._reactToEvent.bind(this)}_initSoundsState(){var t=Object.keys(this._sprite),e={};return t.forEach((t=>{e[t]={id:null,loop:!1,volume:1,relaunch:!1,_muted:!1}})),e}_makePlayer(t,e){var i=new FileReader;i.readAsDataURL(e),i.onloadend=()=>{var e=i.result;this._player=new Howl({src:e,sprite:t}),this._subscribePlayerEvents()}}_subscribePlayerEvents(){this._player.on("unlock",(()=>setTimeout((()=>{this._isAudioUnlocked=!0,this._onUnlock(),this.emit(Urso.events.MODULES_SOUND_MANAGER_CONTEXT_UNLOCKED)}),1e3))),this._player.on("end",(t=>{var e=this._getSoundStateById(t);if(!e)return Urso.logger.error("SoundSprite error: soundState for id '".concat(t,"' not found!"));e.loop||(e.id=null)}))}_getSoundStateById(t){return Object.values(this._soundsState).find((e=>{var{id:i}=e;return i===t}))}canPlayCheck(){return this._isAudioUnlocked}play(t){var{loop:e=!1,volume:i=this._volume,relaunch:r=!1,soundKey:n}=t;return!(!this.canPlayCheck()||null!==this._soundsState[n].id&&!r||(this.stop({soundKey:n}),this._soundsState[n].id=this._player.play(n),this.setRelaunch(n,r),this.setLoop(n,e),this.setVolume(n,i),0))}setLoop(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._soundsState[t].loop=e,this._player.loop(e,this._soundsState[t].id)}setVolume(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._player.volume(e,this._soundsState[t].id),0!==e?(this._soundsState[t]._muted&&this._changeSoundMute(!1,t),i&&(this._soundsState[t].volume=e)):this._changeSoundMute(!0,t)}setAllVolume(t){this._totalVolume=t,this._player._volume=t,this.canPlayCheck()&&this._updateVolume()}_updateVolume(){var t=Object.keys(this._soundsState);this._player._volume=this._totalVolume,t.forEach((t=>{var e=this._soundsState[t].volume*this._totalVolume;this.setVolume(t,e,!1)}))}_changeSoundMute(t,e){this._player.mute(t,e),this._soundsState[e]._muted=t}setRelaunch(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._soundsState[t].relaunch=e}stop(t){var{soundKey:e}=t;this._soundsState[e].id&&(this._player.stop(this._soundsState[e].id),this._soundsState[e].id=null)}pause(t){var{soundKey:e}=t;(this.canPlayCheck()||this._player.playing(this._soundsState[e].id))&&this._player.pause(this._soundsState[e].id)}resume(t){var{soundKey:e}=t;this.canPlayCheck()&&!this._player.playing(this._soundsState[e].id)&&this._player.play(this._soundsState[e].id)}updateEvents(t){this._customUnsubscribe(),this._saveEvents(t),this._customSubscribe()}_stopPrevFade(t){this._fadeTweens[t]&&this._fadeTweens[t].kill(),delete this._fadeTweens[t]}_startFade(t){var{fadeTo:e,fadeDuration:i,soundKey:r}=t,n=this._soundsState[r].volume,s=e-n;this._fadeTweens[r]=gsap.to({},i/1e3,{onUpdate:()=>{var t=(n+s*this._fadeTweens[r].ratio)*this._totalVolume;this.setVolume(r,t)}})}fade(t){var{fadeTo:i=1,fadeDuration:r=200,startSound:s=!1,soundKey:a}=t,h=o(t,e);s&&this.play(n(n({},h),{},{soundKey:a})),null!==this._soundsState[a].id&&(this._stopPrevFade(a),this._startFade({fadeTo:i,fadeDuration:r,soundKey:a}))}_saveEvents(t){this._eventsCfg=t}_setEventCallback(t,e){return function(){var i=this._eventsCfg[t].events[e];this._reactToEvent(t,i)}}_onUnlock(){this._runEventsFromQueue(),this._updateVolume()}_runEventsFromQueue(){this._eventsQueue.forEach((t=>this._reactToEvent(t.soundKey,t))),this._eventsQueue=[]}_addEventToQueue(t){this._eventsQueue.push(t)}_reactToEvent(t,e){var{action:r,volume:s}=e,a=o(e,i);s*=this._totalVolume;var h=n(n({},a),{},{action:r,soundKey:t,volume:s});if(!this[r])return Urso.logger.error("SoundSprite error: Sound action '".concat(r,"' not found!"));this._isAudioUnlocked||this._addEventToQueue(n(n({},h),{},{action:r})),this[r](h)}_customSubscribe(){for(var t in this._eventsCfg){var{events:e={}}=this._eventsCfg[t];for(var i in e)this.addListener(i,this._setEventCallback(t,i).bind(this),!0)}}_customUnsubscribe(){for(var t in this._eventsCfg)this.removeListener(t,this._setEventCallback(t).bind(this),!0)}}},5201:(t,e,i)=>{Urso.Core.Modules.StatesManager={Action:i(6703),All:i(4270),ConfigStates:i(9557),Controller:i(8228),FunctionsStorage:i(5603),Helper:i(2514),Race:i(8426),Sequence:i(3238)},i(160)},6703:t=>{t.exports=class{constructor(t){this.name=t,this._running=!1,this._terminating=!1,this.finished=!1,this._onFinishCallback=!1,this._onFinish=this._onFinish.bind(this)}guard(){return!this._running&&this.getInstance("Controller").checkActionGuard(this.name)}run(t){this._running=!0,log("%c action run ---\x3e ".concat(this.name),"color: blue"),this.emit(Urso.events.MODULES_STATES_MANAGER_ACTION_START,this.name),this.finished=!1,this._onFinishCallback=t,Urso.statesManager.runAction(this.name,this._onFinish)}terminate(){this._running||(Urso.logger.warn("ModulesStatesManagerAction: action run from terminating",this.name),this.run((()=>{}))),this._terminating?Urso.logger.error("ModulesStatesManagerAction: action alredy terminating",this.name):(log("%c action terminate X ".concat(this.name),"color: blue"),this._terminating=!0,Urso.statesManager.terminateAction(this.name))}_onFinish(){this.finished?Urso.logger.error("ModulesStatesManagerAction: action alredy finished",this.name):(this._running=!1,this._terminating=!1,this.finished=!0,this.emit(Urso.events.MODULES_STATES_MANAGER_ACTION_FINISH,this.name),log("%c action finish <--- ".concat(this.name),"color: blue"),this._onFinishCallback())}}},160:()=>{Urso.Core.Modules.StatesManager.Actions={}},4270:(t,e,i)=>{Race=i(8426);class r extends Race{constructor(t){super(t),this.name="All"}guard(){for(var t of this._actions)if(t.guard())return!0;return!1}_actionSuccessHandler(){this._checkFinish()}}t.exports=r},9557:t=>{t.exports=class{constructor(){this.singleton=!0,this.contents={IDLE:{action:"startSpin"},SPIN_START:{all:[{action:"serverSpinRequest"},{action:"slotMachineSpinStart"}]},SPIN_FINISHING:{action:"spin"},WINLINES_ANIMATE_ALL:{action:"showWinlinesAnimationAll"},PICK_GAME1:{sequence:[{action:"someAction"},{action:"showPickGame"},{action:"showBIGWin"}],nextState:["PICK_GAME2","PICK_GAME1","IDLE"]},PICK_GAME2:{sequence:[{action:"showWheel"},{action:"showBIGWin"}],nextState:["PICK_GAME1","IDLE"]},WINLINES_ANIMATE_BY_ONE:{action:"showWinlinesAnimation"},GAMBLE:{race:[{action:"playerLooseinGamble"},{action:"playerCollectMoney"}]},UPDATE_BALANCE:{race:[{all:[{sequence:[{action:"showWinPopup"},{action:"closeWinPopup"}]},{action:"counterUpdate"}]},{action:"playerPressSpace"},{action:"playerPressSPIN"}]}}}get(){return this.contents}}},8228:t=>{function e(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t.exports=class{constructor(){e(this,"addActionGuard",((t,e)=>{this.actionsGuards.add(t,e,!0)})),e(this,"checkActionGuard",(t=>this.actionsGuards.checkGuard(t))),e(this,"removeActionGuard",((t,e)=>{this.actionsGuards.remove(t,e)})),e(this,"addActionRun",((t,e)=>{this.actionsRuns.add(t,e)})),e(this,"runAction",((t,e)=>{this.actionsRuns.runAndCallbackOnFinish(t,e)})),e(this,"removeActionRun",((t,e)=>{this.actionsRuns.remove(t,e)})),e(this,"addActionTerminate",((t,e)=>{this.actionsTerminations.add(t,e)})),e(this,"terminateAction",(t=>{this.actionsTerminations.run(t)})),e(this,"removeActionTerminate",((t,e)=>{this.actionsTerminations.remove(t,e)})),e(this,"setStateGuard",((t,e)=>{this.statesGuards.add(t,e,!0)})),e(this,"checkStateGuard",(t=>this.statesGuards.checkGuard(t))),e(this,"removeStateGuard",((t,e)=>{this.statesGuards.remove(t,e)})),this.singleton=!0,this._configStates,this._currentState,this._started=!1,this._paused=!1,this._pauseNeedResume=!1,this.statesGuards=this.getInstance("FunctionsStorage"),this.actionsGuards=this.getInstance("FunctionsStorage"),this.actionsRuns=this.getInstance("FunctionsStorage"),this.actionsTerminations=this.getInstance("FunctionsStorage"),this._iterator,this._nextState=this._nextState.bind(this)}start(){this._started||(this._currentState=null,this._iterator=this._iteratorConstructor(),this._started=!0,this._configStates=this.getInstance("ConfigStates").get(),this._nextState())}pause(){this._paused=!0}resume(){this._paused=!1,this._pauseNeedResume&&(this._pauseNeedResume=!1,this._nextState())}_iteratorConstructor(){var t=0,e=()=>{var e=Object.keys(this._configStates);return t===e.length&&(t=0),e[t++]};return{next:(()=>{var i,r=Object.keys(this._configStates);if(this._currentState){var n=this._configStates[this._currentState];if(n.nextState)for(var s of n.nextState)if(this.checkStateGuard(s)){if(-1===(t=r.indexOf(s)+1)){Urso.logger.error("ModulesStatesManagerController: nextState name error",s);continue}return s}}do{i=e()}while(!this.checkStateGuard(i));return i}).bind(this)}}_nextState(){if(this._paused)this._pauseNeedResume=!0;else{this._currentState=this._iterator.next(),this.emit(Urso.events.MODULES_STATES_MANAGER_STATE_CHANGE,this._currentState),log("%c State "+this._currentState,"background: #bada55; color: #000");var t=this._configStates[this._currentState],e=this.getInstance("Helper").getActionByConfig(t);if(!e.guard())return this._nextState();e.run(this._nextState)}}}},5603:t=>{t.exports=class{constructor(){this._functionsCounter=0,this._functions={}}add(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._addToStorage(t,e,i)}run(t){if(this._functions[t]){var e=Object.values(this._functions[t]);for(var i of e)i()}}runAndCallbackOnFinish(t,e){if(this._functions[t]){var i=Object.values(this._functions[t]),r=[],n=function(t){r.push(new Promise(((e,i)=>{t(e)})))};for(var s of i)n(s);Promise.all(r).then(e)}else e()}checkGuard(t){if(this._functions[t]){var e=Object.values(this._functions[t]);for(var i of e)if(!i())return!1}return!0}remove(t,e){this._removeFromStorage(t,e)}_addToStorage(t,e,i){if(this._functions[t]){if(i)return void Urso.logger.error("ModulesStatesManagerFunctionsStorage: action or state can have only one guard",t,e)}else this._functions[t]={};var r=this._getGuardsUid();e._guid=r,this._functions[t][r]=e}_removeFromStorage(t,e){var i=e._guid;delete this._functions[t][i],0===Urso.helper.getObjectSize(this._functions[t])&&delete this._functions[t]}_getGuardsUid(){return this._functionsCounter++,"guard_"+this._functionsCounter}}},2514:t=>{t.exports=class{constructor(){this.singleton=!0}getActionByConfig(t){var e=Object.keys(t)[0],i=t[e];if("action"===e){var r=i,n=this.getInstance("Actions."+Urso.helper.capitaliseFirstLetter(r));if(n)return n}var s=Urso.helper.capitaliseFirstLetter(e);return this.getInstance(s,i)}}},8426:(t,e,i)=>{Action=i(6703);class r extends Action{constructor(t){for(var e of(super(),this.name="Race",this._actions=[],this.params=t,t))this._actions.push(this.getInstance("Helper").getActionByConfig(e));this._actionSuccessHandler=this._actionSuccessHandler.bind(this)}guard(){for(var t of this._actions)if(t.guard())return!0;return!1}run(t){for(var e of(log("%c action run ---\x3e ".concat(this.name),"color: orange",this.params),this.finished=!1,this._onFinishCallback=t,this._actions))e.guard()?e.run(this._actionSuccessHandler):e.finished=!0}_actionSuccessHandler(){this._checkFinish()||this.terminate()}_checkFinish(){for(var t of this._actions)if(!t.finished)return!1;return this._onFinish(),!0}terminate(){if(!this._terminating)for(var t of(log("%c action terminate X ".concat(this.name),"color: orange"),this._terminating=!0,this._actions))t.finished||t.terminate()}_onFinish(){this.finished=!0,log("%c action finish <--- ".concat(this.name),"color: orange"),this._onFinishCallback()}}t.exports=r},3238:(t,e,i)=>{All=i(4270);class r extends All{constructor(t){super(t),this.name="Sequence"}run(t){log("%c action run ---\x3e ".concat(this.name),"color: orange",this.params),this.finished=!1,this._onFinishCallback=t,this._checkFinish()}_checkFinish(){if(!this._terminating)for(var t of this._actions)if(!t.finished){if(t.guard())return t.run(this._actionSuccessHandler);t.finished=!0}return this._onFinish(),!0}terminate(){if(!this._terminating)for(var t of(log("%c action terminate X ".concat(this.name),"color: orange"),this._terminating=!0,this._actions))if(!t.finished)return t.terminate()}}t.exports=r},7281:(t,e,i)=>{Urso.Core.Modules.Template={Controller:i(8347),Model:i(8269),Service:i(7613),Types:i(9844)}},8347:t=>{t.exports=class{constructor(){this.singleton=!0,Urso.types=this.getInstance("Types").list}get(){return this.getInstance("Service").getTemplate()}scene(t){return this.getInstance("Service").getSceneOrGroup(t,"Scenes")}group(t){return this.getInstance("Service").getSceneOrGroup(t,"Groups")}parse(t,e){return this.getInstance("Service").parse(t,e)}}},8269:t=>{t.exports=class{constructor(){this.styles={},this.assets=[],this.objects=[],this.components=[],this._templatePath=!1}}},7613:t=>{t.exports=class{constructor(){this.singleton=!0,this._currentTemplate=this.getInstance("Model"),this._actualTemplate}getTemplate(){return this._actualTemplate}getSceneOrGroup(t,e){var i=Urso.helper.capitaliseFirstLetter(t),r="Templates.".concat(e,".").concat(i),n=Urso.getInstance(r);return this._setTemplatePath(n,r),n}parse(t,e){return this._currentTemplate=Urso.helper.mergeObjectsRecursive(this.getInstance("Model"),t),this._parseAssets(this._currentTemplate.assets,t._templatePath),this._parseObjects(this._currentTemplate.objects,t._templatePath),e?(this._actualTemplate.assets=Urso.helper.mergeArrays(this._actualTemplate.assets,this._currentTemplate.assets),this._actualTemplate.components=Urso.helper.mergeArrays(this._actualTemplate.components,this._currentTemplate.components),this._actualTemplate.objects=Urso.helper.mergeArrays(this._actualTemplate.objects,this._currentTemplate.objects),Urso.helper.mergeObjectsRecursive(this._actualTemplate.styles,this._currentTemplate.styles)):this._actualTemplate=this._currentTemplate,this._currentTemplate}_setTemplatePath(t,e){t._templatePath=e}_parseAssets(t,e){for(var i of t)this._setTemplatePath(i,e)}_parseObjects(t,e){for(var i of t)this._setTemplatePath(i,e),i.contents&&this._parseObjects(i.contents,e),i.type===Urso.types.objects.GROUP&&this._processGroup(i),i.type===Urso.types.objects.COMPONENT&&this._processComponent(i),i._parsed=!0}_processGroup(t){var e=this.getInstance("Controller").group(t.groupName);e||Urso.logger.error("ModulesTemplateController group Template error "+t.groupName),e.assets&&this._parseAssets(e.assets,e._templatePath),e.objects&&this._parseObjects(e.objects,e._templatePath),this._mergeStylesAndAssets({styles:e.styles,assets:e.assets}),t.contents=e.objects||[]}_processComponent(t){var e="Components."+Urso.helper.capitaliseFirstLetter(t.componentName)+".Controller",i=Urso.getInstance(e,t.options);i||(Urso.logger.error('ModulesTemplateController Component error. Component "'.concat(t.componentName,'" not found. Please check components _info.js file.')),Urso.logger.error("To use only templates use Groups please."));var r=i.assetsMount();r.assets&&this._parseAssets(r.assets,e),this._mergeStylesAndAssets(r);var n=i.objectsMount();n&&this._parseObjects(n,e),t.contents=t.contents?Urso.helper.mergeArrays(t.contents,n):n||[],t._controller=i,i.object=t,this._currentTemplate.components.push(i)}_mergeStylesAndAssets(t){t.styles&&(this._currentTemplate.styles=Urso.helper.mergeObjectsRecursive(this._currentTemplate.styles,t.styles,!0)),t.assets&&(this._currentTemplate.assets=Urso.helper.mergeArrays(this._currentTemplate.assets,t.assets))}}},9844:t=>{t.exports=class{constructor(){this.list={assets:{ATLAS:1,AUDIOSPRITE:2,BITMAPFONT:3,CONTAINER:4,FONT:5,IMAGE:6,JSON:7,SOUND:8,SPINE:9},objects:{ATLASIMAGE:1,BITMAPTEXT:2,BUTTON:3,BUTTONCOMPOSITE:4,CHECKBOX:5,COLLECTION:6,COMPONENT:7,CONTAINER:8,DRAGCONTAINER:9,EMITTER:10,EMITTERFX:11,GRAPHICS:12,GROUP:13,HITAREA:14,IMAGE:15,IMAGESANIMATION:16,MASK:17,NINESLICEPLANE:18,SCROLLBOX:19,SLIDER:20,SPINE:21,TEXT:22,TEXTINPUT:23,TOGGLE:24,WORLD:25}}}}},5750:(t,e,i)=>{Urso.Core.Modules.Transport={BaseConnectionType:i(9458),Config:i(2203),Controller:i(2863),Decorator:i(537),Service:i(8369)},i(9915)},9458:t=>{t.exports=class{constructor(t){var{callbacks:e,host:i}=t;this._host=i||!1,this._callbacks=e||{},this._ready=!1}close(){}readyCheck(){return this._ready}reconnect(){}send(t){}_runCallback(t,e){this._callbacks[t]&&this._callbacks[t](e)}}},2203:t=>{t.exports=class{getConfig(){return{autoReconnect:!0,reconnectTimeout:5e3,type:"websocket",host:Urso.helper.parseGetParams("wsHost")}}}},9915:(t,e,i)=>{Urso.Core.Modules.Transport.ConnectionTypes={Websocket:i(8009),Xhr:i(5969)}},8009:t=>{class e extends Urso.Core.Modules.Transport.BaseConnectionType{constructor(t){super(t),this._reconnectTimeout=null,this._socket=null,this._createSocket()}close(){this._socket.close(),log("[SOCKET]: CLOSED")}reconnect(t){log("[SOCKET]: RECONNECTING in ",t),this._ready&&this.close(),this._reconnectTimeout=setTimeout((()=>{this._clearTimeout(),this._createSocket(),log("[SOCKET]: RECONNECTED")}),t)}send(t){var e=JSON.stringify(t);this._socket.send(e),log("[SOCKET]: SEND:",e)}_clearTimeout(){clearTimeout(this._reconnectTimeout),this._reconnectTimeout=null}_createSocket(){this._socket=new WebSocket(this._host),this._socket.onopen=this._onOpen.bind(this),this._socket.onmessage=this._onMessage.bind(this),this._socket.onerror=this._onError.bind(this),this._socket.onclose=this._onClose.bind(this),log("[SOCKET]: CREATED")}_onOpen(){this._ready=!0,this._runCallback("ready"),log("[SOCKET]: READY")}_onMessage(t){log("[SOCKET]: RECEIVED ",t.data),this._runCallback("response",t.data)}_onClose(){this._ready=!1,this._socket=null,this._runCallback("close")}_onError(){this._ready=!1,this._runCallback("error"),log("[SOCKET]: ERROR")}}t.exports=e},5969:t=>{class e extends Urso.Core.Modules.Transport.BaseConnectionType{constructor(t){super(t),this._xhr=null,this._ready=!0,this._runCallback("ready")}send(t){this._createXhr();var e=JSON.stringify(t);this._xhr.send(e),log("[XHR] SEND:",e)}_getMethod(){return"POST"}_createXhr(){this._xhr=new XMLHttpRequest,this._xhr.onerror=this._onError.bind(this),this._xhr.onreadystatechange=this._onReadyStateChange.bind(this),this._xhr.open(this._getMethod(),this._host,!0)}_onMessage(t){var e=JSON.parse(t);this._runCallback("response",e),log("[XHR] RESPONSE RECEIVED",t)}_onError(){this._runCallback("error"),log("[XHR] ERROR")}_onReadyStateChange(t){var{target:e}=t;4===e.readyState&&this._onMessage(e.response)}}t.exports=e},2863:t=>{t.exports=class{constructor(){this._service=null}_updateService(){this._service=this.getInstance("Service")}init(){this._updateService(),this._service.init()}setOnConnectionHandler(t){this._service.on("connection",t)}setReadyHandler(t){this._service.on("ready",t)}setErrorHandler(t){this._service.on("error",t)}setResponseHandler(t){this._service.on("response",t)}setOnCloseHandler(t){this._service.on("close",t)}send(t){this._service.send(t)}reconnect(){this._service.reconnect()}close(){this._service.close()}}},537:t=>{t.exports=class{constructor(t){var{callbacks:e}=t;this._callbacks=e,this.singleton=!0}toServer(t){return t}toFront(t){return t}}},8369:t=>{function e(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function i(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}t.exports=class{constructor(){this._callbacks={},this._config=this.getInstance("Config").getConfig(),this._communicator=null}on(t,e,i){this._checkCallback(t)&&!i||this._setCallback(t,e)}init(){this._createConnection()}send(t){if(!this._checkCommunicator()||!this._checkCommunicatorReady())return!1;var e=this.getInstance("Decorator",{callbacks:this._callbacks}).toServer(t);if(!e)return!1;var i=this._validateMessage(e);return!!i&&(this._communicator.send(i),!0)}reconnect(){return!!this._checkCommunicator()&&(this._communicator.reconnect(this._getAutoReconnetionDelay()),!0)}close(){return!!this._checkCommunicator()&&(this._communicator.close(),!0)}_checkCallback(t){var e=!!this._callbacks[t];return e&&Urso.logger.error("Overwrite ".concat(t," event detected!")),e}_checkCommunicator(){return this._communicator||Urso.logger.error("Communicator was not created!"),!0}_checkCommunicatorReady(){return this._communicator.readyCheck()}_destroyCommunicator(){this._communicator=null}_prepareCallback(t,e){return i=>{var r=this._runMiddleWare(t,i);return e(r)}}_runMiddleWare(t,e){switch(t){case"response":var i=this.getInstance("Decorator",{callbacks:this._callbacks}).toFront(e);if(!i)return;return this._validateMessage(i);case"close":case"error":this._tryReconnect();default:return e}}_autoReconnectCheck(){return this._config.reconnectTimeout}_getAutoReconnetionDelay(){return this._config.autoReconnect||0}_tryReconnect(){if(!this._autoReconnectCheck())return!1;this._communicator.reconnect(this._getAutoReconnetionDelay())}_setCallback(t,e){this._callbacks[t]=this._prepareCallback(t,e)}_validateMessage(t){return function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t)}_getHost(){return this._config.host}_getType(){return this._config.type}_createConnection(){var t=this._getHost(),e=this._getType(),i=this._callbacks,r=Urso.helper.capitaliseFirstLetter(e);this._communicator=this.getInstance("ConnectionTypes.".concat(r),{callbacks:i,host:t}),this._communicator||Urso.logger.error("Transport type: '".concat(r,"' was not found!"))}}},2698:(t,e,i)=>{Urso.Core.Templates={},i(3535),i(454)},3535:()=>{Urso.Core.Templates.Groups={}},454:()=>{Urso.Core.Templates.Scenes={}},6921:(t,e,i)=>{"use strict";var r,n,s,o,a,h,l,u,c,d,p,f,m,_,g,v,y,b,x;i.d(e,{iw:()=>m,T$:()=>o,V0:()=>s,mr:()=>x,yl:()=>_,lg:()=>a,Vi:()=>r,I2:()=>h,UN:()=>g,A7:()=>y,WB:()=>f,G5:()=>b,cB:()=>v,N3:()=>n,oT:()=>c,aH:()=>d,sp:()=>l,vK:()=>u,Nt:()=>p}),function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(r||(r={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(n||(n={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(s||(s={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(o||(o={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(a||(a={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(h||(h={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(l||(l={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(u||(u={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(c||(c={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(d||(d={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(p||(p={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(f||(f={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(m||(m={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(_||(_={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(g||(g={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(v||(v={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(y||(y={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(b||(b={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(x||(x={}))},331:(t,e,i)=>{"use strict";i.d(e,{eo:()=>Se,M4:()=>v,I8:()=>de,$N:()=>y,ah:()=>L,bg:()=>b,jd:()=>M,VL:()=>g,a$:()=>be,JZ:()=>we,TJ:()=>Ce,Bv:()=>Oe,Zk:()=>Ee,Sj:()=>tt,Ie:()=>xe,lW:()=>B,qm:()=>m,Y8:()=>x,lH:()=>it,TA:()=>T,wn:()=>Ut,jV:()=>K,kV:()=>J,AI:()=>O,WB:()=>st,tT:()=>rt,Ei:()=>ee,fy:()=>he,ZX:()=>Y,TO:()=>at,W1:()=>te,e_:()=>l,_w:()=>A,PA:()=>S,HI:()=>ht,zj:()=>Bt,bO:()=>Q,$r:()=>Rt,NW:()=>Yt,lD:()=>H,ud:()=>W,TI:()=>U,uW:()=>F,J$:()=>zt,Th:()=>me,_z:()=>f,pX:()=>E,id:()=>jt,ex:()=>Dt,p:()=>se,z9:()=>kt,ZM:()=>Nt,zI:()=>oe,Ld:()=>Vt,xP:()=>ye,xE:()=>D,wr:()=>ae,UX:()=>Lt,CT:()=>le,aF:()=>P,oo:()=>q,eH:()=>w,Rv:()=>Te,e6:()=>_e,pb:()=>u,a7:()=>Ot,TF:()=>$t,Y9:()=>ve,kP:()=>ge,qw:()=>ie,K0:()=>Qt,Kc:()=>_t,DL:()=>Jt,Jb:()=>Me,eG:()=>De,sg:()=>Et});var r=i(9907),n=i(6921),s=i(8281),o=i(8898),a=i(107),h=i(6617);r.X.PREFER_ENV=s.isMobile.any?n.Vi.WEBGL:n.Vi.WEBGL2,r.X.STRICT_TEXTURE_CACHE=!1;var l=[];function u(t,e){if(!t)return null;var i="";if("string"==typeof t){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(i=r[1].toLowerCase())}for(var n=l.length-1;n>=0;--n){var s=l[n];if(s.test&&s.test(t,i))return new s(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}var c=function(t,e){return(c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function d(t,e){function i(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var p=function(){return(p=Object.assign||function(t){for(var e,i=arguments,r=1,n=arguments.length;r<n;r++)for(var s in e=i[r])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}).apply(this,arguments)},f=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._width=t,this._height=e,this.destroyed=!1,this.internal=!1,this.onResize=new o.R("setRealSize"),this.onUpdate=new o.R("update"),this.onError=new o.R("onError")}return t.prototype.bind=function(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)},t.prototype.unbind=function(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)},t.prototype.resize=function(t,e){t===this._width&&e===this._height||(this._width=t,this._height=e,this.onResize.emit(t,e))},Object.defineProperty(t.prototype,"valid",{get:function(){return!!this._width&&!!this._height},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.destroyed||this.onUpdate.emit()},t.prototype.load=function(){return Promise.resolve(this)},Object.defineProperty(t.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._height},enumerable:!1,configurable:!0}),t.prototype.style=function(t,e,i){return!1},t.prototype.dispose=function(){},t.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)},t.test=function(t,e){return!1},t}(),m=function(t){function e(e,i){var r=this,n=i||{},s=n.width,o=n.height;if(!s||!o)throw new Error("BufferResource width or height invalid");return(r=t.call(this,s,o)||this).data=e,r}return d(e,t),e.prototype.upload=function(t,e,i){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.iw.UNPACK);var s=e.realWidth,o=e.realHeight;return i.width===s&&i.height===o?r.texSubImage2D(e.target,0,0,0,s,o,e.format,i.type,this.data):(i.width=s,i.height=o,r.texImage2D(e.target,0,i.internalFormat,s,o,0,e.format,i.type,this.data)),!0},e.prototype.dispose=function(){this.data=null},e.test=function(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array},e}(f),_={scaleMode:n.aH.NEAREST,format:n.I2.RGBA,alphaMode:n.iw.NPM},g=function(t){function e(e,i){void 0===e&&(e=null),void 0===i&&(i=null);var o=t.call(this)||this,a=(i=i||{}).alphaMode,h=i.mipmap,l=i.anisotropicLevel,c=i.scaleMode,d=i.width,p=i.height,m=i.wrapMode,_=i.format,g=i.type,v=i.target,y=i.resolution,b=i.resourceOptions;return!e||e instanceof f||((e=u(e,b)).internal=!0),o.resolution=y||r.X.RESOLUTION,o.width=Math.round((d||0)*o.resolution)/o.resolution,o.height=Math.round((p||0)*o.resolution)/o.resolution,o._mipmap=void 0!==h?h:r.X.MIPMAP_TEXTURES,o.anisotropicLevel=void 0!==l?l:r.X.ANISOTROPIC_LEVEL,o._wrapMode=m||r.X.WRAP_MODE,o._scaleMode=void 0!==c?c:r.X.SCALE_MODE,o.format=_||n.I2.RGBA,o.type=g||n.vK.UNSIGNED_BYTE,o.target=v||n.sp.TEXTURE_2D,o.alphaMode=void 0!==a?a:n.iw.UNPACK,o.uid=(0,s.uid)(),o.touched=0,o.isPowerOfTwo=!1,o._refreshPOT(),o._glTextures={},o.dirtyId=0,o.dirtyStyleId=0,o.cacheId=null,o.valid=d>0&&p>0,o.textureCacheIds=[],o.destroyed=!1,o.resource=null,o._batchEnabled=0,o._batchLocation=0,o.parentTextureArray=null,o.setResource(e),o}return d(e,t),Object.defineProperty(e.prototype,"realWidth",{get:function(){return Math.round(this.width*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return Math.round(this.height*this.resolution)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mipmap",{get:function(){return this._mipmap},set:function(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scaleMode",{get:function(){return this._scaleMode},set:function(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wrapMode",{get:function(){return this._wrapMode},set:function(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)},enumerable:!1,configurable:!0}),e.prototype.setStyle=function(t,e){var i;return void 0!==t&&t!==this.scaleMode&&(this.scaleMode=t,i=!0),void 0!==e&&e!==this.mipmap&&(this.mipmap=e,i=!0),i&&this.dirtyStyleId++,this},e.prototype.setSize=function(t,e,i){return i=i||this.resolution,this.setRealSize(t*i,e*i,i)},e.prototype.setRealSize=function(t,e,i){return this.resolution=i||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this},e.prototype._refreshPOT=function(){this.isPowerOfTwo=(0,s.isPow2)(this.realWidth)&&(0,s.isPow2)(this.realHeight)},e.prototype.setResolution=function(t){var e=this.resolution;return e===t||(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT()),this},e.prototype.setResource=function(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this},e.prototype.update=function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))},e.prototype.onError=function(t){this.emit("error",this,t)},e.prototype.destroy=function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete s.BaseTextureCache[this.cacheId],delete s.TextureCache[this.cacheId],this.cacheId=null),this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.castToBaseTexture=function(){return this},e.from=function(t,i,n){void 0===n&&(n=r.X.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;if(o)a=t;else{if(!t._pixiId){var h=i&&i.pixiIdPrefix||"pixiid";t._pixiId=h+"_"+(0,s.uid)()}a=t._pixiId}var l=s.BaseTextureCache[a];if(o&&n&&!l)throw new Error('The cacheId "'+a+'" does not exist in BaseTextureCache.');return l||((l=new e(t,i)).cacheId=a,e.addToCache(l,a)),l},e.fromBuffer=function(t,i,r,s){t=t||new Float32Array(i*r*4);var o=new m(t,{width:i,height:r}),a=t instanceof Float32Array?n.vK.FLOAT:n.vK.UNSIGNED_BYTE;return new e(o,Object.assign(_,s||{width:i,height:r,type:a}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),s.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),s.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=s.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete s.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)delete s.BaseTextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},e._globalBatch=0,e}(s.EventEmitter),v=function(t){function e(e,i){var r=this,n=i||{},s=n.width,o=n.height;(r=t.call(this,s,o)||this).items=[],r.itemDirtyIds=[];for(var a=0;a<e;a++){var h=new g;r.items.push(h),r.itemDirtyIds.push(-2)}return r.length=e,r._load=null,r.baseTexture=null,r}return d(e,t),e.prototype.initFromArray=function(t,e){for(var i=0;i<this.length;i++)t[i]&&(t[i].castToBaseTexture?this.addBaseTextureAt(t[i].castToBaseTexture(),i):t[i]instanceof f?this.addResourceAt(t[i],i):this.addResourceAt(u(t[i],e),i))},e.prototype.dispose=function(){for(var t=0,e=this.length;t<e;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null},e.prototype.addResourceAt=function(t,e){if(!this.items[e])throw new Error("Index "+e+" is out of bounds");return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[e].setResource(t),this},e.prototype.bind=function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");t.prototype.bind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=e,this.items[i].on("update",e.update,e)},e.prototype.unbind=function(e){t.prototype.unbind.call(this,e);for(var i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",e.update,e)},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.items.map((function(t){return t.resource})).filter((function(t){return t})).map((function(t){return t.load()}));return this._load=Promise.all(e).then((function(){var e=t.items[0],i=e.realWidth,r=e.realHeight;return t.resize(i,r),Promise.resolve(t)})),this._load},e}(f),y=function(t){function e(e,i){var r,n,s=this,o=i||{},a=o.width,h=o.height;return Array.isArray(e)?(r=e,n=e.length):n=e,s=t.call(this,n,{width:a,height:h})||this,r&&s.initFromArray(r,i),s}return d(e,t),e.prototype.addBaseTextureAt=function(t,e){if(!t.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(t.resource,e),this},e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=n.sp.TEXTURE_2D_ARRAY},e.prototype.upload=function(t,e,i){var r=this,n=r.length,s=r.itemDirtyIds,o=r.items,a=t.gl;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,n,0,e.format,i.type,null);for(var h=0;h<n;h++){var l=o[h];s[h]<l.dirtyId&&(s[h]=l.dirtyId,l.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,h,l.resource.width,l.resource.height,1,e.format,i.type,l.resource.source))}return!0},e}(v),b=function(t){function e(e){var i=this,r=e,n=r.naturalWidth||r.videoWidth||r.width,s=r.naturalHeight||r.videoHeight||r.height;return(i=t.call(this,n,s)||this).source=e,i.noSubImage=!1,i}return d(e,t),e.crossOrigin=function(t,e,i){void 0===i&&0!==e.indexOf("data:")?t.crossOrigin=(0,s.determineCrossOrigin)(e):!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous")},e.prototype.upload=function(t,e,i,r){var s=t.gl,o=e.realWidth,a=e.realHeight;return r=r||this.source,s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.iw.UNPACK),this.noSubImage||e.target!==s.TEXTURE_2D||i.width!==o||i.height!==a?(i.width=o,i.height=a,s.texImage2D(e.target,0,i.internalFormat,e.format,i.type,r)):s.texSubImage2D(s.TEXTURE_2D,0,0,0,e.format,i.type,r),!0},e.prototype.update=function(){if(!this.destroyed){var e=this.source,i=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(i,r),t.prototype.update.call(this)}},e.prototype.dispose=function(){this.source=null},e}(f),x=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e.test=function(t){var e=self.OffscreenCanvas;return!!(e&&t instanceof e)||self.HTMLCanvasElement&&t instanceof HTMLCanvasElement},e}(b),T=function(t){function e(i,r){var s=this,o=r||{},a=o.width,h=o.height,l=o.autoLoad,u=o.linkBaseTexture;if(i&&i.length!==e.SIDES)throw new Error("Invalid length. Got "+i.length+", expected 6");s=t.call(this,6,{width:a,height:h})||this;for(var c=0;c<e.SIDES;c++)s.items[c].target=n.sp.TEXTURE_CUBE_MAP_POSITIVE_X+c;return s.linkBaseTexture=!1!==u,i&&s.initFromArray(i,r),!1!==l&&s.load(),s}return d(e,t),e.prototype.bind=function(e){t.prototype.bind.call(this,e),e.target=n.sp.TEXTURE_CUBE_MAP},e.prototype.addBaseTextureAt=function(t,e,i){if(void 0===i&&(i=this.linkBaseTexture),!this.items[e])throw new Error("Index "+e+" is out of bounds");if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0){if(!t.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(t.resource,e)}else t.target=n.sp.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this},e.prototype.upload=function(t,i,r){for(var n=this.itemDirtyIds,s=0;s<e.SIDES;s++){var o=this.items[s];n[s]<o.dirtyId&&(o.valid&&o.resource?(o.resource.upload(t,o,r),n[s]=o.dirtyId):n[s]<-1&&(t.gl.texImage2D(o.target,0,r.internalFormat,i.realWidth,i.realHeight,0,i.format,r.type,null),n[s]=-1))}return!0},e.test=function(t){return Array.isArray(t)&&t.length===e.SIDES},e.SIDES=6,e}(v),S=function(t){function e(e,i){var n=this;if(i=i||{},!(e instanceof HTMLImageElement)){var s=new Image;b.crossOrigin(s,e,i.crossorigin),s.src=e,e=s}return n=t.call(this,e)||this,!e.complete&&n._width&&n._height&&(n._width=0,n._height=0),n.url=e.src,n._process=null,n.preserveBitmap=!1,n.createBitmap=(void 0!==i.createBitmap?i.createBitmap:r.X.CREATE_IMAGE_BITMAP)&&!!self.createImageBitmap,n.alphaMode="number"==typeof i.alphaMode?i.alphaMode:null,n.bitmap=null,n._load=null,!1!==i.autoLoad&&n.load(),n}return d(e,t),e.prototype.load=function(t){var e=this;return this._load||(void 0!==t&&(this.createBitmap=t),this._load=new Promise((function(t,i){var r=e.source;e.url=r.src;var n=function(){e.destroyed||(r.onload=null,r.onerror=null,e.resize(r.width,r.height),e._load=null,e.createBitmap?t(e.process()):t(e))};r.complete&&r.src?n():(r.onload=n,r.onerror=function(t){i(t),e.onError.emit(t)})}))),this._load},e.prototype.process=function(){var t=this,e=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!self.createImageBitmap)return Promise.resolve(this);var i=self.createImageBitmap,r=!e.crossOrigin||"anonymous"===e.crossOrigin;return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then((function(t){return t.blob()})).then((function(r){return i(r,0,0,e.width,e.height,{premultiplyAlpha:t.alphaMode===n.iw.UNPACK?"premultiply":"none"})})).then((function(e){return t.destroyed?Promise.reject():(t.bitmap=e,t.update(),t._process=null,Promise.resolve(t))})),this._process},e.prototype.upload=function(e,i,r){if("number"==typeof this.alphaMode&&(i.alphaMode=this.alphaMode),!this.createBitmap)return t.prototype.upload.call(this,e,i,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(t.prototype.upload.call(this,e,i,r,this.bitmap),!this.preserveBitmap){var n=!0,s=i._glTextures;for(var o in s){var a=s[o];if(a!==r&&a.dirtyId!==i.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0},e.prototype.dispose=function(){this.source.onload=null,this.source.onerror=null,t.prototype.dispose.call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null},e.test=function(t){return"string"==typeof t||t instanceof HTMLImageElement},e}(b),E=function(t){function e(e,i){var r=this;return i=i||{},(r=t.call(this,document.createElement("canvas"))||this)._width=0,r._height=0,r.svg=e,r.scale=i.scale||1,r._overrideWidth=i.width,r._overrideHeight=i.height,r._resolve=null,r._crossorigin=i.crossorigin,r._load=null,!1!==i.autoLoad&&r.load(),r}return d(e,t),e.prototype.load=function(){var t=this;return this._load||(this._load=new Promise((function(i){if(t._resolve=function(){t.resize(t.source.width,t.source.height),i(t)},e.SVG_XML.test(t.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");t.svg="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t.svg)))}t._loadSvg()}))),this._load},e.prototype._loadSvg=function(){var t=this,e=new Image;b.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=function(i){t._resolve&&(e.onerror=null,t.onError.emit(i))},e.onload=function(){if(t._resolve){var i=e.width,r=e.height;if(!i||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var n=i*t.scale,o=r*t.scale;(t._overrideWidth||t._overrideHeight)&&(n=t._overrideWidth||t._overrideHeight/r*i,o=t._overrideHeight||t._overrideWidth/i*r),n=Math.round(n),o=Math.round(o);var a=t.source;a.width=n,a.height=o,a._pixiId="canvas_"+(0,s.uid)(),a.getContext("2d").drawImage(e,0,0,i,r,0,0,n,o),t._resolve(),t._resolve=null}}},e.getSize=function(t){var i=e.SVG_SIZE.exec(t),r={};return i&&(r[i[1]]=Math.round(parseFloat(i[3])),r[i[5]]=Math.round(parseFloat(i[7]))),r},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._resolve=null,this._crossorigin=null},e.test=function(t,i){return"svg"===i||"string"==typeof t&&/^data:image\/svg\+xml(;(charset=utf8|utf8))?;base64/.test(t)||"string"==typeof t&&e.SVG_XML.test(t)},e.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e}(b),w=function(t){function e(i,r){var n=this;if(r=r||{},!(i instanceof HTMLVideoElement)){var s=document.createElement("video");s.setAttribute("preload","auto"),s.setAttribute("webkit-playsinline",""),s.setAttribute("playsinline",""),"string"==typeof i&&(i=[i]);var o=i[0].src||i[0];b.crossOrigin(s,o,r.crossorigin);for(var a=0;a<i.length;++a){var h=document.createElement("source"),l=i[a],u=l.src,c=l.mime,d=(u=u||i[a]).split("?").shift().toLowerCase(),p=d.substr(d.lastIndexOf(".")+1);c=c||e.MIME_TYPES[p]||"video/"+p,h.src=u,h.type=c,s.appendChild(h)}i=s}return(n=t.call(this,i)||this).noSubImage=!0,n._autoUpdate=!0,n._isConnectedToTicker=!1,n._updateFPS=r.updateFPS||0,n._msToNextUpdate=0,n.autoPlay=!1!==r.autoPlay,n._load=null,n._resolve=null,n._onCanPlay=n._onCanPlay.bind(n),n._onError=n._onError.bind(n),!1!==r.autoLoad&&n.load(),n}return d(e,t),e.prototype.update=function(e){if(!this.destroyed){var i=a.vB.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i),(!this._updateFPS||this._msToNextUpdate<=0)&&(t.prototype.update.call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}},e.prototype.load=function(){var t=this;if(this._load)return this._load;var e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((function(i){t.valid?i(t):(t._resolve=i,e.load())})),this._load},e.prototype._onError=function(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)},e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){var t=this.source;return 3===t.readyState||4===t.readyState},e.prototype._onPlayStart=function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(a.vB.shared.add(this.update,this),this._isConnectedToTicker=!0)},e.prototype._onPlayStop=function(){this._isConnectedToTicker&&(a.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1)},e.prototype._onCanPlay=function(){var t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);var e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()},e.prototype.dispose=function(){this._isConnectedToTicker&&(a.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(a.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(a.vB.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"updateFPS",{get:function(){return this._updateFPS},set:function(t){t!==this._updateFPS&&(this._updateFPS=t)},enumerable:!1,configurable:!0}),e.test=function(t,i){return self.HTMLVideoElement&&t instanceof HTMLVideoElement||e.TYPES.indexOf(i)>-1},e.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],e.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},e}(b),A=function(t){function e(e){return t.call(this,e)||this}return d(e,t),e.test=function(t){return!!self.createImageBitmap&&t instanceof ImageBitmap},e}(b);l.push(S,A,x,w,E,m,T,y);var I={__proto__:null,Resource:f,BaseImageResource:b,INSTALLED:l,autoDetectResource:u,AbstractMultiResource:v,ArrayResource:y,BufferResource:m,CanvasResource:x,CubeResource:T,ImageResource:S,SVGResource:E,VideoResource:w,ImageBitmapResource:A},C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.upload=function(t,e,i){var r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.alphaMode===n.iw.UNPACK);var s=e.realWidth,o=e.realHeight;return i.width===s&&i.height===o?r.texSubImage2D(e.target,0,0,0,s,o,e.format,i.type,this.data):(i.width=s,i.height=o,r.texImage2D(e.target,0,i.internalFormat,s,o,0,e.format,i.type,this.data)),!0},e}(m),O=function(){function t(t,e){this.width=Math.round(t||100),this.height=Math.round(e||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new o.R("disposeFramebuffer"),this.multisample=n.G5.NONE}return Object.defineProperty(t.prototype,"colorTexture",{get:function(){return this.colorTextures[0]},enumerable:!1,configurable:!0}),t.prototype.addColorTexture=function(t,e){return void 0===t&&(t=0),this.colorTextures[t]=e||new g(null,{scaleMode:n.aH.NEAREST,resolution:1,mipmap:n.WB.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.addDepthTexture=function(t){return this.depthTexture=t||new g(new C(null,{width:this.width,height:this.height}),{scaleMode:n.aH.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:n.WB.OFF,format:n.I2.DEPTH_COMPONENT,type:n.vK.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableDepth=function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.enableStencil=function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this},t.prototype.resize=function(t,e){if(t=Math.round(t),e=Math.round(e),t!==this.width||e!==this.height){this.width=t,this.height=e,this.dirtyId++,this.dirtySize++;for(var i=0;i<this.colorTextures.length;i++){var r=this.colorTextures[i],n=r.resolution;r.setSize(t/n,e/n)}this.depthTexture&&(n=this.depthTexture.resolution,this.depthTexture.setSize(t/n,e/n))}},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroyDepthTexture=function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)},t}(),M=function(t){function e(e){var i=this;if("number"==typeof e){var r=arguments[0],s=arguments[1],o=arguments[2],a=arguments[3];e={width:r,height:s,scaleMode:o,resolution:a}}return e.width=e.width||100,e.height=e.height||100,e.multisample=void 0!==e.multisample?e.multisample:n.G5.NONE,(i=t.call(this,null,e)||this).mipmap=n.WB.OFF,i.valid=!0,i.clearColor=[0,0,0,0],i.framebuffer=new O(i.realWidth,i.realHeight).addColorTexture(0,i),i.framebuffer.multisample=e.multisample,i.maskStack=[],i.filterStack=[{}],i}return d(e,t),e.prototype.resize=function(t,e){this.framebuffer.resize(t*this.resolution,e*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)},e.prototype.dispose=function(){this.framebuffer.dispose(),t.prototype.dispose.call(this)},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null},e}(g),P=function(){function t(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return t.prototype.set=function(t,e,i){var r=e.width,n=e.height;if(i){var s=t.width/2/r,o=t.height/2/n,a=t.x/r+s,l=t.y/n+o;i=h.Lv.add(i,h.Lv.NW),this.x0=a+s*h.Lv.uX(i),this.y0=l+o*h.Lv.uY(i),i=h.Lv.add(i,2),this.x1=a+s*h.Lv.uX(i),this.y1=l+o*h.Lv.uY(i),i=h.Lv.add(i,2),this.x2=a+s*h.Lv.uX(i),this.y2=l+o*h.Lv.uY(i),i=h.Lv.add(i,2),this.x3=a+s*h.Lv.uX(i),this.y3=l+o*h.Lv.uY(i)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3},t.prototype.toString=function(){return"[@pixi/core:TextureUvs x0="+this.x0+" y0="+this.y0+" x1="+this.x1+" y1="+this.y1+" x2="+this.x2+" y2="+this.y2+" x3="+this.x3+" y3="+this.y3+"]"},t}(),R=new P,D=function(t){function e(i,r,n,s,o,a){var l=t.call(this)||this;if(l.noFrame=!1,r||(l.noFrame=!0,r=new h.Ae(0,0,1,1)),i instanceof e&&(i=i.baseTexture),l.baseTexture=i,l._frame=r,l.trim=s,l.valid=!1,l._uvs=R,l.uvMatrix=null,l.orig=n||r,l._rotate=Number(o||0),!0===o)l._rotate=2;else if(l._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return l.defaultAnchor=a?new h.E9(a.x,a.y):new h.E9(0,0),l._updateID=0,l.textureCacheIds=[],i.valid?l.noFrame?i.valid&&l.onBaseTextureUpdated(i):l.frame=r:i.once("loaded",l.onBaseTextureUpdated,l),l.noFrame&&i.on("update",l.onBaseTextureUpdated,l),l}return d(e,t),e.prototype.update=function(){this.baseTexture.resource&&this.baseTexture.resource.update()},e.prototype.onBaseTextureUpdated=function(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)},e.prototype.destroy=function(t){if(this.baseTexture){if(t){var i=this.baseTexture.resource;i&&i.url&&s.TextureCache[i.url]&&e.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){var t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),r=new e(this.baseTexture,!this.noFrame&&t,i,this.trim&&this.trim.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(r._frame=t),r},e.prototype.updateUvs=function(){this._uvs===R&&(this._uvs=new P),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.from=function(t,i,n){void 0===i&&(i={}),void 0===n&&(n=r.X.STRICT_TEXTURE_CACHE);var o="string"==typeof t,a=null;if(o)a=t;else if(t instanceof g){if(!t.cacheId){var h=i&&i.pixiIdPrefix||"pixiid";t.cacheId=h+"-"+(0,s.uid)(),g.addToCache(t,t.cacheId)}a=t.cacheId}else t._pixiId||(h=i&&i.pixiIdPrefix||"pixiid",t._pixiId=h+"_"+(0,s.uid)()),a=t._pixiId;var l=s.TextureCache[a];if(o&&n&&!l)throw new Error('The cacheId "'+a+'" does not exist in TextureCache.');return l||t instanceof g?!l&&t instanceof g&&(l=new e(t),e.addToCache(l,a)):(i.resolution||(i.resolution=(0,s.getResolutionOfUrl)(t)),(l=new e(new g(t,i))).baseTexture.cacheId=a,g.addToCache(l.baseTexture,a),e.addToCache(l,a)),l},e.fromURL=function(t,i){var r=Object.assign({autoLoad:!1},null==i?void 0:i.resourceOptions),n=e.from(t,Object.assign({resourceOptions:r},i),!1),s=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):s.load().then((function(){return Promise.resolve(n)}))},e.fromBuffer=function(t,i,r,n){return new e(g.fromBuffer(t,i,r,n))},e.fromLoader=function(t,i,n,o){var a=new g(t,Object.assign({scaleMode:r.X.SCALE_MODE,resolution:(0,s.getResolutionOfUrl)(i)},o)),h=a.resource;h instanceof S&&(h.url=i);var l=new e(a);return n||(n=i),g.addToCache(l.baseTexture,n),e.addToCache(l,n),n!==i&&(g.addToCache(l.baseTexture,i),e.addToCache(l,i)),l.baseTexture.valid?Promise.resolve(l):new Promise((function(t){l.baseTexture.once("loaded",(function(){return t(l)}))}))},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),s.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),s.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=s.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete s.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)s.TextureCache[t.textureCacheIds[r]]===t&&delete s.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.baseTexture.resolution},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"frame",{get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,r=t.width,n=t.height,s=e+r>this.baseTexture.width,o=i+n>this.baseTexture.height;if(s||o){var a=s&&o?"and":"or",h="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,l="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+l)}this.valid=r&&n&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=t),this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotate",{get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this.updateUvs()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.orig.height},enumerable:!1,configurable:!0}),e.prototype.castToBaseTexture=function(){return this.baseTexture},e}(s.EventEmitter);function N(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}D.EMPTY=new D(new g),N(D.EMPTY),N(D.EMPTY.baseTexture),D.WHITE=function(){var t=document.createElement("canvas");t.width=16,t.height=16;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,16,16),new D(new g(new x(t)))}(),N(D.WHITE),N(D.WHITE.baseTexture);var U=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.valid=!0,r.filterFrame=null,r.filterPoolKey=null,r.updateUvs(),r}return d(e,t),Object.defineProperty(e.prototype,"framebuffer",{get:function(){return this.baseTexture.framebuffer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"multisample",{get:function(){return this.framebuffer.multisample},set:function(t){this.framebuffer.multisample=t},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e,i){void 0===i&&(i=!0);var r=this.baseTexture.resolution,n=Math.round(t*r)/r,s=Math.round(e*r)/r;this.valid=n>0&&s>0,this._frame.width=this.orig.width=n,this._frame.height=this.orig.height=s,i&&this.baseTexture.resize(n,s),this.updateUvs()},e.prototype.setResolution=function(t){var e=this.baseTexture;e.resolution!==t&&(e.setResolution(t),this.resize(e.width,e.height,!1))},e.create=function(t){for(var i=arguments,r=[],n=1;n<arguments.length;n++)r[n-1]=i[n];return"number"==typeof t&&((0,s.deprecation)("6.0.0","Arguments (width, height, scaleMode, resolution) have been deprecated."),t={width:t,height:r[0],scaleMode:r[1],resolution:r[2]}),new e(new M(t))},e}(D),F=function(){function t(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return t.prototype.createTexture=function(t,e,i){void 0===i&&(i=n.G5.NONE);var r=new M(Object.assign({width:t,height:e,resolution:1,multisample:i},this.textureOptions));return new U(r)},t.prototype.getOptimalTexture=function(t,e,i,r){var o;void 0===i&&(i=1),void 0===r&&(r=n.G5.NONE),t=Math.ceil(t*i),e=Math.ceil(e*i),this.enableFullScreen&&t===this._pixelsWidth&&e===this._pixelsHeight?o=r>1?-r:-1:(o=((65535&(t=(0,s.nextPow2)(t)))<<16|65535&(e=(0,s.nextPow2)(e)))>>>0,r>1&&(o+=4294967296*r)),this.texturePool[o]||(this.texturePool[o]=[]);var a=this.texturePool[o].pop();return a||(a=this.createTexture(t,e,r)),a.filterPoolKey=o,a.setResolution(i),a},t.prototype.getFilterTexture=function(t,e,i){var r=this.getOptimalTexture(t.width,t.height,e||t.resolution,i||n.G5.NONE);return r.filterFrame=t.filterFrame,r},t.prototype.returnTexture=function(t){var e=t.filterPoolKey;t.filterFrame=null,this.texturePool[e].push(t)},t.prototype.returnFilterTexture=function(t){this.returnTexture(t)},t.prototype.clear=function(t){if(t=!1!==t)for(var e in this.texturePool){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}},t.prototype.setScreenSize=function(t){if(t.width!==this._pixelsWidth||t.height!==this._pixelsHeight){for(var e in this.enableFullScreen=t.width>0&&t.height>0,this.texturePool)if(Number(e)<0){var i=this.texturePool[e];if(i)for(var r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[e]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}},t.SCREEN_KEY=-1,t}(),L=function(){function t(t,e,i,r,s,o,a){void 0===e&&(e=0),void 0===i&&(i=!1),void 0===r&&(r=n.vK.FLOAT),this.buffer=t,this.size=e,this.normalized=i,this.type=r,this.stride=s,this.start=o,this.instance=a}return t.prototype.destroy=function(){this.buffer=null},t.from=function(e,i,r,n,s){return new t(e,i,r,n,s)},t}(),k=0,B=function(){function t(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=e,this.id=k++,this.disposeRunner=new o.R("disposeBuffer")}return t.prototype.update=function(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.data=null},Object.defineProperty(t.prototype,"index",{get:function(){return this.type===n.mr.ELEMENT_ARRAY_BUFFER},set:function(t){this.type=t?n.mr.ELEMENT_ARRAY_BUFFER:n.mr.ARRAY_BUFFER},enumerable:!1,configurable:!0}),t.from=function(e){return e instanceof Array&&(e=new Float32Array(e)),new t(e)},t}(),G={Float32Array,Uint32Array,Int32Array,Uint8Array},X={5126:4,5123:2,5121:1},j=0,V={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array},Y=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e={}),this.buffers=t,this.indexBuffer=null,this.attributes=e,this.glVertexArrayObjects={},this.id=j++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new o.R("disposeGeometry"),this.refCount=0}return t.prototype.addAttribute=function(t,e,i,r,n,s,o,a){if(void 0===i&&(i=0),void 0===r&&(r=!1),void 0===a&&(a=!1),!e)throw new Error("You must pass a buffer when creating an attribute");e instanceof B||(e instanceof Array&&(e=new Float32Array(e)),e=new B(e));var h=t.split("|");if(h.length>1){for(var l=0;l<h.length;l++)this.addAttribute(h[l],e,i,r,n);return this}var u=this.buffers.indexOf(e);return-1===u&&(this.buffers.push(e),u=this.buffers.length-1),this.attributes[t]=new L(u,i,r,n,s,o,a),this.instanced=this.instanced||a,this},t.prototype.getAttribute=function(t){return this.attributes[t]},t.prototype.getBuffer=function(t){return this.buffers[this.getAttribute(t).buffer]},t.prototype.addIndex=function(t){return t instanceof B||(t instanceof Array&&(t=new Uint16Array(t)),t=new B(t)),t.type=n.mr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,-1===this.buffers.indexOf(t)&&this.buffers.push(t),this},t.prototype.getIndex=function(){return this.indexBuffer},t.prototype.interleave=function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var t,e=[],i=[],r=new B;for(t in this.attributes){var n=this.attributes[t],o=this.buffers[n.buffer];e.push(o.data),i.push(n.size*X[n.type]/4),n.buffer=0}for(r.data=function(t,e){for(var i=0,r=0,n={},o=0;o<t.length;o++)r+=e[o],i+=t[o].length;var a=new ArrayBuffer(4*i),h=null,l=0;for(o=0;o<t.length;o++){var u=e[o],c=t[o],d=(0,s.getBufferType)(c);n[d]||(n[d]=new G[d](a)),h=n[d];for(var p=0;p<c.length;p++)h[(p/u|0)*r+l+p%u]=c[p];l+=u}return new Float32Array(a)}(e,i),t=0;t<this.buffers.length;t++)this.buffers[t]!==this.indexBuffer&&this.buffers[t].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this},t.prototype.getSize=function(){for(var t in this.attributes){var e=this.attributes[t];return this.buffers[e.buffer].data.length/(e.stride/4||e.size)}return 0},t.prototype.dispose=function(){this.disposeRunner.emit(this,!1)},t.prototype.destroy=function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null},t.prototype.clone=function(){for(var e=new t,i=0;i<this.buffers.length;i++)e.buffers[i]=new B(this.buffers[i].data.slice(0));for(var i in this.attributes){var r=this.attributes[i];e.attributes[i]=new L(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=n.mr.ELEMENT_ARRAY_BUFFER),e},t.merge=function(e){for(var i,r=new t,o=[],a=[],h=[],l=0;l<e.length;l++){i=e[l];for(var u=0;u<i.buffers.length;u++)a[u]=a[u]||0,a[u]+=i.buffers[u].data.length,h[u]=0}for(l=0;l<i.buffers.length;l++)o[l]=new(V[(0,s.getBufferType)(i.buffers[l].data)])(a[l]),r.buffers[l]=new B(o[l]);for(l=0;l<e.length;l++)for(i=e[l],u=0;u<i.buffers.length;u++)o[u].set(i.buffers[u].data,h[u]),h[u]+=i.buffers[u].data.length;if(r.attributes=i.attributes,i.indexBuffer){r.indexBuffer=r.buffers[i.buffers.indexOf(i.indexBuffer)],r.indexBuffer.type=n.mr.ELEMENT_ARRAY_BUFFER;var c=0,d=0,p=0,f=0;for(l=0;l<i.buffers.length;l++)if(i.buffers[l]!==i.indexBuffer){f=l;break}for(var l in i.attributes){var m=i.attributes[l];(0|m.buffer)===f&&(d+=m.size*X[m.type]/4)}for(l=0;l<e.length;l++){var _=e[l].indexBuffer.data;for(u=0;u<_.length;u++)r.indexBuffer.data[u+p]+=c;c+=e[l].buffers[f].data.length/d,p+=_.length}}return r},t}(),H=function(t){function e(){var e=t.call(this)||this;return e.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return d(e,t),e}(Y),W=function(t){function e(){var e=t.call(this)||this;return e.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new B(e.vertices),e.uvBuffer=new B(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return d(e,t),e.prototype.map=function(t,e){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this.invalidate(),this},e.prototype.invalidate=function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this},e}(Y),z=0,q=function(){function t(t,e,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=z++,this.static=!!e,this.ubo=!!i,t instanceof B?(this.buffer=t,this.buffer.type=n.mr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new B(new Float32Array(1)),this.buffer.type=n.mr.UNIFORM_BUFFER,this.autoManage=!0))}return t.prototype.update=function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()},t.prototype.add=function(e,i,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[e]=new t(i,r)},t.from=function(e,i,r){return new t(e,i,r)},t.uboFrom=function(e,i){return new t(e,null==i||i,!0)},t}(),K=function(){function t(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=n.G5.NONE,this.sourceFrame=new h.Ae,this.destinationFrame=new h.Ae,this.bindingSourceFrame=new h.Ae,this.bindingDestinationFrame=new h.Ae,this.filters=[],this.transform=null}return t.prototype.clear=function(){this.target=null,this.filters=null,this.renderTexture=null},t}(),Z=[new h.E9,new h.E9,new h.E9,new h.E9],$=new h.y3,J=function(){function t(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new F,this.texturePool.setScreenSize(t.view),this.statePool=[],this.quad=new H,this.quadUv=new W,this.tempRect=new h.Ae,this.activeState={},this.globalUniforms=new q({outputFrame:new h.Ae,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return t.prototype.push=function(t,e){for(var i,r,n=this.renderer,s=this.defaultFilterStack,o=this.statePool.pop()||new K,a=this.renderer.renderTexture,h=e[0].resolution,l=e[0].multisample,u=e[0].padding,c=e[0].autoFit,d=null===(i=e[0].legacy)||void 0===i||i,p=1;p<e.length;p++){var f=e[p];h=Math.min(h,f.resolution),l=Math.min(l,f.multisample),u=this.useMaxPadding?Math.max(u,f.padding):u+f.padding,c=c&&f.autoFit,d=d||null===(r=f.legacy)||void 0===r||r}if(1===s.length&&(this.defaultFilterStack[0].renderTexture=a.current),s.push(o),o.resolution=h,o.multisample=l,o.legacy=d,o.target=t,o.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),o.sourceFrame.pad(u),c){var m=this.tempRect.copyFrom(a.sourceFrame);n.projection.transform&&this.transformAABB($.copyFrom(n.projection.transform).invert(),m),o.sourceFrame.fit(m)}this.roundFrame(o.sourceFrame,a.current?a.current.resolution:n.resolution,a.sourceFrame,a.destinationFrame,n.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,h,l),o.filters=e,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;var _=this.tempRect;_.x=0,_.y=0,_.width=o.sourceFrame.width,_.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(a.sourceFrame),o.bindingDestinationFrame.copyFrom(a.destinationFrame),o.transform=n.projection.transform,n.projection.transform=null,a.bind(o.renderTexture,o.sourceFrame,_),n.framebuffer.clear(0,0,0,0)},t.prototype.pop=function(){var t=this.defaultFilterStack,e=t.pop(),i=e.filters;this.activeState=e;var r=this.globalUniforms.uniforms;r.outputFrame=e.sourceFrame,r.resolution=e.resolution;var s=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(s[0]=e.destinationFrame.width,s[1]=e.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*e.resolution),o[1]=Math.round(s[1]*e.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=e.sourceFrame.width*s[2]-.5*o[2],a[3]=e.sourceFrame.height*s[3]-.5*o[3],e.legacy){var h=r.filterArea;h[0]=e.destinationFrame.width,h[1]=e.destinationFrame.height,h[2]=e.sourceFrame.x,h[3]=e.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=t[t.length-1];if(this.renderer.framebuffer.blit(),1===i.length)i[0].apply(this,e.renderTexture,l.renderTexture,n.yl.BLEND,e),this.returnFilterTexture(e.renderTexture);else{var u=e.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,e.resolution);c.filterFrame=u.filterFrame;var d=0;for(d=0;d<i.length-1;++d){1===d&&e.multisample>1&&((c=this.getOptimalFilterTexture(u.width,u.height,e.resolution)).filterFrame=u.filterFrame),i[d].apply(this,u,c,n.yl.CLEAR,e);var p=u;u=c,c=p}i[d].apply(this,u,l.renderTexture,n.yl.BLEND,e),d>1&&e.multisample>1&&this.returnFilterTexture(e.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}e.clear(),this.statePool.push(e)},t.prototype.bindAndClear=function(t,e){void 0===e&&(e=n.yl.CLEAR);var i=this.renderer,r=i.renderTexture,s=i.state;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t&&t.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,r.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=1&s.stateId||this.forceClear;(e===n.yl.CLEAR||e===n.yl.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)},t.prototype.applyFilter=function(t,e,i,r){var s=this.renderer;s.state.set(t.state),this.bindAndClear(i,r),t.uniforms.uSampler=e,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(e._frame,e.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(n.lg.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(n.lg.TRIANGLE_STRIP))},t.prototype.calculateSpriteMatrix=function(t,e){var i=this.activeState,r=i.sourceFrame,n=i.destinationFrame,s=e._texture.orig,o=t.set(n.width,0,0,n.height,r.x,r.y),a=e.worldTransform.copyTo(h.y3.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(e.anchor.x,e.anchor.y),o},t.prototype.destroy=function(){this.renderer=null,this.texturePool.clear(!1)},t.prototype.getOptimalFilterTexture=function(t,e,i,r){return void 0===i&&(i=1),void 0===r&&(r=n.G5.NONE),this.texturePool.getOptimalTexture(t,e,i,r)},t.prototype.getFilterTexture=function(t,e,i){if("number"==typeof t){var r=t;t=e,e=r}t=t||this.activeState.renderTexture;var s=this.texturePool.getOptimalTexture(t.width,t.height,e||t.resolution,i||n.G5.NONE);return s.filterFrame=t.filterFrame,s},t.prototype.returnFilterTexture=function(t){this.texturePool.returnTexture(t)},t.prototype.emptyPool=function(){this.texturePool.clear(!0)},t.prototype.resize=function(){this.texturePool.setScreenSize(this.renderer.view)},t.prototype.transformAABB=function(t,e){var i=Z[0],r=Z[1],n=Z[2],s=Z[3];i.set(e.left,e.top),r.set(e.left,e.bottom),n.set(e.right,e.top),s.set(e.right,e.bottom),t.apply(i,i),t.apply(r,r),t.apply(n,n),t.apply(s,s);var o=Math.min(i.x,r.x,n.x,s.x),a=Math.min(i.y,r.y,n.y,s.y),h=Math.max(i.x,r.x,n.x,s.x),l=Math.max(i.y,r.y,n.y,s.y);e.x=o,e.y=a,e.width=h-o,e.height=l-a},t.prototype.roundFrame=function(t,e,i,r,n){if(n){var s=n.a,o=n.b,a=n.c,h=n.d;if((Math.abs(o)>1e-4||Math.abs(a)>1e-4)&&(Math.abs(s)>1e-4||Math.abs(h)>1e-4))return}(n=n?$.copyFrom(n):$.identity()).translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.transformAABB(n,t),t.ceil(e),this.transformAABB(n.invert(),t)},t}(),Q=function(){function t(t){this.renderer=t}return t.prototype.flush=function(){},t.prototype.destroy=function(){this.renderer=null},t.prototype.start=function(){},t.prototype.stop=function(){this.flush()},t.prototype.render=function(t){},t}(),tt=function(){function t(t){this.renderer=t,this.emptyRenderer=new Q(t),this.currentRenderer=this.emptyRenderer}return t.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},t.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer)},t.prototype.copyBoundTextures=function(t,e){for(var i=this.renderer.texture.boundTextures,r=e-1;r>=0;--r)t[r]=i[r]||null,t[r]&&(t[r]._batchLocation=r)},t.prototype.boundArray=function(t,e,i,r){for(var n=t.elements,s=t.ids,o=t.count,a=0,h=0;h<o;h++){var l=n[h],u=l._batchLocation;if(u>=0&&u<r&&e[u]===l)s[h]=u;else for(;a<r;){var c=e[a];if(!c||c._batchEnabled!==i||c._batchLocation!==a){s[h]=a,l._batchLocation=a,e[a]=l;break}a++}}},t.prototype.destroy=function(){this.renderer=null},t}(),et=0,it=function(){function t(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this),t.view.addEventListener("webglcontextlost",this.handleContextLost,!1),t.view.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}return Object.defineProperty(t.prototype,"isLost",{get:function(){return!this.gl||this.gl.isContextLost()},enumerable:!1,configurable:!0}),t.prototype.contextChange=function(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=et++,t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext()},t.prototype.initFromContext=function(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=et++,this.renderer.runners.contextChange.emit(t)},t.prototype.initFromOptions=function(t){var e=this.createContext(this.renderer.view,t);this.initFromContext(e)},t.prototype.createContext=function(t,e){var i;if(r.X.PREFER_ENV>=n.Vi.WEBGL2&&(i=t.getContext("webgl2",e)),i)this.webGLVersion=2;else if(this.webGLVersion=1,!(i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl},t.prototype.getExtensions=function(){var t=this.gl,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,e,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),loseContext:t.getExtension("WEBGL_lose_context"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,e,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})},t.prototype.handleContextLost=function(t){t.preventDefault()},t.prototype.handleContextRestored=function(){this.renderer.runners.contextChange.emit(this.gl)},t.prototype.destroy=function(){var t=this.renderer.view;this.renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()},t.prototype.postrender=function(){this.renderer.renderingToScreen&&this.gl.flush()},t.prototype.validateContext=function(t){var e=t.getContextAttributes(),i="WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext;i&&(this.webGLVersion=2),e.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");var r=i||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")},t}(),rt=function(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=n.G5.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0},nt=new h.Ae,st=function(){function t(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new O(10,10),this.msaaSamples=null}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new h.Ae,this.hasMRT=!0,this.writeDepthTexture=!0,this.disposeAll(!0),1===this.renderer.context.webGLVersion){var e=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;r.X.PREFER_ENV===n.Vi.WEBGL_LEGACY&&(e=null,i=null),e?t.drawBuffers=function(t){return e.drawBuffersWEBGL(t)}:(this.hasMRT=!1,t.drawBuffers=function(){}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)},t.prototype.bind=function(t,e,i){void 0===i&&(i=0);var r=this.gl;if(t){var n=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,n.framebuffer)),n.mipLevel!==i&&(t.dirtyId++,t.dirtyFormat++,n.mipLevel=i),n.dirtyId!==t.dirtyId&&(n.dirtyId=t.dirtyId,n.dirtyFormat!==t.dirtyFormat?(n.dirtyFormat=t.dirtyFormat,n.dirtySize=t.dirtySize,this.updateFramebuffer(t,i)):n.dirtySize!==t.dirtySize&&(n.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(var s=0;s<t.colorTextures.length;s++){var o=t.colorTextures[s];this.renderer.texture.unbind(o.parentTextureArray||o)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),e){var a=e.width>>i,h=e.height>>i,l=a/e.width;this.setViewport(e.x*l,e.y*l,a,h)}else a=t.width>>i,h=t.height>>i,this.setViewport(0,0,a,h)}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),e?this.setViewport(e.x,e.y,e.width,e.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)},t.prototype.setViewport=function(t,e,i,r){var n=this.viewport;t=Math.round(t),e=Math.round(e),i=Math.round(i),r=Math.round(r),n.width===i&&n.height===r&&n.x===t&&n.y===e||(n.x=t,n.y=e,n.width=i,n.height=r,this.gl.viewport(t,e,i,r))},Object.defineProperty(t.prototype,"size",{get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}},enumerable:!1,configurable:!0}),t.prototype.clear=function(t,e,i,r,s){void 0===s&&(s=n.V0.COLOR|n.V0.DEPTH);var o=this.gl;o.clearColor(t,e,i,r),o.clear(s)},t.prototype.initFramebuffer=function(t){var e=this.gl,i=new rt(e.createFramebuffer());return i.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(t),t.disposeRunner.add(this),i},t.prototype.resizeFramebuffer=function(t){var e=this.gl,i=t.glFramebuffers[this.CONTEXT_UID];i.msaaBuffer&&(e.bindRenderbuffer(e.RENDERBUFFER,i.msaaBuffer),e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.RGBA8,t.width,t.height)),i.stencil&&(e.bindRenderbuffer(e.RENDERBUFFER,i.stencil),i.msaaBuffer?e.renderbufferStorageMultisample(e.RENDERBUFFER,i.multisample,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,t.width,t.height));var r=t.colorTextures,n=r.length;e.drawBuffers||(n=Math.min(n,1));for(var s=0;s<n;s++){var o=r[s],a=o.parentTextureArray||o;this.renderer.texture.bind(a,0)}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)},t.prototype.updateFramebuffer=function(t,e){var i=this.gl,r=t.glFramebuffers[this.CONTEXT_UID],n=t.colorTextures,s=n.length;i.drawBuffers||(s=Math.min(s,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?(r.msaaBuffer=r.msaaBuffer||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.RGBA8,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r.msaaBuffer)):r.msaaBuffer&&(i.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var o=[],a=0;a<s;a++){var h=n[a],l=h.parentTextureArray||h;this.renderer.texture.bind(l,0),0===a&&r.msaaBuffer||(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+a,h.target,l._glTextures[this.CONTEXT_UID].texture,e),o.push(i.COLOR_ATTACHMENT0+a))}if(o.length>1&&i.drawBuffers(o),t.depthTexture&&this.writeDepthTexture){var u=t.depthTexture;this.renderer.texture.bind(u,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,e)}!t.stencil&&!t.depth||t.depthTexture&&this.writeDepthTexture?r.stencil&&(i.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,r.stencil))},t.prototype.canMultisampleFramebuffer=function(t){return 1!==this.renderer.context.webGLVersion&&t.colorTextures.length<=1&&!t.depthTexture},t.prototype.detectSamples=function(t){var e=this.msaaSamples,i=n.G5.NONE;if(t<=1||null===e)return i;for(var r=0;r<e.length;r++)if(e[r]<=t){i=e[r];break}return 1===i&&(i=n.G5.NONE),i},t.prototype.blit=function(t,e,i){var r=this,n=r.current,s=r.renderer,o=r.gl,a=r.CONTEXT_UID;if(2===s.context.webGLVersion&&n){var h=n.glFramebuffers[a];if(h){if(!t){if(!h.msaaBuffer)return;var l=n.colorTextures[0];if(!l)return;h.blitFramebuffer||(h.blitFramebuffer=new O(n.width,n.height),h.blitFramebuffer.addColorTexture(0,l)),(t=h.blitFramebuffer).colorTextures[0]!==l&&(t.colorTextures[0]=l,t.dirtyId++,t.dirtyFormat++),t.width===n.width&&t.height===n.height||(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}e||((e=nt).width=n.width,e.height=n.height),i||(i=e);var u=e.width===i.width&&e.height===i.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,h.framebuffer),o.blitFramebuffer(e.x,e.y,e.width,e.height,i.x,i.y,i.width,i.height,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR)}}},t.prototype.disposeFramebuffer=function(t,e){var i=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(i){delete t.glFramebuffers[this.CONTEXT_UID];var n=this.managedFramebuffers.indexOf(t);n>=0&&this.managedFramebuffers.splice(n,1),t.disposeRunner.remove(this),e||(r.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&r.deleteRenderbuffer(i.msaaBuffer),i.stencil&&r.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}},t.prototype.disposeAll=function(t){var e=this.managedFramebuffers;this.managedFramebuffers=[];for(var i=0;i<e.length;i++)this.disposeFramebuffer(e[i],t)},t.prototype.forceStencil=function(){var t=this.current;if(t){var e=t.glFramebuffers[this.CONTEXT_UID];if(e&&!e.stencil){t.stencil=!0;var i=t.width,r=t.height,n=this.gl,s=n.createRenderbuffer();n.bindRenderbuffer(n.RENDERBUFFER,s),e.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,e.multisample,n.DEPTH24_STENCIL8,i,r):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,i,r),e.stencil=s,n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,s)}}},t.prototype.reset=function(){this.current=this.unknownFramebuffer,this.viewport=new h.Ae},t.prototype.destroy=function(){this.renderer=null},t}(),ot={5126:4,5123:2,5121:1},at=function(){function t(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return t.prototype.contextChange=function(){this.disposeAll(!0);var t=this.gl=this.renderer.gl,e=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==e.webGLVersion){var i=this.renderer.context.extensions.vertexArrayObject;r.X.PREFER_ENV===n.Vi.WEBGL_LEGACY&&(i=null),i?(t.createVertexArray=function(){return i.createVertexArrayOES()},t.bindVertexArray=function(t){return i.bindVertexArrayOES(t)},t.deleteVertexArray=function(t){return i.deleteVertexArrayOES(t)}):(this.hasVao=!1,t.createVertexArray=function(){return null},t.bindVertexArray=function(){return null},t.deleteVertexArray=function(){return null})}if(2!==e.webGLVersion){var s=t.getExtension("ANGLE_instanced_arrays");s?(t.vertexAttribDivisor=function(t,e){return s.vertexAttribDivisorANGLE(t,e)},t.drawElementsInstanced=function(t,e,i,r,n){return s.drawElementsInstancedANGLE(t,e,i,r,n)},t.drawArraysInstanced=function(t,e,i,r){return s.drawArraysInstancedANGLE(t,e,i,r)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===e.webGLVersion||!!e.extensions.uint32ElementIndex},t.prototype.bind=function(t,e){e=e||this.renderer.shader.shader;var i=this.gl,r=t.glVertexArrayObjects[this.CONTEXT_UID],n=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},n=!0);var s=r[e.program.id]||this.initGeometryVao(t,e,n);this._activeGeometry=t,this._activeVao!==s&&(this._activeVao=s,this.hasVao?i.bindVertexArray(s):this.activateVao(t,e.program)),this.updateBuffers()},t.prototype.reset=function(){this.unbind()},t.prototype.updateBuffers=function(){for(var t=this._activeGeometry,e=this.renderer.buffer,i=0;i<t.buffers.length;i++){var r=t.buffers[i];e.update(r)}},t.prototype.checkCompatibility=function(t,e){var i=t.attributes,r=e.attributeData;for(var n in r)if(!i[n])throw new Error('shader and geometry incompatible, geometry missing the "'+n+'" attribute')},t.prototype.getSignature=function(t,e){var i=t.attributes,r=e.attributeData,n=["g",t.id];for(var s in i)r[s]&&n.push(s,r[s].location);return n.join("-")},t.prototype.initGeometryVao=function(t,e,i){void 0===i&&(i=!0);var r=this.gl,n=this.CONTEXT_UID,s=this.renderer.buffer,o=e.program;o.glPrograms[n]||this.renderer.shader.generateProgram(e),this.checkCompatibility(t,o);var a=this.getSignature(t,o),h=t.glVertexArrayObjects[this.CONTEXT_UID],l=h[a];if(l)return h[o.id]=l,l;var u=t.buffers,c=t.attributes,d={},p={};for(var f in u)d[f]=0,p[f]=0;for(var f in c)!c[f].size&&o.attributeData[f]?c[f].size=o.attributeData[f].size:c[f].size||console.warn("PIXI Geometry attribute '"+f+"' size cannot be determined (likely the bound shader does not have the attribute)"),d[c[f].buffer]+=c[f].size*ot[c[f].type];for(var f in c){var m=c[f],_=m.size;void 0===m.stride&&(d[m.buffer]===_*ot[m.type]?m.stride=0:m.stride=d[m.buffer]),void 0===m.start&&(m.start=p[m.buffer],p[m.buffer]+=_*ot[m.type])}l=r.createVertexArray(),r.bindVertexArray(l);for(var g=0;g<u.length;g++){var v=u[g];s.bind(v),i&&v._glBuffers[n].refCount++}return this.activateVao(t,o),this._activeVao=l,h[o.id]=l,h[a]=l,l},t.prototype.disposeGeometry=function(t,e){var i;if(this.managedGeometries[t.id]){delete this.managedGeometries[t.id];var r=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,s=t.buffers,o=null===(i=this.renderer)||void 0===i?void 0:i.buffer;if(t.disposeRunner.remove(this),r){if(o)for(var a=0;a<s.length;a++){var h=s[a]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,0!==h.refCount||e||o.dispose(s[a],e))}if(!e)for(var l in r)if("g"===l[0]){var u=r[l];this._activeVao===u&&this.unbind(),n.deleteVertexArray(u)}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedGeometries),i=0;i<e.length;i++)this.disposeGeometry(this.managedGeometries[e[i]],t)},t.prototype.activateVao=function(t,e){var i=this.gl,r=this.CONTEXT_UID,n=this.renderer.buffer,s=t.buffers,o=t.attributes;t.indexBuffer&&n.bind(t.indexBuffer);var a=null;for(var h in o){var l=o[h],u=s[l.buffer],c=u._glBuffers[r];if(e.attributeData[h]){a!==c&&(n.bind(u),a=c);var d=e.attributeData[h].location;if(i.enableVertexAttribArray(d),i.vertexAttribPointer(d,l.size,l.type||i.FLOAT,l.normalized,l.stride,l.start),l.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");i.vertexAttribDivisor(d,1)}}}},t.prototype.draw=function(t,e,i,r){var n=this.gl,s=this._activeGeometry;if(s.indexBuffer){var o=s.indexBuffer.data.BYTES_PER_ELEMENT,a=2===o?n.UNSIGNED_SHORT:n.UNSIGNED_INT;2===o||4===o&&this.canUseUInt32ElementIndex?s.instanced?n.drawElementsInstanced(t,e||s.indexBuffer.data.length,a,(i||0)*o,r||1):n.drawElements(t,e||s.indexBuffer.data.length,a,(i||0)*o):console.warn("unsupported index buffer type: uint32")}else s.instanced?n.drawArraysInstanced(t,i,e||s.getSize(),r||1):n.drawArrays(t,i,e||s.getSize());return this},t.prototype.unbind=function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null},t.prototype.destroy=function(){this.renderer=null},t}(),ht=function(){function t(t){void 0===t&&(t=null),this.type=n.A7.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=r.X.FILTER_MULTISAMPLE,this.enabled=!0,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._target=null}return Object.defineProperty(t.prototype,"filter",{get:function(){return this._filters?this._filters[0]:null},set:function(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.pooled&&(this.maskObject=null,this.type=n.A7.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null},t.prototype.copyCountersOrReset=function(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)},t}();function lt(t,e,i){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),r}function ut(t,e){var i=t.getShaderSource(e).split("\n").map((function(t,e){return e+": "+t})),r=t.getShaderInfoLog(e),n=r.split("\n"),s={},o=n.map((function(t){return parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(t){return!(!t||s[t]||(s[t]=!0,0))})),a=[""];o.forEach((function(t){i[t-1]="%c"+i[t-1]+"%c",a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var h=i.join("\n");a[0]=h,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn.apply(console,a),console.groupEnd()}function ct(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e}function dt(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return ct(2*e);case"bvec3":return ct(3*e);case"bvec4":return ct(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}var pt,ft={},mt=ft;function _t(){if(mt===ft||mt&&mt.isContextLost()){var t=document.createElement("canvas"),e=void 0;r.X.PREFER_ENV>=n.Vi.WEBGL2&&(e=t.getContext("webgl2",{})),e||((e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}))?e.getExtension("WEBGL_draw_buffers"):e=null),mt=e}return mt}function gt(t,e,i){if("precision"!==t.substring(0,9)){var r=e;return e===n.cB.HIGH&&i!==n.cB.HIGH&&(r=n.cB.MEDIUM),"precision "+r+" float;\n"+t}return i!==n.cB.HIGH&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t}var vt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function yt(t){return vt[t]}var bt=null,xt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Tt(t,e){if(!bt){var i=Object.keys(xt);bt={};for(var r=0;r<i.length;++r){var n=i[r];bt[t[n]]=xt[n]}}return bt[e]}var St,Et=[{test:function(t){return"float"===t.type&&1===t.size},code:function(t){return'\n            if(uv["'+t+'"] !== ud["'+t+'"].value)\n            {\n                ud["'+t+'"].value = uv["'+t+'"]\n                gl.uniform1f(ud["'+t+'"].location, uv["'+t+'"])\n            }\n            '}},{test:function(t){return("sampler2D"===t.type||"samplerCube"===t.type||"sampler2DArray"===t.type)&&1===t.size&&!t.isArray},code:function(t){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'+t+'"], t);\n\n            if(ud["'+t+'"].value !== t)\n            {\n                ud["'+t+'"].value = t;\n                gl.uniform1i(ud["'+t+'"].location, t);\n; // eslint-disable-line max-len\n            }'}},{test:function(t,e){return"mat3"===t.type&&1===t.size&&void 0!==e.a},code:function(t){return'\n            gl.uniformMatrix3fv(ud["'+t+'"].location, false, uv["'+t+'"].toArray(true));\n            '},codeUbo:function(t){return"\n                var "+t+"_matrix = uv."+t+".toArray(true);\n\n                data[offset] = "+t+"_matrix[0];\n                data[offset+1] = "+t+"_matrix[1];\n                data[offset+2] = "+t+"_matrix[2];\n        \n                data[offset + 4] = "+t+"_matrix[3];\n                data[offset + 5] = "+t+"_matrix[4];\n                data[offset + 6] = "+t+"_matrix[5];\n        \n                data[offset + 8] = "+t+"_matrix[6];\n                data[offset + 9] = "+t+"_matrix[7];\n                data[offset + 10] = "+t+"_matrix[8];\n            "}},{test:function(t,e){return"vec2"===t.type&&1===t.size&&void 0!==e.x},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["'+t+'"].location, v.x, v.y);\n                }'},codeUbo:function(t){return"\n                v = uv."+t+";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            "}},{test:function(t){return"vec2"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["'+t+'"].location, v[0], v[1]);\n                }\n            '}},{test:function(t,e){return"vec4"===t.type&&1===t.size&&void 0!==e.width},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["'+t+'"].location, v.x, v.y, v.width, v.height)\n                }'},codeUbo:function(t){return"\n                    v = uv."+t+";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                "}},{test:function(t){return"vec4"===t.type&&1===t.size},code:function(t){return'\n                cv = ud["'+t+'"].value;\n                v = uv["'+t+'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["'+t+'"].location, v[0], v[1], v[2], v[3])\n                }'}}],wt={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"gl.uniform1i(location, v)",samplerCube:"gl.uniform1i(location, v)",sampler2DArray:"gl.uniform1i(location, v)"},At={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"},It=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Ct(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}function Ot(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var i=e.createShader(e.FRAGMENT_SHADER);;){var r=It.replace(/%forloop%/gi,Ct(t));if(e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}return t}var Mt=0,Pt={},Rt=function(){function t(e,i,s){void 0===s&&(s="pixi-shader"),this.id=Mt++,this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),"#version"!==this.vertexSrc.substring(0,8)&&(s=s.replace(/\s+/g,"-"),Pt[s]?(Pt[s]++,s+="-"+Pt[s]):Pt[s]=1,this.vertexSrc="#define SHADER_NAME "+s+"\n"+this.vertexSrc,this.fragmentSrc="#define SHADER_NAME "+s+"\n"+this.fragmentSrc,this.vertexSrc=gt(this.vertexSrc,r.X.PRECISION_VERTEX,n.cB.HIGH),this.fragmentSrc=gt(this.fragmentSrc,r.X.PRECISION_FRAGMENT,function(){if(!pt){pt=n.cB.MEDIUM;var t=_t();if(t&&t.getShaderPrecisionFormat){var e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);pt=e.precision?n.cB.HIGH:n.cB.MEDIUM}}return pt}())),this.glPrograms={},this.syncUniforms=null}return Object.defineProperty(t,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"},enumerable:!1,configurable:!0}),t.from=function(e,i,r){var n=e+i,o=s.ProgramCache[n];return o||(s.ProgramCache[n]=o=new t(e,i,r)),o},t}(),Dt=function(){function t(t,e){this.uniformBindCount=0,this.program=t,this.uniformGroup=e?e instanceof q?e:new q(e):new q({})}return t.prototype.checkUniformExists=function(t,e){if(e.uniforms[t])return!0;for(var i in e.uniforms){var r=e.uniforms[i];if(r.group&&this.checkUniformExists(t,r))return!0}return!1},t.prototype.destroy=function(){this.uniformGroup=null},Object.defineProperty(t.prototype,"uniforms",{get:function(){return this.uniformGroup.uniforms},enumerable:!1,configurable:!0}),t.from=function(e,i,r){return new t(Rt.from(e,i),r)},t}(),Nt=function(){function t(){this.data=0,this.blendMode=n.T$.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return Object.defineProperty(t.prototype,"blend",{get:function(){return!!(1&this.data)},set:function(t){!!(1&this.data)!==t&&(this.data^=1)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsets",{get:function(){return!!(2&this.data)},set:function(t){!!(2&this.data)!==t&&(this.data^=2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"culling",{get:function(){return!!(4&this.data)},set:function(t){!!(4&this.data)!==t&&(this.data^=4)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthTest",{get:function(){return!!(8&this.data)},set:function(t){!!(8&this.data)!==t&&(this.data^=8)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"depthMask",{get:function(){return!!(32&this.data)},set:function(t){!!(32&this.data)!==t&&(this.data^=32)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clockwiseFrontFace",{get:function(){return!!(16&this.data)},set:function(t){!!(16&this.data)!==t&&(this.data^=16)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"blendMode",{get:function(){return this._blendMode},set:function(t){this.blend=t!==n.T$.NONE,this._blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"polygonOffset",{get:function(){return this._polygonOffset},set:function(t){this.offsets=!!t,this._polygonOffset=t},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return"[@pixi/core:State blendMode="+this.blendMode+" clockwiseFrontFace="+this.clockwiseFrontFace+" culling="+this.culling+" depthMask="+this.depthMask+" polygonOffset="+this.polygonOffset+"]"},t.for2d=function(){var e=new t;return e.depthTest=!1,e.blend=!0,e},t}(),Ut=function(t){function e(i,n,s){var o=this,a=Rt.from(i||e.defaultVertexSrc,n||e.defaultFragmentSrc);return(o=t.call(this,a,s)||this).padding=0,o.resolution=r.X.FILTER_RESOLUTION,o.multisample=r.X.FILTER_MULTISAMPLE,o.enabled=!0,o.autoFit=!0,o.state=new Nt,o}return d(e,t),e.prototype.apply=function(t,e,i,r,n){t.applyFilter(this,e,i,r)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._resolution=t},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultVertexSrc",{get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"defaultFragmentSrc",{get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"},enumerable:!1,configurable:!0}),e}(Dt),Ft=new h.y3,Lt=function(){function t(t,e){this._texture=t,this.mapCoord=new h.y3,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?.5:e,this.isSimple=!1}return Object.defineProperty(t.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture=t,this._textureID=-1},enumerable:!1,configurable:!0}),t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,r=0;r<t.length;r+=2){var n=t[r],s=t[r+1];e[r]=n*i.a+s*i.c+i.tx,e[r+1]=n*i.b+s*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._textureID===e._updateID)return!1;this._textureID=e._updateID,this._updateID++;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=e.orig,n=e.trim;n&&(Ft.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(Ft));var s=e.baseTexture,o=this.uClampFrame,a=this.clampMargin/s.resolution,h=this.clampOffset;return o[0]=(e._frame.x+a+h)/s.width,o[1]=(e._frame.y+a+h)/s.height,o[2]=(e._frame.x+e._frame.width-a+h)/s.width,o[3]=(e._frame.y+e._frame.height-a+h)/s.height,this.uClampOffset[0]=h/s.realWidth,this.uClampOffset[1]=h/s.realHeight,this.isSimple=e._frame.width===s.width&&e._frame.height===s.height&&0===e.rotate,!0},t}(),kt=function(t){function e(e,i,r){var n=this,s=null;return"string"!=typeof e&&void 0===i&&void 0===r&&(s=e,e=void 0,i=void 0,r=void 0),(n=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",i||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",r)||this).maskSprite=s,n.maskMatrix=new h.y3,n}return d(e,t),Object.defineProperty(e.prototype,"maskSprite",{get:function(){return this._maskSprite},set:function(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)},enumerable:!1,configurable:!0}),e.prototype.apply=function(t,e,i,r){var n=this._maskSprite,s=n._texture;s.valid&&(s.uvMatrix||(s.uvMatrix=new Lt(s,0)),s.uvMatrix.update(),this.uniforms.npmAlpha=s.baseTexture.alphaMode?0:1,this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.uvMatrix.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.uvMatrix.uClampFrame,t.applyFilter(this,e,i,r))},e}(Ut),Bt=function(){function t(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return t.prototype.setMaskStack=function(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)},t.prototype.push=function(t,e){var i=e;if(!i.isMaskData){var r=this.maskDataPool.pop()||new ht;r.pooled=!0,r.maskObject=e,i=r}var s=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(s),i.autoDetect&&this.detect(i),i._target=t,i.type!==n.A7.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case n.A7.SCISSOR:this.renderer.scissor.push(i);break;case n.A7.STENCIL:this.renderer.stencil.push(i);break;case n.A7.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i)}i.type===n.A7.SPRITE&&this.maskStack.push(i)},t.prototype.pop=function(t){var e=this.maskStack.pop();if(e&&e._target===t){if(e.enabled)switch(e.type){case n.A7.SCISSOR:this.renderer.scissor.pop();break;case n.A7.STENCIL:this.renderer.stencil.pop(e.maskObject);break;case n.A7.SPRITE:this.popSpriteMask(e)}if(e.reset(),e.pooled&&this.maskDataPool.push(e),0!==this.maskStack.length){var i=this.maskStack[this.maskStack.length-1];i.type===n.A7.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}},t.prototype.detect=function(t){t.maskObject.isSprite?t.type=n.A7.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=n.A7.SCISSOR:t.type=n.A7.STENCIL},t.prototype.pushSpriteMask=function(t){var e,i,r=t.maskObject,n=t._target,s=t._filters;s||(s=this.alphaMaskPool[this.alphaMaskIndex])||(s=this.alphaMaskPool[this.alphaMaskIndex]=[new kt]);var o,a,h=this.renderer,l=h.renderTexture;if(l.current){var u=l.current;o=t.resolution||u.resolution,a=null!==(e=t.multisample)&&void 0!==e?e:u.multisample}else o=t.resolution||h.resolution,a=null!==(i=t.multisample)&&void 0!==i?i:h.multisample;s[0].resolution=o,s[0].multisample=a,s[0].maskSprite=r;var c=n.filterArea;n.filterArea=r.getBounds(!0),h.filter.push(n,s),n.filterArea=c,t._filters||this.alphaMaskIndex++},t.prototype.popSpriteMask=function(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)},t.prototype.destroy=function(){this.renderer=null},t}(),Gt=function(){function t(t){this.renderer=t,this.maskStack=[],this.glConst=0}return t.prototype.getStackLength=function(){return this.maskStack.length},t.prototype.setMaskStack=function(t){var e=this.renderer.gl,i=this.getStackLength();this.maskStack=t;var r=this.getStackLength();r!==i&&(0===r?e.disable(this.glConst):(e.enable(this.glConst),this._useCurrent()))},t.prototype._useCurrent=function(){},t.prototype.destroy=function(){this.renderer=null,this.maskStack=null},t}(),Xt=new h.y3,jt=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.SCISSOR_TEST,i}return d(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0},e.prototype.calcScissorRect=function(t){if(!t._scissorRectLocal){var e=t._scissorRect,i=t.maskObject,r=this.renderer,n=r.renderTexture;i.renderable=!0;var s=i.getBounds();this.roundFrameToPixels(s,n.current?n.current.resolution:r.resolution,n.sourceFrame,n.destinationFrame,r.projection.transform),i.renderable=!1,e&&s.fit(e),t._scissorRectLocal=s}},e.isMatrixRotated=function(t){if(!t)return!1;var e=t.a,i=t.b,r=t.c,n=t.d;return(Math.abs(i)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(n)>1e-4)},e.prototype.testScissor=function(t){var i=t.maskObject;if(!i.isFastRect||!i.isFastRect())return!1;if(e.isMatrixRotated(i.worldTransform))return!1;if(e.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);var r=t._scissorRectLocal;return r.width>0&&r.height>0},e.prototype.roundFrameToPixels=function(t,i,r,n,s){e.isMatrixRotated(s)||((s=s?Xt.copyFrom(s):Xt.identity()).translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(s,t),t.fit(n),t.x=Math.round(t.x*i),t.y=Math.round(t.y*i),t.width=Math.round(t.width*i),t.height=Math.round(t.height*i))},e.prototype.push=function(t){t._scissorRectLocal||this.calcScissorRect(t);var e=this.renderer.gl;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()},e.prototype.pop=function(){var t=this.renderer.gl;this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)},e.prototype._useCurrent=function(){var t,e=this.maskStack[this.maskStack.length-1]._scissorRect;t=this.renderer.renderTexture.current?e.y:this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)},e}(Gt),Vt=function(t){function e(e){var i=t.call(this,e)||this;return i.glConst=WebGLRenderingContext.STENCIL_TEST,i}return d(e,t),e.prototype.getStackLength=function(){var t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0},e.prototype.push=function(t){var e=t.maskObject,i=this.renderer.gl,r=t._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),t._stencilCounter++,i.colorMask(!1,!1,!1,!1),i.stencilFunc(i.EQUAL,r,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,this._useCurrent()},e.prototype.pop=function(t){var e=this.renderer.gl;0===this.getStackLength()?e.disable(e.STENCIL_TEST):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e}(Gt),Yt=function(){function t(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new h.y3,this.transform=null}return t.prototype.update=function(t,e,i,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);var n=this.renderer;n.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,n.globalUniforms.update(),n.shader.shader&&n.shader.syncUniformGroup(n.shader.shader.uniforms.globals)},t.prototype.calculateProjection=function(t,e,i,r){var n=this.projectionMatrix,s=r?-1:1;n.identity(),n.a=1/e.width*2,n.d=s*(1/e.height*2),n.tx=-1-e.x*n.a,n.ty=-s-e.y*n.d},t.prototype.setTransform=function(t){},t.prototype.destroy=function(){this.renderer=null},t}(),Ht=new h.Ae,Wt=new h.Ae,zt=function(){function t(t){this.renderer=t,this.clearColor=t._backgroundColorRgba,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new h.Ae,this.destinationFrame=new h.Ae,this.viewportFrame=new h.Ae}return t.prototype.bind=function(t,e,i){void 0===t&&(t=null);var r,n,s,o=this.renderer;this.current=t,t?(s=(r=t.baseTexture).resolution,e||(Ht.width=t.frame.width,Ht.height=t.frame.height,e=Ht),i||(Wt.x=t.frame.x,Wt.y=t.frame.y,Wt.width=e.width,Wt.height=e.height,i=Wt),n=r.framebuffer):(s=o.resolution,e||(Ht.width=o.screen.width,Ht.height=o.screen.height,e=Ht),i||((i=Ht).width=e.width,i.height=e.height));var a=this.viewportFrame;a.x=i.x*s,a.y=i.y*s,a.width=i.width*s,a.height=i.height*s,t||(a.y=o.view.height-(a.y+a.height)),a.ceil(),this.renderer.framebuffer.bind(n,a),this.renderer.projection.update(i,e,s,!n),t?this.renderer.mask.setMaskStack(r.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(e),this.destinationFrame.copyFrom(i)},t.prototype.clear=function(t,e){t=this.current?t||this.current.baseTexture.clearColor:t||this.clearColor;var i=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer.screen,n=i.width!==r.width||i.height!==r.height;if(n){var s=this.viewportFrame,o=s.x,a=s.y,h=s.width,l=s.height;o=Math.round(o),a=Math.round(a),h=Math.round(h),l=Math.round(l),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,a,h,l)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],e),n&&this.renderer.scissor.pop()},t.prototype.resize=function(){this.bind(null)},t.prototype.reset=function(){this.bind(null)},t.prototype.destroy=function(){this.renderer=null},t}();function qt(t,e,i,r,n){i.buffer.update(n)}var Kt={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Zt={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function $t(t){for(var e=t.map((function(t){return{data:t,offset:0,dataLen:0,dirty:0}})),i=0,r=0,n=0,s=0;s<e.length;s++){var o=e[s];if(i=Zt[o.data.type],o.data.size>1&&(i=Math.max(i,16)*o.data.size),o.dataLen=i,r%i!=0&&r<16){var a=r%i%16;r+=a,n+=a}r+i>16?(n=16*Math.ceil(n/16),o.offset=n,n+=i,r=i):(o.offset=n,r+=i,n+=i)}return{uboElements:e,size:n=16*Math.ceil(n/16)}}function Jt(t,e){var i=[];for(var r in t)e[r]&&i.push(e[r]);return i.sort((function(t,e){return t.index-e.index})),i}function Qt(t,e){if(!t.autoManage)return{size:0,syncFunc:qt};for(var i=$t(Jt(t.uniforms,e)),r=i.uboElements,n=i.size,s=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],o=0;o<r.length;o++){for(var a=r[o],h=t.uniforms[a.data.name],l=a.data.name,u=!1,c=0;c<Et.length;c++){var d=Et[c];if(d.codeUbo&&d.test(a.data,h)){s.push("offset = "+a.offset/4+";",Et[c].codeUbo(a.data.name,h)),u=!0;break}}if(!u)if(a.data.size>1){var p=yt(a.data.type),f=Math.max(Zt[a.data.type]/16,1),m=p/f,_=(4-m%4)%4;s.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+a.offset/4+";\n\n                t = 0;\n\n                for(var i=0; i < "+a.data.size*f+"; i++)\n                {\n                    for(var j = 0; j < "+m+"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += "+_+";\n                }\n\n                ")}else{var g=Kt[a.data.type];s.push("\n                cv = ud."+l+".value;\n                v = uv."+l+";\n                offset = "+a.offset/4+";\n                "+g+";\n                ")}}return s.push("\n       renderer.buffer.update(buffer);\n    "),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join("\n"))}}var te=function(){},ee=function(){function t(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return t.prototype.destroy=function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null},t}();function ie(t,e){var i=lt(t,t.VERTEX_SHADER,e.vertexSrc),r=lt(t,t.FRAGMENT_SHADER,e.fragmentSrc),n=t.createProgram();if(t.attachShader(n,i),t.attachShader(n,r),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||function(t,e,i,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(i,t.COMPILE_STATUS)||ut(t,i),t.getShaderParameter(r,t.COMPILE_STATUS)||ut(t,r),console.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,n,i,r),e.attributeData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),n=0;n<r;n++){var s=e.getActiveAttrib(t,n);if(0!==s.name.indexOf("gl_")){var o=Tt(e,s.type),a={type:o,name:s.name,size:yt(o),location:e.getAttribLocation(t,s.name)};i[s.name]=a}}return i}(n,t),e.uniformData=function(t,e){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),n=0;n<r;n++){var s=e.getActiveUniform(t,n),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),h=Tt(e,s.type);i[o]={name:o,index:n,type:h,size:s.size,isArray:a,value:dt(h,s.size)}}return i}(n,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){var s=Object.keys(e.attributeData);s.sort((function(t,e){return t>e?1:-1}));for(var o=0;o<s.length;o++)e.attributeData[s[o]].location=o,t.bindAttribLocation(n,o,s[o]);t.linkProgram(n)}t.deleteShader(i),t.deleteShader(r);var a={};for(var o in e.uniformData){var h=e.uniformData[o];a[o]={location:t.getUniformLocation(n,o),value:dt(h.type,h.size)}}return new ee(n,a)}var re=0,ne={textureCount:0,uboCount:0},se=function(){function t(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=re++}return t.prototype.systemCheck=function(){if(!function(){if("boolean"==typeof St)return St;try{var t=new Function("param1","param2","param3","return param1[param2] === param3;");St=!0===t({a:"b"},"a","b")}catch(t){St=!1}return St}())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")},t.prototype.contextChange=function(t){this.gl=t,this.reset()},t.prototype.bind=function(t,e){t.uniforms.globals=this.renderer.globalUniforms;var i=t.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),e||(ne.textureCount=0,ne.uboCount=0,this.syncUniformGroup(t.uniformGroup,ne)),r},t.prototype.setUniforms=function(t){var e=this.shader.program,i=e.glPrograms[this.renderer.CONTEXT_UID];e.syncUniforms(i.uniformData,t,this.renderer)},t.prototype.syncUniformGroup=function(t,e){var i=this.getGlProgram();t.static&&t.dirtyId===i.uniformDirtyGroups[t.id]||(i.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,i,e))},t.prototype.syncUniforms=function(t,e,i){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(e.uniformData,t.uniforms,this.renderer,i)},t.prototype.createSyncGroups=function(t){var e=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[e]||(this.cache[e]=function(t,e){var i,r=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var n in t.uniforms){var s=e[n];if(s){for(var o=t.uniforms[n],a=!1,h=0;h<Et.length;h++)if(Et[h].test(s,o)){r.push(Et[h].code(n,o)),a=!0;break}if(!a){var l=(1===s.size?wt:At)[s.type].replace("location",'ud["'+n+'"].location');r.push('\n            cu = ud["'+n+'"];\n            cv = cu.value;\n            v = uv["'+n+'"];\n            '+l+";")}}else(null===(i=t.uniforms[n])||void 0===i?void 0:i.group)&&(t.uniforms[n].ubo?r.push("\n                        renderer.shader.syncUniformBufferGroup(uv."+n+", '"+n+"');\n                    "):r.push("\n                        renderer.shader.syncUniformGroup(uv."+n+", syncData);\n                    "))}return new Function("ud","uv","renderer","syncData",r.join("\n"))}(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[e],t.syncUniforms[this.shader.program.id]},t.prototype.syncUniformBufferGroup=function(t,e){var i=this.getGlProgram();if(!t.static||0!==t.dirtyId||!i.uniformGroups[t.id]){t.dirtyId=0;var r=i.uniformGroups[t.id]||this.createSyncBufferGroup(t,i,e);t.buffer.update(),r(i.uniformData,t.uniforms,this.renderer,ne,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,i.uniformBufferBindings[e])},t.prototype.createSyncBufferGroup=function(t,e,i){var r=this.renderer.gl;this.renderer.buffer.bind(t.buffer);var n=this.gl.getUniformBlockIndex(e.program,i);e.uniformBufferBindings[i]=this.shader.uniformBindCount,r.uniformBlockBinding(e.program,n,this.shader.uniformBindCount),this.shader.uniformBindCount++;var s=this.getSignature(t,this.shader.program.uniformData,"ubo"),o=this._uboCache[s];if(o||(o=this._uboCache[s]=Qt(t,this.shader.program.uniformData)),t.autoManage){var a=new Float32Array(o.size/4);t.buffer.update(a)}return e.uniformGroups[t.id]=o.syncFunc,e.uniformGroups[t.id]},t.prototype.getSignature=function(t,e,i){var r=t.uniforms,n=[i+"-"];for(var s in r)n.push(s),e[s]&&n.push(e[s].type);return n.join("-")},t.prototype.getGlProgram=function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null},t.prototype.generateProgram=function(t){var e=this.gl,i=t.program,r=ie(e,i);return i.glPrograms[this.renderer.CONTEXT_UID]=r,r},t.prototype.reset=function(){this.program=null,this.shader=null},t.prototype.destroy=function(){this.renderer=null,this.destroyed=!0},t}(),oe=function(){function t(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=n.T$.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Nt,this.defaultState.blend=!0}return t.prototype.contextChange=function(t){this.gl=t,this.blendModes=function(t,e){return void 0===e&&(e=[]),e[n.T$.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.ADD]=[t.ONE,t.ONE],e[n.T$.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.NONE]=[0,0],e[n.T$.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[n.T$.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[n.T$.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[n.T$.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[n.T$.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[n.T$.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[n.T$.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[n.T$.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[n.T$.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[n.T$.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[n.T$.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}(t),this.set(this.defaultState),this.reset()},t.prototype.set=function(t){if(t=t||this.defaultState,this.stateId!==t.data){for(var e=this.stateId^t.data,i=0;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(i=0;i<this.checks.length;i++)this.checks[i](this,t)},t.prototype.forceState=function(t){t=t||this.defaultState;for(var e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data},t.prototype.setBlend=function(e){this.updateCheck(t.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)},t.prototype.setOffset=function(e){this.updateCheck(t.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)},t.prototype.setDepthTest=function(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)},t.prototype.setDepthMask=function(t){this.gl.depthMask(t)},t.prototype.setCullFace=function(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)},t.prototype.setFrontFace=function(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])},t.prototype.setBlendMode=function(t){if(t!==this.blendMode){this.blendMode=t;var e=this.blendModes[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}},t.prototype.setPolygonOffset=function(t,e){this.gl.polygonOffset(t,e)},t.prototype.reset=function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)},t.prototype.updateCheck=function(t,e){var i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)},t.checkBlendMode=function(t,e){t.setBlendMode(e.blendMode)},t.checkPolygonOffset=function(t,e){t.setPolygonOffset(1,e.polygonOffset)},t.prototype.destroy=function(){this.gl=null},t}(),ae=function(){function t(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=r.X.GC_MAX_IDLE,this.checkCountMax=r.X.GC_MAX_CHECK_COUNT,this.mode=r.X.GC_MODE}return t.prototype.postrender=function(){this.renderer.renderingToScreen&&(this.count++,this.mode!==n.UN.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))},t.prototype.run=function(){for(var t=this.renderer.texture,e=t.managedTextures,i=!1,r=0;r<e.length;r++){var n=e[r];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[r]=null,i=!0)}if(i){var s=0;for(r=0;r<e.length;r++)null!==e[r]&&(e[s++]=e[r]);e.length=s}},t.prototype.unload=function(t){var e=this.renderer.texture,i=t._texture;i&&!i.framebuffer&&e.destroyTexture(i);for(var r=t.children.length-1;r>=0;r--)this.unload(t.children[r])},t.prototype.destroy=function(){this.renderer=null},t}(),he=function(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=n.vK.UNSIGNED_BYTE,this.internalFormat=n.I2.RGBA,this.samplerType=0},le=function(){function t(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new g,this.hasIntegerTextures=!1}return t.prototype.contextChange=function(){var t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(t){var e,i,r,s,o,a,h,l,u,c,d,p,f,m,_,g,v,y,b,x,T,S,E;return"WebGL2RenderingContext"in self&&t instanceof self.WebGL2RenderingContext?((e={})[n.vK.UNSIGNED_BYTE]=((i={})[n.I2.RGBA]=t.RGBA8,i[n.I2.RGB]=t.RGB8,i[n.I2.RG]=t.RG8,i[n.I2.RED]=t.R8,i[n.I2.RGBA_INTEGER]=t.RGBA8UI,i[n.I2.RGB_INTEGER]=t.RGB8UI,i[n.I2.RG_INTEGER]=t.RG8UI,i[n.I2.RED_INTEGER]=t.R8UI,i[n.I2.ALPHA]=t.ALPHA,i[n.I2.LUMINANCE]=t.LUMINANCE,i[n.I2.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,i),e[n.vK.BYTE]=((r={})[n.I2.RGBA]=t.RGBA8_SNORM,r[n.I2.RGB]=t.RGB8_SNORM,r[n.I2.RG]=t.RG8_SNORM,r[n.I2.RED]=t.R8_SNORM,r[n.I2.RGBA_INTEGER]=t.RGBA8I,r[n.I2.RGB_INTEGER]=t.RGB8I,r[n.I2.RG_INTEGER]=t.RG8I,r[n.I2.RED_INTEGER]=t.R8I,r),e[n.vK.UNSIGNED_SHORT]=((s={})[n.I2.RGBA_INTEGER]=t.RGBA16UI,s[n.I2.RGB_INTEGER]=t.RGB16UI,s[n.I2.RG_INTEGER]=t.RG16UI,s[n.I2.RED_INTEGER]=t.R16UI,s[n.I2.DEPTH_COMPONENT]=t.DEPTH_COMPONENT16,s),e[n.vK.SHORT]=((o={})[n.I2.RGBA_INTEGER]=t.RGBA16I,o[n.I2.RGB_INTEGER]=t.RGB16I,o[n.I2.RG_INTEGER]=t.RG16I,o[n.I2.RED_INTEGER]=t.R16I,o),e[n.vK.UNSIGNED_INT]=((a={})[n.I2.RGBA_INTEGER]=t.RGBA32UI,a[n.I2.RGB_INTEGER]=t.RGB32UI,a[n.I2.RG_INTEGER]=t.RG32UI,a[n.I2.RED_INTEGER]=t.R32UI,a[n.I2.DEPTH_COMPONENT]=t.DEPTH_COMPONENT24,a),e[n.vK.INT]=((h={})[n.I2.RGBA_INTEGER]=t.RGBA32I,h[n.I2.RGB_INTEGER]=t.RGB32I,h[n.I2.RG_INTEGER]=t.RG32I,h[n.I2.RED_INTEGER]=t.R32I,h),e[n.vK.FLOAT]=((l={})[n.I2.RGBA]=t.RGBA32F,l[n.I2.RGB]=t.RGB32F,l[n.I2.RG]=t.RG32F,l[n.I2.RED]=t.R32F,l[n.I2.DEPTH_COMPONENT]=t.DEPTH_COMPONENT32F,l),e[n.vK.HALF_FLOAT]=((u={})[n.I2.RGBA]=t.RGBA16F,u[n.I2.RGB]=t.RGB16F,u[n.I2.RG]=t.RG16F,u[n.I2.RED]=t.R16F,u),e[n.vK.UNSIGNED_SHORT_5_6_5]=((c={})[n.I2.RGB]=t.RGB565,c),e[n.vK.UNSIGNED_SHORT_4_4_4_4]=((d={})[n.I2.RGBA]=t.RGBA4,d),e[n.vK.UNSIGNED_SHORT_5_5_5_1]=((p={})[n.I2.RGBA]=t.RGB5_A1,p),e[n.vK.UNSIGNED_INT_2_10_10_10_REV]=((f={})[n.I2.RGBA]=t.RGB10_A2,f[n.I2.RGBA_INTEGER]=t.RGB10_A2UI,f),e[n.vK.UNSIGNED_INT_10F_11F_11F_REV]=((m={})[n.I2.RGB]=t.R11F_G11F_B10F,m),e[n.vK.UNSIGNED_INT_5_9_9_9_REV]=((_={})[n.I2.RGB]=t.RGB9_E5,_),e[n.vK.UNSIGNED_INT_24_8]=((g={})[n.I2.DEPTH_STENCIL]=t.DEPTH24_STENCIL8,g),e[n.vK.FLOAT_32_UNSIGNED_INT_24_8_REV]=((v={})[n.I2.DEPTH_STENCIL]=t.DEPTH32F_STENCIL8,v),E=e):((y={})[n.vK.UNSIGNED_BYTE]=((b={})[n.I2.RGBA]=t.RGBA,b[n.I2.RGB]=t.RGB,b[n.I2.ALPHA]=t.ALPHA,b[n.I2.LUMINANCE]=t.LUMINANCE,b[n.I2.LUMINANCE_ALPHA]=t.LUMINANCE_ALPHA,b),y[n.vK.UNSIGNED_SHORT_5_6_5]=((x={})[n.I2.RGB]=t.RGB,x),y[n.vK.UNSIGNED_SHORT_4_4_4_4]=((T={})[n.I2.RGBA]=t.RGBA,T),y[n.vK.UNSIGNED_SHORT_5_5_5_1]=((S={})[n.I2.RGBA]=t.RGBA,S),E=y),E}(t);var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=e;for(var i=0;i<e;i++)this.boundTextures[i]=null;this.emptyTextures={};var r=new he(t.createTexture());for(t.bindTexture(t.TEXTURE_2D,r.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=r,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new he(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture),i=0;i<6;i++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);for(t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR),i=0;i<this.boundTextures.length;i++)this.bind(null,i)},t.prototype.bind=function(t,e){void 0===e&&(e=0);var i=this.gl;if((t=null==t?void 0:t.castToBaseTexture())&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;var r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[e]!==t&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId&&(this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),this.updateTexture(t)),this.boundTextures[e]=t}else this.currentLocation!==e&&(this.currentLocation=e,i.activeTexture(i.TEXTURE0+e)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[e]=null},t.prototype.reset=function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture},t.prototype.unbind=function(t){var e=this.gl,i=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(r=0;r<i.length;r++)i[r]===t&&(this.currentLocation!==r&&(e.activeTexture(e.TEXTURE0+r),this.currentLocation=r),e.bindTexture(t.target,this.emptyTextures[t.target].texture),i[r]=null)},t.prototype.ensureSamplerType=function(t){var e=this,i=e.boundTextures,r=e.hasIntegerTextures,s=e.CONTEXT_UID;if(r)for(var o=t-1;o>=0;--o){var a=i[o];a&&a._glTextures[s].samplerType!==n.oT.FLOAT&&this.renderer.texture.unbind(a)}},t.prototype.initTexture=function(t){var e=new he(this.gl.createTexture());return e.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=e,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),e},t.prototype.initTextureType=function(t,e){var i,r;e.internalFormat=null!==(r=null===(i=this.internalFormats[t.type])||void 0===i?void 0:i[t.format])&&void 0!==r?r:t.format,2===this.webGLVersion&&t.type===n.vK.HALF_FLOAT?e.type=this.gl.HALF_FLOAT:e.type=t.type},t.prototype.updateTexture=function(t){var e=t._glTextures[this.CONTEXT_UID];if(e){var i=this.renderer;if(this.initTextureType(t,e),t.resource&&t.resource.upload(i,t,e))e.samplerType!==n.oT.FLOAT&&(this.hasIntegerTextures=!0);else{var r=t.realWidth,s=t.realHeight,o=i.gl;(e.width!==r||e.height!==s||e.dirtyId<0)&&(e.width=r,e.height=s,o.texImage2D(t.target,0,e.internalFormat,r,s,0,t.format,e.type,null))}t.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(t),e.dirtyId=t.dirtyId}},t.prototype.destroyTexture=function(t,e){var i=this.gl;if((t=t.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(t),i.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!e)){var r=this.managedTextures.indexOf(t);-1!==r&&(0,s.removeItems)(this.managedTextures,r,1)}},t.prototype.updateTextureStyle=function(t){var e=t._glTextures[this.CONTEXT_UID];e&&(t.mipmap!==n.WB.POW2&&2===this.webGLVersion||t.isPowerOfTwo?e.mipmap=t.mipmap>=1:e.mipmap=!1,2===this.webGLVersion||t.isPowerOfTwo?e.wrapMode=t.wrapMode:e.wrapMode=n.Nt.CLAMP,t.resource&&t.resource.style(this.renderer,t,e)||this.setStyle(t,e),e.dirtyStyleId=t.dirtyStyleId)},t.prototype.setStyle=function(t,e){var i=this.gl;if(e.mipmap&&t.mipmap!==n.WB.ON_MANUAL&&i.generateMipmap(t.target),i.texParameteri(t.target,i.TEXTURE_WRAP_S,e.wrapMode),i.texParameteri(t.target,i.TEXTURE_WRAP_T,e.wrapMode),e.mipmap){i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===n.aH.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===n.aH.LINEAR){var s=Math.min(t.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(t.target,i.TEXTURE_MIN_FILTER,t.scaleMode===n.aH.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(t.target,i.TEXTURE_MAG_FILTER,t.scaleMode===n.aH.LINEAR?i.LINEAR:i.NEAREST)},t.prototype.destroy=function(){this.renderer=null},t}(),ue={__proto__:null,FilterSystem:J,BatchSystem:tt,ContextSystem:it,FramebufferSystem:st,GeometrySystem:at,MaskSystem:Bt,ScissorSystem:jt,StencilSystem:Vt,ProjectionSystem:Yt,RenderTextureSystem:zt,ShaderSystem:se,StateSystem:oe,TextureGCSystem:ae,TextureSystem:le},ce=new h.y3,de=function(t){function e(e,i){void 0===e&&(e=n.N3.UNKNOWN);var o=t.call(this)||this;return i=Object.assign({},r.X.RENDER_OPTIONS,i),o.options=i,o.type=e,o.screen=new h.Ae(0,0,i.width,i.height),o.view=i.view||document.createElement("canvas"),o.resolution=i.resolution||r.X.RESOLUTION,o.useContextAlpha=i.useContextAlpha,o.autoDensity=!!i.autoDensity,o.preserveDrawingBuffer=i.preserveDrawingBuffer,o.clearBeforeRender=i.clearBeforeRender,o._backgroundColor=0,o._backgroundColorRgba=[0,0,0,1],o._backgroundColorString="#000000",o.backgroundColor=i.backgroundColor||o._backgroundColor,o.backgroundAlpha=i.backgroundAlpha,void 0!==i.transparent&&((0,s.deprecation)("6.0.0","Option transparent is deprecated, please use backgroundAlpha instead."),o.useContextAlpha=i.transparent,o.backgroundAlpha=i.transparent?0:1),o._lastObjectRendered=null,o.plugins={},o}return d(e,t),e.prototype.initPlugins=function(t){for(var e in t)this.plugins[e]=new t[e](this)},Object.defineProperty(e.prototype,"width",{get:function(){return this.view.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.view.height},enumerable:!1,configurable:!0}),e.prototype.resize=function(t,e){this.view.width=Math.round(t*this.resolution),this.view.height=Math.round(e*this.resolution);var i=this.view.width/this.resolution,r=this.view.height/this.resolution;this.screen.width=i,this.screen.height=r,this.autoDensity&&(this.view.style.width=i+"px",this.view.style.height=r+"px"),this.emit("resize",i,r)},e.prototype.generateTexture=function(t,e,i,r){void 0===e&&(e={}),"number"==typeof e&&((0,s.deprecation)("6.1.0","generateTexture options (scaleMode, resolution, region) are now object options."),e={scaleMode:e,resolution:i,region:r});var n=e.region,o=function(t,e){var i={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(i[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(r=Object.getOwnPropertySymbols(t);n<r.length;n++)e.indexOf(r[n])<0&&(i[r[n]]=t[r[n]])}return i}(e,["region"]);0===(r=n||t.getLocalBounds(null,!0)).width&&(r.width=1),0===r.height&&(r.height=1);var a=U.create(p({width:r.width,height:r.height},o));return ce.tx=-r.x,ce.ty=-r.y,this.render(t,{renderTexture:a,clear:!1,transform:ce,skipUpdateTransform:!!t.parent}),a},e.prototype.destroy=function(t){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view);var i=this;i.plugins=null,i.type=n.N3.UNKNOWN,i.view=null,i.screen=null,i._tempDisplayObjectParent=null,i.options=null,this._backgroundColorRgba=null,this._backgroundColorString=null,this._lastObjectRendered=null},Object.defineProperty(e.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,s.hex2string)(t),(0,s.hex2rgb)(t,this._backgroundColorRgba)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backgroundAlpha",{get:function(){return this._backgroundColorRgba[3]},set:function(t){this._backgroundColorRgba[3]=t},enumerable:!1,configurable:!0}),e}(s.EventEmitter),pe=function(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0},fe=function(){function t(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return t.prototype.destroy=function(){this.renderer=null},t.prototype.contextChange=function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID},t.prototype.bind=function(t){var e=this.gl,i=this.CONTEXT_UID,r=t._glBuffers[i]||this.createGLBuffer(t);e.bindBuffer(t.type,r.buffer)},t.prototype.bindBufferBase=function(t,e){var i=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[e]!==t){var n=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[e]=t,i.bindBufferBase(i.UNIFORM_BUFFER,e,n.buffer)}},t.prototype.bindBufferRange=function(t,e,i){var r=this.gl,n=this.CONTEXT_UID;i=i||0;var s=t._glBuffers[n]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,e||0,s.buffer,256*i,256)},t.prototype.update=function(t){var e=this.gl,i=this.CONTEXT_UID,r=t._glBuffers[i];if(t._updateID!==r.updateID)if(r.updateID=t._updateID,e.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)e.bufferSubData(t.type,0,t.data);else{var n=t.static?e.STATIC_DRAW:e.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,e.bufferData(t.type,t.data,n)}},t.prototype.dispose=function(t,e){if(this.managedBuffers[t.id]){delete this.managedBuffers[t.id];var i=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),i&&(e||r.deleteBuffer(i.buffer),delete t._glBuffers[this.CONTEXT_UID])}},t.prototype.disposeAll=function(t){for(var e=Object.keys(this.managedBuffers),i=0;i<e.length;i++)this.dispose(this.managedBuffers[e[i]],t)},t.prototype.createGLBuffer=function(t){var e=this.CONTEXT_UID,i=this.gl;return t._glBuffers[e]=new pe(i.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[e]},t}(),me=function(t){function e(i){var r=t.call(this,n.N3.WEBGL,i)||this;return i=r.options,r.gl=null,r.CONTEXT_UID=0,r.runners={destroy:new o.R("destroy"),contextChange:new o.R("contextChange"),reset:new o.R("reset"),update:new o.R("update"),postrender:new o.R("postrender"),prerender:new o.R("prerender"),resize:new o.R("resize")},r.runners.contextChange.add(r),r.globalUniforms=new q({projectionMatrix:new h.y3},!0),r.addSystem(Bt,"mask").addSystem(it,"context").addSystem(oe,"state").addSystem(se,"shader").addSystem(le,"texture").addSystem(fe,"buffer").addSystem(at,"geometry").addSystem(st,"framebuffer").addSystem(jt,"scissor").addSystem(Vt,"stencil").addSystem(Yt,"projection").addSystem(ae,"textureGC").addSystem(J,"filter").addSystem(zt,"renderTexture").addSystem(tt,"batch"),r.initPlugins(e.__plugins),r.multisample=void 0,i.context?r.context.initFromContext(i.context):r.context.initFromOptions({alpha:!!r.useContextAlpha,antialias:i.antialias,premultipliedAlpha:r.useContextAlpha&&"notMultiplied"!==r.useContextAlpha,stencil:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,powerPreference:r.options.powerPreference}),r.renderingToScreen=!0,(0,s.sayHello)(2===r.context.webGLVersion?"WebGL 2":"WebGL 1"),r.resize(r.options.width,r.options.height),r}return d(e,t),e.create=function(t){if((0,s.isWebGLSupported)())return new e(t);throw new Error('WebGL unsupported in this browser, use "pixi.js-legacy" for fallback canvas2d support.')},e.prototype.contextChange=function(){var t,e=this.gl;if(1===this.context.webGLVersion){var i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i);t>=n.G5.HIGH?this.multisample=n.G5.HIGH:t>=n.G5.MEDIUM?this.multisample=n.G5.MEDIUM:t>=n.G5.LOW?this.multisample=n.G5.LOW:this.multisample=n.G5.NONE},e.prototype.addSystem=function(t,e){var i=new t(this);if(this[e])throw new Error('Whoops! The name "'+e+'" is already in use');for(var r in this[e]=i,this.runners)this.runners[r].add(i);return this},e.prototype.render=function(t,e){var i,r,n,o;if(e&&(e instanceof U?((0,s.deprecation)("6.0.0","Renderer#render arguments changed, use options instead."),i=e,r=arguments[2],n=arguments[3],o=arguments[4]):(i=e.renderTexture,r=e.clear,n=e.transform,o=e.skipUpdateTransform)),this.renderingToScreen=!i,this.runners.prerender.emit(),this.emit("prerender"),this.projection.transform=n,!this.context.isLost){if(i||(this._lastObjectRendered=t),!o){var a=t.enableTempParent();t.updateTransform(),t.disableTempParent(a)}this.renderTexture.bind(i),this.batch.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this.renderTexture.clear(),t.render(this),this.batch.currentRenderer.flush(),i&&i.baseTexture.update(),this.runners.postrender.emit(),this.projection.transform=null,this.emit("postrender")}},e.prototype.generateTexture=function(e,i,r,n){void 0===i&&(i={});var s=t.prototype.generateTexture.call(this,e,i,r,n);return this.framebuffer.blit(),s},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.runners.resize.emit(this.screen.height,this.screen.width)},e.prototype.reset=function(){return this.runners.reset.emit(),this},e.prototype.clear=function(){this.renderTexture.bind(),this.renderTexture.clear()},e.prototype.destroy=function(e){for(var i in this.runners.destroy.emit(),this.runners)this.runners[i].destroy();t.prototype.destroy.call(this,e),this.gl=null},Object.defineProperty(e.prototype,"extract",{get:function(){return(0,s.deprecation)("6.0.0","Renderer#extract has been deprecated, please use Renderer#plugins.extract instead."),this.plugins.extract},enumerable:!1,configurable:!0}),e.registerPlugin=function(t,i){e.__plugins=e.__plugins||{},e.__plugins[t]=i},e}(de);function _e(t){return me.create(t)}var ge="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",ve="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",ye=function(){function t(t){(0,s.deprecation)("6.1.0","System class is deprecated, implemement ISystem interface instead."),this.renderer=t}return t.prototype.destroy=function(){this.renderer=null},t}(),be=function(){this.texArray=null,this.blend=0,this.type=n.lg.TRIANGLES,this.start=0,this.size=0,this.data=null},xe=function(){function t(){this.elements=[],this.ids=[],this.count=0}return t.prototype.clear=function(){for(var t=0;t<this.count;t++)this.elements[t]=null;this.count=0},t}(),Te=function(){function t(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return Object.defineProperty(t.prototype,"int8View",{get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint8View",{get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int16View",{get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uint16View",{get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"int32View",{get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View},enumerable:!1,configurable:!0}),t.prototype.view=function(t){return this[t+"View"]},t.prototype.destroy=function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null},t.sizeOf=function(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(t+" isn't a valid view type")}},t}(),Se=function(t){function e(e){var i=t.call(this,e)||this;return i.shaderGenerator=null,i.geometryClass=null,i.vertexSize=null,i.state=Nt.for2d(),i.size=4*r.X.SPRITE_BATCH_SIZE,i._vertexCount=0,i._indexCount=0,i._bufferedElements=[],i._bufferedTextures=[],i._bufferSize=0,i._shader=null,i._packedGeometries=[],i._packedGeometryPoolSize=2,i._flushId=0,i._aBuffers={},i._iBuffers={},i.MAX_TEXTURES=1,i.renderer.on("prerender",i.onPrerender,i),e.runners.contextChange.add(i),i._dcIndex=0,i._aIndex=0,i._iIndex=0,i._attributeBuffer=null,i._indexBuffer=null,i._tempBoundTextures=[],i}return d(e,t),e.prototype.contextChange=function(){var t=this.renderer.gl;r.X.PREFER_ENV===n.Vi.WEBGL_LEGACY?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),r.X.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=Ot(this.MAX_TEXTURES,t)),this._shader=this.shaderGenerator.generateShader(this.MAX_TEXTURES);for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()},e.prototype.initFlushBuffers=function(){for(var t=e._drawCallPool,i=e._textureArrayPool,r=this.size/4,n=Math.floor(r/this.MAX_TEXTURES)+1;t.length<r;)t.push(new be);for(;i.length<n;)i.push(new xe);for(var s=0;s<this.MAX_TEXTURES;s++)this._tempBoundTextures[s]=null},e.prototype.onPrerender=function(){this._flushId=0},e.prototype.render=function(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)},e.prototype.buildTexturesAndDrawCalls=function(){var t=this._bufferedTextures,i=this.MAX_TEXTURES,r=e._textureArrayPool,n=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count,a=++g._globalBatch,h=0,l=r[0],u=0;n.copyBoundTextures(s,i);for(var c=0;c<this._bufferSize;++c){var d=t[c];t[c]=null,d._batchEnabled!==a&&(l.count>=i&&(n.boundArray(l,s,a,i),this.buildDrawCalls(l,u,c),u=c,l=r[++h],++a),d._batchEnabled=a,d.touched=o,l.elements[l.count++]=d)}for(l.count>0&&(n.boundArray(l,s,a,i),this.buildDrawCalls(l,u,this._bufferSize),++h,++a),c=0;c<s.length;c++)s[c]=null;g._globalBatch=a},e.prototype.buildDrawCalls=function(t,i,r){var n=this,o=n._bufferedElements,a=n._attributeBuffer,h=n._indexBuffer,l=n.vertexSize,u=e._drawCallPool,c=this._dcIndex,d=this._aIndex,p=this._iIndex,f=u[c];f.start=this._iIndex,f.texArray=t;for(var m=i;m<r;++m){var _=o[m],g=_._texture.baseTexture,v=s.premultiplyBlendMode[g.alphaMode?1:0][_.blendMode];o[m]=null,i<m&&f.blend!==v&&(f.size=p-f.start,i=m,(f=u[++c]).texArray=t,f.start=p),this.packInterleavedGeometry(_,a,h,d,p),d+=_.vertexData.length/2*l,p+=_.indices.length,f.blend=v}i<r&&(f.size=p-f.start,++c),this._dcIndex=c,this._aIndex=d,this._iIndex=p},e.prototype.bindAndClearTexArray=function(t){for(var e=this.renderer.texture,i=0;i<t.count;i++)e.bind(t.elements[i],t.ids[i]),t.elements[i]=null;t.count=0},e.prototype.updateGeometry=function(){var t=this,e=t._packedGeometries,i=t._attributeBuffer,n=t._indexBuffer;r.X.CAN_UPLOAD_SAME_BUFFER?(e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(i.rawBinaryData),e[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)},e.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,r=i.gl,n=i.state,s=e._drawCallPool,o=null,a=0;a<t;a++){var h=s[a],l=h.texArray,u=h.type,c=h.size,d=h.start,p=h.blend;o!==l&&(o=l,this.bindAndClearTexArray(l)),this.state.blendMode=p,n.set(this.state),r.drawElements(u,c,r.UNSIGNED_SHORT,2*d)}},e.prototype.flush=function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)},e.prototype.start=function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.MAX_TEXTURES),this.renderer.shader.bind(this._shader),r.X.CAN_UPLOAD_SAME_BUFFER&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),t.prototype.destroy.call(this)},e.prototype.getAttributeBuffer=function(t){var e=(0,s.nextPow2)(Math.ceil(t/8)),i=(0,s.log2)(e),r=8*e;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._aBuffers[r];return n||(this._aBuffers[r]=n=new Te(r*this.vertexSize*4)),n},e.prototype.getIndexBuffer=function(t){var e=(0,s.nextPow2)(Math.ceil(t/12)),i=(0,s.log2)(e),r=12*e;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);var n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(r)),n},e.prototype.packInterleavedGeometry=function(t,e,i,r,n){for(var o=e.uint32View,a=e.float32View,h=r/this.vertexSize,l=t.uvs,u=t.indices,c=t.vertexData,d=t._texture.baseTexture._batchLocation,p=Math.min(t.worldAlpha,1),f=p<1&&t._texture.baseTexture.alphaMode?(0,s.premultiplyTint)(t._tintRGB,p):t._tintRGB+(255*p<<24),m=0;m<c.length;m+=2)a[r++]=c[m],a[r++]=c[m+1],a[r++]=l[m],a[r++]=l[m+1],o[r++]=f,a[r++]=d;for(m=0;m<u.length;m++)i[n++]=h+u[m]},e._drawCallPool=[],e._textureArrayPool=[],e}(Q),Ee=function(){function t(t,e){if(this.vertexSrc=t,this.fragTemplate=e,this.programCache={},this.defaultGroupCache={},e.indexOf("%count%")<0)throw new Error('Fragment template must contain "%count%".');if(e.indexOf("%forloop%")<0)throw new Error('Fragment template must contain "%forloop%".')}return t.prototype.generateShader=function(t){if(!this.programCache[t]){for(var e=new Int32Array(t),i=0;i<t;i++)e[i]=i;this.defaultGroupCache[t]=q.from({uSamplers:e},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,""+t)).replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Rt(this.vertexSrc,r)}var n={tint:new Float32Array([1,1,1,1]),translationMatrix:new h.y3,default:this.defaultGroupCache[t]};return new Dt(this.programCache[t],n)},t.prototype.generateSampleSrc=function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return(e+="\n")+"\n"},t}(),we=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i._buffer=new B(null,e,!1),i._indexBuffer=new B(null,e,!0),i.addAttribute("aVertexPosition",i._buffer,2,!1,n.vK.FLOAT).addAttribute("aTextureCoord",i._buffer,2,!1,n.vK.FLOAT).addAttribute("aColor",i._buffer,4,!0,n.vK.UNSIGNED_BYTE).addAttribute("aTextureId",i._buffer,1,!0,n.vK.FLOAT).addIndex(i._indexBuffer),i}return d(e,t),e}(Y),Ae="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n",Ie="varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n",Ce=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:Ae,fragment:Ie,geometryClass:we,vertexSize:6},t),i=e.vertex,r=e.fragment,n=e.vertexSize,s=e.geometryClass;return function(t){function e(e){var o=t.call(this,e)||this;return o.shaderGenerator=new Ee(i,r),o.geometryClass=s,o.vertexSize=n,o}return d(e,t),e}(Se)},Object.defineProperty(t,"defaultVertexSrc",{get:function(){return Ae},enumerable:!1,configurable:!0}),Object.defineProperty(t,"defaultFragmentTemplate",{get:function(){return Ie},enumerable:!1,configurable:!0}),t}(),Oe=Ce.create(),Me={},Pe=function(t){Object.defineProperty(Me,t,{get:function(){return(0,s.deprecation)("6.0.0","PIXI.systems."+t+" has moved to PIXI."+t),I[t]}})};for(var Re in I)Pe(Re);var De={},Ne=function(t){Object.defineProperty(De,t,{get:function(){return(0,s.deprecation)("6.0.0","PIXI.resources."+t+" has moved to PIXI."+t),ue[t]}})};for(var Re in ue)Ne(Re)},2975:(t,e,i)=>{"use strict";i.d(e,{YZ:()=>o,W2:()=>P,s$:()=>C,Ql:()=>O});var r=i(9907),n=i(6617),s=i(8281);r.X.SORTABLE_CHILDREN=!1;var o=function(){function t(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?n.Ae.EMPTY:((t=t||new n.Ae(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addPointMatrix=function(t,e){var i=t.a,r=t.b,n=t.c,s=t.d,o=t.tx,a=t.ty,h=i*e.x+n*e.y+o,l=r*e.x+s*e.y+a;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,l),this.maxY=Math.max(this.maxY,l)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,s=t[0],o=t[1];e=s<e?s:e,i=o<i?o:i,r=s>r?s:r,n=o>n?o:n,e=(s=t[2])<e?s:e,i=(o=t[3])<i?o:i,r=s>r?s:r,n=o>n?o:n,e=(s=t[4])<e?s:e,i=(o=t[5])<i?o:i,r=s>r?s:r,n=o>n?o:n,e=(s=t[6])<e?s:e,i=(o=t[7])<i?o:i,r=s>r?s:r,n=o>n?o:n,this.minX=e,this.minY=i,this.maxX=r,this.maxY=n},t.prototype.addFrame=function(t,e,i,r,n){this.addFrameMatrix(t.worldTransform,e,i,r,n)},t.prototype.addFrameMatrix=function(t,e,i,r,n){var s=t.a,o=t.b,a=t.c,h=t.d,l=t.tx,u=t.ty,c=this.minX,d=this.minY,p=this.maxX,f=this.maxY,m=s*e+a*i+l,_=o*e+h*i+u;c=m<c?m:c,d=_<d?_:d,p=m>p?m:p,f=_>f?_:f,c=(m=s*r+a*i+l)<c?m:c,d=(_=o*r+h*i+u)<d?_:d,p=m>p?m:p,f=_>f?_:f,c=(m=s*e+a*n+l)<c?m:c,d=(_=o*e+h*n+u)<d?_:d,p=m>p?m:p,f=_>f?_:f,c=(m=s*r+a*n+l)<c?m:c,d=(_=o*r+h*n+u)<d?_:d,p=m>p?m:p,f=_>f?_:f,this.minX=c,this.minY=d,this.maxX=p,this.maxY=f},t.prototype.addVertexData=function(t,e,i){for(var r=this.minX,n=this.minY,s=this.maxX,o=this.maxY,a=e;a<i;a+=2){var h=t[a],l=t[a+1];r=h<r?h:r,n=l<n?l:n,s=h>s?h:s,o=l>o?l:o}this.minX=r,this.minY=n,this.maxX=s,this.maxY=o},t.prototype.addVertices=function(t,e,i,r){this.addVerticesMatrix(t.worldTransform,e,i,r)},t.prototype.addVerticesMatrix=function(t,e,i,r,n,s){void 0===n&&(n=0),void 0===s&&(s=n);for(var o=t.a,a=t.b,h=t.c,l=t.d,u=t.tx,c=t.ty,d=this.minX,p=this.minY,f=this.maxX,m=this.maxY,_=i;_<r;_+=2){var g=e[_],v=e[_+1],y=o*g+h*v+u,b=l*v+a*g+c;d=Math.min(d,y-n),f=Math.max(f,y+n),p=Math.min(p,b-s),m=Math.max(m,b+s)}this.minX=d,this.minY=p,this.maxX=f,this.maxY=m},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,s=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&r<=s){var o=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=r<a?r:a,this.maxX=n>h?n:h,this.maxY=s>l?s:l}},t.prototype.addBoundsMatrix=function(t,e){this.addFrameMatrix(e,t.minX,t.minY,t.maxX,t.maxY)},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,s=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&r<=s){var o=this.minX,a=this.minY,h=this.maxX,l=this.maxY;this.minX=i<o?i:o,this.minY=r<a?r:a,this.maxX=n>h?n:h,this.maxY=s>l?s:l}},t.prototype.pad=function(t,e){void 0===t&&(t=0),void 0===e&&(e=t),this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e)},t.prototype.addFramePad=function(t,e,i,r,n,s){t-=n,e-=s,i+=n,r+=s,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<e?this.minY:e,this.maxY=this.maxY>r?this.maxY:r},t}(),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function h(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var l,u,c,d,p,f,m,_,g,v,y,b,x,T,S,E,w,A,I,C=function(t){function e(){var e=t.call(this)||this;return e.tempDisplayObjectParent=null,e.transform=new n.wx,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new o,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return h(e,t),e.mixin=function(t){for(var i=Object.keys(t),r=0;r<i.length;++r){var n=i[r];Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t,n))}},Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),e||(this._boundsRect||(this._boundsRect=new n.Ae),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){t||(this._localBoundsRect||(this._localBoundsRect=new n.Ae),t=this._localBoundsRect),this._localBounds||(this._localBounds=new o);var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,s=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,t);return this.parent=i,this.transform=e,this._bounds=r,this._bounds.updateID+=this._boundsID-s,a},e.prototype.toGlobal=function(t,e,i){return void 0===i&&(i=!1),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(t,e,i,r,n,s,o,a,h){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===h&&(h=0),this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=s,this.skew.y=o,this.pivot.x=a,this.pivot.y=h,this},e.prototype.destroy=function(t){this.parent&&this.parent.removeChild(this),this.emit("destroyed"),this.removeAllListeners(),this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Object.defineProperty(e.prototype,"_tempDisplayObjectParent",{get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new O),this.tempDisplayObjectParent},enumerable:!1,configurable:!0}),e.prototype.enableTempParent=function(){var t=this.parent;return this.parent=this._tempDisplayObjectParent,t},e.prototype.disableTempParent=function(t){this.parent=t},Object.defineProperty(e.prototype,"x",{get:function(){return this.position.x},set:function(t){this.transform.position.x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.position.y},set:function(t){this.transform.position.y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldTransform",{get:function(){return this.transform.worldTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localTransform",{get:function(){return this.transform.localTransform},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this.transform.position},set:function(t){this.transform.position.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this.transform.scale},set:function(t){this.transform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pivot",{get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"skew",{get:function(){return this.transform.skew},set:function(t){this.transform.skew.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"angle",{get:function(){return this.transform.rotation*n.jl},set:function(t){this.transform.rotation=t*n.ZX},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},set:function(t){var e;this._mask!==t&&(this._mask&&((e=this._mask.maskObject||this._mask)._maskRefCount--,0===e._maskRefCount&&(e.renderable=!0,e.isMask=!1)),this._mask=t,this._mask&&(0===(e=this._mask.maskObject||this._mask)._maskRefCount&&(e.renderable=!1,e.isMask=!0),e._maskRefCount++))},enumerable:!1,configurable:!0}),e}(s.EventEmitter),O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sortDirty=null,e}return h(e,t),e}(C);function M(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}C.prototype.displayObjectUpdateTransform=C.prototype.updateTransform,function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(l||(l={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(u||(u={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(c||(c={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(d||(d={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(p||(p={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(f||(f={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(m||(m={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(_||(_={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(g||(g={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(v||(v={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(y||(y={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(b||(b={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(x||(x={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(T||(T={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(S||(S={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(E||(E={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(w||(w={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(A||(A={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(I||(I={}));var P=function(t){function e(){var e=t.call(this)||this;return e.children=[],e.sortableChildren=r.X.SORTABLE_CHILDREN,e.sortDirty=!1,e}return h(e,t),e.prototype.onChildrenChange=function(t){},e.prototype.addChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var r=0;r<e.length;r++)this.addChild(e[r]);else{var n=e[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);(0,s.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];if(e.length>1)for(var r=0;r<e.length;r++)this.removeChild(e[r]);else{var n=e[0],o=this.children.indexOf(n);if(-1===o)return null;n.parent=null,n.transform._parentID=-1,(0,s.removeItems)(this.children,o,1),this._boundsID++,this.onChildrenChange(o),n.emit("removed",this),this.emit("childRemoved",n,this,o)}return e[0]},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,s.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this.children.length);var i,r=t,n=e-r;if(n>0&&n<=e){i=this.children.splice(r,n);for(var s=0;s<i.length;++s)i[s].parent=null,i[s].transform&&(i[s].transform._parentID=-1);for(this._boundsID++,this.onChildrenChange(t),s=0;s<i.length;++s)i[s].emit("removed",this),this.emit("childRemoved",i[s],this,s);return i}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.sortChildren=function(){for(var t=!1,e=0,i=this.children.length;e<i;++e){var r=this.children[e];r._lastSortedIndex=e,t||0===r.zIndex||(t=!0)}t&&this.children.length>1&&this.children.sort(M),this.sortDirty=!1},e.prototype.updateTransform=function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];if(e.visible&&e.renderable)if(e.calculateBounds(),e._mask){var i=e._mask.maskObject||e._mask;i.calculateBounds(),this._bounds.addBoundsMask(e._bounds,i._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(e,i){void 0===i&&(i=!1);var r=t.prototype.getLocalBounds.call(this,e);if(!i)for(var n=0,s=this.children.length;n<s;++n){var o=this.children[n];o.visible&&o.updateTransform()}return r},e.prototype._calculateBounds=function(){},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].render(t)}},e.prototype.renderAdvanced=function(t){var e=this.filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r])}var n=e&&this._enabledFilters&&this._enabledFilters.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==w.NONE));n&&t.batch.flush(),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.push(this,this._enabledFilters),i&&t.mask.push(this,this._mask),this._render(t),r=0;for(var s=this.children.length;r<s;r++)this.children[r].render(t);n&&t.batch.flush(),i&&t.mask.pop(this),e&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype._render=function(t){},e.prototype.destroy=function(e){t.prototype.destroy.call(this),this.sortDirty=!1;var i="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(i)for(var n=0;n<r.length;++n)r[n].destroy(e)},Object.defineProperty(e.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t},enumerable:!1,configurable:!0}),e}(C);P.prototype.containerUpdateTransform=P.prototype.updateTransform},2028:(t,e,i)=>{"use strict";i.d(e,{ft:()=>c,wA:()=>u,TC:()=>B,iM:()=>R,RB:()=>U,$o:()=>n,S:()=>r,TD:()=>F,yR:()=>G});var r,n,s=i(331),o=i(6617),a=i(8281),h=i(6921),l=i(2975);!function(t){t.MITER="miter",t.BEVEL="bevel",t.ROUND="round"}(r||(r={})),function(t){t.BUTT="butt",t.ROUND="round",t.SQUARE="square"}(n||(n={}));var u={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(t,e){if(void 0===e&&(e=20),!this.adaptive||!t||isNaN(t))return e;var i=Math.ceil(t/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},c=function(){function t(){this.color=16777215,this.alpha=1,this.texture=s.xE.WHITE,this.matrix=null,this.visible=!1,this.reset()}return t.prototype.clone=function(){var e=new t;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e},t.prototype.reset=function(){this.color=16777215,this.alpha=1,this.texture=s.xE.WHITE,this.matrix=null,this.visible=!1},t.prototype.destroy=function(){this.texture=null,this.matrix=null},t}(),d=function(t,e){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function p(t,e){function i(){this.constructor=t}d(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var f={build:function(t){t.points=t.shape.points.slice()},triangulate:function(t,e){var i=t.points,r=t.holes,n=e.points,s=e.indices;if(i.length>=6){for(var o=[],h=0;h<r.length;h++){var l=r[h];o.push(i.length/2),i=i.concat(l.points)}var u=(0,a.earcut)(i,o,2);if(!u)return;var c=n.length/2;for(h=0;h<u.length;h+=3)s.push(u[h]+c),s.push(u[h+1]+c),s.push(u[h+2]+c);for(h=0;h<i.length;h++)n.push(i[h])}}},m={build:function(t){var e,i,r=t.shape,n=t.points,s=r.x,a=r.y;if(n.length=0,t.type===o.HS.CIRC)e=r.radius,i=r.radius;else{var h=t.shape;e=h.width,i=h.height}if(0!==e&&0!==i){var l=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(e+i));l/=2.3;for(var u=2*Math.PI/l,c=0;c<l-.5;c++)n.push(s+Math.sin(-u*c)*e,a+Math.cos(-u*c)*i);n.push(n[0],n[1])}},triangulate:function(t,e){var i=t.points,r=e.points,n=e.indices,s=r.length/2,o=s,a=t.shape,h=t.matrix,l=a.x,u=a.y;r.push(t.matrix?h.a*l+h.c*u+h.tx:l,t.matrix?h.b*l+h.d*u+h.ty:u);for(var c=0;c<i.length;c+=2)r.push(i[c],i[c+1]),n.push(s++,o,s)}},_={build:function(t){var e=t.shape,i=e.x,r=e.y,n=e.width,s=e.height,o=t.points;o.length=0,o.push(i,r,i+n,r,i+n,r+s,i,r+s)},triangulate:function(t,e){var i=t.points,r=e.points,n=r.length/2;r.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),e.indices.push(n,n+1,n+2,n+1,n+2,n+3)}};function g(t,e,i){return t+(e-t)*i}function v(t,e,i,r,n,s,o){void 0===o&&(o=[]);for(var a=o,h=0,l=0,u=0,c=0,d=0,p=0,f=0,m=0;f<=20;++f)h=g(t,i,m=f/20),l=g(e,r,m),u=g(i,n,m),c=g(r,s,m),d=g(h,u,m),p=g(l,c,m),0===f&&a[a.length-2]===d&&a[a.length-1]===p||a.push(d,p);return a}var y={build:function(t){var e=t.shape,i=t.points,r=e.x,n=e.y,s=e.width,o=e.height,a=Math.max(0,Math.min(e.radius,Math.min(s,o)/2));i.length=0,a?(v(r,n+a,r,n,r+a,n,i),v(r+s-a,n,r+s,n,r+s,n+a,i),v(r+s,n+o-a,r+s,n+o,r+s-a,n+o,i),v(r+a,n+o,r,n+o,r,n+o-a,i)):i.push(r,n,r+s,n,r+s,n+o,r,n+o)},triangulate:function(t,e){for(var i=t.points,r=e.points,n=e.indices,s=r.length/2,o=(0,a.earcut)(i,null,2),h=0,l=o.length;h<l;h+=3)n.push(o[h]+s),n.push(o[h+1]+s),n.push(o[h+2]+s);for(h=0,l=i.length;h<l;h++)r.push(i[h],i[++h])}};function b(t,e,i,r,n,s,o,a){var h,l;o?(h=r,l=-i):(h=-r,l=i);var u=t-i*n+h,c=e-r*n+l,d=t+i*s+h,p=e+r*s+l;return a.push(u,c),a.push(d,p),2}function x(t,e,i,r,n,s,o,a){var h=i-t,l=r-e,u=Math.atan2(h,l),c=Math.atan2(n-t,s-e);a&&u<c?u+=2*Math.PI:!a&&u>c&&(c+=2*Math.PI);var d=u,p=c-u,f=Math.abs(p),m=Math.sqrt(h*h+l*l),_=1+(15*f*Math.sqrt(m)/Math.PI>>0),g=p/_;if(d+=g,a){o.push(t,e),o.push(i,r);for(var v=1,y=d;v<_;v++,y+=g)o.push(t,e),o.push(t+Math.sin(y)*m,e+Math.cos(y)*m);o.push(t,e),o.push(n,s)}else{for(o.push(i,r),o.push(t,e),v=1,y=d;v<_;v++,y+=g)o.push(t+Math.sin(y)*m,e+Math.cos(y)*m),o.push(t,e);o.push(n,s),o.push(t,e)}return 2*_}function T(t,e){t.lineStyle.native?function(t,e){var i=0,r=t.shape,n=t.points||r.points,s=r.type!==o.HS.POLY||r.closeStroke;if(0!==n.length){var a=e.points,h=e.indices,l=n.length/2,u=a.length/2,c=u;for(a.push(n[0],n[1]),i=1;i<l;i++)a.push(n[2*i],n[2*i+1]),h.push(c,c+1),c++;s&&h.push(c,u)}}(t,e):function(t,e){var i=t.shape,s=t.points||i.points.slice(),a=e.closePointEps;if(0!==s.length){var h=t.lineStyle,l=new o.E9(s[0],s[1]),c=new o.E9(s[s.length-2],s[s.length-1]),d=i.type!==o.HS.POLY||i.closeStroke,p=Math.abs(l.x-c.x)<a&&Math.abs(l.y-c.y)<a;if(d){s=s.slice(),p&&(s.pop(),s.pop(),c.set(s[s.length-2],s[s.length-1]));var f=.5*(l.x+c.x),m=.5*(c.y+l.y);s.unshift(f,m),s.push(f,m)}var _=e.points,g=s.length/2,v=s.length,y=_.length/2,T=h.width/2,S=T*T,E=h.miterLimit*h.miterLimit,w=s[0],A=s[1],I=s[2],C=s[3],O=0,M=0,P=-(A-C),R=w-I,D=0,N=0,U=Math.sqrt(P*P+R*R);P/=U,R/=U,P*=T,R*=T;var F=h.alignment,L=2*(1-F),k=2*F;d||(h.cap===n.ROUND?v+=x(w-P*(L-k)*.5,A-R*(L-k)*.5,w-P*L,A-R*L,w+P*k,A+R*k,_,!0)+2:h.cap===n.SQUARE&&(v+=b(w,A,P,R,L,k,!0,_))),_.push(w-P*L,A-R*L),_.push(w+P*k,A+R*k);for(var B=1;B<g-1;++B){w=s[2*(B-1)],A=s[2*(B-1)+1],I=s[2*B],C=s[2*B+1],O=s[2*(B+1)],M=s[2*(B+1)+1],P=-(A-C),R=w-I,P/=U=Math.sqrt(P*P+R*R),R/=U,P*=T,R*=T,D=-(C-M),N=I-O,D/=U=Math.sqrt(D*D+N*N),N/=U,D*=T,N*=T;var G=I-w,X=A-C,j=I-O,V=M-C,Y=X*j-V*G,H=Y<0;if(Math.abs(Y)<.1)_.push(I-P*L,C-R*L),_.push(I+P*k,C+R*k);else{var W=(-P+w)*(-R+C)-(-P+I)*(-R+A),z=(-D+O)*(-N+C)-(-D+I)*(-N+M),q=(G*z-j*W)/Y,K=(V*W-X*z)/Y,Z=(q-I)*(q-I)+(K-C)*(K-C),$=I+(q-I)*L,J=C+(K-C)*L,Q=I-(q-I)*k,tt=C-(K-C)*k,et=H?L:k;Z<=Math.min(G*G+X*X,j*j+V*V)+et*et*S?h.join===r.BEVEL||Z/S>E?(H?(_.push($,J),_.push(I+P*k,C+R*k),_.push($,J),_.push(I+D*k,C+N*k)):(_.push(I-P*L,C-R*L),_.push(Q,tt),_.push(I-D*L,C-N*L),_.push(Q,tt)),v+=2):h.join===r.ROUND?H?(_.push($,J),_.push(I+P*k,C+R*k),v+=x(I,C,I+P*k,C+R*k,I+D*k,C+N*k,_,!0)+4,_.push($,J),_.push(I+D*k,C+N*k)):(_.push(I-P*L,C-R*L),_.push(Q,tt),v+=x(I,C,I-P*L,C-R*L,I-D*L,C-N*L,_,!1)+4,_.push(I-D*L,C-N*L),_.push(Q,tt)):(_.push($,J),_.push(Q,tt)):(_.push(I-P*L,C-R*L),_.push(I+P*k,C+R*k),h.join===r.BEVEL||Z/S>E||(h.join===r.ROUND?v+=H?x(I,C,I+P*k,C+R*k,I+D*k,C+N*k,_,!0)+2:x(I,C,I-P*L,C-R*L,I-D*L,C-N*L,_,!1)+2:(H?(_.push(Q,tt),_.push(Q,tt)):(_.push($,J),_.push($,J)),v+=2)),_.push(I-D*L,C-N*L),_.push(I+D*k,C+N*k),v+=2)}}w=s[2*(g-2)],A=s[2*(g-2)+1],I=s[2*(g-1)],P=-(A-(C=s[2*(g-1)+1])),R=w-I,P/=U=Math.sqrt(P*P+R*R),R/=U,P*=T,R*=T,_.push(I-P*L,C-R*L),_.push(I+P*k,C+R*k),d||(h.cap===n.ROUND?v+=x(I-P*(L-k)*.5,C-R*(L-k)*.5,I-P*L,C-R*L,I+P*k,C+R*k,_,!1)+2:h.cap===n.SQUARE&&(v+=b(I,C,P,R,L,k,!1,_)));var it=e.indices,rt=u.epsilon*u.epsilon;for(B=y;B<v+y-2;++B)w=_[2*B],A=_[2*B+1],I=_[2*(B+1)],C=_[2*(B+1)+1],O=_[2*(B+2)],M=_[2*(B+2)+1],Math.abs(w*(C-M)+I*(M-A)+O*(A-C))<rt||it.push(B,B+1,B+2)}}(t,e)}var S,E=function(){function t(){}return t.curveTo=function(t,e,i,r,n,s){var o=s[s.length-2],a=s[s.length-1]-e,h=o-t,l=r-e,u=i-t,c=Math.abs(a*u-h*l);if(c<1e-8||0===n)return s[s.length-2]===t&&s[s.length-1]===e||s.push(t,e),null;var d=a*a+h*h,p=l*l+u*u,f=a*l+h*u,m=n*Math.sqrt(d)/c,_=n*Math.sqrt(p)/c,g=m*f/d,v=_*f/p,y=m*u+_*h,b=m*l+_*a,x=h*(_+g),T=a*(_+g),S=u*(m+v),E=l*(m+v);return{cx:y+t,cy:b+e,radius:n,startAngle:Math.atan2(T-b,x-y),endAngle:Math.atan2(E-b,S-y),anticlockwise:h*l>u*a}},t.arc=function(t,e,i,r,n,s,a,h,l){for(var c=a-s,d=u._segmentsCount(Math.abs(c)*n,40*Math.ceil(Math.abs(c)/o._b)),p=c/(2*d),f=2*p,m=Math.cos(p),_=Math.sin(p),g=d-1,v=g%1/g,y=0;y<=g;++y){var b=p+s+f*(y+v*y),x=Math.cos(b),T=-Math.sin(b);l.push((m*x+_*T)*n+i,(m*-T+_*x)*n+r)}},t}(),w=function(){function t(){}return t.curveLength=function(t,e,i,r,n,s,o,a){for(var h=0,l=0,u=0,c=0,d=0,p=0,f=0,m=0,_=0,g=0,v=0,y=t,b=e,x=1;x<=10;++x)g=y-(m=(f=(p=(d=1-(l=x/10))*d)*d)*t+3*p*l*i+3*d*(u=l*l)*n+(c=u*l)*o),v=b-(_=f*e+3*p*l*r+3*d*u*s+c*a),y=m,b=_,h+=Math.sqrt(g*g+v*v);return h},t.curveTo=function(e,i,r,n,s,o,a){var h=a[a.length-2],l=a[a.length-1];a.length-=2;var c=u._segmentsCount(t.curveLength(h,l,e,i,r,n,s,o)),d=0,p=0,f=0,m=0,_=0;a.push(h,l);for(var g=1,v=0;g<=c;++g)f=(p=(d=1-(v=g/c))*d)*d,_=(m=v*v)*v,a.push(f*h+3*p*v*e+3*d*m*r+_*s,f*l+3*p*v*i+3*d*m*n+_*o)},t}(),A=function(){function t(){}return t.curveLength=function(t,e,i,r,n,s){var o=t-2*i+n,a=e-2*r+s,h=2*i-2*t,l=2*r-2*e,u=4*(o*o+a*a),c=4*(o*h+a*l),d=h*h+l*l,p=2*Math.sqrt(u+c+d),f=Math.sqrt(u),m=2*u*f,_=2*Math.sqrt(d),g=c/f;return(m*p+f*c*(p-_)+(4*d*u-c*c)*Math.log((2*f+g+p)/(g+_)))/(4*m)},t.curveTo=function(e,i,r,n,s){for(var o=s[s.length-2],a=s[s.length-1],h=u._segmentsCount(t.curveLength(o,a,e,i,r,n)),l=0,c=0,d=1;d<=h;++d){var p=d/h;l=o+(e-o)*p,c=a+(i-a)*p,s.push(l+(e+(r-e)*p-l)*p,c+(i+(n-i)*p-c)*p)}},t}(),I=function(){function t(){this.reset()}return t.prototype.begin=function(t,e,i){this.reset(),this.style=t,this.start=e,this.attribStart=i},t.prototype.end=function(t,e){this.attribSize=e-this.attribStart,this.size=t-this.start},t.prototype.reset=function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0},t}(),C=((S={})[o.HS.POLY]=f,S[o.HS.CIRC]=m,S[o.HS.ELIP]=m,S[o.HS.RECT]=_,S[o.HS.RREC]=y,S),O=[],M=[];function P(t){for(var e=t.points,i=0,r=0;r<e.length-2;r+=2)i+=(e[r+2]-e[r])*(e[r+3]+e[r+1]);return i>0}var R=function(){function t(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null),this.points=[],this.holes=[],this.shape=t,this.lineStyle=i,this.fillStyle=e,this.matrix=r,this.type=t.type}return t.prototype.clone=function(){return new t(this.shape,this.fillStyle,this.lineStyle,this.matrix)},t.prototype.destroy=function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null},t}(),D=new o.E9,N=new l.YZ,U=function(t){function e(){var e=t.call(this)||this;return e.closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new l.YZ,e.boundsDirty=-1,e}return p(e,t),Object.defineProperty(e.prototype,"bounds",{get:function(){return this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds},enumerable:!1,configurable:!0}),e.prototype.invalidate=function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),M.push(this.drawCalls[t]);for(this.drawCalls.length=0,t=0;t<this.batches.length;t++){var e=this.batches[t];e.reset(),O.push(e)}this.batches.length=0},e.prototype.clear=function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this},e.prototype.drawShape=function(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=null),void 0===r&&(r=null);var n=new R(t,e,i,r);return this.graphicsData.push(n),this.dirty++,this},e.prototype.drawHole=function(t,e){if(void 0===e&&(e=null),!this.graphicsData.length)return null;var i=new R(t,null,null,e),r=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=r.lineStyle,r.holes.push(i),this.dirty++,this},e.prototype.destroy=function(){t.prototype.destroy.call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null},e.prototype.containsPoint=function(t){for(var e=this.graphicsData,i=0;i<e.length;++i){var r=e[i];if(r.fillStyle.visible&&r.shape&&(r.matrix?r.matrix.applyInverse(t,D):D.copyFrom(t),r.shape.contains(D.x,D.y))){var n=!1;if(r.holes)for(var s=0;s<r.holes.length;s++)if(r.holes[s].shape.contains(D.x,D.y)){n=!0;break}if(!n)return!0}}return!1},e.prototype.updateBatches=function(t){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,i=this.graphicsData,r=null,n=null;this.batches.length>0&&(n=(r=this.batches[this.batches.length-1]).style);for(var s=this.shapeIndex;s<i.length;s++){this.shapeIndex++;var o=i[s],a=o.fillStyle,l=o.lineStyle;C[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix);for(var u=0;u<2;u++){var c=0===u?a:l;if(c.visible){var d=c.texture.baseTexture,p=this.indices.length,f=this.points.length/2;d.wrapMode=h.Nt.REPEAT,0===u?this.processFill(o):this.processLine(o);var m=this.points.length/2-f;0!==m&&(r&&!this._compareStyles(n,c)&&(r.end(p,f),r=null),r||((r=O.pop()||new I).begin(c,p,f),this.batches.push(r),n=c),this.addUvs(this.points,e,c.texture,f,m,c.matrix))}}}var _=this.indices.length,g=this.points.length/2;if(r&&r.end(_,g),0!==this.batches.length){if(this.indicesUint16&&this.indices.length===this.indicesUint16.length)this.indicesUint16.set(this.indices);else{var v=g>65535&&t;this.indicesUint16=v?new Uint32Array(this.indices):new Uint16Array(this.indices)}this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0},e.prototype._compareStyles=function(t,e){return!(!t||!e)&&t.texture.baseTexture===e.texture.baseTexture&&t.color+t.alpha===e.color+e.alpha&&!!t.native==!!e.native},e.prototype.validateBatching=function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var t=0,e=this.graphicsData.length;t<e;t++){var i=this.graphicsData[t],r=i.fillStyle,n=i.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(n&&!n.texture.baseTexture.valid)return!1}return!0},e.prototype.packBatches=function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var t=this.batches,e=0,i=t.length;e<i;e++)for(var r=t[e],n=0;n<r.size;n++){var s=r.start+n;this.indicesUint16[s]=this.indicesUint16[s]-r.attribStart}},e.prototype.isBatchable=function(){if(this.points.length>131070)return!1;for(var t=this.batches,i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<2*e.BATCHABLE_SIZE},e.prototype.buildDrawCalls=function(){for(var t=++s.VL._globalBatch,e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),M.push(this.drawCalls[e]);this.drawCalls.length=0;var i=this.colors,r=this.textureIds,n=M.pop();n||((n=new s.a$).texArray=new s.Ie),n.texArray.count=0,n.start=0,n.size=0,n.type=h.lg.TRIANGLES;var o=0,a=null,l=0,u=!1,c=h.lg.TRIANGLES,d=0;for(this.drawCalls.push(n),e=0;e<this.batches.length;e++){var p=this.batches[e],f=p.style,m=f.texture.baseTexture;u!==!!f.native&&(c=(u=!!f.native)?h.lg.LINES:h.lg.TRIANGLES,a=null,o=8,t++),a!==m&&(a=m,m._batchEnabled!==t&&(8===o&&(t++,o=0,n.size>0&&((n=M.pop())||((n=new s.a$).texArray=new s.Ie),this.drawCalls.push(n)),n.start=d,n.size=0,n.texArray.count=0,n.type=c),m.touched=1,m._batchEnabled=t,m._batchLocation=o,m.wrapMode=h.Nt.REPEAT,n.texArray.elements[n.texArray.count++]=m,o++)),n.size+=p.size,d+=p.size,l=m._batchLocation,this.addColors(i,f.color,f.alpha,p.attribSize,p.attribStart),this.addTextureIds(r,l,p.attribSize,p.attribStart)}s.VL._globalBatch=t,this.packAttributes()},e.prototype.packAttributes=function(){for(var t=this.points,e=this.uvs,i=this.colors,r=this.textureIds,n=new ArrayBuffer(3*t.length*4),s=new Float32Array(n),o=new Uint32Array(n),a=0,h=0;h<t.length/2;h++)s[a++]=t[2*h],s[a++]=t[2*h+1],s[a++]=e[2*h],s[a++]=e[2*h+1],o[a++]=i[h],s[a++]=r[h];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)},e.prototype.processFill=function(t){t.holes.length?(this.processHoles(t.holes),f.triangulate(t,this)):C[t.type].triangulate(t,this)},e.prototype.processLine=function(t){T(t,this);for(var e=0;e<t.holes.length;e++)T(t.holes[e],this)},e.prototype.processHoles=function(t){for(var e=0;e<t.length;e++){var i=t[e];C[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}},e.prototype.calculateBounds=function(){var t=this._bounds,e=N,i=o.y3.IDENTITY;this._bounds.clear(),e.clear();for(var r=0;r<this.graphicsData.length;r++){var n=this.graphicsData[r],s=n.shape,a=n.type,h=n.lineStyle,l=n.matrix||o.y3.IDENTITY,u=0;if(h&&h.visible){var c=h.alignment;u=h.width,a===o.HS.POLY?P(s)?u*=1-c:u*=c:u*=Math.max(0,c)}if(i!==l&&(e.isEmpty()||(t.addBoundsMatrix(e,i),e.clear()),i=l),a===o.HS.RECT||a===o.HS.RREC){var d=s;e.addFramePad(d.x,d.y,d.x+d.width,d.y+d.height,u,u)}else if(a===o.HS.CIRC){var p=s;e.addFramePad(p.x,p.y,p.x,p.y,p.radius+u,p.radius+u)}else if(a===o.HS.ELIP){var f=s;e.addFramePad(f.x,f.y,f.x,f.y,f.width+u,f.height+u)}else{var m=s;t.addVerticesMatrix(i,m.points,0,m.points.length,u,u)}}e.isEmpty()||t.addBoundsMatrix(e,i),t.pad(this.boundsPadding,this.boundsPadding)},e.prototype.transformPoints=function(t,e){for(var i=0;i<t.length/2;i++){var r=t[2*i],n=t[2*i+1];t[2*i]=e.a*r+e.c*n+e.tx,t[2*i+1]=e.b*r+e.d*n+e.ty}},e.prototype.addColors=function(t,e,i,r,n){void 0===n&&(n=0);var s=(e>>16)+(65280&e)+((255&e)<<16),o=(0,a.premultiplyTint)(s,i);t.length=Math.max(t.length,n+r);for(var h=0;h<r;h++)t[n+h]=o},e.prototype.addTextureIds=function(t,e,i,r){void 0===r&&(r=0),t.length=Math.max(t.length,r+i);for(var n=0;n<i;n++)t[r+n]=e},e.prototype.addUvs=function(t,e,i,r,n,s){void 0===s&&(s=null);for(var o=0,a=e.length,h=i.frame;o<n;){var l=t[2*(r+o)],u=t[2*(r+o)+1];if(s){var c=s.a*l+s.c*u+s.tx;u=s.b*l+s.d*u+s.ty,l=c}o++,e.push(l/h.width,u/h.height)}var d=i.baseTexture;(h.width<d.width||h.height<d.height)&&this.adjustUvs(e,i,a,n)},e.prototype.adjustUvs=function(t,e,i,r){for(var n=e.baseTexture,s=1e-6,o=i+2*r,a=e.frame,h=a.width/n.width,l=a.height/n.height,u=a.x/a.width,c=a.y/a.height,d=Math.floor(t[i]+s),p=Math.floor(t[i+1]+s),f=i+2;f<o;f+=2)d=Math.min(d,Math.floor(t[f]+s)),p=Math.min(p,Math.floor(t[f+1]+s));for(u-=d,c-=p,f=i;f<o;f+=2)t[f]=(t[f]+u)*h,t[f+1]=(t[f+1]+c)*l},e.BATCHABLE_SIZE=100,e}(s.JZ),F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.width=0,e.alignment=.5,e.native=!1,e.cap=n.BUTT,e.join=r.MITER,e.miterLimit=10,e}return p(e,t),e.prototype.clone=function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t},e.prototype.reset=function(){t.prototype.reset.call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1},e}(c),L=new Float32Array(3),k={},B=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i.shader=null,i.pluginName="batch",i.currentPath=null,i.batches=[],i.batchTint=-1,i.batchDirty=-1,i.vertexData=null,i._fillStyle=new c,i._lineStyle=new F,i._matrix=null,i._holeMode=!1,i.state=s.ZM.for2d(),i._geometry=e||new U,i._geometry.refCount++,i._transformID=-1,i.tint=16777215,i.blendMode=h.T$.NORMAL,i}return p(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},enumerable:!1,configurable:!0}),e.prototype.clone=function(){return this.finishPoly(),new e(this._geometry)},Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fill",{get:function(){return this._fillStyle},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"line",{get:function(){return this._lineStyle},enumerable:!1,configurable:!0}),e.prototype.lineStyle=function(t,e,i,r,n){return void 0===t&&(t=null),void 0===e&&(e=0),void 0===i&&(i=1),void 0===r&&(r=.5),void 0===n&&(n=!1),"number"==typeof t&&(t={width:t,color:e,alpha:i,alignment:r,native:n}),this.lineTextureStyle(t)},e.prototype.lineTextureStyle=function(t){t=Object.assign({width:0,texture:s.xE.WHITE,color:t&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:n.BUTT,join:r.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();var e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this},e.prototype.startPoly=function(){if(this.currentPath){var t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new o.mg,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new o.mg,this.currentPath.closeStroke=!1},e.prototype.finishPoly=function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)},e.prototype.moveTo=function(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this},e.prototype.lineTo=function(t,e){this.currentPath||this.moveTo(0,0);var i=this.currentPath.points,r=i[i.length-2],n=i[i.length-1];return r===t&&n===e||i.push(t,e),this},e.prototype._initCurve=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[t,e]):this.moveTo(t,e)},e.prototype.quadraticCurveTo=function(t,e,i,r){this._initCurve();var n=this.currentPath.points;return 0===n.length&&this.moveTo(0,0),A.curveTo(t,e,i,r,n),this},e.prototype.bezierCurveTo=function(t,e,i,r,n,s){return this._initCurve(),w.curveTo(t,e,i,r,n,s,this.currentPath.points),this},e.prototype.arcTo=function(t,e,i,r,n){this._initCurve(t,e);var s=this.currentPath.points,o=E.curveTo(t,e,i,r,n,s);if(o){var a=o.cx,h=o.cy,l=o.radius,u=o.startAngle,c=o.endAngle,d=o.anticlockwise;this.arc(a,h,l,u,c,d)}return this},e.prototype.arc=function(t,e,i,r,n,s){if(void 0===s&&(s=!1),r===n)return this;if(!s&&n<=r?n+=o._b:s&&r<=n&&(r+=o._b),0==n-r)return this;var a=t+Math.cos(r)*i,h=e+Math.sin(r)*i,l=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var c=Math.abs(u[u.length-2]-a),d=Math.abs(u[u.length-1]-h);c<l&&d<l||u.push(a,h)}else this.moveTo(a,h),u=this.currentPath.points;return E.arc(a,h,t,e,i,r,n,s,u),this},e.prototype.beginFill=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1),this.beginTextureFill({texture:s.xE.WHITE,color:t,alpha:e})},e.prototype.beginTextureFill=function(t){t=Object.assign({texture:s.xE.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();var e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this},e.prototype.endFill=function(){return this.finishPoly(),this._fillStyle.reset(),this},e.prototype.drawRect=function(t,e,i,r){return this.drawShape(new o.Ae(t,e,i,r))},e.prototype.drawRoundedRect=function(t,e,i,r,n){return this.drawShape(new o.c9(t,e,i,r,n))},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new o.Cd(t,e,i))},e.prototype.drawEllipse=function(t,e,i,r){return this.drawShape(new o.Pj(t,e,i,r))},e.prototype.drawPolygon=function(){for(var t,e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];var n=!0,s=i[0];s.points?(n=s.closeStroke,t=s.points):t=Array.isArray(i[0])?i[0]:i;var a=new o.mg(t);return a.closeStroke=n,this.drawShape(a),this},e.prototype.drawShape=function(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this},e.prototype.clear=function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this},e.prototype.isFastRect=function(){var t=this._geometry.graphicsData;return!(1!==t.length||t[0].shape.type!==o.HS.RECT||t[0].holes.length||t[0].lineStyle.visible&&t[0].lineStyle.width)},e.prototype._render=function(t){this.finishPoly();var e=this._geometry,i=t.context.supports.uint32Indices;e.updateBatches(i),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))},e.prototype._populateBatches=function(){var t=this._geometry,e=this.blendMode,i=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(t.points);for(var r=0;r<i;r++){var n=t.batches[r],s=n.style.color,o=new Float32Array(this.vertexData.buffer,4*n.attribStart*2,2*n.attribSize),h=new Float32Array(t.uvsFloat32.buffer,4*n.attribStart*2,2*n.attribSize),l={vertexData:o,blendMode:e,indices:new Uint16Array(t.indicesUint16.buffer,2*n.start,n.size),uvs:h,_batchRGB:(0,a.hex2rgb)(s),_tintRGB:s,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[r]=l}},e.prototype._renderBatched=function(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var e=0,i=this.batches.length;e<i;e++){var r=this.batches[e];r.worldAlpha=this.worldAlpha*r.alpha,t.plugins[this.pluginName].render(r)}}},e.prototype._renderDirect=function(t){var e=this._resolveDirectShader(t),i=this._geometry,r=this.tint,n=this.worldAlpha,s=e.uniforms,o=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(r>>16&255)/255*n,s.tint[1]=(r>>8&255)/255*n,s.tint[2]=(255&r)/255*n,s.tint[3]=n,t.shader.bind(e),t.geometry.bind(i,e),t.state.set(this.state);for(var a=0,h=o.length;a<h;a++)this._renderDrawCallDirect(t,i.drawCalls[a])},e.prototype._renderDrawCallDirect=function(t,e){for(var i=e.texArray,r=e.type,n=e.size,s=e.start,o=i.count,a=0;a<o;a++)t.texture.bind(i.elements[a],a);t.geometry.draw(r,n,s)},e.prototype._resolveDirectShader=function(t){var e=this.shader,i=this.pluginName;if(!e){if(!k[i]){for(var r=t.plugins.batch.MAX_TEXTURES,n=new Int32Array(r),a=0;a<r;a++)n[a]=a;var h={tint:new Float32Array([1,1,1,1]),translationMatrix:new o.y3,default:s.oo.from({uSamplers:n},!0)},l=t.plugins[i]._shader.program;k[i]=new s.ex(l,h)}e=k[i]}return e},e.prototype._calculateBounds=function(){this.finishPoly();var t=this._geometry;if(t.graphicsData.length){var e=t.bounds,i=e.minX,r=e.minY,n=e.maxX,s=e.maxY;this._bounds.addFrame(this.transform,i,r,n,s)}},e.prototype.containsPoint=function(t){return this.worldTransform.applyInverse(t,e._TEMP_POINT),this._geometry.containsPoint(e._TEMP_POINT)},e.prototype.calculateTints=function(){if(this.batchTint!==this.tint){this.batchTint=this.tint;for(var t=(0,a.hex2rgb)(this.tint,L),e=0;e<this.batches.length;e++){var i=this.batches[e],r=i._batchRGB,n=(t[0]*r[0]*255<<16)+(t[1]*r[1]*255<<8)+(0|t[2]*r[2]*255);i._tintRGB=(n>>16)+(65280&n)+((255&n)<<16)}}},e.prototype.calculateVertices=function(){var t=this.transform._worldID;if(this._transformID!==t){this._transformID=t;for(var e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,s=e.d,o=e.tx,a=e.ty,h=this._geometry.points,l=this.vertexData,u=0,c=0;c<h.length;c+=2){var d=h[c],p=h[c+1];l[u++]=i*d+n*p+o,l[u++]=s*p+r*d+a}}},e.prototype.closePath=function(){var t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this},e.prototype.setMatrix=function(t){return this._matrix=t,this},e.prototype.beginHole=function(){return this.finishPoly(),this._holeMode=!0,this},e.prototype.endHole=function(){return this.finishPoly(),this._holeMode=!1,this},e.prototype.destroy=function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,t.prototype.destroy.call(this,e)},e._TEMP_POINT=new o.E9,e}(l.W2),G={buildPoly:f,buildCircle:m,buildRectangle:_,buildRoundedRectangle:y,buildLine:T,ArcUtils:E,BezierUtils:w,QuadraticUtils:A,BatchPart:I,FILL_COMMANDS:C,BATCH_POOL:O,DRAW_CALL_POOL:M}},3600:(t,e,i)=>{"use strict";i.d(e,{LP:()=>b,aN:()=>y,kC:()=>p,dp:()=>x});var r=i(331),n=function(){function t(t,e,i){void 0===e&&(e=!1),this._fn=t,this._once=e,this._thisArg=i,this._next=this._prev=this._owner=null}return t.prototype.detach=function(){return null!==this._owner&&(this._owner.detach(this),!0)},t}();function s(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var o=function(){function t(){this._head=this._tail=void 0}return t.prototype.handlers=function(t){void 0===t&&(t=!1);var e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i},t.prototype.has=function(t){if(!(t instanceof n))throw new Error("MiniSignal#has(): First arg must be a SignalBinding object.");return t._owner===this},t.prototype.dispatch=function(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var r=this._head;if(!r)return!1;for(;r;)r._once&&this.detach(r),r._fn.apply(r._thisArg,e),r=r._next;return!0},t.prototype.add=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new n(t,!1,e))},t.prototype.once=function(t,e){if(void 0===e&&(e=null),"function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new n(t,!0,e))},t.prototype.detach=function(t){if(!(t instanceof n))throw new Error("MiniSignal#detach(): First arg must be a SignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this},t.prototype.detachAll=function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this},t}();function a(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[e.strictMode?"strict":"loose"].exec(t),n={},s=14;s--;)n[i.key[s]]=r[s]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,(function(t,e,r){e&&(n[i.q.name][e]=r)})),n}var h=!(!self.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null;function u(){}function c(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function d(t){return t.toString().replace("object ","")}var p=function(){function t(e,i,r){if(this._dequeue=u,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=null,this._boundOnError=null,this._boundOnProgress=null,this._boundOnTimeout=null,this._boundXhrOnError=null,this._boundXhrOnTimeout=null,this._boundXhrOnAbort=null,this._boundXhrOnLoad=null,"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=u,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new o,this.onProgress=new o,this.onComplete=new o,this.onAfterMiddleware=new o}return t.setExtensionLoadType=function(e,i){c(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){c(t._xhrTypeMap,e,i)},Object.defineProperty(t.prototype,"isDataUrl",{get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isComplete",{get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isLoading",{get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)},enumerable:!1,configurable:!0}),t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(i)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:h&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==self.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==self.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else e=this.metadata.mimeType,this.data.appendChild(this._createSource(t,this.url,Array.isArray(e)?e[0]:e));this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new self.XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=i,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(d(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(d(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(d(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===r&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(self.DOMParser){var n=new DOMParser;this.data=n.parseFromString(i,"text/xml")}else{var s=document.createElement("div");s.innerHTML=i,this.data=s}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(self.origin!==self.location.origin)return"anonymous";e=e||self.location,l||(l=document.createElement("a")),l.href=t;var i=a(l.href,{strictMode:!0}),r=!i.port&&""===e.port||i.port===e.port,n=i.protocol?i.protocol+":":"";return i.host===e.hostname&&r&&n===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(t){void 0===t&&(t=this.url);var e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var r=t.indexOf("?"),n=t.indexOf("#"),s=Math.min(r>-1?r:t.length,n>-1?n:t.length);e=(t=t.substring(0,s)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},t}();function f(){}function m(t){return function(){for(var e=arguments,i=[],r=0;r<arguments.length;r++)i[r]=e[r];if(null===t)throw new Error("Callback was already called.");var n=t;t=null,n.apply(this,i)}}!function(t){var e,i,r,n;(n=t.STATUS_FLAGS||(t.STATUS_FLAGS={}))[n.NONE=0]="NONE",n[n.DATA_URL=1]="DATA_URL",n[n.COMPLETE=2]="COMPLETE",n[n.LOADING=4]="LOADING",(r=t.TYPE||(t.TYPE={}))[r.UNKNOWN=0]="UNKNOWN",r[r.JSON=1]="JSON",r[r.XML=2]="XML",r[r.IMAGE=3]="IMAGE",r[r.AUDIO=4]="AUDIO",r[r.VIDEO=5]="VIDEO",r[r.TEXT=6]="TEXT",(i=t.LOAD_TYPE||(t.LOAD_TYPE={}))[i.XHR=1]="XHR",i[i.IMAGE=2]="IMAGE",i[i.AUDIO=3]="AUDIO",i[i.VIDEO=4]="VIDEO",(e=t.XHR_RESPONSE_TYPE||(t.XHR_RESPONSE_TYPE={})).DEFAULT="text",e.BUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text",t._loadTypeMap={gif:t.LOAD_TYPE.IMAGE,png:t.LOAD_TYPE.IMAGE,bmp:t.LOAD_TYPE.IMAGE,jpg:t.LOAD_TYPE.IMAGE,jpeg:t.LOAD_TYPE.IMAGE,tif:t.LOAD_TYPE.IMAGE,tiff:t.LOAD_TYPE.IMAGE,webp:t.LOAD_TYPE.IMAGE,tga:t.LOAD_TYPE.IMAGE,svg:t.LOAD_TYPE.IMAGE,"svg+xml":t.LOAD_TYPE.IMAGE,mp3:t.LOAD_TYPE.AUDIO,ogg:t.LOAD_TYPE.AUDIO,wav:t.LOAD_TYPE.AUDIO,mp4:t.LOAD_TYPE.VIDEO,webm:t.LOAD_TYPE.VIDEO},t._xhrTypeMap={xhtml:t.XHR_RESPONSE_TYPE.DOCUMENT,html:t.XHR_RESPONSE_TYPE.DOCUMENT,htm:t.XHR_RESPONSE_TYPE.DOCUMENT,xml:t.XHR_RESPONSE_TYPE.DOCUMENT,tmx:t.XHR_RESPONSE_TYPE.DOCUMENT,svg:t.XHR_RESPONSE_TYPE.DOCUMENT,tsx:t.XHR_RESPONSE_TYPE.DOCUMENT,gif:t.XHR_RESPONSE_TYPE.BLOB,png:t.XHR_RESPONSE_TYPE.BLOB,bmp:t.XHR_RESPONSE_TYPE.BLOB,jpg:t.XHR_RESPONSE_TYPE.BLOB,jpeg:t.XHR_RESPONSE_TYPE.BLOB,tif:t.XHR_RESPONSE_TYPE.BLOB,tiff:t.XHR_RESPONSE_TYPE.BLOB,webp:t.XHR_RESPONSE_TYPE.BLOB,tga:t.XHR_RESPONSE_TYPE.BLOB,json:t.XHR_RESPONSE_TYPE.JSON,text:t.XHR_RESPONSE_TYPE.TEXT,txt:t.XHR_RESPONSE_TYPE.TEXT,ttf:t.XHR_RESPONSE_TYPE.BUFFER,otf:t.XHR_RESPONSE_TYPE.BUFFER},t.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="}(p||(p={}));var _=function(t,e){this.data=t,this.callback=e},g=function(){function t(t,e){var i=this;if(void 0===e&&(e=1),this.workers=0,this.saturated=f,this.unsaturated=f,this.empty=f,this.drain=f,this.error=f,this.started=!1,this.paused=!1,this._tasks=[],this._insert=function(t,e,r){if(r&&"function"!=typeof r)throw new Error("task callback must be a function");if(i.started=!0,null==t&&i.idle())setTimeout((function(){return i.drain()}),1);else{var n=new _(t,"function"==typeof r?r:f);e?i._tasks.unshift(n):i._tasks.push(n),setTimeout(i.process,1)}},this.process=function(){for(;!i.paused&&i.workers<i.concurrency&&i._tasks.length;){var t=i._tasks.shift();0===i._tasks.length&&i.empty(),i.workers+=1,i.workers===i.concurrency&&i.saturated(),i._worker(t.data,m(i._next(t)))}},this._worker=t,0===e)throw new Error("Concurrency must not be zero");this.concurrency=e,this.buffer=e/4}return t.prototype._next=function(t){var e=this;return function(){for(var i=arguments,r=[],n=0;n<arguments.length;n++)r[n]=i[n];e.workers-=1,t.callback.apply(t,r),null!=r[0]&&e.error(r[0],t.data),e.workers<=e.concurrency-e.buffer&&e.unsaturated(),e.idle()&&e.drain(),e.process()}},t.prototype.push=function(t,e){this._insert(t,!1,e)},t.prototype.kill=function(){this.workers=0,this.drain=f,this.started=!1,this._tasks=[]},t.prototype.unshift=function(t,e){this._insert(t,!0,e)},t.prototype.length=function(){return this._tasks.length},t.prototype.running=function(){return this.workers},t.prototype.idle=function(){return this._tasks.length+this.workers===0},t.prototype.pause=function(){!0!==this.paused&&(this.paused=!0)},t.prototype.resume=function(){if(!1!==this.paused){this.paused=!1;for(var t=1;t<=this.concurrency;t++)this.process()}},t.eachSeries=function(t,e,i,r){var n=0,s=t.length;!function o(a){a||n===s?i&&i(a):r?setTimeout((function(){e(t[n++],o)}),1):e(t[n++],o)}()},t.queue=function(e,i){return new t(e,i)},t}(),v=/(#[\w-]+)?$/,y=function(){function t(e,i){var r=this;void 0===e&&(e=""),void 0===i&&(i=10),this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this.resources={},this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return r._loadResource(t,e)},this._queue=g.queue(this._boundLoadResource,i),this._queue.pause(),this.resources={},this.onProgress=new o,this.onError=new o,this.onLoad=new o,this.onStart=new o,this.onComplete=new o;for(var n=0;n<t._plugins.length;++n){var s=t._plugins[n],a=s.pre,h=s.use;a&&this.pre(a),h&&this.use(h)}this._protected=!1}return t.prototype._add=function(t,e,i,r){if(this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new p(t,e,i),"function"==typeof r&&this.resources[t].onAfterMiddleware.once(r),this.loading){for(var n=i.parentResource,s=[],o=0;o<n.children.length;++o)n.children[o].isComplete||s.push(n.children[o]);var a=n.progressChunk*(s.length+1)/(s.length+2);for(n.children.push(this.resources[t]),n.progressChunk=a,o=0;o<s.length;++o)s[o].progressChunk=a;this.resources[t].progressChunk=a}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort("loader reset")}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},Object.defineProperty(t.prototype,"concurrency",{get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t},enumerable:!1,configurable:!0}),t.prototype._prepareUrl=function(t){var e,i=a(t,{strictMode:!0});if(e=i.protocol||!i.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=v.exec(e)[0];-1!==(e=e.substr(0,e.length-r.length)).indexOf("?")?e+="&"+this.defaultQueryString:e+="?"+this.defaultQueryString,e+=r}return e},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,g.eachSeries(this._beforeMiddleware,(function(e,r){e.call(i,t,(function(){r(t.isComplete?{}:null)}))}),(function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())}),!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),g.eachSeries(this._afterMiddleware,(function(i,r){i.call(e,t,r)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},t.prototype.destroy=function(){this._protected||this.reset()},Object.defineProperty(t,"shared",{get:function(){var e=t._shared;return e||((e=new t)._protected=!0,t._shared=e),e},enumerable:!1,configurable:!0}),t.registerPlugin=function(e){return t._plugins.push(e),e.add&&e.add(),t},t._plugins=[],t}();y.prototype.add=function(t,e,i,r){if(Array.isArray(t)){for(var n=0;n<t.length;++n)this.add(t[n]);return this}if("object"==typeof t&&(i=t,r=e||i.callback||i.onComplete,e=i.url,t=i.name||i.key||i.url),"string"!=typeof e&&(r=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");return"function"==typeof i&&(r=i,i=null),this._add(t,e,i,r)};var b=function(){function t(){}return t.init=function(t){t=Object.assign({sharedLoader:!1},t),this.loader=t.sharedLoader?y.shared:new y},t.destroy=function(){this.loader&&(this.loader.destroy(),this.loader=null)},t}(),x=function(){function t(){}return t.add=function(){p.setExtensionLoadType("svg",p.LOAD_TYPE.XHR),p.setExtensionXhrType("svg",p.XHR_RESPONSE_TYPE.TEXT)},t.use=function(t,e){if(!t.data||t.type!==p.TYPE.IMAGE&&"svg"!==t.extension)e();else{var i=t.data,n=t.url,s=t.name,o=t.metadata;r.xE.fromLoader(i,n,s,o).then((function(i){t.texture=i,e()})).catch(e)}},t}(),T=self.URL||self.webkitURL;y.registerPlugin({use:function(t,e){if(t.data){if(t.xhr&&t.xhrType===p.XHR_RESPONSE_TYPE.BLOB)if(self.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=T.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=p.TYPE.IMAGE,void(t.data.onload=function(){T.revokeObjectURL(i),t.data.onload=null,e()})}}else{var r=t.xhr.getResponseHeader("content-type");if(r&&0===r.indexOf("image"))return t.data=new Image,t.data.src="data:"+r+";base64,"+function(t){for(var e="",i=0;i<t.length;){for(var r=[0,0,0],n=[0,0,0,0],s=0;s<r.length;++s)i<t.length?r[s]=255&t.charCodeAt(i++):r[s]=0;switch(n[0]=r[0]>>2,n[1]=(3&r[0])<<4|r[1]>>4,n[2]=(15&r[1])<<2|r[2]>>6,n[3]=63&r[2],i-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(s=0;s<n.length;++s)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n[s])}return e}(t.xhr.responseText),t.type=p.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}}),y.registerPlugin(x)},6617:(t,e,i)=>{"use strict";i.d(e,{Cd:()=>h,ZX:()=>o,Pj:()=>l,y3:()=>f,AB:()=>p,_b:()=>n,E9:()=>d,mg:()=>u,jl:()=>s,Ae:()=>a,c9:()=>c,HS:()=>r,wx:()=>S,Lv:()=>T});var r,n=2*Math.PI,s=180/Math.PI,o=Math.PI/180;!function(t){t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC"}(r||(r={}));var a=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(n),this.type=r.RECT}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t,"EMPTY",{get:function(){return new t(0,0,0,0)},enumerable:!1,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyTo=function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.pad=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0),this},t.prototype.ceil=function(t,e){void 0===t&&(t=1),void 0===e&&(e=.001);var i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=n-r,this},t.prototype.toString=function(){return"[@pixi/math:Rectangle x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),h=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=t,this.y=e,this.radius=i,this.type=r.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,r=this.x-t,n=this.y-e;return(r*=r)+(n*=n)<=i},t.prototype.getBounds=function(){return new a(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t.prototype.toString=function(){return"[@pixi/math:Circle x="+this.x+" y="+this.y+" radius="+this.radius+"]"},t}(),l=function(){function t(t,e,i,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),this.x=t,this.y=e,this.width=i,this.height=n,this.type=r.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return(i*=i)+(r*=r)<=1},t.prototype.getBounds=function(){return new a(this.x-this.width,this.y-this.height,this.width,this.height)},t.prototype.toString=function(){return"[@pixi/math:Ellipse x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+"]"},t}(),u=function(){function t(){for(var t=arguments,e=[],i=0;i<arguments.length;i++)e[i]=t[i];var n=Array.isArray(e[0])?e[0]:e;if("number"!=typeof n[0]){for(var s=[],o=0,a=n.length;o<a;o++)s.push(n[o].x,n[o].y);n=s}this.points=n,this.type=r.POLY,this.closeStroke=!0}return t.prototype.clone=function(){var e=new t(this.points.slice());return e.closeStroke=this.closeStroke,e},t.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,n=0,s=r-1;n<r;s=n++){var o=this.points[2*n],a=this.points[2*n+1],h=this.points[2*s],l=this.points[2*s+1];a>e!=l>e&&t<(e-a)/(l-a)*(h-o)+o&&(i=!i)}return i},t.prototype.toString=function(){return"[@pixi/math:PolygoncloseStroke="+this.closeStroke+"points="+this.points.reduce((function(t,e){return t+", "+e}),"")+"]"},t}(),c=function(){function t(t,e,i,n,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===s&&(s=20),this.x=t,this.y=e,this.width=i,this.height=n,this.radius=s,this.type=r.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){var i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;var r=t-(this.x+i),n=e-(this.y+i),s=i*i;if(r*r+n*n<=s)return!0;if((r=t-(this.x+this.width-i))*r+n*n<=s)return!0;if(r*r+(n=e-(this.y+this.height-i))*n<=s)return!0;if((r=t-(this.x+i))*r+n*n<=s)return!0}return!1},t.prototype.toString=function(){return"[@pixi/math:RoundedRectangle x="+this.x+" y="+this.y+"width="+this.width+" height="+this.height+" radius="+this.radius+"]"},t}(),d=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=0,this.y=0,this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copyFrom=function(t){return this.set(t.x,t.y),this},t.prototype.copyTo=function(t){return t.set(this.x,this.y),t},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this.x=t,this.y=e,this},t.prototype.toString=function(){return"[@pixi/math:Point x="+this.x+" y="+this.y+"]"},t}(),p=function(){function t(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0),this._x=i,this._y=r,this.cb=t,this.scope=e}return t.prototype.clone=function(e,i){return void 0===e&&(e=this.cb),void 0===i&&(i=this.scope),new t(e,i,this._x,this._y)},t.prototype.set=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=t),this._x===t&&this._y===e||(this._x=t,this._y=e,this.cb.call(this.scope)),this},t.prototype.copyFrom=function(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this},t.prototype.copyTo=function(t){return t.set(this._x,this._y),t},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},t.prototype.toString=function(){return"[@pixi/math:ObservablePoint x=0 y=0 scope="+this.scope+"]"},Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))},enumerable:!1,configurable:!0}),t}(),f=function(){function t(t,e,i,r,n,s){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=1),void 0===n&&(n=0),void 0===s&&(s=0),this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,r,n,s){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new d;var i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new d;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,s=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,e,i,r,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-r,s),h=Math.atan2(i,e),l=Math.abs(a+h);return l<1e-5||Math.abs(n-l)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+s*s),t.position.x=this.tx+(o.x*e+o.y*r),t.position.y=this.ty+(o.x*i+o.y*s),t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,s=t*r-e*i;return this.a=r/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-r*n)/s,this.ty=-(t*this.ty-e*n)/s,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copyTo=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},t.prototype.copyFrom=function(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this},t.prototype.toString=function(){return"[@pixi/math:Matrix a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+"]"},Object.defineProperty(t,"IDENTITY",{get:function(){return new t},enumerable:!1,configurable:!0}),Object.defineProperty(t,"TEMP_MATRIX",{get:function(){return new t},enumerable:!1,configurable:!0}),t}(),m=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],_=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],g=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],v=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],y=[],b=[],x=Math.sign;!function(){for(var t=0;t<16;t++){var e=[];y.push(e);for(var i=0;i<16;i++)for(var r=x(m[t]*m[i]+g[t]*_[i]),n=x(_[t]*m[i]+v[t]*_[i]),s=x(m[t]*g[i]+g[t]*v[i]),o=x(_[t]*g[i]+v[t]*v[i]),a=0;a<16;a++)if(m[a]===r&&_[a]===n&&g[a]===s&&v[a]===o){e.push(a);break}}for(t=0;t<16;t++){var h=new f;h.set(m[t],_[t],g[t],v[t],0,0),b.push(h)}}();var T={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(t){return m[t]},uY:function(t){return _[t]},vX:function(t){return g[t]},vY:function(t){return v[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return y[t][e]},sub:function(t,e){return y[t][T.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?T.S:T.N:2*Math.abs(e)<=Math.abs(t)?t>0?T.E:T.W:e>0?t>0?T.SE:T.SW:t>0?T.NE:T.NW},matrixAppendRotationInv:function(t,e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=b[T.inv(e)];n.tx=i,n.ty=r,t.append(n)}},S=function(){function t(){this.worldTransform=new f,this.localTransform=new f,this.position=new p(this.onChange,this,0,0),this.scale=new p(this.onChange,this,1,1),this.pivot=new p(this.onChange,this,0,0),this.skew=new p(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return t.prototype.onChange=function(){this._localID++},t.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++},t.prototype.toString=function(){return"[@pixi/math:Transform position=("+this.position.x+", "+this.position.y+") rotation="+this.rotation+" scale=("+this.scale.x+", "+this.scale.y+") skew=("+this.skew.x+", "+this.skew.y+") ]"},t.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},t.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},t.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())},enumerable:!1,configurable:!0}),t.IDENTITY=new t,t}()},9660:(t,e,i)=>{"use strict";i.d(e,{ZT:()=>p,_1:()=>h,Au:()=>l,AL:()=>d,VJ:()=>c,IE:()=>u});var r=i(5890),n=i(6921),s=i(331),o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function a(t,e){function i(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var h=function(t){function e(e,i,r,n){void 0===e&&(e=100),void 0===i&&(i=100),void 0===r&&(r=10),void 0===n&&(n=10);var s=t.call(this)||this;return s.segWidth=r,s.segHeight=n,s.width=e,s.height=i,s.build(),s}return a(e,t),e.prototype.build=function(){for(var t=this.segWidth*this.segHeight,e=[],i=[],r=[],n=this.segWidth-1,s=this.segHeight-1,o=this.width/n,a=this.height/s,h=0;h<t;h++){var l=h%this.segWidth,u=h/this.segWidth|0;e.push(l*o,u*a),i.push(l/n,u/s)}var c=n*s;for(h=0;h<c;h++){var d=h%n,p=h/n|0,f=p*this.segWidth+d,m=p*this.segWidth+d+1,_=(p+1)*this.segWidth+d,g=(p+1)*this.segWidth+d+1;r.push(f,m,_,m,g,_)}this.buffers[0].data=new Float32Array(e),this.buffers[1].data=new Float32Array(i),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()},e}(r.xc),l=function(t){function e(e,i,r){void 0===e&&(e=200),void 0===r&&(r=0);var n=t.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1)))||this;return n.points=i,n._width=e,n.textureScale=r,n.build(),n}return a(e,t),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},enumerable:!1,configurable:!0}),e.prototype.build=function(){var t=this.points;if(t){var e=this.getBuffer("aVertexPosition"),i=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(t.length<1)){e.data.length/4!==t.length&&(e.data=new Float32Array(4*t.length),i.data=new Float32Array(4*t.length),r.data=new Uint16Array(6*(t.length-1)));var n=i.data,s=r.data;n[0]=0,n[1]=0,n[2]=0,n[3]=1;for(var o=0,a=t[0],h=this._width*this.textureScale,l=t.length,u=0;u<l;u++){var c=4*u;if(this.textureScale>0){var d=a.x-t[u].x,p=a.y-t[u].y,f=Math.sqrt(d*d+p*p);a=t[u],o+=f/h}else o=u/(l-1);n[c]=o,n[c+1]=0,n[c+2]=o,n[c+3]=1}var m=0;for(u=0;u<l-1;u++)c=2*u,s[m++]=c,s[m++]=c+1,s[m++]=c+2,s[m++]=c+2,s[m++]=c+1,s[m++]=c+3;i.update(),r.update(),this.updateVertices()}}},e.prototype.updateVertices=function(){var t=this.points;if(!(t.length<1)){for(var e,i=t[0],r=0,n=0,s=this.buffers[0].data,o=t.length,a=0;a<o;a++){var h=t[a],l=4*a;n=-((e=a<t.length-1?t[a+1]:h).x-i.x),r=e.y-i.y;var u=Math.sqrt(r*r+n*n),c=this.textureScale>0?this.textureScale*this._width/2:this._width/2;r/=u,n/=u,r*=c,n*=c,s[l]=h.x+r,s[l+1]=h.y+n,s[l+2]=h.x-r,s[l+3]=h.y-n,i=h}this.buffers[0].update()}},e.prototype.update=function(){this.textureScale>0?this.build():this.updateVertices()},e}(r.xc),u=function(t){function e(e,i,s){void 0===s&&(s=0);var o=this,a=new l(e.height,i,s),h=new r.rY(e);return s>0&&(e.baseTexture.wrapMode=n.Nt.REPEAT),(o=t.call(this,a,h)||this).autoUpdate=!0,o}return a(e,t),e.prototype._render=function(e){var i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),t.prototype._render.call(this,e)},e}(r.Kj),c=function(t){function e(e,i,n){var o=this,a=new h(e.width,e.height,i,n),l=new r.rY(s.xE.WHITE);return(o=t.call(this,a,l)||this).texture=e,o.autoResize=!0,o}return a(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID;var t=this.geometry,e=this.shader.texture,i=e.width,r=e.height;!this.autoResize||t.width===i&&t.height===r||(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())},Object.defineProperty(e.prototype,"texture",{get:function(){return this.shader.texture},set:function(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),t.prototype._render.call(this,e)},e.prototype.destroy=function(e){this.shader.texture.off("update",this.textureUpdated,this),t.prototype.destroy.call(this,e)},e}(r.Kj),d=function(t){function e(e,i,n,o,a){void 0===e&&(e=s.xE.EMPTY);var h=this,l=new r.xc(i,n,o);l.getBuffer("aVertexPosition").static=!1;var u=new r.rY(e);return(h=t.call(this,l,u,null,a)||this).autoUpdate=!0,h}return a(e,t),Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},e}(r.Kj),p=function(t){function e(e,i,r,n,o){void 0===i&&(i=10),void 0===r&&(r=10),void 0===n&&(n=10),void 0===o&&(o=10);var a=t.call(this,s.xE.WHITE,4,4)||this;return a._origWidth=e.orig.width,a._origHeight=e.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=i,a._rightWidth=n,a._topHeight=r,a._bottomHeight=o,a.texture=e,a}return a(e,t),e.prototype.textureUpdated=function(){this._textureID=this.shader.texture._updateID,this._refresh()},Object.defineProperty(e.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!1,configurable:!0}),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*e,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*e,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*e,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*e,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._getMinScale=function(){var t=this._leftWidth+this._rightWidth,e=this._width>t?1:this._width/t,i=this._topHeight+this._bottomHeight,r=this._height>i?1:this._height/i;return Math.min(e,r)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"leftWidth",{get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topHeight",{get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bottomHeight",{get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()},enumerable:!1,configurable:!0}),e.prototype._refresh=function(){var t=this.texture,e=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var i=1/this._origWidth,r=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=i*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-i*this._rightWidth,e[9]=e[11]=e[13]=e[15]=r*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()},e}(c)},5890:(t,e,i)=>{"use strict";i.d(e,{Kj:()=>f,wQ:()=>c,xc:()=>_,rY:()=>m});var r=i(331),n=i(6617),s=i(6921),o=i(2975),a=i(9907),h=i(8281),l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function u(t,e){function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var c=function(){function t(t,e){this.uvBuffer=t,this.uvMatrix=e,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return t.prototype.update=function(t){if(t||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var e=this.uvBuffer.data;this.data&&this.data.length===e.length||(this.data=new Float32Array(e.length)),this.uvMatrix.multiplyUvs(e,this.data),this._updateID++}},t}(),d=new n.E9,p=new n.mg,f=function(t){function e(e,i,n,o){void 0===o&&(o=s.lg.TRIANGLES);var h=t.call(this)||this;return h.geometry=e,h.shader=i,h.state=n||r.ZM.for2d(),h.drawMode=o,h.start=0,h.size=0,h.uvs=null,h.indices=null,h.vertexData=new Float32Array(1),h.vertexDirty=-1,h._transformID=-1,h._roundPixels=a.X.ROUND_PIXELS,h.batchUvs=null,h}return u(e,t),Object.defineProperty(e.prototype,"geometry",{get:function(){return this._geometry},set:function(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"uvBuffer",{get:function(){return this.geometry.buffers[1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"verticesBuffer",{get:function(){return this.geometry.buffers[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"material",{get:function(){return this.shader},set:function(t){this.shader=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.state.blendMode},set:function(t){this.state.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(t){this.shader.tint=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(t){this.shader.texture=t},enumerable:!1,configurable:!0}),e.prototype._render=function(t){var i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===s.lg.TRIANGLES&&i.length<2*e.BATCHABLE_SIZE?this._renderToBatch(t):this._renderDefault(t)},e.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},e.prototype._renderToBatch=function(t){var e=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;var r=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[r]),t.plugins[r].render(this)},e.prototype.calculateVertices=function(){var t=this.geometry.buffers[0],e=t.data,i=t._updateID;if(i!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==e.length&&(this.vertexData=new Float32Array(e.length));for(var r=this.transform.worldTransform,n=r.a,s=r.b,o=r.c,h=r.d,l=r.tx,u=r.ty,c=this.vertexData,d=0;d<c.length/2;d++){var p=e[2*d],f=e[2*d+1];c[2*d]=n*p+o*f+l,c[2*d+1]=s*p+h*f+u}if(this._roundPixels){var m=a.X.RESOLUTION;for(d=0;d<c.length;++d)c[d]=Math.round((c[d]*m|0)/m)}this.vertexDirty=i}},e.prototype.calculateUvs=function(){var t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new c(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)},e.prototype._calculateBounds=function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,d);for(var e=this.geometry.getBuffer("aVertexPosition").data,i=p.points,r=this.geometry.getIndex().data,n=r.length,s=4===this.drawMode?3:1,o=0;o+2<n;o+=s){var a=2*r[o],h=2*r[o+1],l=2*r[o+2];if(i[0]=e[a],i[1]=e[a+1],i[2]=e[h],i[3]=e[h+1],i[4]=e[l],i[5]=e[l+1],p.contains(d.x,d.y))return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null},e.BATCHABLE_SIZE=100,e}(o.W2),m=function(t){function e(e,i){var s=this,o={uSampler:e,alpha:1,uTextureMatrix:n.y3.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i)).uniforms&&Object.assign(o,i.uniforms),(s=t.call(this,i.program||r.$r.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),o)||this)._colorDirty=!1,s.uvMatrix=new r.UX(e),s.batchable=void 0===i.program,s.pluginName=i.pluginName,s.tint=i.tint,s.alpha=i.alpha,s}return u(e,t),Object.defineProperty(e.prototype,"texture",{get:function(){return this.uniforms.uSampler},set:function(t){this.uniforms.uSampler!==t&&(this.uniforms.uSampler=t,this.uvMatrix.texture=t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16),this._colorDirty=!0)},enumerable:!1,configurable:!0}),e.prototype.update=function(){if(this._colorDirty){this._colorDirty=!1;var t=this.texture.baseTexture;(0,h.premultiplyTintToRgba)(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)},e}(r.ex),_=function(t){function e(e,i,n){var o=t.call(this)||this,a=new r.lW(e),h=new r.lW(i,!0),l=new r.lW(n,!0,!0);return o.addAttribute("aVertexPosition",a,2,!1,s.vK.FLOAT).addAttribute("aTextureCoord",h,2,!1,s.vK.FLOAT).addIndex(l),o._updateId=-1,o}return u(e,t),Object.defineProperty(e.prototype,"vertexDirtyId",{get:function(){return this.buffers[0]._updateID},enumerable:!1,configurable:!0}),e}(r.ZX)},8898:(t,e,i)=>{"use strict";i.d(e,{R:()=>r});var r=function(){function t(t){this.items=[],this._name=t,this._aliasCount=0}return t.prototype.emit=function(t,e,i,r,n,s,o,a){if(arguments.length>8)throw new Error("max arguments reached");var h=this,l=h.name,u=h.items;this._aliasCount++;for(var c=0,d=u.length;c<d;c++)u[c][l](t,e,i,r,n,s,o,a);return u===this.items&&this._aliasCount--,this},t.prototype.ensureNonAliasedItems=function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))},t.prototype.add=function(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this},t.prototype.remove=function(t){var e=this.items.indexOf(t);return-1!==e&&(this.ensureNonAliasedItems(),this.items.splice(e,1)),this},t.prototype.contains=function(t){return-1!==this.items.indexOf(t)},t.prototype.removeAll=function(){return this.ensureNonAliasedItems(),this.items.length=0,this},t.prototype.destroy=function(){this.removeAll(),this.items=null,this._name=null},Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.items.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),t}();Object.defineProperties(r.prototype,{dispatch:{value:r.prototype.emit},run:{value:r.prototype.emit}})},9907:(t,e,i)=>{"use strict";i.d(e,{t:()=>k,X:()=>B});var r,n,s,o,a,h,l,u,c,d,p,f,m,_,g,v,y,b,x,T=/iPhone/i,S=/iPod/i,E=/iPad/i,w=/\biOS-universal(?:.+)Mac\b/i,A=/\bAndroid(?:.+)Mobile\b/i,I=/Android/i,C=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,O=/Silk/i,M=/Windows Phone/i,P=/\bWindows(?:.+)ARM\b/i,R=/BlackBerry/i,D=/BB10/i,N=/Opera Mini/i,U=/\b(CriOS|Chrome)(?:.+)Mobile/i,F=/Mobile(?:.+)Firefox\b/i,L=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream},k=function(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var i=e.userAgent,r=i.split("[FBAN");void 0!==r[1]&&(i=r[0]),void 0!==(r=i.split("Twitter"))[1]&&(i=r[0]);var n=function(t){return function(e){return e.test(t)}}(i),s={apple:{phone:n(T)&&!n(M),ipod:n(S),tablet:!n(T)&&(n(E)||L(e))&&!n(M),universal:n(w),device:(n(T)||n(S)||n(E)||n(w)||L(e))&&!n(M)},amazon:{phone:n(C),tablet:!n(C)&&n(O),device:n(C)||n(O)},android:{phone:!n(M)&&n(C)||!n(M)&&n(A),tablet:!n(M)&&!n(C)&&!n(A)&&(n(O)||n(I)),device:!n(M)&&(n(C)||n(O)||n(A)||n(I))||n(/\bokhttp\b/i)},windows:{phone:n(M),tablet:n(P),device:n(M)||n(P)},other:{blackberry:n(R),blackberry10:n(D),opera:n(N),firefox:n(F),chrome:n(U),device:n(R)||n(D)||n(N)||n(F)||n(U)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}(self.navigator);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(r||(r={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(n||(n={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(s||(s={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(o||(o={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(a||(a={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(h||(h={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(l||(l={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(u||(u={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(c||(c={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(d||(d={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(p||(p={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(f||(f={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(m||(m={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(_||(_={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(g||(g={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(v||(v={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(y||(y={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(b||(b={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(x||(x={}));var B={MIPMAP_TEXTURES:f.POW2,ANISOTROPIC_LEVEL:0,RESOLUTION:1,FILTER_RESOLUTION:1,FILTER_MULTISAMPLE:b.NONE,SPRITE_MAX_TEXTURES:function(t){var e,i=!0;return(k.tablet||k.phone)&&(k.apple.device&&(e=navigator.userAgent.match(/OS (\d+)_(\d+)?/))&&parseInt(e[1],10)<11&&(i=!1),k.android.device&&(e=navigator.userAgent.match(/Android\s([0-9.]*)/))&&parseInt(e[1],10)<7&&(i=!1)),i?32:4}(),SPRITE_BATCH_SIZE:4096,RENDER_OPTIONS:{view:null,antialias:!1,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,useContextAlpha:!0,clearBeforeRender:!0,preserveDrawingBuffer:!1,width:800,height:600,legacy:!1},GC_MODE:g.AUTO,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:p.CLAMP,SCALE_MODE:d.LINEAR,PRECISION_VERTEX:v.HIGH,PRECISION_FRAGMENT:k.apple.device?v.HIGH:v.MEDIUM,CAN_UPLOAD_SAME_BUFFER:!k.apple.device,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1}},7965:(t,e,i)=>{"use strict";i.d(e,{j:()=>d});var r=i(6921),n=i(331),s=i(2975),o=i(6617),a=i(9907),h=i(8281),l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},u=new o.E9,c=new Uint16Array([0,1,2,0,2,3]),d=function(t){function e(e){var i=t.call(this)||this;return i._anchor=new o.AB(i._onAnchorUpdate,i,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),i._texture=null,i._width=0,i._height=0,i._tint=null,i._tintRGB=null,i.tint=16777215,i.blendMode=r.T$.NORMAL,i._cachedTint=16777215,i.uvs=null,i.texture=e||n.xE.EMPTY,i.vertexData=new Float32Array(8),i.vertexTrimmedData=null,i._transformID=-1,i._textureID=-1,i._transformTrimmedID=-1,i._textureTrimmedID=-1,i.indices=c,i.pluginName="batch",i.isSprite=!0,i._roundPixels=a.X.ROUND_PIXELS,i}return function(t,e){function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=(0,h.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,h.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){var t=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==t._updateID){this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;var e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,s=e.d,o=e.tx,h=e.ty,l=this.vertexData,u=t.trim,c=t.orig,d=this._anchor,p=0,f=0,m=0,_=0;if(u?(p=(f=u.x-d._x*c.width)+u.width,m=(_=u.y-d._y*c.height)+u.height):(p=(f=-d._x*c.width)+c.width,m=(_=-d._y*c.height)+c.height),l[0]=i*f+n*_+o,l[1]=s*_+r*f+h,l[2]=i*p+n*_+o,l[3]=s*_+r*p+h,l[4]=i*p+n*m+o,l[5]=s*m+r*p+h,l[6]=i*f+n*m+o,l[7]=s*m+r*f+h,this._roundPixels)for(var g=a.X.RESOLUTION,v=0;v<l.length;++v)l[v]=Math.round((l[v]*g|0)/g)}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,r=this._anchor,n=this.transform.worldTransform,s=n.a,o=n.b,a=n.c,h=n.d,l=n.tx,u=n.ty,c=-r._x*i.width,d=c+i.width,p=-r._y*i.height,f=p+i.height;e[0]=s*c+a*p+l,e[1]=h*p+o*c+u,e[2]=s*d+a*p+l,e[3]=h*p+o*d+u,e[4]=s*d+a*f+l,e[5]=h*f+o*d+u,e[6]=s*c+a*f+l,e[7]=h*f+o*c+u},e.prototype._render=function(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new o.Ae),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,u);var e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x,n=0;return u.x>=r&&u.x<r+e&&(n=-i*this.anchor.y,u.y>=n&&u.y<n+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null},e.from=function(t,i){return new e(t instanceof n.xE?t:n.xE.from(t,i))},Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,h.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,h.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"texture",{get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||n.xE.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))},enumerable:!1,configurable:!0}),e}(s.W2)},107:(t,e,i)=>{"use strict";i.d(e,{vB:()=>o,Sb:()=>a,uF:()=>r});var r,n=i(9907);n.X.TARGET_FPMS=.06,function(t){t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY"}(r||(r={}));var s=function(){function t(t,e,i,r){void 0===e&&(e=null),void 0===i&&(i=0),void 0===r&&(r=!1),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=e,this.priority=i,this.once=r}return t.prototype.match=function(t,e){return void 0===e&&(e=null),this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(t){void 0===t&&(t=!1),this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}(),o=function(){function t(){var t=this;this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new s(null,null,1/0),this.deltaMS=1/n.X.TARGET_FPMS,this.elapsedMS=1/n.X.TARGET_FPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e,i){return void 0===i&&(i=r.NORMAL),this._addListener(new s(t,e,i))},t.prototype.addOnce=function(t,e,i){return void 0===i&&(i=r.NORMAL),this._addListener(new s(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},Object.defineProperty(t.prototype,"count",{get:function(){if(!this._head)return 0;for(var t=0,e=this._head;e=e.next;)t++;return t},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){if(!this._protected){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}},t.prototype.update=function(t){var e;if(void 0===t&&(t=performance.now()),t>this.lastTime){if((e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){var i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*n.X.TARGET_FPMS;for(var r=this._head,s=r.next;s;)s=s.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t},Object.defineProperty(t.prototype,"FPS",{get:function(){return 1e3/this.elapsedMS},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minFPS",{get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(this.maxFPS,t),i=Math.min(Math.max(0,e)/1e3,n.X.TARGET_FPMS);this._maxElapsedMS=1/i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxFPS",{get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(t){if(0===t)this._minElapsedMS=0;else{var e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}},enumerable:!1,configurable:!0}),Object.defineProperty(t,"shared",{get:function(){if(!t._shared){var e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared},enumerable:!1,configurable:!0}),Object.defineProperty(t,"system",{get:function(){if(!t._system){var e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system},enumerable:!1,configurable:!0}),t}(),a=function(){function t(){}return t.init=function(t){var e=this;t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,r.LOW)},get:function(){return this._ticker}}),this.stop=function(){e._ticker.stop()},this.start=function(){e._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?o.shared:new o,t.autoStart&&this.start()},t.destroy=function(){if(this._ticker){var t=this._ticker;this.ticker=null,t.destroy()}},t}()},8281:(t,e,i)=>{"use strict";i.r(e),i.d(e,{isMobile:()=>r.t,EventEmitter:()=>s.a,earcut:()=>a.a,BaseTextureCache:()=>X,CanvasRenderTarget:()=>Y,DATA_URI:()=>z,ProgramCache:()=>B,TextureCache:()=>G,clearTextureCache:()=>V,correctBlendMode:()=>T,createIndicesForQuads:()=>A,decomposeDataUri:()=>q,deprecation:()=>k,destroyTextureCache:()=>j,determineCrossOrigin:()=>K,getBufferType:()=>I,getResolutionOfUrl:()=>Z,hex2rgb:()=>g,hex2string:()=>v,interleaveTypedArrays:()=>O,isPow2:()=>P,isWebGLSupported:()=>m,log2:()=>R,nextPow2:()=>M,premultiplyBlendMode:()=>x,premultiplyRgba:()=>S,premultiplyTint:()=>E,premultiplyTintToRgba:()=>w,removeItems:()=>D,rgb2hex:()=>b,sayHello:()=>f,sign:()=>N,skipHello:()=>p,string2hex:()=>y,trimCanvas:()=>H,uid:()=>F,url:()=>u});var r=i(9907),n=i(3034),s=i.n(n),o=i(720),a=i.n(o),h=i(4044),l=i(6921),u={parse:h.Qc,format:h.WU,resolve:h.DB};r.X.RETINA_PREFIX=/@([0-9\.]+)x/,r.X.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var c,d=!1;function p(){d=!0}function f(t){var e;if(!d){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var i=["\n %c %c %c PixiJS 6.2.1 - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];(e=self.console).log.apply(e,i)}else self.console&&self.console.log("PixiJS 6.2.1 - "+t+" - http://www.pixijs.com/");d=!0}}function m(){return void 0===c&&(c=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:r.X.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!self.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),n=!(!i||!i.getContextAttributes().stencil);if(i){var s=i.getExtension("WEBGL_lose_context");s&&s.loseContext()}return i=null,n}catch(t){return!1}}()),c}var _={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function g(t,e){return void 0===e&&(e=[]),e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e}function v(t){var e=t.toString(16);return"#"+("000000".substr(0,6-e.length)+e)}function y(t){return"string"==typeof t&&"#"===(t=_[t.toLowerCase()]||t)[0]&&(t=t.substr(1)),parseInt(t,16)}function b(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)}var x=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[l.T$.NORMAL_NPM]=l.T$.NORMAL,t[l.T$.ADD_NPM]=l.T$.ADD,t[l.T$.SCREEN_NPM]=l.T$.SCREEN,e[l.T$.NORMAL]=l.T$.NORMAL_NPM,e[l.T$.ADD]=l.T$.ADD_NPM,e[l.T$.SCREEN]=l.T$.SCREEN_NPM;var r=[];return r.push(e),r.push(t),r}();function T(t,e){return x[e?1:0][t]}function S(t,e,i,r){return i=i||new Float32Array(4),r||void 0===r?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i}function E(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,r=t>>8&255;return(255*e<<24)+((i=i*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+((255&t)*e+.5|0)}function w(t,e,i,r){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(r||void 0===r)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i}function A(t,e){void 0===e&&(e=null);var i=6*t;if((e=e||new Uint16Array(i)).length!==i)throw new Error("Out buffer length is incorrect, got "+e.length+" and expected "+i);for(var r=0,n=0;r<i;r+=6,n+=4)e[r+0]=n+0,e[r+1]=n+1,e[r+2]=n+2,e[r+3]=n+0,e[r+4]=n+2,e[r+5]=n+3;return e}function I(t){if(4===t.BYTES_PER_ELEMENT)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===t.BYTES_PER_ELEMENT){if(t instanceof Uint16Array)return"Uint16Array"}else if(1===t.BYTES_PER_ELEMENT&&t instanceof Uint8Array)return"Uint8Array";return null}var C={Float32Array,Uint32Array,Int32Array,Uint8Array};function O(t,e){for(var i=0,r=0,n={},s=0;s<t.length;s++)r+=e[s],i+=t[s].length;var o=new ArrayBuffer(4*i),a=null,h=0;for(s=0;s<t.length;s++){var l=e[s],u=t[s],c=I(u);n[c]||(n[c]=new C[c](o)),a=n[c];for(var d=0;d<u.length;d++)a[(d/l|0)*r+h+d%l]=u[d];h+=l}return new Float32Array(o)}function M(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,1+((t|=t>>>8)|t>>>16)}function P(t){return!(t&t-1||!t)}function R(t){var e=(t>65535?1:0)<<4,i=((t>>>=e)>255?1:0)<<3;return e|=i,e|=i=((t>>>=i)>15?1:0)<<2,(e|=i=((t>>>=i)>3?1:0)<<1)|(t>>>=i)>>1}function D(t,e,i){var r,n=t.length;if(!(e>=n||0===i)){var s=n-(i=e+i>n?n-e:i);for(r=e;r<s;++r)t[r]=t[r+i];t.length=s}}function N(t){return 0===t?0:t<0?-1:1}var U=0;function F(){return++U}var L={};function k(t,e,i){if(void 0===i&&(i=3),!L[e]){var r=(new Error).stack;void 0===r?console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t):(r=r.split("\n").splice(i).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",e+"\nDeprecated since v"+t),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",e+"\nDeprecated since v"+t),console.warn(r))),L[e]=!0}}var B={},G=Object.create(null),X=Object.create(null);function j(){var t;for(t in G)G[t].destroy();for(t in X)X[t].destroy()}function V(){var t;for(t in G)delete G[t];for(t in X)delete X[t]}var Y=function(){function t(t,e,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=i||r.X.RESOLUTION,this.resize(t,e)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=Math.round(t*this.resolution),this.canvas.height=Math.round(e*this.resolution)},t.prototype.destroy=function(){this.context=null,this.canvas=null},Object.defineProperty(t.prototype,"width",{get:function(){return this.canvas.width},set:function(t){this.canvas.width=Math.round(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.canvas.height},set:function(t){this.canvas.height=Math.round(t)},enumerable:!1,configurable:!0}),t}();function H(t){var e,i,r,n=t.width,s=t.height,o=t.getContext("2d"),a=o.getImageData(0,0,n,s).data,h=a.length,l={top:null,left:null,right:null,bottom:null},u=null;for(e=0;e<h;e+=4)0!==a[e+3]&&(i=e/4%n,r=~~(e/4/n),null===l.top&&(l.top=r),(null===l.left||i<l.left)&&(l.left=i),(null===l.right||l.right<i)&&(l.right=i+1),(null===l.bottom||l.bottom<r)&&(l.bottom=r));return null!==l.top&&(n=l.right-l.left,s=l.bottom-l.top+1,u=o.getImageData(l.left,l.top,n,s)),{height:s,width:n,data:u}}var W,z=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function q(t){var e=z.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function K(t,e){if(void 0===e&&(e=self.location),0===t.indexOf("data:"))return"";e=e||self.location,W||(W=document.createElement("a")),W.href=t;var i=u.parse(W.href),r=!i.port&&""===e.port||i.port===e.port;return i.hostname===e.hostname&&r&&i.protocol===e.protocol?"":"anonymous"}function Z(t,e){var i=r.X.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1}},5229:function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.BaseEffect=void 0;var s=function(t){function e(e){var i=t.call(this)||this;return i.componentId=e,i.exhausted=!1,i.completed=!1,i._x=0,i._y=0,i._rotation=0,i._alpha=0,i._scale=new PIXI.Point,i._active=!1,i.__recycled=!0,i}return n(e,t),e.prototype.update=function(t){},e.prototype.recycle=function(){},Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t},enumerable:!1,configurable:!0}),e.prototype.__applySettings=function(t){},e}(i(8814).Node);e.BaseEffect=s},8139:function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.EffectSequence=void 0;var s=i(4693),o=i(5229),a=i(8814),h=i(3376),l=i(1367),u=i(1850),c=function(t){function e(e){var i=t.call(this,e)||this;return i._elements=new a.LinkedList,i.__on={started:new u.FXSignal,completed:new u.FXSignal,exhausted:new u.FXSignal,effectSpawned:new u.FXSignal,triggerActivated:new u.FXSignal},i}return n(e,t),e.prototype.init=function(t,e,i,r){return void 0===e&&(e=0),void 0===i&&(i=!0),void 0===r&&(r=1),this.container=t,this._scaleMod=r,this._delay=1e3*e,i&&this.start(),this},e.prototype.start=function(){if(!this._active)return this._startTime=Date.now()+(this.settings.delay?1e3*this.settings.delay:0)+this._delay,this._index=0,0==this._list.length?(this._active=!1,this.__on.exhausted.__hasCallback&&this.__on.exhausted.dispatch(this),this.__on.completed.__hasCallback&&this.__on.completed.dispatch(this),this.recycle(),this):(this.exhausted=this.completed=!1,this.setNextEffect(),this.__fx.effectSequenceCount++,this.__fx.__addActiveEffect(this),this.__on.started.__hasCallback&&this.__on.started.dispatch(this),this)},e.prototype.update=function(t){var e=Date.now();if(!(e<this._startTime)){if(this._time+=t,!this.exhausted&&e>=this._effectStartTime){var i,r=this.__fx,n=this._nextEffectSettings,o=void 0;switch(n.componentType){case s.FX.EffectSequenceComponentType.Sprite:o=r.__getSprite(n.componentId);var u=r.__containers[n.containerId]||this.container;u.addChild(o),o.blendMode=r.useBlendModes?n.blendMode:0,o.tint=n.tint,o.scale.set(l.Rnd.float(n.scaleMin,n.scaleMax)*l.Rnd.float(this.settings.scaleMin,this.settings.scaleMax)*this._scaleMod),o.alpha=l.Rnd.float(n.alphaMin,n.alphaMax),o.anchor.set(n.componentParams.anchorX,n.componentParams.anchorY),i=new a.Node({component:o,endTime:e+1e3*n.duration}),this._elements.add(i),o.x=this._x,o.y=this._y,o.rotation=this._rotation+l.Rnd.float(n.rotationMin,n.rotationMax),this.__on.effectSpawned.__hasCallback&&this.__on.effectSpawned.dispatch(s.FX.EffectSequenceComponentType.Sprite,o);break;case s.FX.EffectSequenceComponentType.MovieClip:o=r.__getMovieClip(n.componentId),n.componentParams.loop?(o.animationSpeed=l.Rnd.float(n.componentParams.animationSpeedMin||1,n.componentParams.animationSpeedMax||1),o.loop=n.componentParams.loop||!1):n.duration,o.anchor.set(n.componentParams.anchorX,n.componentParams.anchorY),o.gotoAndPlay(0),(u=r.__containers[n.containerId]||this.container).addChild(o),o.blendMode=r.useBlendModes?n.blendMode:0,o.tint=n.tint,o.scale.set(l.Rnd.float(n.scaleMin,n.scaleMax)*l.Rnd.float(this.settings.scaleMin,this.settings.scaleMax)*this._scaleMod),o.alpha=l.Rnd.float(n.alphaMin,n.alphaMax),i=new a.Node({component:o,endTime:e+1e3*n.duration}),this._elements.add(i),o.x=this._x,o.y=this._y,o.rotation=this._rotation+l.Rnd.float(n.rotationMin,n.rotationMax),this.__on.effectSpawned.__hasCallback&&this.__on.effectSpawned.dispatch(s.FX.EffectSequenceComponentType.MovieClip,o);break;case s.FX.EffectSequenceComponentType.Emitter:o=r.getParticleEmitterById(n.componentId),u=r.__containers[n.containerId]||this.container,o.init(u,!0,l.Rnd.float(n.scaleMin,n.scaleMax)*l.Rnd.float(this.settings.scaleMin,this.settings.scaleMax)*this._scaleMod),i=new a.Node({component:o,endTime:o.endTime}),this._elements.add(i),o.x=this._x,o.y=this._y,o.rotation=this._rotation+o.settings.rotation,this.__on.effectSpawned.__hasCallback&&this.__on.effectSpawned.dispatch(s.FX.EffectSequenceComponentType.Emitter,o);break;case s.FX.EffectSequenceComponentType.Trigger:this.__on.triggerActivated.__hasCallback&&this.__on.triggerActivated.dispatch(n.triggerValue)}this._index==this._list.length?(this.exhausted=!0,this.__on.exhausted.__hasCallback&&this.__on.exhausted.dispatch(this)):this.setNextEffect()}for(var c=this._elements,d=c.first;d;){if(d.update(t),e>d.data.endTime){var p=d.data.component;p instanceof h.ParticleEmitter?p.completed&&c.remove(d):(c.remove(d),p.recycle())}d=d.next}this.exhausted&&0==c.length&&(this._active=!1,this.completed=!0,this.__on.completed.__hasCallback&&this.__on.completed.dispatch(this),this.recycle())}},e.prototype.stop=function(){this.recycle()},e.prototype.recycle=function(){if(!this.__recycled){for(var t,e=this._elements,i=e.first;i;)t=i.next,i.data.component.recycle(),i=t;var r=this.__on;r.completed.__hasCallback&&r.completed.removeAll(),r.started.__hasCallback&&r.started.removeAll(),r.exhausted.__hasCallback&&r.exhausted.removeAll(),r.effectSpawned.__hasCallback&&r.effectSpawned.removeAll(),r.triggerActivated.__hasCallback&&r.triggerActivated.removeAll(),e.clear(),this.__recycled=!0,this._x=this._y=this._rotation=0,this.__fx.effectSequenceCount--,this.__fx.__recycleEffectSequence(this)}},e.prototype.dispose=function(){this._elements.clear(),this.__fx=null;var t=this.__on;t.completed=t.started=t.exhausted=t.effectSpawned=t.triggerActivated=null},Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t;for(var e,i=this._elements.first;i;)e=i.next,i.data.rotation=t,i=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t;for(var e,i=this._elements.first;i;)e=i.next,i.data.x=t,i=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t;for(var e,i=this._elements.first;i;)e=i.next,i.data.y=t,i=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"on",{get:function(){return this.__on},enumerable:!1,configurable:!0}),e.prototype.setNextEffect=function(){if(!this.exhausted){var t=this._nextEffectSettings=this._list[this._index++];this._effectStartTime=this._startTime+1e3*t.delay}},e.prototype.__applySettings=function(t){this.settings=t,this.name=t.name,this._list=t.effects.slice(),this.__recycled=!1},e}(o.BaseEffect);e.EffectSequence=c},4693:function(t,e,i){"use strict";var r=this&&this.__awaiter||function(t,e,i,r){return new(i||(i=Promise))((function(n,s){function o(t){try{h(r.next(t))}catch(t){s(t)}}function a(t){try{h(r.throw(t))}catch(t){s(t)}}function h(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}h((r=r.apply(t,e||[])).next())}))},n=this&&this.__generator||function(t,e){var i,r,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.FX=void 0;var s,o,a=i(3376),h=i(8814),l=i(6632),u=i(1111),c=i(6758),d=i(8139),p=i(9528),f=i(5671),m=i(4029),_=i(3705);!function(t){t[t.Sprite=0]="Sprite",t[t.MovieClip=1]="MovieClip"}(s||(s={})),function(t){t[t.Sprite=0]="Sprite",t[t.MovieClip=1]="MovieClip",t[t.Emitter=2]="Emitter",t[t.Trigger=3]="Trigger"}(o||(o={}));var g=function(){function t(){this.useBlendModes=!0,this.particleCount=0,this.emitterCount=0,this.effectSequenceCount=0,this.maxParticles=5e3,this.particleFac=1,this._active=!1,this._effects=new h.LinkedList,this.__containers={},this.clearCache(),this.start()}return t.prototype.start=function(){this._active=!0,this._timeElapsed=Date.now()},t.prototype.pause=function(){this._active=!1},t.prototype.update=function(t){if(this.active){var e=Date.now(),i=.001*(e-this._timeElapsed);void 0!==t&&(i*=t);for(var r,n=this._effects.first;n;)r=n.next,n.update(i),n=r;this._timeElapsed=e}},t.prototype.clearCache=function(){this._cache={particles:[],mcs:[],sprites:[],effectSequences:[],emitters:[],cores:{}},this._settingsCache={mcs:{},sprites:{},emitters:{},effectSequences:{}},this._nameMaps={emitters:{},effectSequences:{}}},t.prototype.setFloorY=function(t){var e=this._settingsCache.emitters;for(var i in e)e[i].floorY=t},t.prototype.dispose=function(){for(var t=this._effects,e=t.first;e;)e.dispose(),e=e.next;t.clear(),this.clearCache()},t.prototype.loadBundleFiles=function(t,e,i,r){var n=this;return void 0===i&&(i=""),new Promise((function(i,s){var o=new PIXI.Loader;if(o.onError.add((function(t){s(t)})),o.add("rfx_spritesheet",e).add("rfx_bundleSettings",t),r)for(var a=0,h=r;a<h.length;a++){var l=h[a];l.hasOwnProperty("name")&&l.hasOwnProperty("url")?o.add(l.name,l.url):o.add(l)}o.load((function(t,e){i(n.initBundle(e.rfx_bundleSettings.data))}))}))},t.prototype.loadBundleZip=function(e,i,s){var o=this;return new Promise((function(a,h){if(null!=i){var l=new PIXI.Loader;if(l.add("zip",e,{xhrType:PIXI.LoaderResource.XHR_RESPONSE_TYPE.BLOB}),s)for(var u=0,c=s;u<c.length;u++){var d=c[u];d.hasOwnProperty("name")&&d.hasOwnProperty("url")?l.add(d.name,d.url):l.add(d)}l.load((function(e,s){return r(o,void 0,void 0,(function(){var e,r,o,l,u,c,d,p,f,m,_,g,v,y,b=this;return n(this,(function(n){switch(n.label){case 0:return n.trys.push([0,8,,9]),e=void 0,r=void 0,[4,i.loadAsync(s.zip.data)];case 1:for(c in n.sent(),l=[],i.forEach((function(t,e){l.push(e)})),u=[],l)u.push(c);d=0,n.label=2;case 2:return d<u.length?(p=u[d],-1==(f=l[p]).name.indexOf(".png")?[3,4]:[4,f.async("base64")]):[3,7];case 3:return m=n.sent(),e="data:image/png;base64,"+m,[3,6];case 4:return-1==f.name.indexOf(".json")?[3,6]:[4,f.async("string")];case 5:if(_=n.sent(),(g=JSON.parse(_)).__h){if(g.__h!==t._bundleHash)return h("Invalid settings file."),[2];o=g}else g.frames&&(r=g);n.label=6;case 6:return d++,[3,2];case 7:return v=PIXI.Texture.from(e),new PIXI.Spritesheet(v.baseTexture,r).parse((function(){setTimeout((function(){a(b.initBundle(o,!0))}),100)})),[3,9];case 8:return y=n.sent(),h(y.toString()),[3,9];case 9:return[2]}}))}))}))}else h("JSZip instance not provided.")}))},t.prototype.initBundle=function(e,i){if(e.__h!==t._bundleHash)throw new Error("Invalid settings file.");if(e.__v!=t.settingsVersion)throw new Error("Settings version mismatch.");for(var r in _.Sanitizer.sanitizeBundle(e),i&&this.clearCache(),e.emitters){var n=e.emitters[r];this.addParticleEmitter(n.id,n)}for(var r in e.sequences)n=e.sequences[r],this.addEffectSequence(n.id,n);return this.useBlendModes=e.useBlendModes,this.maxParticles=e.maxParticles,this.parseTextureCache(e.spritesheetFilter)},t.prototype.addParticleEmitter=function(t,e){if(this._settingsCache.emitters[t])throw new Error("ComponentId '"+t+"' already exists.");return this._settingsCache.emitters[t]=e,this._nameMaps.emitters[e.name]=e,this},t.prototype.addEffectSequence=function(t,e){if(this._settingsCache.effectSequences[t])throw new Error("ComponentId '"+t+"' already exists.");return this._settingsCache.effectSequences[t]=e,this._nameMaps.effectSequences[e.name]=e,this},t.prototype.initSprite=function(t,e){if(this._settingsCache.sprites[t])throw new Error("ComponentId '"+t+"' already exists.");return this._settingsCache.sprites[t]=e,this},t.prototype.initMovieClip=function(t,e){if(this._settingsCache.mcs[t])throw new Error("ComponentId '"+t+"' already exists.");return this._settingsCache.mcs[t]=e,this},t.prototype.getMovieClips=function(){return this._settingsCache.mcs},t.prototype.getSprites=function(){return this._settingsCache.sprites},t.prototype.addContainer=function(t,e){this.__containers[t]=e},t.prototype.getEffectSequence=function(t){var e=this._nameMaps.effectSequences[t];if(!e)throw new Error("Settings not defined for '"+t+"'");return this.getEffectSequenceById(e.id)},t.prototype.getEffectSequenceById=function(t){var e,i=this._cache.effectSequences,r=this._settingsCache.effectSequences[t];if(!r)throw new Error("Settings not defined for '"+t+"'");return 0==i.length?(e=new d.EffectSequence(t)).__fx=this:e=i.pop(),e.__applySettings(r),e},t.prototype.getParticleEmitter=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var r=this._nameMaps.emitters[t];if(!r)throw new Error("Settings not defined for '"+t+"'");return this.getParticleEmitterById(r.id,e,i)},t.prototype.getParticleEmitterById=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var r,n=this._cache.emitters,s=this._settingsCache.emitters[t];if(!s)throw new Error("Settings not defined for '"+t+"'");return 0==n.length?(r=new a.ParticleEmitter(t)).__fx=this:r=n.pop(),i&&(s=JSON.parse(JSON.stringify(s))),r.autoRecycleOnComplete=e,r.__applySettings(s),r},t.prototype.stopEmitter=function(t,e){void 0===e&&(e=!1),t.list===this._effects&&this._effects.remove(t),e?t.dispose():this.__recycleEmitter(t)},t.prototype.stopAllEffects=function(){for(var t=0,e=this._effects.toArray();t<e.length;t++)e[t].recycle()},t.prototype.parseSpriteSheet=function(t,e){return this.parseObject(t.data.frames,e)},t.prototype.parseTextureCache=function(t){return this.parseObject(PIXI.utils.TextureCache,t)},Object.defineProperty(t.prototype,"active",{get:function(){return this._active},enumerable:!1,configurable:!0}),t.prototype.__addActiveEffect=function(t){this._effects.add(t)},t.prototype.__removeActiveEffect=function(t){this._effects.remove(t)},t.prototype.__getSprite=function(t){var e=this._cache.sprites,i=e[t];if(null==e[t]&&(i=e[t]=[]),0==i.length){var r=this._settingsCache.sprites[t];if(null==r)throw new Error("Settings not defined for '"+t+"'");var n=new p.Sprite(t,r.texture,r.anchorX,r.anchorY);return n.__fx=this,n}return i.pop()},t.prototype.__getMovieClip=function(t){var e=this._cache.mcs,i=e[t];if(null==e[t]&&(i=e[t]=[]),0==i.length){var r=this._settingsCache.mcs[t];if(null==r)throw new Error("Settings not defined for '"+t+"'");var n=new m.MovieClip(t,r.textures,r.anchorX,r.anchorY);return n.__fx=this,n}return i.pop()},t.prototype.__getParticle=function(){var t=this._cache.particles;if(0==t.length){var e=new f.Particle;return e.__fx=this,e}return t.pop()},t.prototype.__getEmitterCore=function(e,i){var r=this._cache.cores,n=r[e];return null==n&&(n=r[e]=[]),0==n.length?new t.__emitterCores[e](e):n.pop()},t.prototype.__recycleParticle=function(t){this._cache.particles.push(t)},t.prototype.__recycleSprite=function(t,e){this._cache.sprites[t].push(e)},t.prototype.__recycleMovieClip=function(t,e){this._cache.mcs[t].push(e)},t.prototype.__recycleEmitter=function(t){this._effects.remove(t),this.__recycleEmitterCore(t.core),this._cache.emitters.push(t)},t.prototype.__recycleEffectSequence=function(t){this._effects.remove(t),this._cache.effectSequences.push(t)},t.prototype.__recycleEmitterCore=function(t){this._cache.cores[t.type].push(t)},t.prototype.parseObject=function(t,e){var i=t,r={},n={sprites:[],movieClips:[]};for(var s in i)if((!e||-1!=s.indexOf(e))&&(this.initSprite(s,{texture:s,anchorX:.5,anchorY:.5}),n.sprites.push(s),"mc_"==s.substr(0,3))){var o=s.split("_")[1];null==r[o]&&(r[o]=[]),r[o].push(s)}for(var s in r){var a=r[s];n.movieClips.push(s),this.initMovieClip(s,{textures:a,anchorX:.5,anchorY:.5})}return n},t.settingsVersion=0,t.version="1.1.0",t._bundleHash="80c6df7fb0d3d898f34ce0031c037fef",t.ComponentType=s,t.EffectSequenceComponentType=o,t.__emitterCores={circle:u.CircleEmitterCore,box:c.BoxEmitterCore,ring:l.RingEmitterCore},t}();e.FX=g},4029:function(t,e){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.MovieClip=void 0;var n=function(t){function e(e,i,r,n){for(var s=this,o=[],a=i.length,h=0;h<a;h++)o.push(PIXI.Texture.from(i[h]));return(s=t.call(this,o)||this).componentId=e,s.anchor.set(.5,.5),s.loop=!1,s.__sequenceEndTime=0,s}return r(e,t),e.prototype.recycle=function(){this.alpha=1,this.tint=16777215,this.transform.rotation=0,this.transform.scale.set(1),this.parent&&this.parent.removeChild(this),this.gotoAndStop(0),this.__fx.__recycleMovieClip(this.componentId,this)},e.prototype.dispose=function(){this.parent&&this.parent.removeChild(this),this.__fx=null,this.gotoAndStop(0),this.destroy()},e}(PIXI.AnimatedSprite);e.MovieClip=n},5671:function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.Particle=void 0;var s=i(8814),o=i(8312),a=i(1104),h=i(1367),l=i(1850),u=function(t){function e(){var e=t.call(this)||this;return e.dx=0,e.dy=0,e._childEmitters=[],e._hasChildEmitters=!1,e._spawnOnHalfway=!1,e.__recycled=!0,e.__on={died:new l.FXSignal,bounced:new l.FXSignal,updated:new l.FXSignal},e._color=new o.Color,e}return n(e,t),e.prototype.init=function(t,e,i){var r=this.component,n=r.transform,s=this.__fx;this.emitter=t,this.settings=e;var o=this.duration=h.Rnd.float(e.durationMin,e.durationMax)*i;if(this._dt=1/this.duration,this.time=0,this.__recycled=!1,e.addOnTop?t.container.addChild(r):t.container.addChildAt(r,0),r.blendMode=s.useBlendModes?e.blendMode:0,this.startX=n.position.x,this.startY=n.position.y,this.useGravity=t.settings.useGravity,this.useScale=e.useScale,this.useRotation=e.useRotation,this.useAlpha=e.useAlpha,this.useTint=e.useTint,this.useSpawns=e.useSpawns,this.useChilds=e.useChilds,this.useMotion=e.useMotion,this.useGravity)if(this.gravity=t.settings.gravity,this.useFloor=t.settings.useFloor,this.floorY=t.settings.floorY,this.bounceFac=h.Rnd.float(e.bounceFacMin,e.bounceFacMax)*i,this.friction=1-h.Rnd.float(e.frictionMin,e.frictionMax)*i,this._spawnOnBounce=e.spawn.onBounce.length>0,this.useAlign=e.align,e.useMotion){var l=h.Rnd.float(e.moveSpeedMin,e.moveSpeedMax);this.moveSpeedX=l*this.dx*i,this.moveSpeedY=l*this.dy*i}else this.moveSpeedX=this.moveSpeedY=0;else if(e.useMotion){var u=this.distance=.8*h.Rnd.integer(e.distanceMin,e.distanceMax)*i;this.deltaX=.8*(n.position.x+u*this.dx-this.startX),this.deltaY=.8*(n.position.y+u*this.dy-this.startY),this.distanceEase=a.Easing[e.distanceEase],this.useAlign=!1}else n.position.x=this.startX,n.position.y=this.startY;if(e.useRotation&&e.randomStartRotation&&!this.useAlign&&(n.rotation=h.Rnd.float(0,6.28319)),e.useAlpha&&(this.alphaStart=r.alpha=h.Rnd.float(e.alphaStartMin,e.alphaStartMax),this.alphaDelta=h.Rnd.float(e.alphaEndMin,e.alphaEndMax)-this.alphaStart,this.alphaEase=a.Easing[e.alphaEase]||null,this.useFadeIn=e.fadeIn,e.fadeIn&&(this.alphaDuration=o*(1-e.fadeInDurationFac),this.fadeInDuration=o*e.fadeInDurationFac,this.fadeInEase=a.Easing[e.fadeInEase||"easeInSine"])),e.useScale&&(this.uniformScale=e.uniformScale,this.useScaleIn=e.scaleIn,e.useScale?(this.uniformScale=e.uniformScale,this.scaleEase=a.Easing[e.scaleEase],e.uniformScale?(this.scaleStart=n.scale.x=n.scale.y=h.Rnd.float(e.scaleStartMin,e.scaleStartMax)*i,this.scaleDelta=(h.Rnd.float(e.scaleEndMin,e.scaleEndMax)-this.scaleStart)*i):(this.scaleXStart=n.scale.x=h.Rnd.float(e.scaleXStartMin,e.scaleXStartMax)*i,this.scaleXDelta=(h.Rnd.float(e.scaleXEndMin,e.scaleXEndMax)-this.scaleXStart)*i,this.scaleXEase=a.Easing[e.scaleXEase],this.scaleYStart=n.scale.y=h.Rnd.float(e.scaleYStartMin,e.scaleYStartMax)*i,this.scaleYDelta=(h.Rnd.float(e.scaleYEndMin,e.scaleYEndMax)-this.scaleYStart)*i,this.scaleYEase=a.Easing[e.scaleYEase]),e.scaleIn&&(this.scaleDuration=o*(1-e.scaleInDurationFac),this.scaleInDuration=o*e.scaleInDurationFac,this.scaleInEase=a.Easing[e.scaleInEase||"easeInSine"])):e.uniformScale?(n.scale.x=e.scaleStartMin,n.scale.y=e.scaleStartMin):(n.scale.x=e.scaleXStartMin,n.scale.y=e.scaleYStartMin)),e.useRotation&&(this.rotationSpeed=h.Rnd.float(e.rotationSpeedMin,e.rotationSpeedMax)*i,e.randomRotationDirection&&(this.rotationSpeed*=h.Rnd.sign())),e.useTint&&(this.tintEase=a.Easing[e.tintEase],this._color.setRgb(e.tintStart,e.tintEnd)),e.useChilds){this._childEmitters.length=0;var c=e.childs.length;if(this._hasChildEmitters=c>0,this._childEmitters)for(;--c>-1;){var d=e.childs[c],p=s.getParticleEmitterById(d.id);p.init(t.container,!0,(d.scale||1)*(i||1)),d.adoptRotation&&(p.rotation=n.rotation,p.__adoptRotation=!0),p.__parent=this,this._childEmitters.push(p)}}return e.useSpawns&&(e.spawn.onStart.length>0&&t.__subSpawn(this,e.spawn.onStart),this._spawnOnHalfway=e.spawn.onHalfway.length>0),t.__on.particleSpawned.__hasCallback&&t.__on.particleSpawned.dispatch(this),this},e.prototype.update=function(t){var e=this.time+=t,i=this.duration;if(e>=i)this.emitter.__removeParticle(this);else{var r=this.component,n=r.transform,s=e*t;if(this.useGravity){var o=t/.0166666;if(n.position.x+=this.moveSpeedX*o,n.position.y+=this.moveSpeedY*o,this.moveSpeedY+=this.gravity*o,this.useAlign&&(n.rotation=Math.atan2(this.moveSpeedY,this.moveSpeedX)),this.useFloor&&this.floorY>0&&n.position.y>this.floorY){n.position.y=this.floorY,this.moveSpeedY*=-this.bounceFac,this.moveSpeedX*=this.friction,this.useSpawns&&this._spawnOnBounce&&this.emitter.__subSpawn(this,this.settings.spawn.onBounce);var a=this.emitter;return a.__on.particleBounced.__hasCallback&&a.__on.particleBounced.dispatch(this),this.__on.bounced.__hasCallback&&this.__on.bounced.dispatch(this),void(this.settings.stopOnBounce&&a.__removeParticle(this))}}else this.useMotion&&(this.distanceEase?(n.position.x=this.distanceEase(e,this.startX,this.deltaX,i),n.position.y=this.distanceEase(e,this.startY,this.deltaY,i)):(n.position.x=this.deltaX*s+this.startX,n.position.y=this.deltaY*s+this.startY));if(this.useAlpha&&(this.useFadeIn?e<this.fadeInDuration?r.alpha=this.fadeInEase(e,0,this.alphaStart,this.fadeInDuration):r.alpha=this.alphaEase(e-this.fadeInDuration,this.alphaStart,this.alphaDelta,this.alphaDuration):this.alphaEase?r.alpha=this.alphaEase(e,this.alphaStart,this.alphaDelta,i):r.alpha=this.alphaDelta*s+this.alphaStart),this.useRotation&&(n.rotation+=this.rotationSpeed),this.useScale&&(this.uniformScale?this.useScaleIn?e<this.scaleInDuration?n.scale.x=n.scale.y=this.scaleInEase(e,0,this.scaleStart,this.scaleInDuration):n.scale.x=n.scale.y=this.scaleEase(e-this.scaleInDuration,this.scaleStart,this.scaleDelta,this.scaleDuration):this.scaleEase?(n.scale.x=this.scaleEase(e,this.scaleStart,this.scaleDelta,i),n.scale.y=this.scaleEase(e,this.scaleStart,this.scaleDelta,i)):n.scale.x=n.scale.y=this.scaleDelta*s+this.scaleStart:this.useScaleIn?e<this.scaleInDuration?(n.scale.x=this.scaleInEase(e,0,this.scaleXStart,this.scaleInDuration),n.scale.y=this.scaleInEase(e,0,this.scaleYStart,this.scaleInDuration)):(n.scale.x=this.scaleEase(e-this.scaleInDuration,this.scaleXStart,this.scaleXDelta,this.scaleDuration),n.scale.y=this.scaleEase(e-this.scaleInDuration,this.scaleYStart,this.scaleYDelta,this.scaleDuration)):(this.scaleXEase?n.scale.x=this.scaleXEase(e,this.scaleXStart,this.scaleXDelta,i):n.scale.x=this.scaleXDelta*s+this.scaleXStart,this.scaleYEase?n.scale.y=this.scaleYEase(e,this.scaleYStart,this.scaleYDelta,i):n.scale.y=this.scaleYDelta*s+this.scaleYStart)),this.useTint&&(r.tint=this._color.tween(this.tintEase,e,i)),this._spawnOnHalfway&&e>=.5&&(this._spawnOnHalfway=!1,this.emitter.__subSpawn(this,this.settings.spawn.onHalfway)),this.useChilds&&this._hasChildEmitters)for(var h=this._childEmitters,l=h.length;--l>-1;){var u=h[l];u.__recycled||(u.x=r.position.x,u.y=n.position.y,u.__adoptRotation&&(u.rotation=n.rotation))}this.emitter.__on.particleUpdated.__hasCallback&&this.emitter.__on.particleUpdated.dispatch(this),this.__on.updated.__hasCallback&&this.__on.updated.dispatch(this)}},e.prototype.stop=function(){this.time=this.duration},e.prototype.recycle=function(){this.emitter.__on.particleDied.__hasCallback&&this.emitter.__on.particleDied.dispatch(this);var t=this.__on;if(t.died.__hasCallback&&(t.died.dispatch(this),t.died.removeAll()),t.updated.__hasCallback&&t.updated.removeAll(),t.bounced.__hasCallback&&t.bounced.removeAll(),this._hasChildEmitters){for(var e=this._childEmitters,i=e.length;--i>-1;)e[i].stop(!0);this._childEmitters.length=0,this._hasChildEmitters=!1}this.component.recycle(),this.__fx.__recycleParticle(this),this.dx=this.dy=this.deltaX=this.deltaY=0,this.component=null,this.emitter=null,this.settings=null,this.__recycled=!0},e.prototype.dispose=function(){this.recycle(),this.__fx=null},Object.defineProperty(e.prototype,"x",{get:function(){return this.component.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.component.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"on",{get:function(){return this.__on},enumerable:!1,configurable:!0}),e.prototype.__removeChildEmitter=function(t){var e=this._childEmitters.indexOf(t);e>-1&&(this._childEmitters.splice(e,1),0==this._childEmitters.length&&(this._hasChildEmitters=!1))},e}(s.Node);e.Particle=u},3376:function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.ParticleEmitter=void 0;var s=i(5229),o=i(8814),a=i(1367),h=i(1850),l=function(t){function e(e){var i=t.call(this,e)||this;return i.targetOffset=0,i.autoRecycleOnComplete=!0,i._particles=new o.LinkedList,i._particleCount=0,i._childEmitters=[],i._hasChildEmitters=!1,i._paused=!1,i.__adoptRotation=!1,i.__on={started:new h.FXSignal,completed:new h.FXSignal,exhausted:new h.FXSignal,particleUpdated:new h.FXSignal,particleSpawned:new h.FXSignal,particleBounced:new h.FXSignal,particleDied:new h.FXSignal},i}return n(e,t),e.prototype.init=function(t,e,i){return void 0===e&&(e=!0),void 0===i&&(i=1),this.container=t,this.core.__scaleMod=this._scaleMod=i,e&&this.start(),this},e.prototype.start=function(){if(!this._active){var t=Date.now(),e=this.settings,i=this.__fx;i.emitterCount++,this.infinite=e.infinite,this._time=Number.MAX_VALUE,e.duration>0?this.endTime=t+1e3*e.duration:this.endTime=e.duration,this._nextSpawnTime=0,this._particleCount=0,this._active=!0,this.exhausted=this.completed=!1,i.__addActiveEffect(this);var r=e.childs.length;if(this._hasChildEmitters=r>0,this._hasChildEmitters)for(;--r>-1;){var n=e.childs[r],s=i.getParticleEmitterById(n.id),o=i.__containers[s.settings.containerId]||this.container;s.init(o,!0,(n.scale||1)*(this._scaleMod||1)),n.adoptRotation&&(s.rotation=this._rotation,s.__adoptRotation=!0),s.__parent=this,this._childEmitters.push(s)}return this.rotation=this._rotation,this.__on.started.__hasCallback&&this.__on.started.dispatch(this),this}},e.prototype.stop=function(t){void 0===t&&(t=!0),t?(this.exhausted=!0,this._hasChildEmitters&&this.stopChildEmitters(!0)):(this.__on.completed.__hasCallback&&this.__on.completed.dispatch(this),this.autoRecycleOnComplete?this.recycle():(this.recycleParticles(),this.completed=!0,this._active=!1,this.__fx.__removeActiveEffect(this)))},e.prototype.update=function(t){if(this._active){var e=Date.now();this.exhausted?0==this._particleCount&&(this._active=!1,this.completed=!0,this.__on.completed.__hasCallback&&this.__on.completed.dispatch(this),this.__fx.__removeActiveEffect(this),this.autoRecycleOnComplete&&this.recycle()):(0!==this.settings.autoRotation&&(this.rotation+=this.settings.autoRotation*(t/.016666)),this.target&&(this.rotation=this.target.rotation,0==this.targetOffset?(this.x=this.target.x,this.y=this.target.y):(this.x=this.target.x+Math.cos(this._rotation)*this.targetOffset,this.y=this.target.y+Math.sin(this._rotation)*this.targetOffset)),0!=this.endTime||this.infinite?this.infinite||e<this.endTime?(this._time+=t,this._time>=this._nextSpawnTime&&(this._time=0,this.spawn(),this._nextSpawnTime=this._time+a.Rnd.float(this.settings.spawnFrequencyMin,this.settings.spawnFrequencyMax))):(this.exhausted=!0,this.__on.exhausted.__hasCallback&&this.__on.exhausted.dispatch(this)):(this.spawn(),this.exhausted=!0));for(var i,r=this._particles.first;r;)i=r.next,r.update(t),r=i;return this}},e.prototype.spawn=function(){if(!this._paused){var t=this.settings,e=this.__fx,i=a.Rnd.integer(t.spawnCountMin,t.spawnCountMax)*e.particleFac;for(this.core.prepare(i);--i>-1;){if(this._particleCount>=t.maxParticles||e.particleCount>=e.maxParticles)return;var r=t.particleSettings,n=e.__getParticle(),s=void 0;switch(r.componentType){case 0:n.componentId=r.componentId,s=e.__getSprite(n.componentId);break;case 1:n.componentId=r.componentId,s=e.__getMovieClip(n.componentId),r.componentParams&&(s.loop=!(null==r.componentParams.loop||!r.componentParams.loop),s.animationSpeed=a.Rnd.float(r.componentParams.animationSpeedMin||1,r.componentParams.animationSpeedMax||1)),s.gotoAndPlay(0)}s.anchor.set(r.componentParams.anchorX,r.componentParams.anchorY),n.component=s,this.core.emit(n),n.init(this,r,this._scaleMod),this._particles.add(n),this._particleCount++,e.particleCount++}return this.core.step(),this._nextSpawnTime=a.Rnd.float(t.spawnFrequencyMin,t.spawnFrequencyMax),this}},e.prototype.recycle=function(){if(!this.__recycled){this.__parent&&(this.__parent.__removeChildEmitter(this),this.__parent=null),this.recycleParticles(),this.settings=null,this._active=!1,this._paused=!1,this.completed=!0,this._x=this._y=this._rotation=0,this._hasChildEmitters&&(this.stopChildEmitters(!0),this._childEmitters.length=0,this._hasChildEmitters=!1),this.__fx.emitterCount--,this.__fx.__recycleEmitter(this),this.__recycled=!0,this.__adoptRotation=!1,this.core=null,this.target=null,this.name=null;var t=this.__on;t.completed.__hasCallback&&t.completed.removeAll(),t.started.__hasCallback&&t.started.removeAll(),t.exhausted.__hasCallback&&t.exhausted.removeAll(),t.particleBounced.__hasCallback&&t.particleBounced.removeAll(),t.particleDied.__hasCallback&&t.particleDied.removeAll(),t.particleSpawned.__hasCallback&&t.particleSpawned.removeAll(),t.particleUpdated.__hasCallback&&t.particleUpdated.removeAll()}},e.prototype.dispose=function(){for(var t,e=this._particles,i=e.first;i;)t=i.next,i.recycle(),i=t;e.clear(),this.__recycled=!0,this._hasChildEmitters&&this.stopChildEmitters(!1),this.__fx.particleCount-=this._particleCount,this._particles=null,this.componentId=null,this.settings=null,this._active=!1,this.completed=!0,this._childEmitters=null,this.core&&this.core.dispose(),this.core=null,this.target=null,this.name=null;var r=this.__on;r.completed.removeAll(),r.started.removeAll(),r.exhausted.removeAll(),r.particleBounced.removeAll(),r.particleDied.removeAll(),r.particleSpawned.removeAll(),r.particleUpdated.removeAll(),this.__parent=null,this.__fx.__removeActiveEffect(this),this.__fx=null},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){if(this._x=this.core.x=t,this._xPosIntialized||(this.core.__x=t,this._xPosIntialized=!0),this._hasChildEmitters)for(var e=this._childEmitters,i=e.length;--i>-1;)e[i].x=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){if(this._y=this.core.y=t,this._yPosIntialized||(this.core.__y=t,this._yPosIntialized=!0),this._hasChildEmitters)for(var e=this._childEmitters,i=e.length;--i>-1;)e[i].y=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rotation",{get:function(){return this._rotation},set:function(t){if(this._rotation=this.core.rotation=t,this._hasChildEmitters)for(var e=this._childEmitters,i=e.length;--i>-1;){var r=e[i];r.__adoptRotation&&(r.rotation=r.settings.rotation+t)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){if(this._paused=t,this._hasChildEmitters)for(var e=this._childEmitters,i=e.length;--i>-1;)e[i].paused=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"on",{get:function(){return this.__on},enumerable:!1,configurable:!0}),e.prototype.recycleParticles=function(){for(var t,e=this._particles.first;e;)t=e.next,e.recycle(),e=t;this._particles.clear(),this.__fx.particleCount-=this._particleCount},e.prototype.stopChildEmitters=function(t){for(var e=this._childEmitters,i=e.length;--i>-1;)e[i].stop(t)},e.prototype.__removeParticle=function(t){t.useSpawns&&this._spawnOnComplete&&this.__subSpawn(t,this.settings.particleSettings.spawn.onComplete),this._particles.remove(t),this._particleCount--,this.__fx.particleCount--,t.recycle()},e.prototype.__removeChildEmitter=function(t){var e=this._childEmitters.indexOf(t);e>-1&&(this._childEmitters.splice(e,1),0==this._childEmitters.length&&(this._hasChildEmitters=!1))},e.prototype.__subSpawn=function(t,e){var i=this.__fx;if(e)for(var r=e.length;--r>-1;){var n=e[r],s=void 0,o=void 0;switch(n.type){case 0:s=i.getParticleEmitterById(n.id),o=i.__containers[s.settings.containerId]||this.container,s.init(o,!0,(n.scale||1)*this._scaleMod),n.adoptRotation?(s.rotation=t.component.rotation+s.settings.rotation,s.__adoptRotation=!0):s.rotation=s.settings.rotation;break;case 1:s=i.getEffectSequenceById(n.id),o=i.__containers[s.settings.containerId]||this.container,s.init(o,0,!0,(n.scale||1)*this._scaleMod),n.adoptRotation&&(s.rotation=t.component.rotation)}s.x=t.component.x,s.y=t.component.y}},e.prototype.__applySettings=function(t){var e=this.__fx;this.__recycled=this._xPosIntialized=this._yPosIntialized=!1,this.settings=t,this.core=e.__getEmitterCore(t.core.type,this),this.core.init(this),this.rotation=t.rotation,this.name=t.name,this._spawnOnComplete=t.particleSettings.spawn.onComplete.length>0,this._childEmitters.length=0},e.prototype.__setCore=function(t){this.core=this.__fx.__getEmitterCore(t,this),this.core.init(this),this.core.__scaleMod=this._scaleMod,this._xPosIntialized=this._yPosIntialized=!1},e}(s.BaseEffect);e.ParticleEmitter=l},3705:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sanitizer=void 0;var i=function(){function t(){}return t.sanitizeBundle=function(e){for(var i=0,r=e.emitters;i<r.length;i++){var n=r[i],s=t._presetStructure.emitter;t.parse(n,s,t._presetStructure.emitterSpawn)}for(var o=0,a=e.sequences;o<a.length;o++){var h=a[o];s=t._presetStructure.sequence,t.parse(h,s,t._presetStructure.sequenceEffect)}},t.parse=function(e,i,r){for(var n in i)if(null==e[n])e[n]=i[n];else{var s=e[n];if("object"!=typeof s)continue;var o=i[n];if(s.hasOwnProperty("length"))for(var a=0,h=s;a<h.length;a++){var l=h[a];for(var u in r)null==l[u]&&(l[u]=r[u])}else t.parse(s,o,r)}},t._presetStructure={sequence:{id:0,name:"",type:1,delay:0,scaleMin:1,scaleMax:1,effects:[]},sequenceEffect:{id:0,componentId:null,componentType:0,delay:0,componentParams:{animationSpeedMin:1,animationSpeedMax:1,anchorX:.5,anchorY:.5,loop:!1},scaleMin:1,scaleMax:1,alphaMin:1,alphaMax:1,rotationMin:0,rotationMax:0,blendMode:0,duration:.1,tint:16777215,containerId:"",triggerValue:""},emitter:{id:0,name:"",type:0,core:{type:"circle",params:{radius:100,radial:!0,angle:6.28318530718,uniform:!1,width:100,height:100}},spawnFrequencyMin:.1,spawnFrequencyMax:.1,maxParticles:1e3,spawnCountMin:1,spawnCountMax:1,duration:0,infinite:!0,useGravity:!1,gravity:0,useFloor:!1,floorY:700,rotation:0,autoRotation:0,particleSettings:{componentType:0,componentId:"",componentParams:{animationSpeedMin:1,animationSpeedMax:1,anchorX:.5,anchorY:.5,loop:!1},durationMin:1,durationMax:2,distanceMin:0,distanceMax:0,distanceEase:"linear",moveSpeedMin:0,moveSpeedMax:0,bounceFacMin:0,bounceFacMax:0,frictionMin:0,frictionMax:0,useMotion:!1,useRotation:!1,useAlpha:!1,useScale:!1,useTint:!1,useChilds:!1,useSpawns:!1,stopOnBounce:!1,align:!1,blendMode:1,addOnTop:!0,rotationSpeedMin:0,rotationSpeedMax:0,randomRotationDirection:!1,randomStartRotation:!1,fadeIn:!0,fadeInDurationFac:.1,fadeInEase:"linear",alphaStartMin:.7,alphaStartMax:.9,alphaEndMin:.7,alphaEndMax:.8,alphaEase:"linear",tintStart:16777215,tintEnd:16777215,tintEase:"linear",scaleIn:!1,scaleInDurationFac:.2,scaleInEase:"linear",uniformScale:!0,scaleXStartMin:1,scaleXStartMax:1,scaleXEndMin:1,scaleXEndMax:1,scaleXEase:"linear",scaleYStartMin:1,scaleYStartMax:1,scaleYEndMin:1,scaleYEndMax:1,scaleYEase:"linear",scaleStartMin:1,scaleStartMax:1,scaleEndMin:1,scaleEndMax:1,scaleEase:"linear",childs:[],spawn:{onComplete:[],onBounce:[],onHalfway:[],onStart:[]}},childs:[]},emitterSpawn:{type:0,id:0,scale:1,adoptRotation:!0,containerId:""}},t}();e.Sanitizer=i},9528:function(t,e){"use strict";var i,r=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0}),e.Sprite=void 0;var n=function(t){function e(e,i,r,n){var s=t.call(this,PIXI.Texture.from(i))||this;return s.componentId=e,s.anchor.set(r||.5,n||.5),s.__sequenceEndTime=null,s}return r(e,t),e.prototype.recycle=function(){this.tint=16777215,this.alpha=1,this.transform.rotation=0,this.transform.scale.set(1),this.parent&&this.parent.removeChild(this),this.__fx.__recycleSprite(this.componentId,this)},e.prototype.dispose=function(){this.__fx=null,this.recycle(),this.destroy(!1)},e}(PIXI.Sprite);e.Sprite=n},2635:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BaseEmitterCore=void 0;var i=function(){function t(t){this.type=t,this._dx=0,this._dy=0,this._rotation=0}return t.prototype.init=function(t){this.emitter=t,this._settings=t.settings.core.params,this.x=this.__x=t.x,this.y=this.__y=t.y,this.rotation=t.rotation},t.prototype.emit=function(t){},t.prototype.prepare=function(t){this._posInterpolationStep=1/t,this._t=.5*this._posInterpolationStep},t.prototype.step=function(){this.__x=this.x,this.__y=this.y},t.prototype.recycle=function(){this.emitter=null,this._settings=null},t.prototype.dispose=function(){this.recycle(),this.emitter=null,this._settings=null},Object.defineProperty(t.prototype,"rotation",{get:function(){return this._rotation},set:function(t){this._rotation=t,this._dx=Math.cos(t),this._dy=Math.sin(t)},enumerable:!1,configurable:!0}),t.__TYPE_BOX="box",t.__TYPE_CIRCLE="circle",t.__TYPE_RING="ring",t}();e.BaseEmitterCore=i},6758:function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.BoxEmitterCore=void 0;var s=i(2635),o=i(1367),a=function(t){function e(){return t.call(this,s.BaseEmitterCore.__TYPE_BOX)||this}return n(e,t),e.prototype.emit=function(t){var e=this._settings,i=this.emitter,r=.5*e.width*this.__scaleMod,n=.5*e.height*this.__scaleMod,s=i.rotation,a=o.Rnd.float(-r,r),h=o.Rnd.float(-n,n);0!=s?(t.component.transform.position.x=this.__x+this._t*(this.x-this.__x)+a*Math.cos(s)-h*Math.sin(s),t.component.transform.position.y=this.__y+this._t*(this.y-this.__y)+a*Math.sin(s)+h*Math.cos(s)):(t.component.transform.position.x=this.__x+this._t*(this.x-this.__x)+a,t.component.transform.position.y=this.__y+this._t*(this.y-this.__y)+h),e.radial?(s+=Math.atan2(h,a),t.dx=Math.cos(s),t.dy=Math.sin(s)):(t.dx=this._dx,t.dy=this._dy),t.component.transform.rotation=s,this._t+=this._posInterpolationStep},e}(s.BaseEmitterCore);e.BoxEmitterCore=a},1111:function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.CircleEmitterCore=void 0;var s=i(2635),o=i(1367),a=function(t){function e(){return t.call(this,s.BaseEmitterCore.__TYPE_CIRCLE)||this}return n(e,t),e.prototype.emit=function(t){var e,i=this._settings,r=this.emitter;if(e=i.angle?o.Rnd.float(.5*-i.angle,.5*i.angle)+r.rotation:o.Rnd.float(0,6.28319)+r.rotation,i.radius>0){var n=o.Rnd.float(0,i.radius)*this.__scaleMod;t.component.transform.position.x=this.__x+this._t*(this.x-this.__x)+Math.cos(e)*n,t.component.transform.position.y=this.__y+this._t*(this.y-this.__y)+Math.sin(e)*n}else t.component.x=this.__x+this._t*(this.x-this.__x),t.component.y=this.__y+this._t*(this.y-this.__y);i.radial?(t.dx=Math.cos(e),t.dy=Math.sin(e),t.component.transform.rotation=e):(t.dx=this._dx,t.dy=this._dy,t.component.transform.rotation=r.rotation),this._t+=this._posInterpolationStep},e}(s.BaseEmitterCore);e.CircleEmitterCore=a},6632:function(t,e,i){"use strict";var r,n=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0}),e.RingEmitterCore=void 0;var s=i(2635),o=i(1367),a=function(t){function e(){return t.call(this,s.BaseEmitterCore.__TYPE_RING)||this}return n(e,t),e.prototype.prepare=function(e){t.prototype.prepare.call(this,e);var i=this._settings.angle;2*Math.PI-i<.1?(this._uniformStep=i/e,this._angle=i):(this._uniformStep=i/(e-1),this._angle=.5*-i)},e.prototype.emit=function(t){var e,i=this._settings,r=this.emitter;i.uniform?(e=this._angle+r.rotation,this._angle+=this._uniformStep):e=o.Rnd.float(.5*-i.angle,.5*i.angle)+r.rotation;var n=i.radius*this.__scaleMod;t.component.transform.position.x=this.__x+this._t*(this.x-this.__x)+Math.cos(e)*n,t.component.transform.position.y=this.__y+this._t*(this.y-this.__y)+Math.sin(e)*n,i.radial?(t.dx=Math.cos(e),t.dy=Math.sin(e),t.component.transform.rotation=e):(t.dx=this._dx,t.dy=this._dy,t.component.transform.rotation=r.rotation),this._t+=this._posInterpolationStep},e}(s.BaseEmitterCore);e.RingEmitterCore=a},3155:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(4693);Object.defineProperty(e,"FX",{enumerable:!0,get:function(){return r.FX}});var n=i(5229);Object.defineProperty(e,"BaseEffect",{enumerable:!0,get:function(){return n.BaseEffect}});var s=i(8139);Object.defineProperty(e,"EffectSequence",{enumerable:!0,get:function(){return s.EffectSequence}});var o=i(4029);Object.defineProperty(e,"MovieClip",{enumerable:!0,get:function(){return o.MovieClip}});var a=i(5671);Object.defineProperty(e,"Particle",{enumerable:!0,get:function(){return a.Particle}});var h=i(3376);Object.defineProperty(e,"ParticleEmitter",{enumerable:!0,get:function(){return h.ParticleEmitter}});var l=i(9528);Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return l.Sprite}});var u=i(2635);Object.defineProperty(e,"BaseEmitterCore",{enumerable:!0,get:function(){return u.BaseEmitterCore}});var c=i(6758);Object.defineProperty(e,"BoxEmitterCore",{enumerable:!0,get:function(){return c.BoxEmitterCore}});var d=i(1111);Object.defineProperty(e,"CircleEmitterCore",{enumerable:!0,get:function(){return d.CircleEmitterCore}});var p=i(6632);Object.defineProperty(e,"RingEmitterCore",{enumerable:!0,get:function(){return p.RingEmitterCore}});var f=i(8312);Object.defineProperty(e,"Color",{enumerable:!0,get:function(){return f.Color}});var m=i(1104);Object.defineProperty(e,"Easing",{enumerable:!0,get:function(){return m.Easing}});var _=i(8814);Object.defineProperty(e,"LinkedList",{enumerable:!0,get:function(){return _.LinkedList}});var g=i(1367);Object.defineProperty(e,"Rnd",{enumerable:!0,get:function(){return g.Rnd}});var v=i(1850);Object.defineProperty(e,"FXSignal",{enumerable:!0,get:function(){return v.FXSignal}})},8312:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Color=void 0;var i=function(){function t(){}return t.prototype.setRgb=function(t,e){this.startRgb=this.rgb=t,this.r=this.sR=t>>16&255,this.g=this.sG=t>>8&255,this.b=this.sB=255&t,this.targetRgb=e,this.dR=(e>>16&255)-this.r,this.dG=(e>>8&255)-this.g,this.dB=(255&e)-this.b},t.prototype.tween=function(t,e,i){return t?(this.r=t(e,this.sR,this.dR,i),this.g=t(e,this.sG,this.dG,i),this.b=t(e,this.sB,this.dB,i)):(e/=i,this.r=this.dR*e+this.sR,this.g=this.dG*e+this.sG,this.b=this.dB*e+this.sB),this.rgb=this.r<<16|this.g<<8|this.b,this.rgb},t}();e.Color=i},1104:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Easing=void 0;var i=function(){function t(){}return t.linear=function(t,e,i,r){return i*t/r+e},t.easeInQuad=function(t,e,i,r){return i*(t/=r)*t+e},t.easeOutQuad=function(t,e,i,r){return-i*(t/=r)*(t-2)+e},t.easeInOutQuad=function(t,e,i,r){return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},t.easeInCubic=function(t,e,i,r){return i*(t/=r)*t*t+e},t.easeOutCubic=function(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e},t.easeInOutCubic=function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},t.easeInQuart=function(t,e,i,r){return i*(t/=r)*t*t*t+e},t.easeOutQuart=function(t,e,i,r){return-i*((t=t/r-1)*t*t*t-1)+e},t.easeInOutQuart=function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},t.easeInQuint=function(t,e,i,r){return i*(t/=r)*t*t*t*t+e},t.easeOutQuint=function(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e},t.easeInOutQuint=function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},t.easeInSine=function(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e},t.easeOutSine=function(t,e,i,r){return i*Math.sin(t/r*(Math.PI/2))+e},t.easeInOutSine=function(t,e,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+e},t.easeInExpo=function(t,e,i,r){return 0===t?e:i*Math.pow(2,10*(t/r-1))+e},t.easeOutExpo=function(t,e,i,r){return t===r?e+i:i*(1-Math.pow(2,-10*t/r))+e},t.easeInOutExpo=function(t,e,i,r){return(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},t.easeInCirc=function(t,e,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},t.easeOutCirc=function(t,e,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+e},t.easeInOutCirc=function(t,e,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},t.easeInElastic=function(t,e,i,r){var n,s,o;return o=1.70158,0===t||(t/=r),(s=0)||(s=.3*r),(n=i)<Math.abs(i)?(n=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s)+e},t.easeOutElastic=function(t,e,i,r){var n,s,o;return o=1.70158,0===t||(t/=r),(s=0)||(s=.3*r),(n=i)<Math.abs(i)?(n=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/s)+i+e},t.easeInOutElastic=function(t,e,i,r){var n,s,o;return o=1.70158,0===t||(t/=r/2),(s=0)||(s=r*(.3*1.5)),(n=i)<Math.abs(i)?(n=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s)*-.5+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s)*.5+i+e},t.easeInBack=function(t,e,i,r,n){return void 0===n&&(n=1.70158),i*(t/=r)*t*((n+1)*t-n)+e},t.easeOutBack=function(t,e,i,r,n){return void 0===n&&(n=1.70158),i*((t=t/r-1)*t*((n+1)*t+n)+1)+e},t.easeInOutBack=function(t,e,i,r,n){return void 0===n&&(n=1.70158),(t/=r/2)<1?i/2*(t*t*((1+(n*=1.525))*t-n))+e:i/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},t.easeInBounce=function(e,i,r,n){return r-t.easeOutBounce(n-e,0,r,n)+i},t.easeOutBounce=function(t,e,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},t.easeInOutBounce=function(e,i,r,n){return e<n/2?.5*t.easeInBounce(2*e,0,r,n)+i:.5*t.easeOutBounce(2*e-n,0,r,n)+.5*r+i},t}();e.Easing=i},1850:(t,e,i)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FXSignalListener=e.FXSignal=void 0;var r=i(8814),n=function(){function t(){this.__hasCallback=!1,this._list=new r.LinkedList}return t.prototype.add=function(t,e,i){this._list.add(new r.Node(new s(t,e,!1,i))),this.__hasCallback=!0},t.prototype.addOnce=function(t,e){this._list.add(new r.Node(new s(t,e,!0))),this.__hasCallback=!0},t.prototype.dispatch=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i,r=this._list,n=r.first;n;){i=n.next;var s=!0,o=n.data;o.callRate&&o.calls%o.callRate!=0&&(s=!1),s&&(o.callback.apply(o.scope,t),o.once&&r.remove(n)),n=i}this.__hasCallback=r.__length>0},t.prototype.remove=function(t){for(var e,i=this._list,r=i.first;r;){if(e=r.next,r.data.callback===t)return void i.remove(r);r=e}this.__hasCallback=i.__length>0},t.prototype.removeAll=function(){this._list.clear(),this.__hasCallback=!1},t}();e.FXSignal=n;var s=function(t,e,i,r){this.callback=t,this.scope=e,this.once=i,this.callRate=r,this.calls=0};e.FXSignalListener=s},8814:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Node=e.LinkedList=void 0;var i=function(){function t(){this.__length=0}return Object.defineProperty(t.prototype,"length",{get:function(){return this.__length},enumerable:!1,configurable:!0}),t.prototype.add=function(t){return null==this.first?this.first=this.last=t:(t.prev=this.last,this.last.next=t,this.last=t),t.list=this,this.__length++,this},t.prototype.remove=function(t){if(null!=t.list)return this.first===this.last?this.first=this.last=null:this.__length>0&&(t===this.last?(t.prev.next=null,this.last=t.prev):t===this.first?(t.next.prev=null,this.first=t.next):(t.next.prev=t.prev,t.prev.next=t.next)),t.next=t.prev=t.list=null,this.__length--,this},t.prototype.clear=function(){if(this.first){for(var t=this.first;t;){var e=t.next;t.next=t.prev=t.list=null,t=e}this.first=this.last=null}},t.prototype.toArray=function(){var t=[];if(!this.first)return t;for(var e=this.first;e;)t.push(e),e=e.next;return t},t}();e.LinkedList=i;var r=function(){function t(t){this.data=t}return t.prototype.update=function(t){},t.prototype.dispose=function(){},t}();e.Node=r},1367:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rnd=void 0;var i=function(){function t(){}return t.float=function(t,e){return Math.random()*(e-t)+t},t.bool=function(t){return void 0===t&&(t=.5),Math.random()<t},t.sign=function(t){return void 0===t&&(t=.5),Math.random()<t?1:-1},t.bit=function(t){return void 0===t&&(t=.5),Math.random()<t?1:0},t.integer=function(t,e){return Math.floor(Math.random()*(e-t)+t)},t}();e.Rnd=i},720:t=>{"use strict";function e(t,e,s){s=s||2;var o,a,h,c,d,f,m,_=e&&e.length,g=_?e[0]*s:t.length,v=i(t,0,g,s,!0),y=[];if(!v||v.next===v.prev)return y;if(_&&(v=function(t,e,n,s){var o,a,h,c=[];for(o=0,a=e.length;o<a;o++)(h=i(t,e[o]*s,o<a-1?e[o+1]*s:t.length,s,!1))===h.next&&(h.steiner=!0),c.push(p(h));for(c.sort(l),o=0;o<c.length;o++)n=r(n=u(c[o],n),n.next);return n}(t,e,v,s)),t.length>80*s){o=h=t[0],a=c=t[1];for(var b=s;b<g;b+=s)(d=t[b])<o&&(o=d),(f=t[b+1])<a&&(a=f),d>h&&(h=d),f>c&&(c=f);m=0!==(m=Math.max(h-o,c-a))?1/m:0}return n(v,y,s,o,a,m),y}function i(t,e,i,r,n){var s,o;if(n===A(t,e,i,r)>0)for(s=e;s<i;s+=r)o=S(s,t[s],t[s+1],o);else for(s=i-r;s>=e;s-=r)o=S(s,t[s],t[s+1],o);return o&&g(o,o.next)&&(E(o),o=o.next),o}function r(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!g(r,r.next)&&0!==_(r.prev,r,r.next))r=r.next;else{if(E(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function n(t,e,i,l,u,c,p){if(t){!p&&c&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=d(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,s,o,a,h,l=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,r=i,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(h=l;a>0||h>0&&r;)0!==a&&(0===h||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;i=r}s.nextZ=null,l*=2}while(o>1)}(n)}(t,l,u,c);for(var f,m,_=t;t.prev!==t.next;)if(f=t.prev,m=t.next,c?o(t,l,u,c):s(t))e.push(f.i/i),e.push(t.i/i),e.push(m.i/i),E(t),t=m.next,_=m.next;else if((t=m)===_){p?1===p?n(t=a(r(t),e,i),e,i,l,u,c,2):2===p&&h(t,e,i,l,u,c):n(r(t),e,i,l,u,c,1);break}}}function s(t){var e=t.prev,i=t,r=t.next;if(_(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(f(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&_(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function o(t,e,i,r){var n=t.prev,s=t,o=t.next;if(_(n,s,o)>=0)return!1;for(var a=n.x<s.x?n.x<o.x?n.x:o.x:s.x<o.x?s.x:o.x,h=n.y<s.y?n.y<o.y?n.y:o.y:s.y<o.y?s.y:o.y,l=n.x>s.x?n.x>o.x?n.x:o.x:s.x>o.x?s.x:o.x,u=n.y>s.y?n.y>o.y?n.y:o.y:s.y>o.y?s.y:o.y,c=d(a,h,e,i,r),p=d(l,u,e,i,r),m=t.prevZ,g=t.nextZ;m&&m.z>=c&&g&&g.z<=p;){if(m!==t.prev&&m!==t.next&&f(n.x,n.y,s.x,s.y,o.x,o.y,m.x,m.y)&&_(m.prev,m,m.next)>=0)return!1;if(m=m.prevZ,g!==t.prev&&g!==t.next&&f(n.x,n.y,s.x,s.y,o.x,o.y,g.x,g.y)&&_(g.prev,g,g.next)>=0)return!1;g=g.nextZ}for(;m&&m.z>=c;){if(m!==t.prev&&m!==t.next&&f(n.x,n.y,s.x,s.y,o.x,o.y,m.x,m.y)&&_(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;g&&g.z<=p;){if(g!==t.prev&&g!==t.next&&f(n.x,n.y,s.x,s.y,o.x,o.y,g.x,g.y)&&_(g.prev,g,g.next)>=0)return!1;g=g.nextZ}return!0}function a(t,e,i){var n=t;do{var s=n.prev,o=n.next.next;!g(s,o)&&v(s,n,n.next,o)&&x(s,o)&&x(o,s)&&(e.push(s.i/i),e.push(n.i/i),e.push(o.i/i),E(n),E(n.next),n=t=o),n=n.next}while(n!==t);return r(n)}function h(t,e,i,s,o,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&m(h,l)){var u=T(h,l);return h=r(h,h.next),u=r(u,u.next),n(h,e,i,s,o,a),void n(u,e,i,s,o,a)}l=l.next}h=h.next}while(h!==t)}function l(t,e){return t.x-e.x}function u(t,e){var i=function(t,e){var i,r=e,n=t.x,s=t.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var a=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o){if(o=a,a===n){if(s===r.y)return r;if(s===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===o)return i;var h,l=i,u=i.x,d=i.y,p=1/0;r=i;do{n>=r.x&&r.x>=u&&n!==r.x&&f(s<d?n:o,s,u,d,s<d?o:n,s,r.x,r.y)&&(h=Math.abs(s-r.y)/(n-r.x),x(r,t)&&(h<p||h===p&&(r.x>i.x||r.x===i.x&&c(i,r)))&&(i=r,p=h)),r=r.next}while(r!==l);return i}(t,e);if(!i)return e;var n=T(i,t),s=r(i,i.next);return r(n,n.next),e===i?s:e}function c(t,e){return _(t.prev,t,e.prev)<0&&_(e.next,t,t.next)<0}function d(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function f(t,e,i,r,n,s,o,a){return(n-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(r-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(n-o)*(r-a)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&v(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(x(t,e)&&x(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(_(t.prev,t,e.prev)||_(t,e.prev,e))||g(t,e)&&_(t.prev,t,t.next)>0&&_(e.prev,e,e.next)>0)}function _(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function g(t,e){return t.x===e.x&&t.y===e.y}function v(t,e,i,r){var n=b(_(t,e,i)),s=b(_(t,e,r)),o=b(_(i,r,t)),a=b(_(i,r,e));return n!==s&&o!==a||!(0!==n||!y(t,i,e))||!(0!==s||!y(t,r,e))||!(0!==o||!y(i,t,r))||!(0!==a||!y(i,e,r))}function y(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function b(t){return t>0?1:t<0?-1:0}function x(t,e){return _(t.prev,t,t.next)<0?_(t,e,t.next)>=0&&_(t,t.prev,e)>=0:_(t,e,t.prev)<0||_(t,t.next,e)<0}function T(t,e){var i=new w(t.i,t.x,t.y),r=new w(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function S(t,e,i,r){var n=new w(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function E(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function w(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,i,r){for(var n=0,s=e,o=i-r;s<i;s+=r)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,r){var n=e&&e.length,s=n?e[0]*i:t.length,o=Math.abs(A(t,0,s,i));if(n)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,u=a<h-1?e[a+1]*i:t.length;o-=Math.abs(A(t,l,u,i))}var c=0;for(a=0;a<r.length;a+=3){var d=r[a]*i,p=r[a+1]*i,f=r[a+2]*i;c+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[n][s][o]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i}},3034:t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,r,s,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new n(r,s||t,o),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=new Array(s);n<s;n++)o[n]=r[n].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,n,s,o){var a=i?i+t:t;if(!this._events[a])return!1;var h,l,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,n),!0;case 5:return u.fn.call(u.context,e,r,n,s),!0;case 6:return u.fn.call(u.context,e,r,n,s,o),!0}for(l=1,h=new Array(c-1);l<c;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var d,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,r);break;case 4:u[l].fn.call(u[l].context,e,r,n);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];u[l].fn.apply(u[l].context,h)}}return!0},a.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,r,n){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||n&&!a.once||r&&a.context!==r||o(this,s);else{for(var h=0,l=[],u=a.length;h<u;h++)(a[h].fn!==e||n&&!a[h].once||r&&a[h].context!==r)&&l.push(a[h]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&o(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a},7088:(t,e,i)=>{var r;!function(){"use strict";var n=function(){this.init()};n.prototype={init:function(){var t=this||s;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||s;if(t=parseFloat(t),e.ctx||p(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,s.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var r=e._howls[i]._getSoundIds(),n=0;n<r.length;n++){var o=e._howls[i]._soundById(r[n]);o&&o._node&&(o._node.volume=o._volume*t)}return e}return e._volume},mute:function(t){var e=this||s;e.ctx||p(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,s.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var r=e._howls[i]._getSoundIds(),n=0;n<r.length;n++){var o=e._howls[i]._soundById(r[n]);o&&o._node&&(o._node.muted=!!t||o._muted)}return e},stop:function(){for(var t=this||s,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||s,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,p()),t},codecs:function(t){return(this||s)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||s;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||s,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=t._navigator?t._navigator.userAgent:"",n=r.match(/OPR\/([0-6].)/g),o=n&&parseInt(n[0].split("/")[1],10)<33,a=-1!==r.indexOf("Safari")&&-1===r.indexOf("Chrome"),h=r.match(/Version\/(.*?) /),l=a&&h&&parseInt(h[1],10)<15;return t._codecs={mp3:!(o||!i&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||s;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(i){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var r=new Audio;r._unlocked=!0,t._releaseHtml5Audio(r)}catch(i){t.noAudio=!0;break}for(var n=0;n<t._howls.length;n++)if(!t._howls[n]._webAudio)for(var s=t._howls[n]._getSoundIds(),o=0;o<s.length;o++){var a=t._howls[n]._soundById(s[o]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}t._autoResume();var h=t.ctx.createBufferSource();h.buffer=t._scratchBuffer,h.connect(t.ctx.destination),void 0===h.start?h.noteOn(0):h.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),h.onended=function(){h.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||s;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||s;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&s.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&s.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var s=new n,o=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};o.prototype={init:function(t){var e=this;return s.ctx||p(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=s.usingWebAudio&&!e._html5,void 0!==s.ctx&&s.ctx&&s.autoUnlock&&s._unlockAudio(),s._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=this,e=null;if(s.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var i=0;i<t._src.length;i++){var r,n;if(t._format&&t._format[i])r=t._format[i];else{if("string"!=typeof(n=t._src[i])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(r=/^data:audio\/([^;,]+);/i.exec(n))||(r=/\.([^.]+)$/.exec(n.split("?",1)[0])),r&&(r=r[1].toLowerCase())}if(r||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),r&&s.codecs(r)){e=t._src[i];break}}if(e)return t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new a(t),t._webAudio&&l(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var i=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t&&(t="__default",!i._playLock)){for(var n=0,o=0;o<i._sounds.length;o++)i._sounds[o]._paused&&!i._sounds[o]._ended&&(n++,r=i._sounds[o]._id);1===n?t=null:r=null}}var a=r?i._soundById(r):i._inactiveSound();if(!a)return null;if(r&&!t&&(t=a._sprite||"__default"),"loaded"!==i._state){a._sprite=t,a._ended=!1;var h=a._id;return i._queue.push({event:"play",action:function(){i.play(h)}}),h}if(r&&!a._paused)return e||i._loadQueue("play"),a._id;i._webAudio&&s._autoResume();var l=Math.max(0,a._seek>0?a._seek:i._sprite[t][0]/1e3),u=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-l),c=1e3*u/Math.abs(a._rate),d=i._sprite[t][0]/1e3,p=(i._sprite[t][0]+i._sprite[t][1])/1e3;a._sprite=t,a._ended=!1;var f=function(){a._paused=!1,a._seek=l,a._start=d,a._stop=p,a._loop=!(!a._loop&&!i._sprite[t][2])};if(!(l>=p)){var m=a._node;if(i._webAudio){var _=function(){i._playLock=!1,f(),i._refreshBuffer(a);var t=a._muted||i._muted?0:a._volume;m.gain.setValueAtTime(t,s.ctx.currentTime),a._playStart=s.ctx.currentTime,void 0===m.bufferSource.start?a._loop?m.bufferSource.noteGrainOn(0,l,86400):m.bufferSource.noteGrainOn(0,l,u):a._loop?m.bufferSource.start(0,l,86400):m.bufferSource.start(0,l,u),c!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),c)),e||setTimeout((function(){i._emit("play",a._id),i._loadQueue()}),0)};"running"===s.state&&"interrupted"!==s.ctx.state?_():(i._playLock=!0,i.once("resume",_),i._clearTimer(a._id))}else{var g=function(){m.currentTime=l,m.muted=a._muted||i._muted||s._muted||m.muted,m.volume=a._volume*s.volume(),m.playbackRate=a._rate;try{var r=m.play();if(r&&"undefined"!=typeof Promise&&(r instanceof Promise||"function"==typeof r.then)?(i._playLock=!0,f(),r.then((function(){i._playLock=!1,m._unlocked=!0,e?i._loadQueue():i._emit("play",a._id)})).catch((function(){i._playLock=!1,i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0}))):e||(i._playLock=!1,f(),i._emit("play",a._id)),m.playbackRate=a._rate,m.paused)return void i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||a._loop?i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),c):(i._endTimers[a._id]=function(){i._ended(a),m.removeEventListener("ended",i._endTimers[a._id],!1)},m.addEventListener("ended",i._endTimers[a._id],!1))}catch(t){i._emit("playerror",a._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===m.src&&(m.src=i._src,m.load());var v=window&&window.ejecta||!m.readyState&&s._navigator.isCocoonJS;if(m.readyState>=3||v)g();else{i._playLock=!0,i._state="loading";var y=function(){i._state="loaded",g(),m.removeEventListener(s._canPlayEvent,y,!1)};m.addEventListener(s._canPlayEvent,y,!1),i._clearTimer(a._id)}}return a._id}i._ended(a)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),r=0;r<i.length;r++){e._clearTimer(i[r]);var n=e._soundById(i[r]);if(n&&!n._paused&&(n._seek=e.seek(i[r]),n._rateSeek=0,n._paused=!0,e._stopFade(i[r]),n._node))if(e._webAudio){if(!n._node.bufferSource)continue;void 0===n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),e._cleanBuffer(n._node)}else isNaN(n._node.duration)&&n._node.duration!==1/0||n._node.pause();arguments[1]||e._emit("pause",n?n._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var r=i._getSoundIds(t),n=0;n<r.length;n++){i._clearTimer(r[n]);var s=i._soundById(r[n]);s&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,i._stopFade(r[n]),s._node&&(i._webAudio?s._node.bufferSource&&(void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),i._cleanBuffer(s._node)):isNaN(s._node.duration)&&s._node.duration!==1/0||(s._node.currentTime=s._start||0,s._node.pause(),s._node.duration===1/0&&i._clearSound(s._node))),e||i._emit("stop",s._id))}return i},mute:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if(void 0===e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var r=i._getSoundIds(e),n=0;n<r.length;n++){var o=i._soundById(r[n]);o&&(o._muted=t,o._interval&&i._stopFade(o._id),i._webAudio&&o._node?o._node.gain.setValueAtTime(t?0:o._volume,s.ctx.currentTime):o._node&&(o._node.muted=!!s._muted||t),i._emit("mute",o._id))}return i},volume:function(){var t,e,i,r=this,n=arguments;if(0===n.length)return r._volume;if(1===n.length||2===n.length&&void 0===n[1]){var o=r._getSoundIds(),a=o.indexOf(n[0]);a>=0?e=parseInt(n[0],10):t=parseFloat(n[0])}else n.length>=2&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(i=e?r._soundById(e):r._sounds[0])?i._volume:0;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,n)}}),r;void 0===e&&(r._volume=t),e=r._getSoundIds(e);for(var h=0;h<e.length;h++)(i=r._soundById(e[h]))&&(i._volume=t,n[2]||r._stopFade(e[h]),r._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(t,s.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=t*s.volume()),r._emit("volume",i._id));return r},fade:function(t,e,i,r){var n=this;if("loaded"!==n._state||n._playLock)return n._queue.push({event:"fade",action:function(){n.fade(t,e,i,r)}}),n;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),i=parseFloat(i),n.volume(t,r);for(var o=n._getSoundIds(r),a=0;a<o.length;a++){var h=n._soundById(o[a]);if(h){if(r||n._stopFade(o[a]),n._webAudio&&!h._muted){var l=s.ctx.currentTime,u=l+i/1e3;h._volume=t,h._node.gain.setValueAtTime(t,l),h._node.gain.linearRampToValueAtTime(e,u)}n._startFadeInterval(h,t,e,i,o[a],void 0===r)}}return n},_startFadeInterval:function(t,e,i,r,n,s){var o=this,a=e,h=i-e,l=Math.abs(h/.01),u=Math.max(4,l>0?r/l:r),c=Date.now();t._fadeTo=i,t._interval=setInterval((function(){var n=(Date.now()-c)/r;c=Date.now(),a+=h*n,a=Math.round(100*a)/100,a=h<0?Math.max(i,a):Math.min(i,a),o._webAudio?t._volume=a:o.volume(a,t._id,!0),s&&(o._volume=a),(i<e&&a<=i||i>e&&a>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,o.volume(i,t._id),o._emit("fade",t._id))}),u)},_stopFade:function(t){var e=this,i=e._soundById(t);return i&&i._interval&&(e._webAudio&&i._node.gain.cancelScheduledValues(s.ctx.currentTime),clearInterval(i._interval),i._interval=null,e.volume(i._fadeTo,t),i._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,i,r=this,n=arguments;if(0===n.length)return r._loop;if(1===n.length){if("boolean"!=typeof n[0])return!!(i=r._soundById(parseInt(n[0],10)))&&i._loop;t=n[0],r._loop=t}else 2===n.length&&(t=n[0],e=parseInt(n[1],10));for(var s=r._getSoundIds(e),o=0;o<s.length;o++)(i=r._soundById(s[o]))&&(i._loop=t,r._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop,r.playing(s[o])&&(r.pause(s[o],!0),r.play(s[o],!0)))));return r},rate:function(){var t,e,i,r=this,n=arguments;if(0===n.length)e=r._sounds[0]._id;else if(1===n.length){var o=r._getSoundIds(),a=o.indexOf(n[0]);a>=0?e=parseInt(n[0],10):t=parseFloat(n[0])}else 2===n.length&&(t=parseFloat(n[0]),e=parseInt(n[1],10));if("number"!=typeof t)return(i=r._soundById(e))?i._rate:r._rate;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,n)}}),r;void 0===e&&(r._rate=t),e=r._getSoundIds(e);for(var h=0;h<e.length;h++)if(i=r._soundById(e[h])){r.playing(e[h])&&(i._rateSeek=r.seek(e[h]),i._playStart=r._webAudio?s.ctx.currentTime:i._playStart),i._rate=t,r._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(t,s.ctx.currentTime):i._node&&(i._node.playbackRate=t);var l=r.seek(e[h]),u=(r._sprite[i._sprite][0]+r._sprite[i._sprite][1])/1e3-l,c=1e3*u/Math.abs(i._rate);!r._endTimers[e[h]]&&i._paused||(r._clearTimer(e[h]),r._endTimers[e[h]]=setTimeout(r._ended.bind(r,i),c)),r._emit("rate",i._id)}return r},seek:function(){var t,e,i=this,r=arguments;if(0===r.length)i._sounds.length&&(e=i._sounds[0]._id);else if(1===r.length){var n=i._getSoundIds(),o=n.indexOf(r[0]);o>=0?e=parseInt(r[0],10):i._sounds.length&&(e=i._sounds[0]._id,t=parseFloat(r[0]))}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(void 0===e)return 0;if("number"==typeof t&&("loaded"!==i._state||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,r)}}),i;var a=i._soundById(e);if(a){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var h=i.playing(e)?s.ctx.currentTime-a._playStart:0,l=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(l+h*Math.abs(a._rate))}return a._node.currentTime}var u=i.playing(e);u&&i.pause(e,!0),a._seek=t,a._ended=!1,i._clearTimer(e),i._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=t);var c=function(){u&&i.play(e,!0),i._emit("seek",e)};if(u&&!i._webAudio){var d=function(){i._playLock?setTimeout(d,0):c()};setTimeout(d,0)}else c()}return i},playing:function(t){var e=this;if("number"==typeof t){var i=e._soundById(t);return!!i&&!i._paused}for(var r=0;r<e._sounds.length;r++)if(!e._sounds[r]._paused)return!0;return!1},duration:function(t){var e=this,i=e._duration,r=e._soundById(t);return r&&(i=e._sprite[r._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(s._canPlayEvent,e[i]._loadFn,!1),e[i]._node.removeEventListener("ended",e[i]._endFn,!1),s._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var r=s._howls.indexOf(t);r>=0&&s._howls.splice(r,1);var n=!0;for(i=0;i<s._howls.length;i++)if(s._howls[i]._src===t._src||t._src.indexOf(s._howls[i]._src)>=0){n=!1;break}return h&&n&&delete h[t._src],s.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,r){var n=this["_on"+t];return"function"==typeof e&&n.push(r?{id:i,fn:e,once:r}:{id:i,fn:e}),this},off:function(t,e,i){var r=this,n=r["_on"+t],s=0;if("number"==typeof e&&(i=e,e=null),e||i)for(s=0;s<n.length;s++){var o=i===n[s].id;if(e===n[s].fn&&o||!e&&o){n.splice(s,1);break}}else if(t)r["_on"+t]=[];else{var a=Object.keys(r);for(s=0;s<a.length;s++)0===a[s].indexOf("_on")&&Array.isArray(r[a[s]])&&(r[a[s]]=[])}return r},once:function(t,e,i){return this.on(t,e,i,1),this},_emit:function(t,e,i){for(var r=this,n=r["_on"+t],s=n.length-1;s>=0;s--)n[s].id&&n[s].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(r,n[s].fn),0),n[s].once&&r.off(t,n[s].fn,n[s].id));return r._loadQueue(t),r},_loadQueue:function(t){var e=this;if(e._queue.length>0){var i=e._queue[0];i.event===t&&(e._queue.shift(),e._loadQueue()),t||i.action()}return e},_ended:function(t){var e=this,i=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var r=!(!t._loop&&!e._sprite[i][2]);if(e._emit("end",t._id),!e._webAudio&&r&&e.stop(t._id,!0).play(t._id),e._webAudio&&r){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=s.ctx.currentTime;var n=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),n)}return e._webAudio&&!r&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),s._autoSuspend()),e._webAudio||r||e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!=typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var i=e._soundById(t);i&&i._node&&i._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,i=0;i<e._sounds.length;i++)if(t===e._sounds[i]._id)return e._sounds[i];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new a(t)},_drain:function(){var t=this,e=t._pool,i=0,r=0;if(!(t._sounds.length<e)){for(r=0;r<t._sounds.length;r++)t._sounds[r]._ended&&i++;for(r=t._sounds.length-1;r>=0;r--){if(i<=e)return;t._sounds[r]._ended&&(t._webAudio&&t._sounds[r]._node&&t._sounds[r]._node.disconnect(0),t._sounds.splice(r,1),i--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=s.ctx.createBufferSource(),t._node.bufferSource.buffer=h[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,s.ctx.currentTime),this},_cleanBuffer:function(t){var e=s._navigator&&s._navigator.vendor.indexOf("Apple")>=0;if(s._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=s._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(s._navigator&&s._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var a=function(t){this._parent=t,this.init()};a.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++s._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,i=s._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),t._node.gain.setValueAtTime(i,s.ctx.currentTime),t._node.paused=!0,t._node.connect(s.masterGain)):s.noAudio||(t._node=s._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(s._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=!0===e._preload?"auto":e._preload,t._node.volume=i*s.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++s._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(s._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(10*t._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var h={},l=function(t){var e=t._src;if(h[e])return t._duration=h[e].duration,void d(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),r=new Uint8Array(i.length),n=0;n<i.length;++n)r[n]=i.charCodeAt(n);c(r.buffer,t)}else{var s=new XMLHttpRequest;s.open(t._xhr.method,e,!0),s.withCredentials=t._xhr.withCredentials,s.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){s.setRequestHeader(e,t._xhr.headers[e])})),s.onload=function(){var e=(s.status+"")[0];"0"===e||"2"===e||"3"===e?c(s.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+s.status+".")},s.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete h[e],t.load())},u(s)}},u=function(t){try{t.send()}catch(e){t.onerror()}},c=function(t,e){var i=function(){e._emit("loaderror",null,"Decoding audio data failed.")},r=function(t){t&&e._sounds.length>0?(h[e._src]=t,d(e,t)):i()};"undefined"!=typeof Promise&&1===s.ctx.decodeAudioData.length?s.ctx.decodeAudioData(t).then(r).catch(i):s.ctx.decodeAudioData(t,r,i)},d=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},p=function(){if(s.usingWebAudio){try{"undefined"!=typeof AudioContext?s.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?s.ctx=new webkitAudioContext:s.usingWebAudio=!1}catch(t){s.usingWebAudio=!1}s.ctx||(s.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(s._navigator&&s._navigator.platform),e=s._navigator&&s._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=e?parseInt(e[1],10):null;if(t&&i&&i<9){var r=/safari/.test(s._navigator&&s._navigator.userAgent.toLowerCase());s._navigator&&!r&&(s.usingWebAudio=!1)}s.usingWebAudio&&(s.masterGain=void 0===s.ctx.createGain?s.ctx.createGainNode():s.ctx.createGain(),s.masterGain.gain.setValueAtTime(s._muted?0:s._volume,s.ctx.currentTime),s.masterGain.connect(s.ctx.destination)),s._setup()}};void 0===(r=function(){return{Howler:s,Howl:o}}.apply(e,[]))||(t.exports=r),e.Howler=s,e.Howl=o,void 0!==i.g?(i.g.HowlerGlobal=n,i.g.Howler=s,i.g.Howl=o,i.g.Sound=a):"undefined"!=typeof window&&(window.HowlerGlobal=n,window.Howler=s,window.Howl=o,window.Sound=a)}(),function(){"use strict";var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var i=e._howls.length-1;i>=0;i--)e._howls[i].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,i){var r=this;return r.ctx&&r.ctx.listener?(e="number"!=typeof e?r._pos[1]:e,i="number"!=typeof i?r._pos[2]:i,"number"!=typeof t?r._pos:(r._pos=[t,e,i],void 0!==r.ctx.listener.positionX?(r.ctx.listener.positionX.setTargetAtTime(r._pos[0],Howler.ctx.currentTime,.1),r.ctx.listener.positionY.setTargetAtTime(r._pos[1],Howler.ctx.currentTime,.1),r.ctx.listener.positionZ.setTargetAtTime(r._pos[2],Howler.ctx.currentTime,.1)):r.ctx.listener.setPosition(r._pos[0],r._pos[1],r._pos[2]),r)):r},HowlerGlobal.prototype.orientation=function(t,e,i,r,n,s){var o=this;if(!o.ctx||!o.ctx.listener)return o;var a=o._orientation;return e="number"!=typeof e?a[1]:e,i="number"!=typeof i?a[2]:i,r="number"!=typeof r?a[3]:r,n="number"!=typeof n?a[4]:n,s="number"!=typeof s?a[5]:s,"number"!=typeof t?a:(o._orientation=[t,e,i,r,n,s],void 0!==o.ctx.listener.forwardX?(o.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),o.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),o.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),o.ctx.listener.upX.setTargetAtTime(r,Howler.ctx.currentTime,.1),o.ctx.listener.upY.setTargetAtTime(n,Howler.ctx.currentTime,.1),o.ctx.listener.upZ.setTargetAtTime(s,Howler.ctx.currentTime,.1)):o.ctx.listener.setOrientation(t,e,i,r,n,s),o)},Howl.prototype.init=(t=Howl.prototype.init,function(e){var i=this;return i._orientation=e.orientation||[1,0,0],i._stereo=e.stereo||null,i._pos=e.pos||null,i._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},i._onstereo=e.onstereo?[{fn:e.onstereo}]:[],i._onpos=e.onpos?[{fn:e.onpos}]:[],i._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,i){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"stereo",action:function(){r.stereo(t,i)}}),r;var n=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof t)return r._stereo;r._stereo=t,r._pos=[t,0,0]}for(var s=r._getSoundIds(i),o=0;o<s.length;o++){var a=r._soundById(s[o]);if(a){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||e(a,n),"spatial"===n?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(t,0,0):a._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),r._emit("stereo",a._id)}}return r},Howl.prototype.pos=function(t,i,r,n){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"pos",action:function(){s.pos(t,i,r,n)}}),s;if(i="number"!=typeof i?0:i,r="number"!=typeof r?-.5:r,void 0===n){if("number"!=typeof t)return s._pos;s._pos=[t,i,r]}for(var o=s._getSoundIds(n),a=0;a<o.length;a++){var h=s._soundById(o[a]);if(h){if("number"!=typeof t)return h._pos;h._pos=[t,i,r],h._node&&(h._panner&&!h._panner.pan||e(h,"spatial"),void 0!==h._panner.positionX?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(r,Howler.ctx.currentTime)):h._panner.setPosition(t,i,r)),s._emit("pos",h._id)}}return s},Howl.prototype.orientation=function(t,i,r,n){var s=this;if(!s._webAudio)return s;if("loaded"!==s._state)return s._queue.push({event:"orientation",action:function(){s.orientation(t,i,r,n)}}),s;if(i="number"!=typeof i?s._orientation[1]:i,r="number"!=typeof r?s._orientation[2]:r,void 0===n){if("number"!=typeof t)return s._orientation;s._orientation=[t,i,r]}for(var o=s._getSoundIds(n),a=0;a<o.length;a++){var h=s._soundById(o[a]);if(h){if("number"!=typeof t)return h._orientation;h._orientation=[t,i,r],h._node&&(h._panner||(h._pos||(h._pos=s._pos||[0,0,-.5]),e(h,"spatial")),void 0!==h._panner.orientationX?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(r,Howler.ctx.currentTime)):h._panner.setOrientation(t,i,r)),s._emit("orientation",h._id)}}return s},Howl.prototype.pannerAttr=function(){var t,i,r,n=this,s=arguments;if(!n._webAudio)return n;if(0===s.length)return n._pannerAttr;if(1===s.length){if("object"!=typeof s[0])return(r=n._soundById(parseInt(s[0],10)))?r._pannerAttr:n._pannerAttr;t=s[0],void 0===i&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),n._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:n._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:n._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:n._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:n._panningModel})}else 2===s.length&&(t=s[0],i=parseInt(s[1],10));for(var o=n._getSoundIds(i),a=0;a<o.length;a++)if(r=n._soundById(o[a])){var h=r._pannerAttr;h={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:h.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:h.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:h.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:h.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:h.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:h.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:h.panningModel};var l=r._panner;l?(l.coneInnerAngle=h.coneInnerAngle,l.coneOuterAngle=h.coneOuterAngle,l.coneOuterGain=h.coneOuterGain,l.distanceModel=h.distanceModel,l.maxDistance=h.maxDistance,l.refDistance=h.refDistance,l.rolloffFactor=h.rolloffFactor,l.panningModel=h.panningModel):(r._pos||(r._pos=n._pos||[0,0,-.5]),e(r,"spatial"))}return n},Sound.prototype.init=function(t){return function(){var e=this,i=e._parent;e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,t.call(this),e._stereo?i.stereo(e._stereo):e._pos&&i.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,i=e._parent;return e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,e._stereo?i.stereo(e._stereo):e._pos?i.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,i._refreshBuffer(e)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()},9813:t=>{"use strict";var e=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function n(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,s){for(var o,a,h=n(t),l=1;l<arguments.length;l++){for(var u in o=Object(arguments[l]))i.call(o,u)&&(h[u]=o[u]);if(e){a=e(o);for(var c=0;c<a.length;c++)r.call(o,a[c])&&(h[a[c]]=o[a[c]])}}return h}},4655:(t,e,i)=>{"use strict";i.r(e),i.d(e,{AnimatedParticle:()=>C,Emitter:()=>S,GetTextureFromString:()=>h,LinkedListContainer:()=>O,Particle:()=>y,ParticleUtils:()=>n,PathParticle:()=>I,PolygonalChain:()=>b,PropertyList:()=>v,PropertyNode:()=>o});var r,n,s=i(2857),o=function(){function t(t,e,i){this.value=t,this.time=e,this.next=null,this.isStepped=!1,this.ease=i?"function"==typeof i?i:n.generateEase(i):null}return t.createList=function(e){if("list"in e){var i=e.list,r=void 0,s=i[0],o=s.value,a=s.time,h=r=new t("string"==typeof o?n.hexToRGB(o):o,a,e.ease);if(i.length>2||2===i.length&&i[1].value!==o)for(var l=1;l<i.length;++l){var u=i[l],c=u.value,d=u.time;r.next=new t("string"==typeof c?n.hexToRGB(c):c,d),r=r.next}return h.isStepped=!!e.isStepped,h}var p=new t("string"==typeof e.start?n.hexToRGB(e.start):e.start,0);return e.end!==e.start&&(p.next=new t("string"==typeof e.end?n.hexToRGB(e.end):e.end,1)),p},t}(),a=s;function h(t){return r(t)}r=parseInt(/^(\d+)\./.exec(s.VERSION)[1],10)<5?a.Texture.fromImage:a.Texture.from,function(t){t.verbose=!1,t.DEG_TO_RADS=Math.PI/180,t.rotatePoint=function(e,i){if(e){e*=t.DEG_TO_RADS;var r=Math.sin(e),n=Math.cos(e),s=i.x*n-i.y*r,o=i.x*r+i.y*n;i.x=s,i.y=o}},t.combineRGBComponents=function(t,e,i){return t<<16|e<<8|i},t.normalize=function(e){var i=1/t.length(e);e.x*=i,e.y*=i},t.scaleBy=function(t,e){t.x*=e,t.y*=e},t.length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.hexToRGB=function(t,e){var i;return e||(e={}),"#"===t.charAt(0)?t=t.substr(1):0===t.indexOf("0x")&&(t=t.substr(2)),8===t.length&&(i=t.substr(0,2),t=t.substr(2)),e.r=parseInt(t.substr(0,2),16),e.g=parseInt(t.substr(2,2),16),e.b=parseInt(t.substr(4,2),16),i&&(e.a=parseInt(i,16)),e},t.generateEase=function(t){var e=t.length,i=1/e;return function(r){var n=e*r|0,s=(r-n*i)*e,o=t[n]||t[e-1];return o.s+s*(2*(1-s)*(o.cp-o.s)+s*(o.e-o.s))}},t.getBlendMode=function(t){if(!t)return s.BLEND_MODES.NORMAL;for(t=t.toUpperCase();t.indexOf(" ")>=0;)t=t.replace(" ","_");return s.BLEND_MODES[t]||s.BLEND_MODES.NORMAL},t.createSteppedGradient=function(e,i){void 0===i&&(i=10),("number"!=typeof i||i<=0)&&(i=10);var r=new o(t.hexToRGB(e[0].value),e[0].time);r.isStepped=!0;for(var n=r,s=e[0],a=1,h=e[a],l=1;l<i;++l){for(var u=l/i;u>h.time;)s=h,h=e[++a];u=(u-s.time)/(h.time-s.time);var c=t.hexToRGB(s.value),d=t.hexToRGB(h.value),p={r:(d.r-c.r)*u+c.r,g:(d.g-c.g)*u+c.g,b:(d.b-c.b)*u+c.b};n.next=new o(p,l/i),n=n.next}return r}}(n||(n={}));var l=function(t,e){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function u(t,e){function i(){this.constructor=t}l(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function c(t){return this.ease&&(t=this.ease(t)),(this.next.value-this.current.value)*t+this.current.value}function d(t){this.ease&&(t=this.ease(t));var e=this.current.value,i=this.next.value,r=(i.r-e.r)*t+e.r,s=(i.g-e.g)*t+e.g,o=(i.b-e.b)*t+e.b;return n.combineRGBComponents(r,s,o)}function p(t){for(this.ease&&(t=this.ease(t));t>this.next.time;)this.current=this.next,this.next=this.next.next;return t=(t-this.current.time)/(this.next.time-this.current.time),(this.next.value-this.current.value)*t+this.current.value}function f(t){for(this.ease&&(t=this.ease(t));t>this.next.time;)this.current=this.next,this.next=this.next.next;t=(t-this.current.time)/(this.next.time-this.current.time);var e=this.current.value,i=this.next.value,r=(i.r-e.r)*t+e.r,s=(i.g-e.g)*t+e.g,o=(i.b-e.b)*t+e.b;return n.combineRGBComponents(r,s,o)}function m(t){for(this.ease&&(t=this.ease(t));this.next&&t>this.next.time;)this.current=this.next,this.next=this.next.next;return this.current.value}function _(t){for(this.ease&&(t=this.ease(t));this.next&&t>this.next.time;)this.current=this.next,this.next=this.next.next;var e=this.current.value;return n.combineRGBComponents(e.r,e.g,e.b)}var g,v=function(){function t(t){void 0===t&&(t=!1),this.current=null,this.next=null,this.isColor=!!t,this.interpolate=null,this.ease=null}return t.prototype.reset=function(t){this.current=t,this.next=t.next,this.next&&this.next.time>=1?this.interpolate=this.isColor?d:c:t.isStepped?this.interpolate=this.isColor?_:m:this.interpolate=this.isColor?f:p,this.ease=this.current.ease},t}(),y=function(t){function e(i){var r=t.call(this)||this;return r.prevChild=r.nextChild=null,r.emitter=i,r.anchor.x=r.anchor.y=.5,r.velocity=new s.Point,r.rotationSpeed=0,r.rotationAcceleration=0,r.maxLife=0,r.age=0,r.ease=null,r.extraData=null,r.alphaList=new v,r.speedList=new v,r.speedMultiplier=1,r.acceleration=new s.Point,r.maxSpeed=NaN,r.scaleList=new v,r.scaleMultiplier=1,r.colorList=new v(!0),r._doAlpha=!1,r._doScale=!1,r._doSpeed=!1,r._doAcceleration=!1,r._doColor=!1,r._doNormalMovement=!1,r._oneOverLife=0,r.next=null,r.prev=null,r.init=r.init,r.Particle_init=e.prototype.init,r.update=r.update,r.Particle_update=e.prototype.update,r.Sprite_destroy=t.prototype.destroy,r.Particle_destroy=e.prototype.destroy,r.applyArt=r.applyArt,r.kill=r.kill,r}return u(e,t),e.prototype.init=function(){this.age=0,this.velocity.x=this.speedList.current.value*this.speedMultiplier,this.velocity.y=0,n.rotatePoint(this.rotation,this.velocity),this.noRotation?this.rotation=0:this.rotation*=n.DEG_TO_RADS,this.rotationSpeed*=n.DEG_TO_RADS,this.rotationAcceleration*=n.DEG_TO_RADS,this.alpha=this.alphaList.current.value,this.scale.x=this.scale.y=this.scaleList.current.value,this._doAlpha=!!this.alphaList.current.next,this._doSpeed=!!this.speedList.current.next,this._doScale=!!this.scaleList.current.next,this._doColor=!!this.colorList.current.next,this._doAcceleration=0!==this.acceleration.x||0!==this.acceleration.y,this._doNormalMovement=this._doSpeed||0!==this.speedList.current.value||this._doAcceleration,this._oneOverLife=1/this.maxLife;var t=this.colorList.current.value;this.tint=n.combineRGBComponents(t.r,t.g,t.b),this.visible=!0},e.prototype.applyArt=function(t){this.texture=t||s.Texture.EMPTY},e.prototype.update=function(t){if(this.age+=t,this.age>=this.maxLife||this.age<0)return this.kill(),-1;var e=this.age*this._oneOverLife;if(this.ease&&(e=4===this.ease.length?this.ease(e,0,1,1):this.ease(e)),this._doAlpha&&(this.alpha=this.alphaList.interpolate(e)),this._doScale){var i=this.scaleList.interpolate(e)*this.scaleMultiplier;this.scale.x=this.scale.y=i}if(this._doNormalMovement){var r=void 0,s=void 0;if(this._doSpeed){var o=this.speedList.interpolate(e)*this.speedMultiplier;n.normalize(this.velocity),n.scaleBy(this.velocity,o),r=this.velocity.x*t,s=this.velocity.y*t}else if(this._doAcceleration){var a=this.velocity.x,h=this.velocity.y;if(this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t,this.maxSpeed){var l=n.length(this.velocity);l>this.maxSpeed&&n.scaleBy(this.velocity,this.maxSpeed/l)}r=(a+this.velocity.x)/2*t,s=(h+this.velocity.y)/2*t}else r=this.velocity.x*t,s=this.velocity.y*t;this.position.x+=r,this.position.y+=s}if(this._doColor&&(this.tint=this.colorList.interpolate(e)),0!==this.rotationAcceleration){var u=this.rotationSpeed+this.rotationAcceleration*t;this.rotation+=(this.rotationSpeed+u)/2*t,this.rotationSpeed=u}else 0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*t:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x));return e},e.prototype.kill=function(){this.emitter.recycle(this)},e.prototype.destroy=function(){this.parent&&this.parent.removeChild(this),this.Sprite_destroy(),this.emitter=this.velocity=this.colorList=this.scaleList=this.alphaList=this.speedList=this.ease=this.next=this.prev=null},e.parseArt=function(t){var e;for(e=t.length;e>=0;--e)"string"==typeof t[e]&&(t[e]=h(t[e]));if(n.verbose)for(e=t.length-1;e>0;--e)if(t[e].baseTexture!==t[e-1].baseTexture){window.console&&console.warn("PixiParticles: using particle textures from different images may hinder performance in WebGL");break}return t},e.parseData=function(t){return t},e}(s.Sprite),b=function(){function t(t){this.segments=[],this.countingLengths=[],this.totalLength=0,this.init(t)}return t.prototype.init=function(t){if(t&&t.length)if(Array.isArray(t[0]))for(var e=0;e<t.length;++e)for(var i=t[e],r=i[0],n=1;n<i.length;++n){var s=i[n];this.segments.push({p1:r,p2:s,l:0}),r=s}else for(r=t[0],e=1;e<t.length;++e)s=t[e],this.segments.push({p1:r,p2:s,l:0}),r=s;else this.segments.push({p1:{x:0,y:0},p2:{x:0,y:0},l:0});for(e=0;e<this.segments.length;++e){var o=this.segments[e],a=o.p1,h=o.p2,l=Math.sqrt((h.x-a.x)*(h.x-a.x)+(h.y-a.y)*(h.y-a.y));this.segments[e].l=l,this.totalLength+=l,this.countingLengths.push(this.totalLength)}},t.prototype.getRandomPoint=function(t){var e,i,r=Math.random()*this.totalLength;if(1===this.segments.length)e=this.segments[0],i=r;else for(var n=0;n<this.countingLengths.length;++n)if(r<this.countingLengths[n]){e=this.segments[n],i=0===n?r:r-this.countingLengths[n-1];break}i/=e.l||1;var s=e.p1,o=e.p2;t.x=s.x+i*(o.x-s.x),t.y=s.y+i*(o.y-s.y)},t}(),x=s;g=parseInt(/^(\d+)\./.exec(s.VERSION)[1],10)<5?x.ticker.shared:x.Ticker.shared;var T=new s.Point,S=function(){function t(t,e,i){this._currentImageIndex=-1,this._particleConstructor=y,this.particleImages=null,this.startAlpha=null,this.startSpeed=null,this.minimumSpeedMultiplier=1,this.acceleration=null,this.maxSpeed=NaN,this.startScale=null,this.minimumScaleMultiplier=1,this.startColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.noRotation=!1,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.spawnChance=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.spawnPolygonalChain=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this._autoUpdate=!1,this._currentImageIndex=-1,this._destroyWhenComplete=!1,this._completeCallback=null,this.parent=t,e&&i&&this.init(e,i),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos}return Object.defineProperty(t.prototype,"orderedArt",{get:function(){return-1!==this._currentImageIndex},set:function(t){this._currentImageIndex=t?0:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency="number"==typeof t&&t>0?t:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"particleConstructor",{get:function(){return this._particleConstructor},set:function(t){if(t!==this._particleConstructor){this._particleConstructor=t,this.cleanup();for(var e=this._poolFirst;e;e=e.next)e.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},set:function(t){this.cleanup(),this._parent=t},enumerable:!0,configurable:!0}),t.prototype.init=function(t,e){if(t&&e){this.cleanup(),this._origConfig=e,this._origArt=t,t=Array.isArray(t)?t.slice():[t];var i=this._particleConstructor;this.particleImages=i.parseArt?i.parseArt(t):t,e.alpha?this.startAlpha=o.createList(e.alpha):this.startAlpha=new o(1,0),e.speed?(this.startSpeed=o.createList(e.speed),this.minimumSpeedMultiplier=("minimumSpeedMultiplier"in e?e.minimumSpeedMultiplier:e.speed.minimumSpeedMultiplier)||1):(this.minimumSpeedMultiplier=1,this.startSpeed=new o(0,0));var r=e.acceleration;r&&(r.x||r.y)?(this.startSpeed.next=null,this.acceleration=new s.Point(r.x,r.y),this.maxSpeed=e.maxSpeed||NaN):this.acceleration=new s.Point,e.scale?(this.startScale=o.createList(e.scale),this.minimumScaleMultiplier=("minimumScaleMultiplier"in e?e.minimumScaleMultiplier:e.scale.minimumScaleMultiplier)||1):(this.startScale=new o(1,0),this.minimumScaleMultiplier=1),e.color?this.startColor=o.createList(e.color):this.startColor=new o({r:255,g:255,b:255},0),e.startRotation?(this.minStartRotation=e.startRotation.min,this.maxStartRotation=e.startRotation.max):this.minStartRotation=this.maxStartRotation=0,e.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!e.noRotation:this.noRotation=!1,e.rotationSpeed?(this.minRotationSpeed=e.rotationSpeed.min,this.maxRotationSpeed=e.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.rotationAcceleration=e.rotationAcceleration||0,this.minLifetime=e.lifetime.min,this.maxLifetime=e.lifetime.max,this.particleBlendMode=n.getBlendMode(e.blendMode),e.ease?this.customEase="function"==typeof e.ease?e.ease:n.generateEase(e.ease):this.customEase=null,i.parseData?this.extraData=i.parseData(e.extraData):this.extraData=e.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,e.particlesPerWave&&e.particlesPerWave>1&&(this.particlesPerWave=e.particlesPerWave),this.particleSpacing=0,this.angleStart=0,this.parseSpawnType(e),this.frequency=e.frequency,this.spawnChance="number"==typeof e.spawnChance&&e.spawnChance>0?e.spawnChance:1,this.emitterLifetime=e.emitterLifetime||-1,this.maxParticles=e.maxParticles>0?e.maxParticles:1e3,this.addAtBack=!!e.addAtBack,this.rotation=0,this.ownerPos=new s.Point,this.spawnPos=new s.Point(e.pos.x,e.pos.y),this.initAdditional(t,e),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===e.emit||!!e.emit,this.autoUpdate=!!e.autoUpdate,this.orderedArt=!!e.orderedArt}},t.prototype.initAdditional=function(t,e){},t.prototype.parseSpawnType=function(t){var e;switch(t.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var i=t.spawnRect;this.spawnRect=new s.Rectangle(i.x,i.y,i.w,i.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,e=t.spawnCircle,this.spawnCircle=new s.Circle(e.x,e.y,e.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,e=t.spawnCircle,this.spawnCircle=new s.Circle(e.x,e.y,e.r),this.spawnCircle.minRadius=e.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particleSpacing=t.particleSpacing,this.angleStart=t.angleStart?t.angleStart:0;break;case"point":default:this.spawnType="point",this._spawnFunc=this._spawnPoint;break;case"polygonalChain":this.spawnType="polygonalChain",this._spawnFunc=this._spawnPolygonalChain,this.spawnPolygonalChain=new b(t.spawnPolygon)}},t.prototype.recycle=function(t){t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t===this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t===this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,t.parent&&t.parent.removeChild(t),--this.particleCount},t.prototype.rotate=function(t){if(this.rotation!==t){var e=t-this.rotation;this.rotation=t,n.rotatePoint(e,this.spawnPos),this._posChanged=!0}},t.prototype.updateSpawnPos=function(t,e){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=e},t.prototype.updateOwnerPos=function(t,e){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=e},t.prototype.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(t.prototype,"emit",{get:function(){return this._emit},set:function(t){this._emit=!!t,this._emitterLife=this.emitterLifetime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){this._autoUpdate&&!t?g.remove(this.update,this):!this._autoUpdate&&t&&g.add(this.update,this),this._autoUpdate=!!t},enumerable:!0,configurable:!0}),t.prototype.playOnceAndDestroy=function(t){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0,this._completeCallback=t},t.prototype.playOnce=function(t){this.emit=!0,this._completeCallback=t},t.prototype.update=function(t){if(this._autoUpdate&&(t=t/s.settings.TARGET_FPMS/1e3),this._parent){var e,i,r,n,o;for(i=this._activeParticlesFirst;i;i=r)r=i.next,i.update(t);this._prevPosIsValid&&(n=this._prevEmitterPos.x,o=this._prevEmitterPos.y);var a=this.ownerPos.x+this.spawnPos.x,h=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=t<0?0:t;this._spawnTimer<=0;){if(this._emitterLife>=0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles)this._spawnTimer+=this._frequency;else{var l;if(l=this.minLifetime===this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<l){var u=void 0,c=void 0;if(this._prevPosIsValid&&this._posChanged){var d=1+this._spawnTimer/t;u=(a-n)*d+n,c=(h-o)*d+o}else u=a,c=h;e=0;for(var p=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);e<p;++e)if(!(this.spawnChance<1&&Math.random()>=this.spawnChance)){var f=void 0;this._poolFirst?(f=this._poolFirst,this._poolFirst=this._poolFirst.next,f.next=null):f=new this.particleConstructor(this),this.particleImages.length>1?-1!==this._currentImageIndex?(f.applyArt(this.particleImages[this._currentImageIndex++]),(this._currentImageIndex<0||this._currentImageIndex>=this.particleImages.length)&&(this._currentImageIndex=0)):f.applyArt(this.particleImages[Math.floor(Math.random()*this.particleImages.length)]):f.applyArt(this.particleImages[0]),f.alphaList.reset(this.startAlpha),1!==this.minimumSpeedMultiplier&&(f.speedMultiplier=Math.random()*(1-this.minimumSpeedMultiplier)+this.minimumSpeedMultiplier),f.speedList.reset(this.startSpeed),f.acceleration.x=this.acceleration.x,f.acceleration.y=this.acceleration.y,f.maxSpeed=this.maxSpeed,1!==this.minimumScaleMultiplier&&(f.scaleMultiplier=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier),f.scaleList.reset(this.startScale),f.colorList.reset(this.startColor),this.minRotationSpeed===this.maxRotationSpeed?f.rotationSpeed=this.minRotationSpeed:f.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,f.rotationAcceleration=this.rotationAcceleration,f.noRotation=this.noRotation,f.maxLife=l,f.blendMode=this.particleBlendMode,f.ease=this.customEase,f.extraData=this.extraData,this.applyAdditionalProperties(f),this._spawnFunc(f,u,c,e),f.init(),this.addAtBack?this._parent.addChildAt(f,0):this._parent.addChild(f),this._activeParticlesLast?(this._activeParticlesLast.next=f,f.prev=this._activeParticlesLast,this._activeParticlesLast=f):this._activeParticlesLast=this._activeParticlesFirst=f,++this.particleCount,f.update(-this._spawnTimer)}}this._spawnTimer+=this._frequency}}if(this._posChanged&&(this._prevEmitterPos.x=a,this._prevEmitterPos.y=h,this._prevPosIsValid=!0,this._posChanged=!1),!this._emit&&!this._activeParticlesFirst){if(this._completeCallback){var m=this._completeCallback;this._completeCallback=null,m()}this._destroyWhenComplete&&this.destroy()}}},t.prototype.applyAdditionalProperties=function(t){},t.prototype._spawnPoint=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,t.position.x=e,t.position.y=i},t.prototype._spawnRect=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,T.x=Math.random()*this.spawnRect.width+this.spawnRect.x,T.y=Math.random()*this.spawnRect.height+this.spawnRect.y,0!==this.rotation&&n.rotatePoint(this.rotation,T),t.position.x=e+T.x,t.position.y=i+T.y},t.prototype._spawnCircle=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,T.x=Math.random()*this.spawnCircle.radius,T.y=0,n.rotatePoint(360*Math.random(),T),T.x+=this.spawnCircle.x,T.y+=this.spawnCircle.y,0!==this.rotation&&n.rotatePoint(this.rotation,T),t.position.x=e+T.x,t.position.y=i+T.y},t.prototype._spawnRing=function(t,e,i){var r=this.spawnCircle;this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,r.minRadius!==r.radius?T.x=Math.random()*(r.radius-r.minRadius)+r.minRadius:T.x=r.radius,T.y=0;var s=360*Math.random();t.rotation+=s,n.rotatePoint(s,T),T.x+=this.spawnCircle.x,T.y+=this.spawnCircle.y,0!==this.rotation&&n.rotatePoint(this.rotation,T),t.position.x=e+T.x,t.position.y=i+T.y},t.prototype._spawnPolygonalChain=function(t,e,i){this.minStartRotation===this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,this.spawnPolygonalChain.getRandomPoint(T),0!==this.rotation&&n.rotatePoint(this.rotation,T),t.position.x=e+T.x,t.position.y=i+T.y},t.prototype._spawnBurst=function(t,e,i,r){0===this.particleSpacing?t.rotation=360*Math.random():t.rotation=this.angleStart+this.particleSpacing*r+this.rotation,t.position.x=e,t.position.y=i},t.prototype.cleanup=function(){var t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t),t.parent&&t.parent.removeChild(t);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},t.prototype.destroy=function(){var t;this.autoUpdate=!1,this.cleanup();for(var e=this._poolFirst;e;e=t)t=e.next,e.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.startScale=this.startAlpha=this.startSpeed=this.customEase=this._completeCallback=null},t}(),E=new s.Point,w=["pow","sqrt","abs","floor","round","ceil","E","PI","sin","cos","tan","asin","acos","atan","atan2","log"],A=new RegExp(["[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]"].concat(w).join("|"),"g"),I=function(t){function e(e){var i=t.call(this,e)||this;return i.path=null,i.initialRotation=0,i.initialPosition=new s.Point,i.movement=0,i}return u(e,t),e.prototype.init=function(){this.initialRotation=this.rotation,this.Particle_init(),this.path=this.extraData.path,this._doNormalMovement=!this.path,this.movement=0,this.initialPosition.x=this.position.x,this.initialPosition.y=this.position.y},e.prototype.update=function(t){var e=this.Particle_update(t);if(e>=0&&this.path){if(this._doSpeed){var i=this.speedList.interpolate(e)*this.speedMultiplier;this.movement+=i*t}else i=this.speedList.current.value*this.speedMultiplier,this.movement+=i*t;E.x=this.movement,E.y=this.path(this.movement),n.rotatePoint(this.initialRotation,E),this.position.x=this.initialPosition.x+E.x,this.position.y=this.initialPosition.y+E.y}return e},e.prototype.destroy=function(){this.Particle_destroy(),this.path=this.initialPosition=null},e.parseArt=function(t){return y.parseArt(t)},e.parseData=function(t){var e={};if(t&&t.path)try{e.path=function(t){for(var e=t.match(A),i=e.length-1;i>=0;--i)w.indexOf(e[i])>=0&&(e[i]="Math."+e[i]);return t=e.join(""),new Function("x","return "+t+";")}(t.path)}catch(t){n.verbose&&console.error("PathParticle: error in parsing path expression"),e.path=null}else n.verbose&&console.error("PathParticle requires a path string in extraData!"),e.path=null;return e},e}(y),C=function(t){function e(e){var i=t.call(this,e)||this;return i.textures=null,i.duration=0,i.framerate=0,i.elapsed=0,i.loop=!1,i}return u(e,t),e.prototype.init=function(){this.Particle_init(),this.elapsed=0,this.framerate<0&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},e.prototype.applyArt=function(t){this.textures=t.textures,this.framerate=t.framerate,this.duration=t.duration,this.loop=t.loop},e.prototype.update=function(t){var e=this.Particle_update(t);if(e>=0){this.elapsed+=t,this.elapsed>=this.duration&&(this.loop?this.elapsed=this.elapsed%this.duration:this.elapsed=this.duration-1e-6);var i=this.elapsed*this.framerate+1e-7|0;this.texture=this.textures[i]||this.textures[this.textures.length-1]||s.Texture.EMPTY}return e},e.prototype.destroy=function(){this.Particle_destroy(),this.textures=null},e.parseArt=function(t){for(var e=[],i=0;i<t.length;++i){for(var r=t[i],n=e[i]={},o=n.textures=[],a=r.textures,l=0;l<a.length;++l){var u=a[l];if("string"==typeof u)o.push(h(u));else if(u instanceof s.Texture)o.push(u);else{var c=u.count||1;for(u="string"==typeof u.texture?h(u.texture):u.texture;c>0;--c)o.push(u)}}"matchLife"===r.framerate?(n.framerate=-1,n.duration=0,n.loop=!1):(n.loop=!!r.loop,n.framerate=r.framerate>0?r.framerate:60,n.duration=o.length/n.framerate)}return e},e}(y),O=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._firstChild=null,e._lastChild=null,e._childCount=0,e}return u(e,t),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this._firstChild},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastChild",{get:function(){return this._lastChild},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childCount",{get:function(){return this._childCount},enumerable:!0,configurable:!0}),e.prototype.addChild=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length>1)for(var i=0;i<t.length;i++)this.addChild(t[i]);else{var r=t[0];r.parent&&r.parent.removeChild(r),r.parent=this,this.sortDirty=!0,r.transform._parentID=-1,this._lastChild?(this._lastChild.nextChild=r,r.prevChild=this._lastChild,this._lastChild=r):this._firstChild=this._lastChild=r,++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",r,this,this._childCount),r.emit("added",this)}return t[0]},e.prototype.addChildAt=function(t,e){if(e<0||e>this._childCount)throw new Error("addChildAt: The index "+e+" supplied is out of bounds "+this._childCount);t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1;var i=t;if(this._firstChild)if(0===e)this._firstChild.prevChild=i,i.nextChild=this._firstChild,this._firstChild=i;else if(e===this._childCount)this._lastChild.nextChild=i,i.prevChild=this._lastChild,this._lastChild=i;else{for(var r=0,n=this._firstChild;r<e;)n=n.nextChild,++r;n.prevChild.nextChild=i,i.prevChild=n.prevChild,i.nextChild=n,n.prevChild=i}else this._firstChild=this._lastChild=i;return++this._childCount,this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t},e.prototype.addChildBelow=function(t,e){if(e.parent!==this)throw new Error("addChildBelow: The relative target must be a child of this parent");return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,e.prevChild.nextChild=t,t.prevChild=e.prevChild,t.nextChild=e,e.prevChild=t,this._firstChild===e&&(this._firstChild=t),++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",t,this,this._childCount),t.emit("added",this),t},e.prototype.addChildAbove=function(t,e){if(e.parent!==this)throw new Error("addChildBelow: The relative target must be a child of this parent");return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,e.nextChild.prevChild=t,t.nextChild=e.nextChild,t.prevChild=e,e.nextChild=t,this._lastChild===e&&(this._lastChild=t),++this._childCount,this._boundsID++,this.onChildrenChange(),this.emit("childAdded",t,this,this._childCount),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e&&t.parent===this&&e.parent===this){var i=t,r=i.prevChild,n=i.nextChild;t.prevChild=e.prevChild,t.nextChild=e.nextChild,e.prevChild=r,e.nextChild=n,this._firstChild===t?this._firstChild=e:this._firstChild===e&&(this._firstChild=t),this._lastChild===t?this._lastChild=e:this._lastChild===e&&(this._lastChild=t),this.onChildrenChange()}},e.prototype.getChildIndex=function(t){for(var e=0,i=this._firstChild;i&&i!==t;)i=i.nextChild,++e;if(!i)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this._childCount)throw new Error("The index "+e+" supplied is out of bounds "+this._childCount);if(t.parent!==this)throw new Error("The supplied DisplayObject must be a child of the caller");if(t.nextChild&&(t.nextChild.prevChild=t.prevChild),t.prevChild&&(t.prevChild.nextChild=t.nextChild),this._firstChild===t&&(this._firstChild=t.nextChild),this._lastChild===t&&(this._lastChild=t.prevChild),t.nextChild=null,t.prevChild=null,this._firstChild)if(0===e)this._firstChild.prevChild=t,t.nextChild=this._firstChild,this._firstChild=t;else if(e===this._childCount)this._lastChild.nextChild=t,t.prevChild=this._lastChild,this._lastChild=t;else{for(var i=0,r=this._firstChild;i<e;)r=r.nextChild,++i;r.prevChild.nextChild=t,t.prevChild=r.prevChild,t.nextChild=r,r.prevChild=t}else this._firstChild=this._lastChild=t;this.onChildrenChange(e)},e.prototype.removeChild=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length>1)for(var i=0;i<t.length;i++)this.removeChild(t[i]);else{var r=t[0];if(r.parent!==this)return null;r.parent=null,r.transform._parentID=-1,r.nextChild&&(r.nextChild.prevChild=r.prevChild),r.prevChild&&(r.prevChild.nextChild=r.nextChild),this._firstChild===r&&(this._firstChild=r.nextChild),this._lastChild===r&&(this._lastChild=r.prevChild),r.nextChild=null,r.prevChild=null,--this._childCount,this._boundsID++,this.onChildrenChange(),r.emit("removed",this),this.emit("childRemoved",r,this)}return t[0]},e.prototype.getChildAt=function(t){if(t<0||t>=this._childCount)throw new Error("getChildAt: Index ("+t+") does not exist.");if(0===t)return this._firstChild;if(t===this._childCount)return this._lastChild;for(var e=0,i=this._firstChild;e<t;)i=i.nextChild,++e;return i},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,e.nextChild&&(e.nextChild.prevChild=e.prevChild),e.prevChild&&(e.prevChild.nextChild=e.nextChild),this._firstChild===e&&(this._firstChild=e.nextChild),this._lastChild===e&&(this._lastChild=e.prevChild),e.nextChild=null,e.prevChild=null,--this._childCount,this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e},e.prototype.removeChildren=function(t,e){void 0===t&&(t=0),void 0===e&&(e=this._childCount);var i=t,r=e,n=r-i;if(n>0&&n<=r){for(var s=[],o=this._firstChild,a=0;a<=r&&o;++a,o=o.nextChild)a>=i&&s.push(o);var h=s[0].prevChild,l=s[s.length-1].nextChild;for(l?l.prevChild=h:this._lastChild=h,h?h.nextChild=l:this._firstChild=l,a=0;a<s.length;++a)s[a].parent=null,s[a].transform&&(s[a].transform._parentID=-1),s[a].nextChild=null,s[a].prevChild=null;for(this._boundsID++,this.onChildrenChange(t),a=0;a<s.length;++a)s[a].emit("removed",this),this.emit("childRemoved",s[a],this,a);return s}if(0===n&&0===this._childCount)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){var t,e;for(this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,t=this._firstChild;t;t=e)e=t.nextChild,t.visible&&t.updateTransform()},e.prototype.calculateBounds=function(){var t,e;for(this._bounds.clear(),this._calculateBounds(),t=this._firstChild;t;t=e)if(e=t.nextChild,t.visible&&t.renderable)if(t.calculateBounds(),t._mask){var i=t._mask.maskObject||t._mask;i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds);this._bounds.updateID=this._boundsID},e.prototype.getLocalBounds=function(t,e){void 0===e&&(e=!1);var i=s.DisplayObject.prototype.getLocalBounds.call(this,t);if(!e){var r=void 0,n=void 0;for(r=this._firstChild;r;r=n)n=r.nextChild,r.visible&&r.updateTransform()}return i},e.prototype.render=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvanced(t);else{this._render(t);var e=void 0,i=void 0;for(e=this._firstChild;e;e=i)i=e.nextChild,e.render(t)}},e.prototype.renderAdvanced=function(t){t.batch.flush();var e,i,r=this.filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<r.length;s++)r[s].enabled&&this._enabledFilters.push(r[s]);this._enabledFilters.length&&t.filter.push(this,this._enabledFilters)}for(n&&t.mask.push(this,this._mask),this._render(t),e=this._firstChild;e;e=i)i=e.nextChild,e.render(t);t.batch.flush(),n&&t.mask.pop(this),r&&this._enabledFilters&&this._enabledFilters.length&&t.filter.pop()},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this.filters&&this.filters.length)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);var e=void 0,i=void 0;for(e=this._firstChild;e;e=i)i=e.nextChild,e.renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e,i,r=this._filters,n=this._mask;if(r){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var s=0;s<r.length;s++)r[s].enabled&&this._enabledFilters.push(r[s]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}for(n&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t),e=this._firstChild;e;e=i)i=e.nextChild,e.renderWebGL(t);t.flush(),n&&t.maskManager.popMask(this,this._mask),r&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){var e,i;for(this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t),e=this._firstChild;e;e=i)i=e.nextChild,e.renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e}(s.Container)},8030:function(){!function(t){var e;(e=t.utils||(t.utils={})).getIntersectionFactor=function(t,e,i,r,n){var s=e.x-t.x,o=i.x-r.x,a=i.x-t.x,h=e.y-t.y,l=i.y-r.y,u=i.y-t.y,c=s*l-h*o;if(Math.abs(c)<1e-7)return n.x=s,n.y=h,0;var d=(a*l-u*o)/c,p=(s*u-h*a)/c;return p<1e-6||p-1>-1e-6?-1:(n.x=t.x+d*(e.x-t.x),n.y=t.y+d*(e.y-t.y),1)},e.getPositionFromQuad=function(t,e,i){i=i||new PIXI.Point;var r=1-e.x,n=1-r,s=1-e.y,o=1-s;return i.x=(t[0].x*r+t[1].x*n)*s+(t[3].x*r+t[2].x*n)*o,i.y=(t[0].y*r+t[1].y*n)*s+(t[3].y*r+t[2].y*n)*o,i}}(e||(e={})),PIXI.projection=e,function(t){var e,i=function(){function t(t,e){void 0===e&&(e=!0),this._enabled=!1,this.legacy=t,e&&(this.enabled=!0),this.legacy.proj=this}return Object.defineProperty(t.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),t.prototype.clear=function(){},t}();t.AbstractProjection=i,(e=t.TRANSFORM_STEP||(t.TRANSFORM_STEP={}))[e.NONE=0]="NONE",e[e.BEFORE_PROJ=4]="BEFORE_PROJ",e[e.PROJ=5]="PROJ",e[e.ALL=9]="ALL"}(e||(e={}));var t,e,i=this&&this.__extends||(t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)},function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)});!function(t){function e(t){var e=this.proj,i=this,r=t._worldID,n=i.localTransform,s=e.scaleAfterAffine&&e.affine>=2;i._localID!==i._currentLocalID&&(s?(n.a=i._cx,n.b=i._sx,n.c=i._cy,n.d=i._sy,n.tx=i.position._x,n.ty=i.position._y):(n.a=i._cx*i.scale._x,n.b=i._sx*i.scale._x,n.c=i._cy*i.scale._y,n.d=i._sy*i.scale._y,n.tx=i.position._x-(i.pivot._x*n.a+i.pivot._y*n.c),n.ty=i.position._y-(i.pivot._x*n.b+i.pivot._y*n.d)),i._currentLocalID=i._localID,e._currentProjID=-1);var o=e._projID;if(e._currentProjID!==o&&(e._currentProjID=o,e.updateLocalTransform(n),i._parentID=-1),i._parentID!==r){var a=t.proj;a&&!a._affine?e.world.setToMult(a.world,e.local):e.world.setToMultLegacy(t.worldTransform,e.local);var h=i.worldTransform;e.world.copyTo(h,e._affine,e.affinePreserveOrientation),s&&(h.a*=i.scale._x,h.b*=i.scale._x,h.c*=i.scale._y,h.d*=i.scale._y,h.tx-=i.pivot._x*h.a+i.pivot._y*h.c,h.ty-=i.pivot._x*h.b+i.pivot._y*h.d),i._parentID=r,i._worldID++}}var r=function(r){function n(){var e=null!==r&&r.apply(this,arguments)||this;return e._projID=0,e._currentProjID=-1,e._affine=t.AFFINE.NONE,e.affinePreserveOrientation=!1,e.scaleAfterAffine=!0,e}return i(n,r),n.prototype.updateLocalTransform=function(t){},Object.defineProperty(n.prototype,"affine",{get:function(){return this._affine},set:function(t){this._affine!=t&&(this._affine=t,this._currentProjID=-1,this.legacy._currentLocalID=-1)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"enabled",{set:function(t){t!==this._enabled&&(this._enabled=t,t?(this.legacy.updateTransform=e,this.legacy._parentID=-1):(this.legacy.updateTransform=PIXI.Transform.prototype.updateTransform,this.legacy._parentID=-1))},enumerable:!0,configurable:!0}),n.prototype.clear=function(){this._currentProjID=-1,this._projID=0},n}(t.AbstractProjection);t.LinearProjection=r}(e||(e={})),function(t){var e=PIXI.TYPES,r=PIXI.utils.premultiplyTint,n=function(t){function r(i){void 0===i&&(i=!1);var r=t.call(this)||this;return r._buffer=new PIXI.Buffer(null,i,!1),r._indexBuffer=new PIXI.Buffer(null,i,!0),r.addAttribute("aVertexPosition",r._buffer,3,!1,e.FLOAT).addAttribute("aTextureCoord",r._buffer,2,!1,e.FLOAT).addAttribute("aColor",r._buffer,4,!0,e.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,e.FLOAT).addIndex(r._indexBuffer),r}return i(r,t),r}(PIXI.Geometry);t.Batch3dGeometry=n;var s=function(){function t(){}return t.create=function(t){var e=Object.assign({vertex:"precision highp float;\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n\tgl_Position.xyw = projectionMatrix * aVertexPosition;\n\tgl_Position.z = 0.0;\n\n\tvTextureCoord = aTextureCoord;\n\tvTextureId = aTextureId;\n\tvColor = aColor;\n}\n",fragment:"\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\nvec4 color;\n%forloop%\ngl_FragColor = color * vColor;\n}",geometryClass:n,vertexSize:7},t),s=e.vertex,o=e.fragment,a=e.vertexSize,h=e.geometryClass;return function(t){function e(e){var i=t.call(this,e)||this;return i.shaderGenerator=new PIXI.BatchShaderGenerator(s,o),i.geometryClass=h,i.vertexSize=a,i}return i(e,t),e.prototype.packInterleavedGeometry=function(t,e,i,n,s){var o=e.uint32View,a=e.float32View,h=n/this.vertexSize,l=t.uvs,u=t.indices,c=t.vertexData,d=t.vertexData2d,p=t._texture.baseTexture._batchLocation,f=Math.min(t.worldAlpha,1),m=f<1&&t._texture.baseTexture.alphaMode?r(t._tintRGB,f):t._tintRGB+(255*f<<24);if(d)for(var _=0,g=0;g<d.length;g+=3,_+=2)a[n++]=d[g],a[n++]=d[g+1],a[n++]=d[g+2],a[n++]=l[_],a[n++]=l[_+1],o[n++]=m,a[n++]=p;else for(g=0;g<c.length;g+=2)a[n++]=c[g],a[n++]=c[g+1],a[n++]=1,a[n++]=l[g],a[n++]=l[g+1],o[n++]=m,a[n++]=p;for(g=0;g<u.length;g++)i[s++]=h+u[g]},e}(PIXI.AbstractBatchRenderer)},t}();t.Batch2dPluginFactory=s,PIXI.Renderer.registerPlugin("batch2d",s.create({}))}(e||(e={})),function(t){var e=PIXI.AbstractBatchRenderer,r=PIXI.utils.premultiplyBlendMode,n=function(t){function n(){var e=null!==t&&t.apply(this,arguments)||this;return e.forceMaxTextures=0,e.defUniforms={},e}return i(n,t),n.prototype.getUniforms=function(t){return this.defUniforms},n.prototype.syncUniforms=function(t){if(t){var e=this._shader;for(var i in t)e.uniforms[i]=t[i]}},n.prototype.buildDrawCalls=function(t,i,n){var s=this,o=this,a=o._bufferedElements,h=o._attributeBuffer,l=o._indexBuffer,u=o.vertexSize,c=e._drawCallPool,d=this._dcIndex,p=this._aIndex,f=this._iIndex,m=c[d];m.start=this._iIndex,m.texArray=t;for(var _=i;_<n;++_){var g=a[_],v=g._texture.baseTexture,y=r[v.alphaMode?1:0][g.blendMode],b=this.getUniforms(g);a[_]=null,i<_&&(m.blend!==y||m.uniforms!==b)&&(m.size=f-m.start,i=_,(m=c[++d]).texArray=t,m.start=f),this.packInterleavedGeometry(g,h,l,p,f),p+=g.vertexData.length/2*u,f+=g.indices.length,m.blend=y,m.uniforms=b}i<n&&(m.size=f-m.start,++d),s._dcIndex=d,s._aIndex=p,s._iIndex=f},n.prototype.drawBatches=function(){for(var t=this._dcIndex,i=this.renderer,r=i.gl,n=i.state,s=i.shader,o=e._drawCallPool,a=null,h=null,l=0;l<t;l++){var u=o[l],c=u.texArray,d=u.type,p=u.size,f=u.start,m=u.blend,_=u.uniforms;h!==c&&(h=c,this.bindAndClearTexArray(c)),a!==_&&(a=_,this.syncUniforms(_),s.syncUniformGroup(this._shader.uniformGroup)),this.state.blendMode=m,n.set(this.state),r.drawElements(d,p,r.UNSIGNED_SHORT,2*f)}},n.prototype.contextChange=function(){if(!this.forceMaxTextures)return t.prototype.contextChange.call(this),void this.syncUniforms(this.defUniforms);this.renderer.gl;var e=this;e.MAX_TEXTURES=this.forceMaxTextures,this._shader=e.shaderGenerator.generateShader(this.MAX_TEXTURES),this.syncUniforms(this.defUniforms);for(var i=0;i<e._packedGeometryPoolSize;i++)e._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()},n}(e);t.UniformBatchRenderer=n}(e||(e={})),function(t){var e=[new PIXI.Point,new PIXI.Point,new PIXI.Point,new PIXI.Point],i=[0,0,0,0],r=function(){function t(){this.surfaceID="default",this._updateID=0,this.vertexSrc="",this.fragmentSrc=""}return t.prototype.fillUniforms=function(t){},t.prototype.clear=function(){},t.prototype.boundsQuad=function(t,r,n){for(var s=r[0],o=r[1],a=r[0],h=r[1],l=2;l<8;l+=2)s>r[l]&&(s=r[l]),a<r[l]&&(a=r[l]),o>r[l+1]&&(o=r[l+1]),h<r[l+1]&&(h=r[l+1]);if(e[0].set(s,o),this.apply(e[0],e[0]),e[1].set(a,o),this.apply(e[1],e[1]),e[2].set(a,h),this.apply(e[2],e[2]),e[3].set(s,h),this.apply(e[3],e[3]),n)n.apply(e[0],e[0]),n.apply(e[1],e[1]),n.apply(e[2],e[2]),n.apply(e[3],e[3]),r[0]=e[0].x,r[1]=e[0].y,r[2]=e[1].x,r[3]=e[1].y,r[4]=e[2].x,r[5]=e[2].y,r[6]=e[3].x,r[7]=e[3].y;else{for(l=1;l<=3;l++)if(e[l].y<e[0].y||e[l].y==e[0].y&&e[l].x<e[0].x){var u=e[0];e[0]=e[l],e[l]=u}for(l=1;l<=3;l++)i[l]=Math.atan2(e[l].y-e[0].y,e[l].x-e[0].x);for(l=1;l<=3;l++)for(var c=l+1;c<=3;c++)if(i[l]>i[c]){u=e[l],e[l]=e[c],e[c]=u;var d=i[l];i[l]=i[c],i[c]=d}if(r[0]=e[0].x,r[1]=e[0].y,r[2]=e[1].x,r[3]=e[1].y,r[4]=e[2].x,r[5]=e[2].y,r[6]=e[3].x,r[7]=e[3].y,(e[3].x-e[2].x)*(e[1].y-e[2].y)-(e[1].x-e[2].x)*(e[3].y-e[2].y)<0)return r[4]=e[3].x,void(r[5]=e[3].y)}},t}();t.Surface=r}(e||(e={})),function(t){var e=new PIXI.Matrix,r=new PIXI.Rectangle,n=new PIXI.Point,s=function(t){function s(){var e=t.call(this)||this;return e.distortion=new PIXI.Point,e}return i(s,t),s.prototype.clear=function(){this.distortion.set(0,0)},s.prototype.apply=function(t,e){e=e||new PIXI.Point;var i=this.distortion,r=t.x*t.y;return e.x=t.x+i.x*r,e.y=t.y+i.y*r,e},s.prototype.applyInverse=function(t,e){e=e||new PIXI.Point;var i=t.x,r=t.y,n=this.distortion.x,s=this.distortion.y;if(0==n)e.x=i,e.y=r/(1+s*i);else if(0==s)e.y=r,e.x=i/(1+n*r);else{var o=.5*(r*n-i*s+1)/s,a=o*o+i/s;if(a<=1e-5)return e.set(NaN,NaN),e;e.x=s>0?-o+Math.sqrt(a):-o-Math.sqrt(a),e.y=(i/e.x-1)/n}return e},s.prototype.mapSprite=function(t,e,i){var n=t.texture;return r.x=-t.anchor.x*n.orig.width,r.y=-t.anchor.y*n.orig.height,r.width=n.orig.width,r.height=n.orig.height,this.mapQuad(r,e,i||t.transform)},s.prototype.mapQuad=function(t,i,r){var s=-t.x/t.width,o=-t.y/t.height,a=(1-t.x)/t.width,h=(1-t.y)/t.height,l=i[0].x*(1-s)+i[1].x*s,u=i[0].y*(1-s)+i[1].y*s,c=i[0].x*(1-a)+i[1].x*a,d=i[0].y*(1-a)+i[1].y*a,p=i[3].x*(1-s)+i[2].x*s,f=i[3].y*(1-s)+i[2].y*s,m=i[3].x*(1-a)+i[2].x*a,_=i[3].y*(1-a)+i[2].y*a,g=l*(1-o)+p*o,v=u*(1-o)+f*o,y=c*(1-o)+m*o,b=d*(1-o)+_*o,x=l*(1-h)+p*h,T=u*(1-h)+f*h,S=c*(1-h)+m*h,E=d*(1-h)+_*h,w=e;return w.tx=g,w.ty=v,w.a=y-g,w.b=b-v,w.c=x-g,w.d=T-v,n.set(S,E),w.applyInverse(n,n),this.distortion.set(n.x-1,n.y-1),r.setFromMatrix(w),this},s.prototype.fillUniforms=function(t){t.distortion=t.distortion||new Float32Array([0,0,0,0]);var e=Math.abs(this.distortion.x),i=Math.abs(this.distortion.y);t.distortion[0]=1e4*e<=i?0:this.distortion.x,t.distortion[1]=1e4*i<=e?0:this.distortion.y,t.distortion[2]=1/t.distortion[0],t.distortion[3]=1/t.distortion[1]},s}(t.Surface);t.BilinearSurface=s}(e||(e={})),function(t){var e=function(e){function r(){var i=e.call(this)||this;return i.proj=new t.ProjectionSurface(i.transform),i}return i(r,e),Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.proj},enumerable:!0,configurable:!0}),r}(PIXI.Container);t.Container2s=e}(e||(e={})),function(t){var e=PIXI.Transform.prototype.updateTransform;function r(t){var i=this.proj,r=t.proj;return r?r._surface?(i._activeProjection=r,this.updateLocalTransform(),this.localTransform.copyTo(this.worldTransform),void(this._parentID<0&&++this._worldID)):(e.call(this,t),void(i._activeProjection=r._activeProjection)):(e.call(this,t),void(i._activeProjection=null))}var n=function(e){function n(t,i){var r=e.call(this,t,i)||this;return r._surface=null,r._activeProjection=null,r._currentSurfaceID=-1,r._currentLegacyID=-1,r._lastUniforms=null,r}return i(n,e),Object.defineProperty(n.prototype,"enabled",{set:function(t){t!==this._enabled&&(this._enabled=t,t?(this.legacy.updateTransform=r,this.legacy._parentID=-1):(this.legacy.updateTransform=PIXI.Transform.prototype.updateTransform,this.legacy._parentID=-1))},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"surface",{get:function(){return this._surface},set:function(t){this._surface!=t&&(this._surface=t||null,this.legacy._parentID=-1)},enumerable:!0,configurable:!0}),n.prototype.applyPartial=function(t,e){return null!==this._activeProjection?(e=this.legacy.worldTransform.apply(t,e),this._activeProjection.surface.apply(e,e)):null!==this._surface?this.surface.apply(t,e):this.legacy.worldTransform.apply(t,e)},n.prototype.apply=function(t,e){return null!==this._activeProjection?(e=this.legacy.worldTransform.apply(t,e),this._activeProjection.surface.apply(e,e),this._activeProjection.legacy.worldTransform.apply(e,e)):null!==this._surface?(e=this.surface.apply(t,e),this.legacy.worldTransform.apply(e,e)):this.legacy.worldTransform.apply(t,e)},n.prototype.applyInverse=function(t,e){return null!==this._activeProjection?(e=this._activeProjection.legacy.worldTransform.applyInverse(t,e),this._activeProjection._surface.applyInverse(e,e),this.legacy.worldTransform.applyInverse(e,e)):null!==this._surface?(e=this.legacy.worldTransform.applyInverse(t,e),this._surface.applyInverse(e,e)):this.legacy.worldTransform.applyInverse(t,e)},n.prototype.mapBilinearSprite=function(e,i){this._surface instanceof t.BilinearSurface||(this.surface=new t.BilinearSurface),this.surface.mapSprite(e,i,this.legacy)},n.prototype.clear=function(){this.surface&&this.surface.clear()},Object.defineProperty(n.prototype,"uniforms",{get:function(){return this._currentLegacyID===this.legacy._worldID&&this._currentSurfaceID===this.surface._updateID||(this._lastUniforms=this._lastUniforms||{},this._lastUniforms.translationMatrix=this.legacy.worldTransform,this._surface.fillUniforms(this._lastUniforms)),this._lastUniforms},enumerable:!0,configurable:!0}),n}(t.AbstractProjection);t.ProjectionSurface=n}(e||(e={})),function(t){var e=PIXI.TYPES,r=PIXI.utils.premultiplyTint,n=function(t){function r(i){void 0===i&&(i=!1);var r=t.call(this)||this;return r._buffer=new PIXI.Buffer(null,i,!1),r._indexBuffer=new PIXI.Buffer(null,i,!0),r.addAttribute("aVertexPosition",r._buffer,2,!1,e.FLOAT).addAttribute("aTrans1",r._buffer,3,!1,e.FLOAT).addAttribute("aTrans2",r._buffer,3,!1,e.FLOAT).addAttribute("aSamplerSize",r._buffer,2,!1,e.FLOAT).addAttribute("aFrame",r._buffer,4,!1,e.FLOAT).addAttribute("aColor",r._buffer,4,!0,e.UNSIGNED_BYTE).addAttribute("aTextureId",r._buffer,1,!0,e.FLOAT).addIndex(r._indexBuffer),r}return i(r,t),r}(PIXI.Geometry);t.BatchBilineardGeometry=n;var s=function(){function e(){}return e.create=function(e){var s=Object.assign({vertex:"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec3 aTrans1;\nattribute vec3 aTrans2;\nattribute vec2 aSamplerSize;\nattribute vec4 aFrame;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\n\nvarying vec2 vertexPosition;\nvarying vec3 vTrans1;\nvarying vec3 vTrans2;\nvarying vec2 vSamplerSize;\nvarying vec4 vFrame;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n\tgl_Position.xyw = projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0);\n\tgl_Position.z = 0.0;\n\n\tvertexPosition = aVertexPosition;\n\tvTrans1 = aTrans1;\n\tvTrans2 = aTrans2;\n\tvTextureId = aTextureId;\n\tvColor = aColor;\n\tvSamplerSize = aSamplerSize;\n\tvFrame = aFrame;\n}\n",fragment:"precision highp float;\nvarying vec2 vertexPosition;\nvarying vec3 vTrans1;\nvarying vec3 vTrans2;\nvarying vec2 vSamplerSize;\nvarying vec4 vFrame;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nuniform sampler2D uSamplers[%count%];\nuniform vec4 distortion;\n\nvoid main(void){\nvec2 surface;\nvec2 surface2;\n\nfloat vx = vertexPosition.x;\nfloat vy = vertexPosition.y;\nfloat dx = distortion.x;\nfloat dy = distortion.y;\nfloat revx = distortion.z;\nfloat revy = distortion.w;\n\nif (distortion.x == 0.0) {\n\tsurface.x = vx;\n\tsurface.y = vy / (1.0 + dy * vx);\n\tsurface2 = surface;\n} else\nif (distortion.y == 0.0) {\n\tsurface.y = vy;\n\tsurface.x = vx / (1.0 + dx * vy);\n\tsurface2 = surface;\n} else {\n\tfloat c = vy * dx - vx * dy;\n\tfloat b = (c + 1.0) * 0.5;\n\tfloat b2 = (-c + 1.0) * 0.5;\n\tfloat d = b * b + vx * dy;\n\tif (d < -0.00001) {\n\t    discard;\n\t}\n\td = sqrt(max(d, 0.0));\n\tsurface.x = (- b + d) * revy;\n\tsurface2.x = (- b - d) * revy;\n\tsurface.y = (- b2 + d) * revx;\n\tsurface2.y = (- b2 - d) * revx;\n}\n\nvec2 uv;\nuv.x = vTrans1.x * surface.x + vTrans1.y * surface.y + vTrans1.z;\nuv.y = vTrans2.x * surface.x + vTrans2.y * surface.y + vTrans2.z;\n\nvec2 pixels = uv * vSamplerSize;\n\nif (pixels.x < vFrame.x || pixels.x > vFrame.z ||\n\tpixels.y < vFrame.y || pixels.y > vFrame.w) {\n\tuv.x = vTrans1.x * surface2.x + vTrans1.y * surface2.y + vTrans1.z;\n\tuv.y = vTrans2.x * surface2.x + vTrans2.y * surface2.y + vTrans2.z;\n\tpixels = uv * vSamplerSize;\n\n   if (pixels.x < vFrame.x || pixels.x > vFrame.z ||\n       pixels.y < vFrame.y || pixels.y > vFrame.w) {\n       discard;\n   }\n}\n\nvec4 edge;\nedge.xy = clamp(pixels - vFrame.xy + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));\nedge.zw = clamp(vFrame.zw - pixels + 0.5, vec2(0.0, 0.0), vec2(1.0, 1.0));\n\nfloat alpha = 1.0; //edge.x * edge.y * edge.z * edge.w;\nvec4 rColor = vColor * alpha;\n\nfloat textureId = floor(vTextureId+0.5);\nvec2 vTextureCoord = uv;\nvec4 color;\n%forloop%\ngl_FragColor = color * rColor;\n}",geometryClass:n,vertexSize:16},e),o=s.vertex,a=s.fragment,h=s.vertexSize,l=s.geometryClass;return function(t){function e(e){var i=t.call(this,e)||this;return i.defUniforms={translationMatrix:new PIXI.Matrix,distortion:new Float32Array([0,0,1/0,1/0])},i.size=1e3,i.forceMaxTextures=1,i.shaderGenerator=new PIXI.BatchShaderGenerator(o,a),i.geometryClass=l,i.vertexSize=h,i}return i(e,t),e.prototype.getUniforms=function(t){var e=t.proj;return null!==e.surface?e.uniforms:null!==e._activeProjection?e._activeProjection.uniforms:this.defUniforms},e.prototype.packInterleavedGeometry=function(t,e,i,n,s){for(var o=e.uint32View,a=e.float32View,h=n/this.vertexSize,l=t.indices,u=t.vertexData,c=t._texture._frame,d=t.aTrans,p=t._texture.baseTexture,f=p._batchLocation,m=p.realWidth,_=p.realHeight,g=p.resolution,v=Math.min(t.worldAlpha,1),y=v<1&&t._texture.baseTexture.alphaMode?r(t._tintRGB,v):t._tintRGB+(255*v<<24),b=0;b<u.length;b+=2)a[n]=u[b],a[n+1]=u[b+1],a[n+2]=d.a,a[n+3]=d.c,a[n+4]=d.tx,a[n+5]=d.b,a[n+6]=d.d,a[n+7]=d.ty,a[n+8]=m,a[n+9]=_,a[n+10]=c.x*g,a[n+11]=c.y*g,a[n+12]=(c.x+c.width)*g,a[n+13]=(c.y+c.height)*g,o[n+14]=y,a[n+15]=f,n+=16;for(b=0;b<l.length;b++)i[s++]=h+l[b]},e}(t.UniformBatchRenderer)},e}();t.BatchBilinearPluginFactory=s,PIXI.Renderer.registerPlugin("batch_bilinear",s.create({}))}(e||(e={})),function(t){var e=function(e){function r(i){var r=e.call(this,i)||this;return r.aTrans=new PIXI.Matrix,r.proj=new t.ProjectionSurface(r.transform),r.pluginName="batch_bilinear",r}return i(r,e),r.prototype._calculateBounds=function(){this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)},r.prototype.calculateVertices=function(){var t=this.transform._worldID,e=this._texture._updateID;if(this._transformID!==t||this._textureID!==e){this._transformID=t,this._textureID=e;var i=this._texture,r=this.vertexData,n=i.trim,s=i.orig,o=this._anchor,a=0,h=0,l=0,u=0;if(n?(a=(h=n.x-o._x*s.width)+n.width,l=(u=n.y-o._y*s.height)+n.height):(a=(h=-o._x*s.width)+s.width,l=(u=-o._y*s.height)+s.height),this.proj._surface)r[0]=h,r[1]=u,r[2]=a,r[3]=u,r[4]=a,r[5]=l,r[6]=h,r[7]=l,this.proj._surface.boundsQuad(r,r);else{var c=this.transform.worldTransform,d=c.a,p=c.b,f=c.c,m=c.d,_=c.tx,g=c.ty;r[0]=d*h+f*u+_,r[1]=m*u+p*h+g,r[2]=d*a+f*u+_,r[3]=m*u+p*a+g,r[4]=d*a+f*l+_,r[5]=m*l+p*a+g,r[6]=d*h+f*l+_,r[7]=m*l+p*h+g,this.proj._activeProjection&&this.proj._activeProjection.surface.boundsQuad(r,r)}i.uvMatrix||(i.uvMatrix=new PIXI.TextureMatrix(i)),i.uvMatrix.update();var v=this.aTrans;v.set(s.width,0,0,s.height,h,u),null===this.proj._surface&&v.prepend(this.transform.worldTransform),v.invert(),v.prepend(i.uvMatrix.mapCoord)}},r.prototype.calculateTrimmedVertices=function(){var t=this.transform._worldID,e=this._texture._updateID;if(this.vertexTrimmedData){if(this._transformTrimmedID===t&&this._textureTrimmedID===e)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=t,this._textureTrimmedID=e;var i=this._texture,r=this.vertexTrimmedData,n=i.orig,s=this._anchor,o=-s._x*n.width,a=o+n.width,h=-s._y*n.height,l=h+n.height;if(this.proj._surface)r[0]=o,r[1]=h,r[2]=a,r[3]=h,r[4]=a,r[5]=l,r[6]=o,r[7]=l,this.proj._surface.boundsQuad(r,r,this.transform.worldTransform);else{var u=this.transform.worldTransform,c=u.a,d=u.b,p=u.c,f=u.d,m=u.tx,_=u.ty;r[0]=c*o+p*h+m,r[1]=f*h+d*o+_,r[2]=c*a+p*h+m,r[3]=f*h+d*a+_,r[4]=c*a+p*l+m,r[5]=f*l+d*a+_,r[6]=c*o+p*l+m,r[7]=f*l+d*o+_,this.proj._activeProjection&&this.proj._activeProjection.surface.boundsQuad(r,r,this.proj._activeProjection.legacy.worldTransform)}},Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.proj},enumerable:!0,configurable:!0}),r}(PIXI.Sprite);t.Sprite2s=e}(e||(e={})),function(t){var e=function(e){function r(i,r,n){var s=e.call(this,i,r,n)||this;return s.aTrans=new PIXI.Matrix,s.proj=new t.ProjectionSurface(s.transform),s.pluginName="batch_bilinear",s}return i(r,e),Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.proj},enumerable:!0,configurable:!0}),r}(PIXI.Text);t.Text2s=e,e.prototype.calculateVertices=t.Sprite2s.prototype.calculateVertices,e.prototype.calculateTrimmedVertices=t.Sprite2s.prototype.calculateTrimmedVertices,e.prototype._calculateBounds=t.Sprite2s.prototype._calculateBounds}(e||(e={})),function(t){PIXI.Sprite.prototype.convertTo2s=function(){this.proj||(this.pluginName="sprite_bilinear",this.aTrans=new PIXI.Matrix,this.calculateVertices=t.Sprite2s.prototype.calculateVertices,this.calculateTrimmedVertices=t.Sprite2s.prototype.calculateTrimmedVertices,this._calculateBounds=t.Sprite2s.prototype._calculateBounds,PIXI.Container.prototype.convertTo2s.call(this))},PIXI.Container.prototype.convertTo2s=function(){this.proj||(this.proj=new t.Projection2d(this.transform),Object.defineProperty(this,"worldTransform",{get:function(){return this.proj},enumerable:!0,configurable:!0}))},PIXI.Container.prototype.convertSubtreeTo2s=function(){this.convertTo2s();for(var t=0;t<this.children.length;t++)this.children[t].convertSubtreeTo2s()}}(e||(e={})),function(t){t.container2dWorldTransform=function(){return this.proj.affine?this.transform.worldTransform:this.proj.world};var e=function(e){function r(){var i=e.call(this)||this;return i.proj=new t.Projection2d(i.transform),i}return i(r,e),r.prototype.toLocal=function(e,i,r,n,s){return void 0===s&&(s=t.TRANSFORM_STEP.ALL),i&&(e=i.toGlobal(e,r,n)),n||this._recursivePostUpdateTransform(),s>=t.TRANSFORM_STEP.PROJ?(n||this.displayObjectUpdateTransform(),this.proj.affine?this.transform.worldTransform.applyInverse(e,r):this.proj.world.applyInverse(e,r)):(this.parent?r=this.parent.worldTransform.applyInverse(e,r):r.copyFrom(e),s===t.TRANSFORM_STEP.NONE?r:this.transform.localTransform.applyInverse(r,r))},Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),r}(PIXI.Container);t.Container2d=e,t.container2dToLocal=e.prototype.toLocal}(e||(e={})),function(t){var e,i=PIXI.Point,r=[1,0,0,0,1,0,0,0,1];!function(t){t[t.NONE=0]="NONE",t[t.FREE=1]="FREE",t[t.AXIS_X=2]="AXIS_X",t[t.AXIS_Y=3]="AXIS_Y",t[t.POINT=4]="POINT",t[t.AXIS_XR=5]="AXIS_XR"}(e=t.AFFINE||(t.AFFINE={}));var n=function(){function t(t){this.floatArray=null,this.mat3=new Float64Array(t||r)}return Object.defineProperty(t.prototype,"a",{get:function(){return this.mat3[0]/this.mat3[8]},set:function(t){this.mat3[0]=t*this.mat3[8]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"b",{get:function(){return this.mat3[1]/this.mat3[8]},set:function(t){this.mat3[1]=t*this.mat3[8]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"c",{get:function(){return this.mat3[3]/this.mat3[8]},set:function(t){this.mat3[3]=t*this.mat3[8]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"d",{get:function(){return this.mat3[4]/this.mat3[8]},set:function(t){this.mat3[4]=t*this.mat3[8]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tx",{get:function(){return this.mat3[6]/this.mat3[8]},set:function(t){this.mat3[6]=t*this.mat3[8]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ty",{get:function(){return this.mat3[7]/this.mat3[8]},set:function(t){this.mat3[7]=t*this.mat3[8]},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e,i,r,n,s){var o=this.mat3;return o[0]=t,o[1]=e,o[2]=0,o[3]=i,o[4]=r,o[5]=0,o[6]=n,o[7]=s,o[8]=1,this},t.prototype.toArray=function(t,e){this.floatArray||(this.floatArray=new Float32Array(9));var i=e||this.floatArray,r=this.mat3;return t?(i[0]=r[0],i[1]=r[1],i[2]=r[2],i[3]=r[3],i[4]=r[4],i[5]=r[5],i[6]=r[6],i[7]=r[7],i[8]=r[8]):(i[0]=r[0],i[1]=r[3],i[2]=r[6],i[3]=r[1],i[4]=r[4],i[5]=r[7],i[6]=r[2],i[7]=r[5],i[8]=r[8]),i},t.prototype.apply=function(t,e){e=e||new PIXI.Point;var i=this.mat3,r=t.x,n=t.y,s=1/(i[2]*r+i[5]*n+i[8]);return e.x=s*(i[0]*r+i[3]*n+i[6]),e.y=s*(i[1]*r+i[4]*n+i[7]),e},t.prototype.translate=function(t,e){var i=this.mat3;return i[0]+=t*i[2],i[1]+=e*i[2],i[3]+=t*i[5],i[4]+=e*i[5],i[6]+=t*i[8],i[7]+=e*i[8],this},t.prototype.scale=function(t,e){var i=this.mat3;return i[0]*=t,i[1]*=e,i[3]*=t,i[4]*=e,i[6]*=t,i[7]*=e,this},t.prototype.scaleAndTranslate=function(t,e,i,r){var n=this.mat3;n[0]=t*n[0]+i*n[2],n[1]=e*n[1]+r*n[2],n[3]=t*n[3]+i*n[5],n[4]=e*n[4]+r*n[5],n[6]=t*n[6]+i*n[8],n[7]=e*n[7]+r*n[8]},t.prototype.applyInverse=function(t,e){e=e||new i;var r=this.mat3,n=t.x,s=t.y,o=r[0],a=r[3],h=r[6],l=r[1],u=r[4],c=r[7],d=r[2],p=r[5],f=r[8],m=(f*u-c*p)*n+(-f*a+h*p)*s+(c*a-h*u),_=(-f*l+c*d)*n+(f*o-h*d)*s+(-c*o+h*l),g=(p*l-u*d)*n+(-p*o+a*d)*s+(u*o-a*l);return e.x=m/g,e.y=_/g,e},t.prototype.invert=function(){var t=this.mat3,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8],u=l*s-o*h,c=-l*n+o*a,d=h*n-s*a,p=e*u+i*c+r*d;return p?(p=1/p,t[0]=u*p,t[1]=(-l*i+r*h)*p,t[2]=(o*i-r*s)*p,t[3]=c*p,t[4]=(l*e-r*a)*p,t[5]=(-o*e+r*n)*p,t[6]=d*p,t[7]=(-h*e+i*a)*p,t[8]=(s*e-i*n)*p,this):this},t.prototype.identity=function(){var t=this.mat3;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,this},t.prototype.clone=function(){return new t(this.mat3)},t.prototype.copyTo2dOr3d=function(t){var e=this.mat3,i=t.mat3;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],t},t.prototype.copyTo=function(t,i,r){var n=this.mat3,s=1/n[8],o=n[6]*s,a=n[7]*s;if(t.a=(n[0]-n[2]*o)*s,t.b=(n[1]-n[2]*a)*s,t.c=(n[3]-n[5]*o)*s,t.d=(n[4]-n[5]*a)*s,t.tx=o,t.ty=a,i>=2){var h=t.a*t.d-t.b*t.c;r||(h=Math.abs(h)),i===e.POINT?(h=h>0?1:-1,t.a=h,t.b=0,t.c=0,t.d=h):i===e.AXIS_X?(h/=Math.sqrt(t.b*t.b+t.d*t.d),t.c=0,t.d=h):i===e.AXIS_Y?(h/=Math.sqrt(t.a*t.a+t.c*t.c),t.a=h,t.c=0):i===e.AXIS_XR&&(t.a=t.d*h,t.c=-t.b*h)}return t},t.prototype.copyFrom=function(t){var e=this.mat3;return e[0]=t.a,e[1]=t.b,e[2]=0,e[3]=t.c,e[4]=t.d,e[5]=0,e[6]=t.tx,e[7]=t.ty,e[8]=1,this},t.prototype.setToMultLegacy=function(t,e){var i=this.mat3,r=e.mat3,n=t.a,s=t.b,o=t.c,a=t.d,h=t.tx,l=t.ty,u=r[0],c=r[1],d=r[2],p=r[3],f=r[4],m=r[5],_=r[6],g=r[7],v=r[8];return i[0]=u*n+c*o+d*h,i[1]=u*s+c*a+d*l,i[2]=d,i[3]=p*n+f*o+m*h,i[4]=p*s+f*a+m*l,i[5]=m,i[6]=_*n+g*o+v*h,i[7]=_*s+g*a+v*l,i[8]=v,this},t.prototype.setToMultLegacy2=function(t,e){var i=this.mat3,r=t.mat3,n=r[0],s=r[1],o=r[2],a=r[3],h=r[4],l=r[5],u=r[6],c=r[7],d=r[8],p=e.a,f=e.b,m=e.c,_=e.d,g=e.tx,v=e.ty;return i[0]=p*n+f*a,i[1]=p*s+f*h,i[2]=p*o+f*l,i[3]=m*n+_*a,i[4]=m*s+_*h,i[5]=m*o+_*l,i[6]=g*n+v*a+u,i[7]=g*s+v*h+c,i[8]=g*o+v*l+d,this},t.prototype.setToMult=function(t,e){var i=this.mat3,r=t.mat3,n=e.mat3,s=r[0],o=r[1],a=r[2],h=r[3],l=r[4],u=r[5],c=r[6],d=r[7],p=r[8],f=n[0],m=n[1],_=n[2],g=n[3],v=n[4],y=n[5],b=n[6],x=n[7],T=n[8];return i[0]=f*s+m*h+_*c,i[1]=f*o+m*l+_*d,i[2]=f*a+m*u+_*p,i[3]=g*s+v*h+y*c,i[4]=g*o+v*l+y*d,i[5]=g*a+v*u+y*p,i[6]=b*s+x*h+T*c,i[7]=b*o+x*l+T*d,i[8]=b*a+x*u+T*p,this},t.prototype.prepend=function(t){return t.mat3?this.setToMult(t,this):this.setToMultLegacy(t,this)},t.IDENTITY=new t,t.TEMP_MATRIX=new t,t}();t.Matrix2d=n}(e||(e={})),function(t){var e=new PIXI.Point,r=[new PIXI.Point,new PIXI.Point,new PIXI.Point,new PIXI.Point],n=new PIXI.Rectangle,s=new t.Matrix2d,o=function(o){function a(e,i){var r=o.call(this,e,i)||this;return r.matrix=new t.Matrix2d,r.pivot=new PIXI.ObservablePoint(r.onChange,r,0,0),r.reverseLocalOrder=!1,r.local=new t.Matrix2d,r.world=new t.Matrix2d,r}return i(a,o),a.prototype.onChange=function(){var t=this.pivot,e=this.matrix.mat3;e[6]=-(t._x*e[0]+t._y*e[3]),e[7]=-(t._x*e[1]+t._y*e[4]),this._projID++},a.prototype.setAxisX=function(t,e){void 0===e&&(e=1);var i=t.x,r=t.y,n=Math.sqrt(i*i+r*r),s=this.matrix.mat3;s[0]=i/n,s[1]=r/n,s[2]=e/n,this.onChange()},a.prototype.setAxisY=function(t,e){void 0===e&&(e=1);var i=t.x,r=t.y,n=Math.sqrt(i*i+r*r),s=this.matrix.mat3;s[3]=i/n,s[4]=r/n,s[5]=e/n,this.onChange()},a.prototype.mapSprite=function(t,e){var i=t.texture;return n.x=-t.anchor.x*i.orig.width,n.y=-t.anchor.y*i.orig.height,n.width=i.orig.width,n.height=i.orig.height,this.mapQuad(n,e)},a.prototype.mapQuad=function(i,n){r[0].set(i.x,i.y),r[1].set(i.x+i.width,i.y),r[2].set(i.x+i.width,i.y+i.height),r[3].set(i.x,i.y+i.height);var o=1,a=2,h=3;if(0!==t.utils.getIntersectionFactor(n[0],n[2],n[1],n[3],e)){o=1,a=3,h=2;var l=Math.sqrt((n[0].x-e.x)*(n[0].x-e.x)+(n[0].y-e.y)*(n[0].y-e.y)),u=Math.sqrt((n[o].x-e.x)*(n[o].x-e.x)+(n[o].y-e.y)*(n[o].y-e.y)),c=Math.sqrt((n[a].x-e.x)*(n[a].x-e.x)+(n[a].y-e.y)*(n[a].y-e.y)),d=Math.sqrt((n[h].x-e.x)*(n[h].x-e.x)+(n[h].y-e.y)*(n[h].y-e.y)),p=(l+d)/d,f=(u+c)/c,m=(u+c)/u,_=this.matrix.mat3;_[0]=r[0].x*p,_[1]=r[0].y*p,_[2]=p,_[3]=r[o].x*f,_[4]=r[o].y*f,_[5]=f,_[6]=r[a].x*m,_[7]=r[a].y*m,_[8]=m,this.matrix.invert(),(_=s.mat3)[0]=n[0].x,_[1]=n[0].y,_[2]=1,_[3]=n[o].x,_[4]=n[o].y,_[5]=1,_[6]=n[a].x,_[7]=n[a].y,_[8]=1,this.matrix.setToMult(s,this.matrix),this._projID++}},a.prototype.updateLocalTransform=function(t){0!==this._projID?this.reverseLocalOrder?this.local.setToMultLegacy2(this.matrix,t):this.local.setToMultLegacy(t,this.matrix):this.local.copyFrom(t)},a.prototype.clear=function(){o.prototype.clear.call(this),this.matrix.identity(),this.pivot.set(0,0)},a}(t.LinearProjection);t.Projection2d=o}(e||(e={})),function(t){var e=function(e){function r(i,r,n,s){var o=e.call(this,i,r,n,s)||this;return o.vertexData2d=null,o.proj=new t.Projection2d(o.transform),o}return i(r,e),r.prototype.calculateVertices=function(){if(this.proj._affine)return this.vertexData2d=null,void e.prototype.calculateVertices.call(this);var t=this.geometry,i=t.buffers[0].data,r=this;if(t.vertexDirtyId!==r.vertexDirty||r._transformID!==r.transform._worldID){r._transformID=r.transform._worldID,r.vertexData.length!==i.length&&(r.vertexData=new Float32Array(i.length)),this.vertexData2d&&this.vertexData2d.length===3*i.length/2||(this.vertexData2d=new Float32Array(3*i.length));for(var n=this.proj.world.mat3,s=this.vertexData2d,o=r.vertexData,a=0;a<o.length/2;a++){var h=i[2*a],l=i[2*a+1],u=n[0]*h+n[3]*l+n[6],c=n[1]*h+n[4]*l+n[7],d=n[2]*h+n[5]*l+n[8];s[3*a]=u,s[3*a+1]=c,s[3*a+2]=d,o[2*a]=u/d,o[2*a+1]=c/d}r.vertexDirty=t.vertexDirtyId}},r.prototype._renderDefault=function(t){var e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.program.uniformData.translationMatrix&&(e.uniforms.translationMatrix=this.worldTransform.toArray(!0)),t.shader.bind(e,!1),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)},r.prototype.toLocal=function(e,i,r,n,s){return void 0===s&&(s=t.TRANSFORM_STEP.ALL),t.container2dToLocal.call(this,e,i,r,n,s)},Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),r.defaultVertexShader="precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n\tgl_Position.xyw = projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0);\n\tgl_Position.z = 0.0;\n\n\tvTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n",r.defaultFragmentShader="\nvarying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n\tgl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}",r}(PIXI.Mesh);t.Mesh2d=e;var r=function(t){function r(i,r,n,s,o){var a=t.call(this,new PIXI.MeshGeometry(r,n,s),new PIXI.MeshMaterial(i,{program:PIXI.Program.from(e.defaultVertexShader,e.defaultFragmentShader),pluginName:"batch2d"}),null,o)||this;return a.autoUpdate=!0,a.geometry.getBuffer("aVertexPosition").static=!1,a}return i(r,t),Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!0,configurable:!0}),r.prototype._render=function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),t.prototype._render.call(this,e)},r}(e);t.SimpleMesh2d=r}(e||(e={})),function(t){var e=function(e){function r(i){var r=e.call(this,i)||this;return r.vertexData2d=null,r.proj=new t.Projection2d(r.transform),r.pluginName="batch2d",r}return i(r,e),r.prototype._calculateBounds=function(){this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)},r.prototype.calculateVertices=function(){var t=this._texture;if(this.proj._affine)return this.vertexData2d=null,void e.prototype.calculateVertices.call(this);this.vertexData2d||(this.vertexData2d=new Float32Array(12));var i=this.transform._worldID,r=t._updateID;if(this._transformID!==i||this._textureID!==r){this._textureID!==r&&(this.uvs=t._uvs.uvsFloat32),this._transformID=i,this._textureID=r;var n=this.proj.world.mat3,s=this.vertexData2d,o=this.vertexData,a=t.trim,h=t.orig,l=this._anchor,u=0,c=0,d=0,p=0;a?(u=(c=a.x-l._x*h.width)+a.width,d=(p=a.y-l._y*h.height)+a.height):(u=(c=-l._x*h.width)+h.width,d=(p=-l._y*h.height)+h.height),s[0]=n[0]*c+n[3]*p+n[6],s[1]=n[1]*c+n[4]*p+n[7],s[2]=n[2]*c+n[5]*p+n[8],s[3]=n[0]*u+n[3]*p+n[6],s[4]=n[1]*u+n[4]*p+n[7],s[5]=n[2]*u+n[5]*p+n[8],s[6]=n[0]*u+n[3]*d+n[6],s[7]=n[1]*u+n[4]*d+n[7],s[8]=n[2]*u+n[5]*d+n[8],s[9]=n[0]*c+n[3]*d+n[6],s[10]=n[1]*c+n[4]*d+n[7],s[11]=n[2]*c+n[5]*d+n[8],o[0]=s[0]/s[2],o[1]=s[1]/s[2],o[2]=s[3]/s[5],o[3]=s[4]/s[5],o[4]=s[6]/s[8],o[5]=s[7]/s[8],o[6]=s[9]/s[11],o[7]=s[10]/s[11]}},r.prototype.calculateTrimmedVertices=function(){if(this.proj._affine)e.prototype.calculateTrimmedVertices.call(this);else{var t=this.transform._worldID,i=this._texture._updateID;if(this.vertexTrimmedData){if(this._transformTrimmedID===t&&this._textureTrimmedID===i)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=t,this._textureTrimmedID=i;var r=this._texture,n=this.vertexTrimmedData,s=r.orig,o=this.tileProj?this._width:s.width,a=this.tileProj?this._height:s.height,h=this._anchor,l=this.proj.world.mat3,u=-h._x*o,c=u+o,d=-h._y*a,p=d+a,f=1/(l[2]*u+l[5]*d+l[8]);n[0]=f*(l[0]*u+l[3]*d+l[6]),n[1]=f*(l[1]*u+l[4]*d+l[7]),f=1/(l[2]*c+l[5]*d+l[8]),n[2]=f*(l[0]*c+l[3]*d+l[6]),n[3]=f*(l[1]*c+l[4]*d+l[7]),f=1/(l[2]*c+l[5]*p+l[8]),n[4]=f*(l[0]*c+l[3]*p+l[6]),n[5]=f*(l[1]*c+l[4]*p+l[7]),f=1/(l[2]*u+l[5]*p+l[8]),n[6]=f*(l[0]*u+l[3]*p+l[6]),n[7]=f*(l[1]*u+l[4]*p+l[7])}},r.prototype.toLocal=function(e,i,r,n,s){return void 0===s&&(s=t.TRANSFORM_STEP.ALL),t.container2dToLocal.call(this,e,i,r,n,s)},Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),r}(PIXI.Sprite);t.Sprite2d=e}(e||(e={})),function(t){var e=function(e){function r(i,r,n){var s=e.call(this,i,r,n)||this;return s.vertexData2d=null,s.proj=new t.Projection2d(s.transform),s.pluginName="batch2d",s}return i(r,e),Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),r}(PIXI.Text);t.Text2d=e,e.prototype.calculateVertices=t.Sprite2d.prototype.calculateVertices,e.prototype.calculateTrimmedVertices=t.Sprite2d.prototype.calculateTrimmedVertices,e.prototype._calculateBounds=t.Sprite2d.prototype._calculateBounds}(e||(e={})),function(t){function e(){this.proj||(this.proj=new t.Projection2d(this.transform),this.toLocal=t.Container2d.prototype.toLocal,Object.defineProperty(this,"worldTransform",{get:t.container2dWorldTransform,enumerable:!0,configurable:!0}))}PIXI.Container.prototype.convertTo2d=e,PIXI.Sprite.prototype.convertTo2d=function(){this.proj||(this.calculateVertices=t.Sprite2d.prototype.calculateVertices,this.calculateTrimmedVertices=t.Sprite2d.prototype.calculateTrimmedVertices,this._calculateBounds=t.Sprite2d.prototype._calculateBounds,this.pluginName="batch2d",e.call(this))},PIXI.Container.prototype.convertSubtreeTo2d=function(){this.convertTo2d();for(var t=0;t<this.children.length;t++)this.children[t].convertSubtreeTo2d()},PIXI.SimpleMesh&&(PIXI.SimpleMesh.prototype.convertTo2d=PIXI.SimpleRope.prototype.convertTo2d=function(){this.proj||(this.calculateVertices=t.Mesh2d.prototype.calculateVertices,this._renderDefault=t.Mesh2d.prototype._renderDefault,"batch2d"!==this.material.pluginName&&(this.material=new PIXI.MeshMaterial(this.material.texture,{program:PIXI.Program.from(t.Mesh2d.defaultVertexShader,t.Mesh2d.defaultFragmentShader),pluginName:"batch2d"})),e.call(this))}),PIXI.TilingSprite&&(PIXI.TilingSprite.prototype.convertTo2d=function(){this.proj||(this.tileProj=new t.Projection2d(this.tileTransform),this.tileProj.reverseLocalOrder=!0,this.uvRespectAnchor=!0,this.calculateTrimmedVertices=t.Sprite2d.prototype.calculateTrimmedVertices,this._calculateBounds=t.Sprite2d.prototype._calculateBounds,this._render=t.TilingSprite2d.prototype._render,this.pluginName="tilingSprite2d",e.call(this))})}(e||(e={})),function(t){var e=new PIXI.Transform,r=function(r){function n(e,i,n){var s=r.call(this,e,i,n)||this;return s.tileProj=new t.Projection2d(s.tileTransform),s.tileProj.reverseLocalOrder=!0,s.proj=new t.Projection2d(s.transform),s.pluginName="tilingSprite2d",s.uvRespectAnchor=!0,s}return i(n,r),Object.defineProperty(n.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),n.prototype.toLocal=function(e,i,r,n,s){return void 0===s&&(s=t.TRANSFORM_STEP.ALL),t.container2dToLocal.call(this,e,i,r,n,s)},n.prototype._render=function(t){var i=this._texture;i&&i.valid&&(this.tileTransform.updateTransform(e),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},n}(PIXI.TilingSprite);t.TilingSprite2d=r}(e||(e={})),function(t){var e="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec3 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position.xyw = projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0);\n\n    vTextureCoord = uTransform * vec3(aTextureCoord, 1.0);\n}\n",r=new t.Matrix2d,n=PIXI.WRAP_MODES,s=PIXI.utils,o=function(t){function o(i){var r=t.call(this,i)||this;r.quad=new PIXI.QuadUv;var n={globals:r.renderer.globalUniforms};return r.shader=PIXI.Shader.from(e,"\nvarying vec3 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord.xy / vTextureCoord.z - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n",n),r.simpleShader=PIXI.Shader.from(e,"\n\tvarying vec3 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord.xy / vTextureCoord.z);\n    gl_FragColor = sample * uColor;\n}\n",n),r}return i(o,t),o.prototype.render=function(t){var e=this.renderer,i=this.quad,o=i.vertices;o[0]=o[6]=t._width*-t.anchor.x,o[1]=o[3]=t._height*-t.anchor.y,o[2]=o[4]=t._width*(1-t.anchor.x),o[5]=o[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((o=i.uvs)[0]=o[6]=-t.anchor.x,o[1]=o[3]=-t.anchor.y,o[2]=o[4]=1-t.anchor.x,o[5]=o[7]=1-t.anchor.y),i.invalidate();var a=t._texture,h=a.baseTexture,l=t.tileProj.world,u=t.uvMatrix,c=h.isPowerOfTwo&&a.frame.width===h.width&&a.frame.height===h.height;c&&(h._glTextures[e.CONTEXT_UID]?c=h.wrapMode!==n.CLAMP:h.wrapMode===n.CLAMP&&(h.wrapMode=n.REPEAT));var d=c?this.simpleShader:this.shader;r.identity(),r.scale(a.width,a.height),r.prepend(l),r.scale(1/t._width,1/t._height),r.invert(),c?r.prepend(u.mapCoord):(d.uniforms.uMapCoord=u.mapCoord.toArray(!0),d.uniforms.uClampFrame=u.uClampFrame,d.uniforms.uClampOffset=u.uClampOffset),d.uniforms.uTransform=r.toArray(!0),d.uniforms.uColor=s.premultiplyTintToRgba(t.tint,t.worldAlpha,d.uniforms.uColor,h.premultiplyAlpha),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=a,e.shader.bind(d,!1),e.geometry.bind(i,void 0),e.state.setBlendMode(s.correctBlendMode(t.blendMode,h.premultiplyAlpha)),e.geometry.draw(PIXI.DRAW_MODES.TRIANGLES,6,0)},o}(PIXI.ObjectRenderer);t.TilingSprite2dRenderer=o,PIXI.Renderer.registerPlugin("tilingSprite2d",o)}(e||(e={})),function(t){PIXI.systems.MaskSystem.prototype.pushSpriteMask=function(e){var i=e.maskObject,r=e._target,n=this.alphaMaskPool[this.alphaMaskIndex];n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new t.SpriteMaskFilter2d(i)]),n[0].resolution=this.renderer.resolution,n[0].maskSprite=i;var s=r.filterArea;r.filterArea=i.getBounds(!0),this.renderer.filter.push(r,n),r.filterArea=s,this.alphaMaskIndex++}}(e||(e={})),function(t){var e=new t.Matrix2d,r=function(r){function n(e){var i=r.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec3 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n\tgl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n\tvTextureCoord = aTextureCoord;\n\tvMaskCoord = otherMatrix * vec3( aTextureCoord, 1.0);\n}\n","\nvarying vec3 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    vec2 uv = vMaskCoord.xy / vMaskCoord.z;\n\n    float clip = step(3.5,\n        step(maskClamp.x, uv.x) +\n        step(maskClamp.y, uv.y) +\n        step(uv.x, maskClamp.z) +\n        step(uv.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, uv);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n")||this;return i.maskMatrix=new t.Matrix2d,e.renderable=!1,i.maskSprite=e,i}return i(n,r),n.prototype.apply=function(t,e,i,r){var s=this.maskSprite,o=this.maskSprite.texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new PIXI.TextureMatrix(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=s.texture,this.uniforms.otherMatrix=n.calculateSpriteMatrix(e,this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,e,i,r))},n.calculateSpriteMatrix=function(t,i,r){var n=r.proj,s=t.filterFrame,o=n&&!n._affine?n.world.copyTo2dOr3d(e):e.copyFrom(r.transform.worldTransform),a=r.texture.orig;return i.set(t.width,0,0,t.height,s.x,s.y),o.invert(),i.setToMult(o,i),i.scaleAndTranslate(1/a.width,1/a.height,r.anchor.x,r.anchor.y),i},n}(PIXI.Filter);t.SpriteMaskFilter2d=r}(e||(e={})),function(t){t.container3dWorldTransform=function(){return this.proj.affine?this.transform.worldTransform:this.proj.world};var e=function(e){function r(){var i=e.call(this)||this;return i.proj=new t.Projection3d(i.transform),i}return i(r,e),r.prototype.isFrontFace=function(t){void 0===t&&(t=!1),t&&(this._recursivePostUpdateTransform(),this.displayObjectUpdateTransform());var e=this.proj.world.mat4,i=e[0]*e[15]-e[3]*e[12],r=e[1]*e[15]-e[3]*e[13],n=e[4]*e[15]-e[7]*e[12];return i*(e[5]*e[15]-e[7]*e[13])-n*r>0},r.prototype.getDepth=function(t){void 0===t&&(t=!1),t&&(this._recursivePostUpdateTransform(),this.displayObjectUpdateTransform());var e=this.proj.world.mat4;return e[14]/e[15]},r.prototype.toLocal=function(e,i,r,n,s){return void 0===s&&(s=t.TRANSFORM_STEP.ALL),i&&(e=i.toGlobal(e,r,n)),n||this._recursivePostUpdateTransform(),s===t.TRANSFORM_STEP.ALL?(n||this.displayObjectUpdateTransform(),this.proj.affine?this.transform.worldTransform.applyInverse(e,r):this.proj.world.applyInverse(e,r)):(this.parent?r=this.parent.worldTransform.applyInverse(e,r):r.copyFrom(e),s===t.TRANSFORM_STEP.NONE||(r=this.transform.localTransform.applyInverse(r,r),s===t.TRANSFORM_STEP.PROJ&&this.proj.cameraMode&&(r=this.proj.cameraMatrix.applyInverse(r,r))),r)},Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"position3d",{get:function(){return this.proj.position},set:function(t){this.proj.position.copyFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scale3d",{get:function(){return this.proj.scale},set:function(t){this.proj.scale.copyFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"euler",{get:function(){return this.proj.euler},set:function(t){this.proj.euler.copyFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pivot3d",{get:function(){return this.proj.pivot},set:function(t){this.proj.pivot.copyFrom(t)},enumerable:!0,configurable:!0}),r}(PIXI.Container);t.Container3d=e,t.container3dToLocal=e.prototype.toLocal,t.container3dGetDepth=e.prototype.getDepth,t.container3dIsFrontFace=e.prototype.isFrontFace}(e||(e={})),function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._far=0,e._near=0,e._focus=0,e._orthographic=!1,e.proj.cameraMode=!0,e.setPlanes(400,10,1e4,!1),e}return i(e,t),Object.defineProperty(e.prototype,"far",{get:function(){return this._far},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"near",{get:function(){return this._near},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focus",{get:function(){return this._focus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ortographic",{get:function(){return this._orthographic},enumerable:!0,configurable:!0}),e.prototype.setPlanes=function(t,e,i,r){void 0===e&&(e=10),void 0===i&&(i=1e4),void 0===r&&(r=!1),this._focus=t,this._near=e,this._far=i,this._orthographic=r;var n=this.proj,s=n.cameraMatrix.mat4;n._projID++,s[10]=1/(i-e),s[14]=(t-e)/(i-e),this._orthographic?s[11]=0:s[11]=1/t},e}(t.Container3d);t.Camera3d=e}(e||(e={})),function(t){var e=function(){function t(t,e,i){this._quatUpdateId=-1,this._quatDirtyId=0,this._sign=1,this._x=t||0,this._y=e||0,this._z=i||0,this.quaternion=new Float64Array(4),this.quaternion[3]=1,this.update()}return Object.defineProperty(t.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this._quatDirtyId++)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this._quatDirtyId++)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"z",{get:function(){return this._z},set:function(t){this._z!==t&&(this._z=t,this._quatDirtyId++)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pitch",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this._quatDirtyId++)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"yaw",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this._quatDirtyId++)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"roll",{get:function(){return this._z},set:function(t){this._z!==t&&(this._z=t,this._quatDirtyId++)},enumerable:!0,configurable:!0}),t.prototype.set=function(t,e,i){var r=t||0,n=e||0,s=i||0;this._x===r&&this._y===n&&this._z===s||(this._x=r,this._y=n,this._z=s,this._quatDirtyId++)},t.prototype.copyFrom=function(t){var e=t.x,i=t.y,r=t.z;this._x===e&&this._y===i&&this._z===r||(this._x=e,this._y=i,this._z=r,this._quatDirtyId++)},t.prototype.copyTo=function(t){return t.set(this._x,this._y,this._z),t},t.prototype.equals=function(t){return this._x===t.x&&this._y===t.y&&this._z===t.z},t.prototype.clone=function(){return new t(this._x,this._y,this._z)},t.prototype.update=function(){if(this._quatUpdateId===this._quatDirtyId)return!1;this._quatUpdateId=this._quatDirtyId;var t=Math.cos(this._x/2),e=Math.cos(this._y/2),i=Math.cos(this._z/2),r=this._sign,n=r*Math.sin(this._x/2),s=r*Math.sin(this._y/2),o=r*Math.sin(this._z/2),a=this.quaternion;return a[0]=n*e*i+t*s*o,a[1]=t*s*i-n*e*o,a[2]=t*e*o+n*s*i,a[3]=t*e*i-n*s*o,!0},t}();t.Euler=e}(e||(e={})),function(t){var e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i=function(){function i(t){this.floatArray=null,this._dirtyId=0,this._updateId=-1,this._mat4inv=null,this.cacheInverse=!1,this.mat4=new Float64Array(t||e)}return Object.defineProperty(i.prototype,"a",{get:function(){return this.mat4[0]/this.mat4[15]},set:function(t){this.mat4[0]=t*this.mat4[15]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"b",{get:function(){return this.mat4[1]/this.mat4[15]},set:function(t){this.mat4[1]=t*this.mat4[15]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"c",{get:function(){return this.mat4[4]/this.mat4[15]},set:function(t){this.mat4[4]=t*this.mat4[15]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"d",{get:function(){return this.mat4[5]/this.mat4[15]},set:function(t){this.mat4[5]=t*this.mat4[15]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"tx",{get:function(){return this.mat4[12]/this.mat4[15]},set:function(t){this.mat4[12]=t*this.mat4[15]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ty",{get:function(){return this.mat4[13]/this.mat4[15]},set:function(t){this.mat4[13]=t*this.mat4[15]},enumerable:!0,configurable:!0}),i.prototype.set=function(t,e,i,r,n,s){var o=this.mat4;return o[0]=t,o[1]=e,o[2]=0,o[3]=0,o[4]=i,o[5]=r,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=n,o[13]=s,o[14]=0,o[15]=1,this},i.prototype.toArray=function(t,e){this.floatArray||(this.floatArray=new Float32Array(9));var i=e||this.floatArray,r=this.mat4;return t?(i[0]=r[0],i[1]=r[1],i[2]=r[3],i[3]=r[4],i[4]=r[5],i[5]=r[7],i[6]=r[12],i[7]=r[13],i[8]=r[15]):(i[0]=r[0],i[1]=r[4],i[2]=r[12],i[3]=r[2],i[4]=r[6],i[5]=r[13],i[6]=r[3],i[7]=r[7],i[8]=r[15]),i},i.prototype.setToTranslation=function(t,e,i){var r=this.mat4;r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=t,r[13]=e,r[14]=i,r[15]=1},i.prototype.setToRotationTranslationScale=function(t,e,i,r,n,s,o){var a=this.mat4,h=t[0],l=t[1],u=t[2],c=t[3],d=h+h,p=l+l,f=u+u,m=h*d,_=h*p,g=h*f,v=l*p,y=l*f,b=u*f,x=c*d,T=c*p,S=c*f;return a[0]=(1-(v+b))*n,a[1]=(_+S)*n,a[2]=(g-T)*n,a[3]=0,a[4]=(_-S)*s,a[5]=(1-(m+b))*s,a[6]=(y+x)*s,a[7]=0,a[8]=(g+T)*o,a[9]=(y-x)*o,a[10]=(1-(m+v))*o,a[11]=0,a[12]=e,a[13]=i,a[14]=r,a[15]=1,a},i.prototype.apply=function(e,i){i=i||new t.Point3d;var r=this.mat4,n=e.x,s=e.y,o=e.z||0,a=1/(r[3]*n+r[7]*s+r[11]*o+r[15]);return i.x=a*(r[0]*n+r[4]*s+r[8]*o+r[12]),i.y=a*(r[1]*n+r[5]*s+r[9]*o+r[13]),i.z=a*(r[2]*n+r[6]*s+r[10]*o+r[14]),i},i.prototype.translate=function(t,e,i){var r=this.mat4;return r[12]=r[0]*t+r[4]*e+r[8]*i+r[12],r[13]=r[1]*t+r[5]*e+r[9]*i+r[13],r[14]=r[2]*t+r[6]*e+r[10]*i+r[14],r[15]=r[3]*t+r[7]*e+r[11]*i+r[15],this},i.prototype.scale=function(t,e,i){var r=this.mat4;return r[0]*=t,r[1]*=t,r[2]*=t,r[3]*=t,r[4]*=e,r[5]*=e,r[6]*=e,r[7]*=e,void 0!==i&&(r[8]*=i,r[9]*=i,r[10]*=i,r[11]*=i),this},i.prototype.scaleAndTranslate=function(t,e,i,r,n,s){var o=this.mat4;o[0]=t*o[0]+r*o[3],o[1]=e*o[1]+n*o[3],o[2]=i*o[2]+s*o[3],o[4]=t*o[4]+r*o[7],o[5]=e*o[5]+n*o[7],o[6]=i*o[6]+s*o[7],o[8]=t*o[8]+r*o[11],o[9]=e*o[9]+n*o[11],o[10]=i*o[10]+s*o[11],o[12]=t*o[12]+r*o[15],o[13]=e*o[13]+n*o[15],o[14]=i*o[14]+s*o[15]},i.prototype.applyInverse=function(e,r){r=r||new t.Point3d,this._mat4inv||(this._mat4inv=new Float64Array(16));var n=this._mat4inv,s=this.mat4,o=e.x,a=e.y,h=e.z||0;this.cacheInverse&&this._updateId===this._dirtyId||(this._updateId=this._dirtyId,i.glMatrixMat4Invert(n,s));var l=1/(n[3]*o+n[7]*a+n[11]*h+n[15]),u=l*(n[0]*o+n[4]*a+n[8]*h+n[12]),c=l*(n[1]*o+n[5]*a+n[9]*h+n[13]),d=l*(n[2]*o+n[6]*a+n[10]*h+n[14]);h+=1;var p=1/(n[3]*o+n[7]*a+n[11]*h+n[15]),f=p*(n[0]*o+n[4]*a+n[8]*h+n[12]),m=p*(n[1]*o+n[5]*a+n[9]*h+n[13]),_=p*(n[2]*o+n[6]*a+n[10]*h+n[14]);Math.abs(d-_)<1e-10&&r.set(NaN,NaN,0);var g=(0-d)/(_-d);return r.set((f-u)*g+u,(m-c)*g+c,0),r},i.prototype.invert=function(){return i.glMatrixMat4Invert(this.mat4,this.mat4),this},i.prototype.invertCopyTo=function(t){this._mat4inv||(this._mat4inv=new Float64Array(16));var e=this._mat4inv,r=this.mat4;this.cacheInverse&&this._updateId===this._dirtyId||(this._updateId=this._dirtyId,i.glMatrixMat4Invert(e,r)),t.mat4.set(e)},i.prototype.identity=function(){var t=this.mat4;return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},i.prototype.clone=function(){return new i(this.mat4)},i.prototype.copyTo3d=function(t){var e=this.mat4,i=t.mat4;return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i[6]=e[6],i[7]=e[7],i[8]=e[8],t},i.prototype.copyTo2d=function(t){var e=this.mat4,i=t.mat3;return i[0]=e[0],i[1]=e[1],i[2]=e[3],i[3]=e[4],i[4]=e[5],i[5]=e[7],i[6]=e[12],i[7]=e[13],i[8]=e[15],t},i.prototype.copyTo2dOr3d=function(e){return e instanceof t.Matrix2d?this.copyTo2d(e):this.copyTo3d(e)},i.prototype.copyTo=function(e,i,r){var n=this.mat4,s=1/n[15],o=n[12]*s,a=n[13]*s;if(e.a=(n[0]-n[3]*o)*s,e.b=(n[1]-n[3]*a)*s,e.c=(n[4]-n[7]*o)*s,e.d=(n[5]-n[7]*a)*s,e.tx=o,e.ty=a,i>=2){var h=e.a*e.d-e.b*e.c;r||(h=Math.abs(h)),i===t.AFFINE.POINT?(h=h>0?1:-1,e.a=h,e.b=0,e.c=0,e.d=h):i===t.AFFINE.AXIS_X?(h/=Math.sqrt(e.b*e.b+e.d*e.d),e.c=0,e.d=h):i===t.AFFINE.AXIS_Y&&(h/=Math.sqrt(e.a*e.a+e.c*e.c),e.a=h,e.c=0)}return e},i.prototype.copyFrom=function(t){var e=this.mat4;return e[0]=t.a,e[1]=t.b,e[2]=0,e[3]=0,e[4]=t.c,e[5]=t.d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t.tx,e[13]=t.ty,e[14]=0,e[15]=1,this._dirtyId++,this},i.prototype.setToMultLegacy=function(t,e){var i=this.mat4,r=e.mat4,n=t.a,s=t.b,o=t.c,a=t.d,h=t.tx,l=t.ty,u=r[0],c=r[1],d=r[2],p=r[3];return i[0]=u*n+c*o+p*h,i[1]=u*s+c*a+p*l,i[2]=d,i[3]=p,u=r[4],c=r[5],d=r[6],p=r[7],i[4]=u*n+c*o+p*h,i[5]=u*s+c*a+p*l,i[6]=d,i[7]=p,u=r[8],c=r[9],d=r[10],p=r[11],i[8]=u*n+c*o+p*h,i[9]=u*s+c*a+p*l,i[10]=d,i[11]=p,u=r[12],c=r[13],d=r[14],p=r[15],i[12]=u*n+c*o+p*h,i[13]=u*s+c*a+p*l,i[14]=d,i[15]=p,this._dirtyId++,this},i.prototype.setToMultLegacy2=function(t,e){var i=this.mat4,r=t.mat4,n=r[0],s=r[1],o=r[2],a=r[3],h=r[4],l=r[5],u=r[6],c=r[7],d=e.a,p=e.b,f=e.c,m=e.d,_=e.tx,g=e.ty;return i[0]=d*n+p*h,i[1]=d*s+p*l,i[2]=d*o+p*u,i[3]=d*a+p*c,i[4]=f*n+m*h,i[5]=f*s+m*l,i[6]=f*o+m*u,i[7]=f*a+m*c,i[8]=r[8],i[9]=r[9],i[10]=r[10],i[11]=r[11],i[12]=_*n+g*h+r[12],i[13]=_*s+g*l+r[13],i[14]=_*o+g*u+r[14],i[15]=_*a+g*c+r[15],this._dirtyId++,this},i.prototype.setToMult=function(t,e){return i.glMatrixMat4Multiply(this.mat4,t.mat4,e.mat4),this._dirtyId++,this},i.prototype.prepend=function(t){t.mat4?this.setToMult(t,this):this.setToMultLegacy(t,this)},i.glMatrixMat4Invert=function(t,e){var i=e[0],r=e[1],n=e[2],s=e[3],o=e[4],a=e[5],h=e[6],l=e[7],u=e[8],c=e[9],d=e[10],p=e[11],f=e[12],m=e[13],_=e[14],g=e[15],v=i*a-r*o,y=i*h-n*o,b=i*l-s*o,x=r*h-n*a,T=r*l-s*a,S=n*l-s*h,E=u*m-c*f,w=u*_-d*f,A=u*g-p*f,I=c*_-d*m,C=c*g-p*m,O=d*g-p*_,M=v*O-y*C+b*I+x*A-T*w+S*E;return M?(M=1/M,t[0]=(a*O-h*C+l*I)*M,t[1]=(n*C-r*O-s*I)*M,t[2]=(m*S-_*T+g*x)*M,t[3]=(d*T-c*S-p*x)*M,t[4]=(h*A-o*O-l*w)*M,t[5]=(i*O-n*A+s*w)*M,t[6]=(_*b-f*S-g*y)*M,t[7]=(u*S-d*b+p*y)*M,t[8]=(o*C-a*A+l*E)*M,t[9]=(r*A-i*C-s*E)*M,t[10]=(f*T-m*b+g*v)*M,t[11]=(c*b-u*T-p*v)*M,t[12]=(a*w-o*I-h*E)*M,t[13]=(i*I-r*w+n*E)*M,t[14]=(m*y-f*x-_*v)*M,t[15]=(u*x-c*y+d*v)*M,t):null},i.glMatrixMat4Multiply=function(t,e,i){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],h=e[5],l=e[6],u=e[7],c=e[8],d=e[9],p=e[10],f=e[11],m=e[12],_=e[13],g=e[14],v=e[15],y=i[0],b=i[1],x=i[2],T=i[3];return t[0]=y*r+b*a+x*c+T*m,t[1]=y*n+b*h+x*d+T*_,t[2]=y*s+b*l+x*p+T*g,t[3]=y*o+b*u+x*f+T*v,y=i[4],b=i[5],x=i[6],T=i[7],t[4]=y*r+b*a+x*c+T*m,t[5]=y*n+b*h+x*d+T*_,t[6]=y*s+b*l+x*p+T*g,t[7]=y*o+b*u+x*f+T*v,y=i[8],b=i[9],x=i[10],T=i[11],t[8]=y*r+b*a+x*c+T*m,t[9]=y*n+b*h+x*d+T*_,t[10]=y*s+b*l+x*p+T*g,t[11]=y*o+b*u+x*f+T*v,y=i[12],b=i[13],x=i[14],T=i[15],t[12]=y*r+b*a+x*c+T*m,t[13]=y*n+b*h+x*d+T*_,t[14]=y*s+b*l+x*p+T*g,t[15]=y*o+b*u+x*f+T*v,t},i.IDENTITY=new i,i.TEMP_MATRIX=new i,i}();t.Matrix3d=i}(e||(e={})),function(t){var e=function(){function e(t,e,i,r,n){this.cb=t,this.scope=e,this._quatUpdateId=-1,this._quatDirtyId=0,this._sign=1,this._x=i||0,this._y=r||0,this._z=n||0,this.quaternion=new Float64Array(4),this.quaternion[3]=1,this.update()}return Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this._quatDirtyId++,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this._quatDirtyId++,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"z",{get:function(){return this._z},set:function(t){this._z!==t&&(this._z=t,this._quatDirtyId++,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pitch",{get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this._quatDirtyId++,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yaw",{get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this._quatDirtyId++,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"roll",{get:function(){return this._z},set:function(t){this._z!==t&&(this._z=t,this._quatDirtyId++,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),e.prototype.set=function(t,e,i){var r=t||0,n=e||0,s=i||0;this._x===r&&this._y===n&&this._z===s||(this._x=r,this._y=n,this._z=s,this._quatDirtyId++,this.cb.call(this.scope))},e.prototype.copyFrom=function(t){var e=t.x,i=t.y,r=t.z;this._x===e&&this._y===i&&this._z===r||(this._x=e,this._y=i,this._z=r,this._quatDirtyId++,this.cb.call(this.scope))},e.prototype.copyTo=function(t){return t.set(this._x,this._y,this._z),t},e.prototype.equals=function(t){return this._x===t.x&&this._y===t.y&&this._z===t.z},e.prototype.clone=function(){return new t.Euler(this._x,this._y,this._z)},e.prototype.update=function(){if(this._quatUpdateId===this._quatDirtyId)return!1;this._quatUpdateId=this._quatDirtyId;var t=Math.cos(this._x/2),e=Math.cos(this._y/2),i=Math.cos(this._z/2),r=this._sign,n=r*Math.sin(this._x/2),s=r*Math.sin(this._y/2),o=r*Math.sin(this._z/2),a=this.quaternion;return a[0]=n*e*i+t*s*o,a[1]=t*s*i-n*e*o,a[2]=t*e*o+n*s*i,a[3]=t*e*i-n*s*o,!0},e}();t.ObservableEuler=e}(e||(e={})),function(t){var e=function(t){function e(e,i,r){var n=t.call(this,e,i)||this;return n.z=r,n}return i(e,t),e.prototype.set=function(t,e,i){return this.x=t||0,this.y=void 0===e?this.x:e||0,this.z=void 0===e?this.x:i||0,this},e.prototype.copyFrom=function(t){return this.set(t.x,t.y,t.z||0),this},e.prototype.copyTo=function(t){return t.set(this.x,this.y,this.z),t},e}(PIXI.Point);t.Point3d=e;var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._z=0,e}return i(e,t),Object.defineProperty(e.prototype,"z",{get:function(){return this._z},set:function(t){this._z!==t&&(this._z=t,this.cb.call(this.scope))},enumerable:!0,configurable:!0}),e.prototype.set=function(t,e,i){var r=t||0,n=void 0===e?r:e||0,s=void 0===e?r:i||0;return this._x===r&&this._y===n&&this._z===s||(this._x=r,this._y=n,this._z=s,this.cb.call(this.scope)),this},e.prototype.copyFrom=function(t){return this.set(t.x,t.y,t.z||0),this},e.prototype.copyTo=function(t){return t.set(this._x,this._y,this._z),t},e}(PIXI.ObservablePoint);t.ObservablePoint3d=r}(e||(e={})),function(t){var e=new t.Matrix3d,r=function(r){function n(e,i){var n=r.call(this,e,i)||this;return n.cameraMatrix=null,n._cameraMode=!1,n.position=new t.ObservablePoint3d(n.onChange,n,0,0),n.scale=new t.ObservablePoint3d(n.onChange,n,1,1),n.euler=new t.ObservableEuler(n.onChange,n,0,0,0),n.pivot=new t.ObservablePoint3d(n.onChange,n,0,0),n.local=new t.Matrix3d,n.world=new t.Matrix3d,n.local.cacheInverse=!0,n.world.cacheInverse=!0,n.position._z=0,n.scale._z=1,n.pivot._z=0,n}return i(n,r),Object.defineProperty(n.prototype,"cameraMode",{get:function(){return this._cameraMode},set:function(e){this._cameraMode!==e&&(this._cameraMode=e,this.euler._sign=this._cameraMode?-1:1,this.euler._quatDirtyId++,e&&(this.cameraMatrix=new t.Matrix3d))},enumerable:!0,configurable:!0}),n.prototype.onChange=function(){this._projID++},n.prototype.clear=function(){this.cameraMatrix&&this.cameraMatrix.identity(),this.position.set(0,0,0),this.scale.set(1,1,1),this.euler.set(0,0,0),this.pivot.set(0,0,0),r.prototype.clear.call(this)},n.prototype.updateLocalTransform=function(t){if(0!==this._projID){var i=this.local,r=this.euler,n=this.position,s=this.scale,o=this.pivot;if(r.update(),!this.cameraMode)return i.setToRotationTranslationScale(r.quaternion,n._x,n._y,n._z,s._x,s._y,s._z),i.translate(-o._x,-o._y,-o._z),void i.setToMultLegacy(t,i);i.setToMultLegacy(t,this.cameraMatrix),i.translate(o._x,o._y,o._z),i.scale(1/s._x,1/s._y,1/s._z),e.setToRotationTranslationScale(r.quaternion,0,0,0,1,1,1),i.setToMult(i,e),i.translate(-n._x,-n._y,-n._z),this.local._dirtyId++}else this.local.copyFrom(t)},n}(t.LinearProjection);t.Projection3d=r}(e||(e={})),function(t){var e=function(e){function r(i,r,n,s){var o=e.call(this,i,r,n,s)||this;return o.vertexData2d=null,o.proj=new t.Projection3d(o.transform),o}return i(r,e),r.prototype.calculateVertices=function(){if(this.proj._affine)return this.vertexData2d=null,void e.prototype.calculateVertices.call(this);var t=this.geometry,i=t.buffers[0].data,r=this;if(t.vertexDirtyId!==r.vertexDirty||r._transformID!==r.transform._worldID){r._transformID=r.transform._worldID,r.vertexData.length!==i.length&&(r.vertexData=new Float32Array(i.length)),this.vertexData2d&&this.vertexData2d.length===3*i.length/2||(this.vertexData2d=new Float32Array(3*i.length));for(var n=this.proj.world.mat4,s=this.vertexData2d,o=r.vertexData,a=0;a<o.length/2;a++){var h=i[2*a],l=i[2*a+1],u=n[0]*h+n[4]*l+n[12],c=n[1]*h+n[5]*l+n[13],d=n[3]*h+n[7]*l+n[15];s[3*a]=u,s[3*a+1]=c,s[3*a+2]=d,o[2*a]=u/d,o[2*a+1]=c/d}r.vertexDirty=t.vertexDirtyId}},Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),r.prototype.toLocal=function(e,i,r,n,s){return void 0===s&&(s=t.TRANSFORM_STEP.ALL),t.container3dToLocal.call(this,e,i,r,n,s)},r.prototype.isFrontFace=function(e){return t.container3dIsFrontFace.call(this,e)},r.prototype.getDepth=function(e){return t.container3dGetDepth.call(this,e)},Object.defineProperty(r.prototype,"position3d",{get:function(){return this.proj.position},set:function(t){this.proj.position.copyFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scale3d",{get:function(){return this.proj.scale},set:function(t){this.proj.scale.copyFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"euler",{get:function(){return this.proj.euler},set:function(t){this.proj.euler.copyFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pivot3d",{get:function(){return this.proj.pivot},set:function(t){this.proj.pivot.copyFrom(t)},enumerable:!0,configurable:!0}),r}(PIXI.Mesh);t.Mesh3d2d=e,e.prototype._renderDefault=t.Mesh2d.prototype._renderDefault;var r=function(e){function r(i,r,n,s,o){var a=e.call(this,new PIXI.MeshGeometry(r,n,s),new PIXI.MeshMaterial(i,{program:PIXI.Program.from(t.Mesh2d.defaultVertexShader,t.Mesh2d.defaultFragmentShader),pluginName:"batch2d"}),null,o)||this;return a.autoUpdate=!0,a.geometry.getBuffer("aVertexPosition").static=!1,a}return i(r,e),Object.defineProperty(r.prototype,"vertices",{get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(t){this.geometry.getBuffer("aVertexPosition").data=t},enumerable:!0,configurable:!0}),r.prototype._render=function(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),e.prototype._render.call(this,t)},r}(e);t.SimpleMesh3d2d=r}(e||(e={})),function(t){var e=function(e){function r(i){var r=e.call(this,i)||this;return r.vertexData2d=null,r.culledByFrustrum=!1,r.trimmedCulledByFrustrum=!1,r.proj=new t.Projection3d(r.transform),r.pluginName="batch2d",r}return i(r,e),r.prototype.calculateVertices=function(){var t=this._texture;if(this.proj._affine)return this.vertexData2d=null,void e.prototype.calculateVertices.call(this);this.vertexData2d||(this.vertexData2d=new Float32Array(12));var i=this.transform._worldID,r=t._updateID;if(this._transformID!==i||this._textureID!==r){this._textureID!==r&&(this.uvs=t._uvs.uvsFloat32),this._transformID=i,this._textureID=r;var n=this.proj.world.mat4,s=this.vertexData2d,o=this.vertexData,a=t.trim,h=t.orig,l=this._anchor,u=0,c=0,d=0,p=0;a?(u=(c=a.x-l._x*h.width)+a.width,d=(p=a.y-l._y*h.height)+a.height):(u=(c=-l._x*h.width)+h.width,d=(p=-l._y*h.height)+h.height);var f,m=!1;s[0]=n[0]*c+n[4]*p+n[12],s[1]=n[1]*c+n[5]*p+n[13],f=n[2]*c+n[6]*p+n[14],s[2]=n[3]*c+n[7]*p+n[15],m=m||f<0,s[3]=n[0]*u+n[4]*p+n[12],s[4]=n[1]*u+n[5]*p+n[13],f=n[2]*u+n[6]*p+n[14],s[5]=n[3]*u+n[7]*p+n[15],m=m||f<0,s[6]=n[0]*u+n[4]*d+n[12],s[7]=n[1]*u+n[5]*d+n[13],f=n[2]*u+n[6]*d+n[14],s[8]=n[3]*u+n[7]*d+n[15],m=m||f<0,s[9]=n[0]*c+n[4]*d+n[12],s[10]=n[1]*c+n[5]*d+n[13],f=n[2]*c+n[6]*d+n[14],s[11]=n[3]*c+n[7]*d+n[15],m=m||f<0,this.culledByFrustrum=m,o[0]=s[0]/s[2],o[1]=s[1]/s[2],o[2]=s[3]/s[5],o[3]=s[4]/s[5],o[4]=s[6]/s[8],o[5]=s[7]/s[8],o[6]=s[9]/s[11],o[7]=s[10]/s[11]}},r.prototype.calculateTrimmedVertices=function(){if(this.proj._affine)e.prototype.calculateTrimmedVertices.call(this);else{var t=this.transform._worldID,i=this._texture._updateID;if(this.vertexTrimmedData){if(this._transformTrimmedID===t&&this._textureTrimmedID===i)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=t,this._textureTrimmedID=i;var r,n=this._texture,s=this.vertexTrimmedData,o=n.orig,a=this._anchor,h=this.proj.world.mat4,l=-a._x*o.width,u=l+o.width,c=-a._y*o.height,d=c+o.height,p=!1,f=1/(h[3]*l+h[7]*c+h[15]);s[0]=f*(h[0]*l+h[4]*c+h[12]),s[1]=f*(h[1]*l+h[5]*c+h[13]),r=h[2]*l+h[6]*c+h[14],p=p||r<0,f=1/(h[3]*u+h[7]*c+h[15]),s[2]=f*(h[0]*u+h[4]*c+h[12]),s[3]=f*(h[1]*u+h[5]*c+h[13]),r=h[2]*u+h[6]*c+h[14],p=p||r<0,f=1/(h[3]*u+h[7]*d+h[15]),s[4]=f*(h[0]*u+h[4]*d+h[12]),s[5]=f*(h[1]*u+h[5]*d+h[13]),r=h[2]*u+h[6]*d+h[14],p=p||r<0,f=1/(h[3]*l+h[7]*d+h[15]),s[6]=f*(h[0]*l+h[4]*d+h[12]),s[7]=f*(h[1]*l+h[5]*d+h[13]),r=h[2]*l+h[6]*d+h[14],p=p||r<0,this.culledByFrustrum=p}},r.prototype._calculateBounds=function(){if(this.calculateVertices(),!this.culledByFrustrum){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?this._bounds.addQuad(this.vertexData):(this.calculateTrimmedVertices(),this.trimmedCulledByFrustrum||this._bounds.addQuad(this.vertexTrimmedData))}},r.prototype._render=function(t){this.calculateVertices(),this.culledByFrustrum||(t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},r.prototype.containsPoint=function(t){return!this.culledByFrustrum&&e.prototype.containsPoint.call(this,t)},Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),r.prototype.toLocal=function(e,i,r,n,s){return void 0===s&&(s=t.TRANSFORM_STEP.ALL),t.container3dToLocal.call(this,e,i,r,n,s)},r.prototype.isFrontFace=function(e){return t.container3dIsFrontFace.call(this,e)},r.prototype.getDepth=function(e){return t.container3dGetDepth.call(this,e)},Object.defineProperty(r.prototype,"position3d",{get:function(){return this.proj.position},set:function(t){this.proj.position.copyFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scale3d",{get:function(){return this.proj.scale},set:function(t){this.proj.scale.copyFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"euler",{get:function(){return this.proj.euler},set:function(t){this.proj.euler.copyFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pivot3d",{get:function(){return this.proj.pivot},set:function(t){this.proj.pivot.copyFrom(t)},enumerable:!0,configurable:!0}),r}(PIXI.Sprite);t.Sprite3d=e}(e||(e={})),function(t){var e=function(e){function r(i,r,n){var s=e.call(this,i,r,n)||this;return s.vertexData2d=null,s.proj=new t.Projection3d(s.transform),s.pluginName="batch2d",s}return i(r,e),Object.defineProperty(r.prototype,"worldTransform",{get:function(){return this.proj.affine?this.transform.worldTransform:this.proj.world},enumerable:!0,configurable:!0}),r.prototype.toLocal=function(e,i,r,n,s){return void 0===s&&(s=t.TRANSFORM_STEP.ALL),t.container3dToLocal.call(this,e,i,r,n,s)},r.prototype.isFrontFace=function(e){return t.container3dIsFrontFace.call(this,e)},r.prototype.getDepth=function(e){return t.container3dGetDepth.call(this,e)},Object.defineProperty(r.prototype,"position3d",{get:function(){return this.proj.position},set:function(t){this.proj.position.copyFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"scale3d",{get:function(){return this.proj.scale},set:function(t){this.proj.scale.copyFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"euler",{get:function(){return this.proj.euler},set:function(t){this.proj.euler.copyFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"pivot3d",{get:function(){return this.proj.pivot},set:function(t){this.proj.pivot.copyFrom(t)},enumerable:!0,configurable:!0}),r}(PIXI.Text);t.Text3d=e,e.prototype.calculateVertices=t.Sprite3d.prototype.calculateVertices,e.prototype.calculateTrimmedVertices=t.Sprite3d.prototype.calculateTrimmedVertices,e.prototype._calculateBounds=t.Sprite3d.prototype._calculateBounds,e.prototype.containsPoint=t.Sprite3d.prototype.containsPoint,e.prototype._render=t.Sprite3d.prototype._render}(e||(e={})),function(t){var e={worldTransform:{get:t.container3dWorldTransform,enumerable:!0,configurable:!0},position3d:{get:function(){return this.proj.position},set:function(t){this.proj.position.copy(t)}},scale3d:{get:function(){return this.proj.scale},set:function(t){this.proj.scale.copy(t)}},pivot3d:{get:function(){return this.proj.pivot},set:function(t){this.proj.pivot.copy(t)}},euler:{get:function(){return this.proj.euler},set:function(t){this.proj.euler.copy(t)}}};function i(){this.proj||(this.proj=new t.Projection3d(this.transform),this.toLocal=t.Container3d.prototype.toLocal,this.isFrontFace=t.Container3d.prototype.isFrontFace,this.getDepth=t.Container3d.prototype.getDepth,Object.defineProperties(this,e))}PIXI.Container.prototype.convertTo3d=i,PIXI.Sprite.prototype.convertTo3d=function(){this.proj||(this.calculateVertices=t.Sprite3d.prototype.calculateVertices,this.calculateTrimmedVertices=t.Sprite3d.prototype.calculateTrimmedVertices,this._calculateBounds=t.Sprite3d.prototype._calculateBounds,this.containsPoint=t.Sprite3d.prototype.containsPoint,this.pluginName="batch2d",i.call(this))},PIXI.Container.prototype.convertSubtreeTo3d=function(){this.convertTo3d();for(var t=0;t<this.children.length;t++)this.children[t].convertSubtreeTo3d()},PIXI.SimpleMesh&&(PIXI.SimpleMesh.prototype.convertTo3d=PIXI.SimpleRope.prototype.convertTo3d=function(){this.proj||(this.calculateVertices=t.Mesh3d2d.prototype.calculateVertices,this._renderDefault=t.Mesh3d2d.prototype._renderDefault,"batch2d"!==this.material.pluginName&&(this.material=new PIXI.MeshMaterial(this.material.texture,{program:PIXI.Program.from(t.Mesh2d.defaultVertexShader,t.Mesh2d.defaultFragmentShader),pluginName:"batch2d"})),i.call(this))})}(e||(e={}))},9:(t,e,i)=>{"use strict";i.d(e,{y:()=>z});var r=i(2857),n=i(6617),s=i(2975),o=i(107);class a{constructor(t){this.parent=t,this.paused=!1}destroy(){}down(t){return!1}move(t){return!1}up(t){return!1}wheel(t){return!1}update(t){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var h,l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},u=(function(t,e){(function(){var e,i;i=e={linear:function(t,e,i,r){return i*t/r+e},easeInQuad:function(t,e,i,r){return i*(t/=r)*t+e},easeOutQuad:function(t,e,i,r){return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,r){return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,r){return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,i,r){return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,r){return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,r){return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,i,r){return 0===t?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,i,r){return t===r?e+i:i*(1-Math.pow(2,-10*t/r))+e},easeInOutExpo:function(t,e,i,r){return(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,r){var n,s,o;return o=1.70158,0===t||(t/=r),(s=0)||(s=.3*r),(n=i)<Math.abs(i)?(n=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s)+e},easeOutElastic:function(t,e,i,r){var n,s,o;return o=1.70158,0===t||(t/=r),(s=0)||(s=.3*r),(n=i)<Math.abs(i)?(n=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/s)+i+e},easeInOutElastic:function(t,e,i,r){var n,s,o;return o=1.70158,0===t||(t/=r/2),(s=0)||(s=r*(.3*1.5)),(n=i)<Math.abs(i)?(n=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s)*-.5+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s)*.5+i+e},easeInBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),i*(t/=r)*t*((n+1)*t-n)+e},easeOutBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),i*((t=t/r-1)*t*((n+1)*t+n)+1)+e},easeInOutBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),(t/=r/2)<1?i/2*(t*t*((1+(n*=1.525))*t-n))+e:i/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},easeInBounce:function(t,i,r,n){return r-e.easeOutBounce(n-t,0,r,n)+i},easeOutBounce:function(t,e,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,i,r,n){return t<n/2?.5*e.easeInBounce(2*t,0,r,n)+i:.5*e.easeOutBounce(2*t-n,0,r,n)+.5*r+i}},t.exports=i}).call(l)}(h={path:void 0,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&h.path)}},h.exports),h.exports);function c(t,e){return t?"function"==typeof t?t:"string"==typeof t?u[t]:void 0:u[e]}const d={removeOnInterrupt:!1,ease:"linear",time:1e3};class p extends a{__init(){this.startWidth=null}__init2(){this.startHeight=null}__init3(){this.deltaWidth=null}__init4(){this.deltaHeight=null}__init5(){this.width=null}__init6(){this.height=null}__init7(){this.time=0}constructor(t,e={}){super(t),p.prototype.__init.call(this),p.prototype.__init2.call(this),p.prototype.__init3.call(this),p.prototype.__init4.call(this),p.prototype.__init5.call(this),p.prototype.__init6.call(this),p.prototype.__init7.call(this),this.options=Object.assign({},d,e),this.options.ease=c(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){void 0!==this.options.position?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,void 0!==this.options.scale?this.width=this.parent.screenWidth/this.options.scale:void 0!==this.options.scaleX||void 0!==this.options.scaleY?(void 0!==this.options.scaleX&&(this.width=this.parent.screenWidth/this.options.scaleX),void 0!==this.options.scaleY&&(this.height=this.parent.screenHeight/this.options.scaleY)):(void 0!==this.options.width&&(this.width=this.options.width),void 0!==this.options.height&&(this.height=this.options.height)),null!==this.width&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),null!==this.height&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),null!==this.width&&this.parent.fitWidth(this.width,this.keepCenter,null===this.height),null!==this.height&&this.parent.fitHeight(this.height,this.keepCenter,null===this.width),this.keepCenter||this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(t){if(!this.paused)if(this.time+=t,this.time>=this.options.time)this.complete();else{const t=new n.E9(this.parent.scale.x,this.parent.scale.y),e=this.options.ease(this.time,0,1,this.options.time);if(null!==this.width){const t=this.startWidth,i=this.deltaWidth;this.parent.fitWidth(t+i*e,this.keepCenter,null===this.height)}if(null!==this.height){const t=this.startHeight,i=this.deltaHeight;this.parent.fitHeight(t+i*e,this.keepCenter,null===this.width)}if(null===this.width?this.parent.scale.x=this.parent.scale.y:null===this.height&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const t=this.startX,i=this.startY,r=this.deltaX,s=this.deltaY,o=new n.E9(this.parent.x,this.parent.y);this.parent.moveCenter(t+r*e,i+s*e),this.parent.emit("moved",{viewport:this.parent,original:o,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:t,type:"animate"})}}}function f(t){let e,i=t[0],r=1;for(;r<t.length;){const n=t[r],s=t[r+1];if(r+=2,("optionalAccess"===n||"optionalCall"===n)&&null==i)return;"access"===n||"optionalAccess"===n?(e=i,i=s(i)):"call"!==n&&"optionalCall"!==n||(i=s(((...t)=>i.call(e,...t))),e=void 0)}return i}const m={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class _ extends a{constructor(t,e={}){super(t),this.options=Object.assign({},m,e),this.ease=c(this.options.ease,"easeInOutSine"),this.options.sides?"all"===this.options.sides?this.top=this.bottom=this.left=this.right=!0:"horizontal"===this.options.sides?(this.right=this.left=!0,this.top=this.bottom=!1):"vertical"===this.options.sides?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=-1!==this.options.sides.indexOf("top"),this.bottom=-1!==this.options.sides.indexOf("bottom"),this.left=-1!==this.options.sides.indexOf("left"),this.right=-1!==this.options.sides.indexOf("right")):this.left=this.top=this.right=this.bottom=!1;const i=this.options.underflow.toLowerCase();"center"===i?(this.underflowX=0,this.underflowY=0):(this.underflowX=-1!==i.indexOf("left")?-1:-1!==i.indexOf("right")?1:0,this.underflowY=-1!==i.indexOf("top")?-1:-1!==i.indexOf("bottom")?1:0),this.reset()}isActive(){return null!==this.toX||null!==this.toY}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(t){if(!this.paused){if(this.bounce(),this.toX){const e=this.toX;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),e.time>=this.options.time?(this.parent.x=e.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(e.time,e.start,e.delta,this.options.time)}if(this.toY){const e=this.toY;e.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),e.time>=this.options.time?(this.parent.y=e.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(e.time,e.start,e.delta,this.options.time)}}}calcUnderflowX(){let t;switch(this.underflowX){case-1:t=0;break;case 1:t=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:t=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return t}calcUnderflowY(){let t;switch(this.underflowY){case-1:t=0;break;case 1:t=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:t=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return t}oob(){const t=this.options.bounceBox;if(t){const e=void 0===t.x?0:t.x,i=void 0===t.y?0:t.y,r=void 0===t.width?this.parent.worldWidth:t.width,s=void 0===t.height?this.parent.worldHeight:t.height;return{left:this.parent.left<e,right:this.parent.right>r,top:this.parent.top<i,bottom:this.parent.bottom>s,topLeft:new n.E9(e*this.parent.scale.x,i*this.parent.scale.y),bottomRight:new n.E9(r*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new n.E9(0,0),bottomRight:new n.E9(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){if(this.paused)return;let t,e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.x&&e.percentChangeX===f([e,"access",t=>t.options,"optionalAccess",t=>t.friction])||e.y&&e.percentChangeY===f([e,"access",t=>t.options,"optionalAccess",t=>t.friction]))&&(t=this.oob(),(t.left&&this.left||t.right&&this.right)&&(e.percentChangeX=this.options.friction),(t.top&&this.top||t.bottom&&this.bottom)&&(e.percentChangeY=this.options.friction));const i=this.parent.plugins.get("drag",!0)||{},r=this.parent.plugins.get("pinch",!0)||{};if(e=e||{},!(f([i,"optionalAccess",t=>t.active])||f([r,"optionalAccess",t=>t.active])||this.toX&&this.toY||e.x&&e.y)){t=t||this.oob();const i=t.topLeft,r=t.bottomRight;if(!this.toX&&!e.x){let e=null;t.left&&this.left?e=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-i.x:t.right&&this.right&&(e=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-r.x),null!==e&&this.parent.x!==e&&(this.toX={time:0,start:this.parent.x,delta:e-this.parent.x,end:e},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!e.y){let e=null;t.top&&this.top?e=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-i.y:t.bottom&&this.bottom&&(e=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-r.y),null!==e&&this.parent.y!==e&&(this.toY={time:0,start:this.parent.y,delta:e-this.parent.y,end:e},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const g={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class v extends a{constructor(t,e={}){super(t),this.options=Object.assign({},g,e),this.options.direction&&(this.options.left="x"===this.options.direction||"all"===this.options.direction||null,this.options.right="x"===this.options.direction||"all"===this.options.direction||null,this.options.top="y"===this.options.direction||"all"===this.options.direction||null,this.options.bottom="y"===this.options.direction||"all"===this.options.direction||null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const t=this.options.underflow.toLowerCase();"none"===t?this.noUnderflow=!0:"center"===t?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=-1!==t.indexOf("left")?-1:-1!==t.indexOf("right")?1:0,this.underflowY=-1!==t.indexOf("top")?-1:-1!==t.indexOf("bottom")?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused)return;if(this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const t={x:this.parent.x,y:this.parent.y},e=this.parent.plugins.decelerate||{};if(null!==this.options.left||null!==this.options.right){let i=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:0!==this.parent.x&&(this.parent.x=0,i=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,i=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,i=!0)}else null!==this.options.left&&this.parent.left<(!0===this.options.left?0:this.options.left)&&(this.parent.x=-(!0===this.options.left?0:this.options.left)*this.parent.scale.x,e.x=0,i=!0),null!==this.options.right&&this.parent.right>(!0===this.options.right?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(!0===this.options.right?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,e.x=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-x"})}if(null!==this.options.top||null!==this.options.bottom){let i=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:0!==this.parent.y&&(this.parent.y=0,i=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,i=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,i=!0)}else null!==this.options.top&&this.parent.top<(!0===this.options.top?0:this.options.top)&&(this.parent.y=-(!0===this.options.top?0:this.options.top)*this.parent.scale.y,e.y=0,i=!0),null!==this.options.bottom&&this.parent.bottom>(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(!0===this.options.bottom?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,e.y=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const y={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class b extends a{constructor(t,e={}){super(t),this.options=Object.assign({},y,e),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused)if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight;if(null!==this.options.minWidth&&t<this.options.minWidth){const i=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.maxWidth&&t>this.options.maxWidth){const i=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.minHeight&&e<this.options.minHeight){const i=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/i,t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(null!==this.options.maxHeight&&e>this.options.maxHeight){const t=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/t,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const t={x:null,y:null},e={x:null,y:null};if("number"==typeof this.options.minScale)t.x=this.options.minScale,t.y=this.options.minScale;else if(null!==this.options.minScale){const e=this.options.minScale;t.x=void 0===e.x?null:e.x,t.y=void 0===e.y?null:e.y}if("number"==typeof this.options.maxScale)e.x=this.options.maxScale,e.y=this.options.maxScale;else if(null!==this.options.maxScale){const t=this.options.maxScale;e.x=void 0===t.x?null:t.x,e.y=void 0===t.y?null:t.y}let i=this.parent.scale.x,r=this.parent.scale.y;null!==t.x&&i<t.x&&(i=t.x),null!==e.x&&i>e.x&&(i=e.x),null!==t.y&&r<t.y&&(r=t.y),null!==e.y&&r>e.y&&(r=e.y),i===this.parent.scale.x&&r===this.parent.scale.y||(this.parent.scale.set(i,r),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}reset(){this.clamp()}}const x={friction:.98,bounce:.8,minSpeed:.01},T=16;class S extends a{constructor(t,e={}){super(t),this.options=Object.assign({},x,e),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",(t=>this.moved(t)))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!(!this.x&&!this.y)}move(){if(this.paused)return!1;const t=this.parent.input.count();return(1===t||t>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}moved(t){if(this.saved.length){const e=this.saved[this.saved.length-1];"clamp-x"===t.type?e.x===t.original.x&&(e.x=this.parent.x):"clamp-y"===t.type&&e.y===t.original.y&&(e.y=this.parent.y)}}up(){if(0===this.parent.input.count()&&this.saved.length){const t=performance.now();for(const e of this.saved)if(e.time>=t-100){const i=t-e.time;this.x=(this.parent.x-e.x)/i,this.y=(this.parent.y-e.y)/i,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(t){void 0!==(t=t||{}).x&&(this.x=t.x,this.percentChangeX=this.options.friction),void 0!==t.y&&(this.y=t.y,this.percentChangeY=this.options.friction)}update(t){if(this.paused)return;const e=this.x||this.y,i=this.timeSinceRelease,r=this.timeSinceRelease+t;if(this.x){const e=this.percentChangeX,n=Math.log(e);this.parent.x+=this.x*T/n*(Math.pow(e,r/T)-Math.pow(e,i/T)),this.x*=Math.pow(this.percentChangeX,t/T)}if(this.y){const e=this.percentChangeY,n=Math.log(e);this.parent.y+=this.y*T/n*(Math.pow(e,r/T)-Math.pow(e,i/T)),this.y*=Math.pow(this.percentChangeY,t/T)}this.timeSinceRelease+=t,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),e&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const E={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20};class w extends a{constructor(t,e={}){super(t),this.options=Object.assign({},E,e),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||"all"===this.options.direction||"x"===this.options.direction,this.yDirection=!this.options.direction||"all"===this.options.direction||"y"===this.options.direction,this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){window.addEventListener("keydown",(e=>{t.includes(e.code)&&(this.keyIsPressed=!0)})),window.addEventListener("keyup",(e=>{t.includes(e.code)&&(this.keyIsPressed=!1)}))}mouseButtons(t){this.mouse=t&&"all"!==t?[-1!==t.indexOf("left"),-1!==t.indexOf("middle"),-1!==t.indexOf("right")]:[!0,!0,!0]}parseUnderflow(){const t=this.options.underflow.toLowerCase();"center"===t?(this.underflowX=0,this.underflowY=0):(t.includes("left")?this.underflowX=-1:t.includes("right")?this.underflowX=1:this.underflowX=0,t.includes("top")?this.underflowY=-1:t.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(t){const e="mouse"===t.data.pointerType,i=this.parent.input.count();return!(!(1===i||i>1&&!this.parent.plugins.get("pinch",!0))||e&&!this.mouse[t.data.button])}checkKeyPress(t){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&"touch"===t.data.pointerType}down(t){return!(this.paused||!this.options.pressDrag||(this.checkButtons(t)&&this.checkKeyPress(t)?(this.last={x:t.data.global.x,y:t.data.global.y},this.current=t.data.pointerId,0):(this.last=null,1)))}get active(){return this.moved}move(t){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===t.data.pointerId){const e=t.data.global.x,i=t.data.global.y,r=this.parent.input.count();if(1===r||r>1&&!this.parent.plugins.get("pinch",!0)){const r=e-this.last.x,s=i-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(r)||this.yDirection&&this.parent.input.checkThreshold(s)){const r={x:e,y:i};return this.xDirection&&(this.parent.x+=(r.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(r.y-this.last.y)*this.options.factor),this.last=r,this.moved||this.parent.emit("drag-start",{event:t,screen:new n.E9(this.last.x,this.last.y),world:this.parent.toWorld(new n.E9(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(t){if(this.paused)return!1;const e=this.parent.input.touches;if(1===e.length){const t=e[0];return t.last&&(this.last={x:t.last.x,y:t.last.y},this.current=t.id),this.moved=!1,!0}if(this.last&&this.moved){const e=new n.E9(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:t,screen:e,world:this.parent.toWorld(e),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(t){if(this.paused)return!1;if(this.options.wheel){const e=this.parent.plugins.get("wheel",!0);if(!e||!e.options.wheelZoom&&!t.ctrlKey){const e=t.deltaMode?this.options.lineHeight:1;return this.xDirection&&(this.parent.x+=t.deltaX*e*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=t.deltaY*e*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||t.preventDefault(),this.parent.options.stopPropagation&&t.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const t=this.parent.plugins.get("decelerate",!0)||{};if("y"!==this.options.clampWheel)if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,t.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,t.x=0);if("x"!==this.options.clampWheel)if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,t.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,t.y=0)}}const A={speed:0,acceleration:null,radius:null};class I extends a{constructor(t,e,i={}){super(t),this.target=e,this.options=Object.assign({},A,i),this.velocity={x:0,y:0}}update(t){if(this.paused)return;const e=this.parent.center;let i=this.target.x,r=this.target.y;if(this.options.radius){if(!(Math.sqrt(Math.pow(this.target.y-e.y,2)+Math.pow(this.target.x-e.x,2))>this.options.radius))return;{const t=Math.atan2(this.target.y-e.y,this.target.x-e.x);i=this.target.x-Math.cos(t)*this.options.radius,r=this.target.y-Math.sin(t)*this.options.radius}}const n=i-e.x,s=r-e.y;if(n||s)if(this.options.speed)if(this.options.acceleration){const o=Math.atan2(r-e.y,i-e.x),a=Math.sqrt(Math.pow(n,2)+Math.pow(s,2));if(a){const h=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);this.velocity=a>h?{x:Math.min(this.velocity.x+this.options.acceleration*t,this.options.speed),y:Math.min(this.velocity.y+this.options.acceleration*t,this.options.speed)}:{x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const l=Math.cos(o)*this.velocity.x,u=Math.sin(o)*this.velocity.y,c=Math.abs(l)>Math.abs(n)?i:e.x+l,d=Math.abs(u)>Math.abs(s)?r:e.y+u;this.parent.moveCenter(c,d),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const t=Math.atan2(r-e.y,i-e.x),o=Math.cos(t)*this.options.speed,a=Math.sin(t)*this.options.speed,h=Math.abs(o)>Math.abs(n)?i:e.x+o,l=Math.abs(a)>Math.abs(s)?r:e.y+a;this.parent.moveCenter(h,l),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(i,r),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const C={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class O extends a{constructor(t,e={}){super(t),this.options=Object.assign({},C,e),this.reverse=this.options.reverse?1:-1,this.radiusSquared="number"==typeof this.options.radius?Math.pow(this.options.radius,2):null,this.resize()}resize(){const t=this.options.distance;null!==t?(this.left=t,this.top=t,this.right=this.parent.worldScreenWidth-t,this.bottom=this.parent.worldScreenHeight-t):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=null===this.options.right?null:this.parent.worldScreenWidth-this.options.right,this.bottom=null===this.options.bottom?null:this.parent.worldScreenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(t){if(this.paused)return!1;if("mouse"!==t.data.pointerType&&1!==t.data.identifier||!this.options.allowButtons&&0!==t.data.buttons)return!1;const e=t.data.global.x,i=t.data.global.y;if(this.radiusSquared){const t=this.parent.toScreen(this.parent.center);if(Math.pow(t.x-e,2)+Math.pow(t.y-i,2)>=this.radiusSquared){const r=Math.atan2(t.y-i,t.x-e);this.options.linear?(this.horizontal=Math.round(Math.cos(r))*this.options.speed*this.reverse*.06,this.vertical=Math.round(Math.sin(r))*this.options.speed*this.reverse*.06):(this.horizontal=Math.cos(r)*this.options.speed*this.reverse*.06,this.vertical=Math.sin(r)*this.options.speed*this.reverse*.06)}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else null!==this.left&&e<this.left?this.horizontal=Number(this.reverse)*this.options.speed*.06:null!==this.right&&e>this.right?this.horizontal=-1*this.reverse*this.options.speed*.06:(this.decelerateHorizontal(),this.horizontal=0),null!==this.top&&i<this.top?this.vertical=Number(this.reverse)*this.options.speed*.06:null!==this.bottom&&i>this.bottom?this.vertical=-1*this.reverse*this.options.speed*.06:(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const t=this.parent.plugins.get("decelerate",!0);this.horizontal&&t&&!this.options.noDecelerate&&t.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const t=this.parent.plugins.get("decelerate",!0);this.vertical&&t&&!this.options.noDecelerate&&t.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const t=this.parent.center;this.horizontal&&(t.x+=this.horizontal*this.options.speed),this.vertical&&(t.y+=this.vertical*this.options.speed),this.parent.moveCenter(t),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const M={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class P extends a{__init(){this.active=!1}__init2(){this.pinching=!1}__init3(){this.moved=!1}constructor(t,e={}){super(t),P.prototype.__init.call(this),P.prototype.__init2.call(this),P.prototype.__init3.call(this),this.options=Object.assign({},M,e)}down(){return this.parent.input.count()>=2&&(this.active=!0,!0)}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(t){if(this.paused||!this.active)return!1;const e=t.data.global.x,i=t.data.global.y,r=this.parent.input.touches;if(r.length>=2){const n=r[0],s=r[1],o=n.last&&s.last?Math.sqrt(Math.pow(s.last.x-n.last.x,2)+Math.pow(s.last.y-n.last.y,2)):null;if(n.id===t.data.pointerId?n.last={x:e,y:i,data:t.data}:s.id===t.data.pointerId&&(s.last={x:e,y:i,data:t.data}),o){let t;const e={x:n.last.x+(s.last.x-n.last.x)/2,y:n.last.y+(s.last.y-n.last.y)/2};this.options.center||(t=this.parent.toLocal(e));let i=Math.sqrt(Math.pow(s.last.x-n.last.x,2)+Math.pow(s.last.y-n.last.y,2));i=0===i?i=1e-10:i;const r=(1-o/i)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=r),this.isAxisY()&&(this.parent.scale.y+=r),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:e});const a=this.parent.plugins.get("clamp-zoom",!0);if(a&&a.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const i=this.parent.toGlobal(t);this.parent.x+=(e.x-i.x)*this.options.factor,this.parent.y+=(e.y-i.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(e.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(e.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=e,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return!!(this.pinching&&this.parent.input.touches.length<=1)&&(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0)}}const R={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class D extends a{constructor(t,e,i,r={}){super(t),this.options=Object.assign({},R,r),this.ease=c(r.ease,"easeInOutSine"),this.x=e,this.y=i,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const t=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-t.x,this.deltaY=this.y-t.y,this.startX=t.x,this.startY=t.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(0===this.parent.input.count()){const t=this.parent.plugins.get("decelerate",!0);t&&(t.x||t.y)&&(t.percentChangeX=t.percentChangeY=this.options.friction)}return!1}update(t){if(!(this.paused||this.options.interrupt&&0!==this.parent.input.count()))if(this.snapping){const e=this.snapping;let i,r,n;e.time+=t;const s=this.startX,o=this.startY,a=this.deltaX,h=this.deltaY;if(e.time>this.options.time)i=!0,r=s+a,n=o+h;else{const t=this.ease(e.time,0,1,this.options.time);r=s+a*t,n=o+h*t}this.options.topLeft?this.parent.moveCorner(r,n):this.parent.moveCenter(r,n),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),i&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const t=this.options.topLeft?this.parent.corner:this.parent.center;t.x===this.x&&t.y===this.y||this.snapStart()}}}const N={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class U extends a{constructor(t,e={}){super(t),this.options=Object.assign({},N,e),this.ease=c(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=t.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=t.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,0===this.options.time?(t.container.scale.x=this.xScale,t.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):e.forceStart&&this.createSnapping()}createSnapping(){const t=this.parent.worldScreenWidth,e=this.parent.worldScreenHeight,i=this.parent.screenWidth/this.xScale,r=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:t,startY:e,deltaX:i-t,deltaY:r-e},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(t){if(this.paused)return;if(this.options.interrupt&&0!==this.parent.input.count())return;let e;if(this.options.center||this.options.noMove||(e=this.parent.center),this.snapping){if(this.snapping){const i=this.snapping;if(i.time+=t,i.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const t=this.snapping,e=this.ease(t.time,t.startX,t.deltaX,this.options.time),i=this.ease(t.time,t.startY,t.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/e,this.parent.scale.y=this.parent.screenHeight/i}const r=this.parent.plugins.get("clamp-zoom",!0);r&&r.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(e))}}else this.parent.scale.x===this.xScale&&this.parent.scale.y===this.yScale||this.createSnapping()}resume(){this.snapping=null,super.resume()}}const F={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class L extends a{constructor(t,e={}){super(t),this.options=Object.assign({},F,e),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){window.addEventListener("keydown",(e=>{t.includes(e.code)&&(this.keyIsPressed=!0)})),window.addEventListener("keyup",(e=>{t.includes(e.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const t=this.smoothingCenter,e=this.smoothing;let i;this.options.center||(i=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x+=e.x),this.isAxisY()&&(this.parent.scale.y+=e.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const r=this.parent.plugins.get("clamp-zoom",!0);if(r&&r.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const e=this.parent.toGlobal(i);this.parent.x+=t.x-e.x,this.parent.y+=t.y-e.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(t){if(this.paused)return;const e=this.parent.input.getPointerPosition(t),i=-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/200,r=Math.pow(2,(1+this.options.percent)*i);let n;this.options.center||(n=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=r),this.isAxisY()&&(this.parent.scale.y*=r),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const s=this.parent.plugins.get("clamp-zoom",!0);if(s&&s.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const t=this.parent.toGlobal(n);this.parent.x+=e.x-t.x,this.parent.y+=e.y-t.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:t.deltaX,dy:t.deltaY,dz:t.deltaZ},event:t,viewport:this.parent})}wheel(t){if(this.paused)return!1;if(!this.checkKeyPress())return!1;if(t.ctrlKey&&this.options.trackpadPinch)this.pinch(t);else if(this.options.wheelZoom){const e=this.parent.input.getPointerPosition(t),i=(this.options.reverse?-1:1)*-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/500,r=Math.pow(2,(1+this.options.percent)*i);if(this.options.smooth){const t={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+t.x)*r-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+t.y)*r-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=e}else{let t;this.options.center||(t=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x*=r),this.isAxisY()&&(this.parent.scale.y*=r),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const i=this.parent.plugins.get("clamp-zoom",!0);if(i&&i.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const i=this.parent.toGlobal(t);this.parent.x+=e.x-i.x,this.parent.y+=e.y-i.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel",{wheel:{dx:t.deltaX,dy:t.deltaY,dz:t.deltaZ},event:t,viewport:this.parent})}return!this.parent.options.passiveWheel}}class k{constructor(t){this.viewport=t,this.touches=[],this.addListeners()}addListeners(){this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new n.Ae(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.on("pointerout",this.up,this),this.wheelFunction=t=>this.handleWheel(t),this.viewport.options.divWheel.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){this.viewport.options.divWheel.removeEventListener("wheel",this.wheelFunction)}down(t){if(!this.viewport.pause&&this.viewport.worldVisible){if("mouse"===t.data.pointerType?this.isMouseDown=!0:this.get(t.data.pointerId)||this.touches.push({id:t.data.pointerId,last:null}),1===this.count()){this.last=t.data.global.clone();const e=this.viewport.plugins.get("decelerate",!0),i=this.viewport.plugins.get("bounce",!0);e&&e.isActive()||i&&i.isActive()?this.clickedAvailable=!1:this.clickedAvailable=!0}else this.clickedAvailable=!1;this.viewport.plugins.down(t)&&this.viewport.options.stopPropagation&&t.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(t){return Math.abs(t)>=this.viewport.threshold}move(t){if(this.viewport.pause||!this.viewport.worldVisible)return;const e=this.viewport.plugins.move(t);if(this.clickedAvailable&&this.last){const e=t.data.global.x-this.last.x,i=t.data.global.y-this.last.y;(this.checkThreshold(e)||this.checkThreshold(i))&&(this.clickedAvailable=!1)}e&&this.viewport.options.stopPropagation&&t.stopPropagation()}up(t){if(this.viewport.pause||!this.viewport.worldVisible)return;"mouse"===t.data.pointerType&&(this.isMouseDown=!1),"mouse"!==t.data.pointerType&&this.remove(t.data.pointerId);const e=this.viewport.plugins.up(t);this.clickedAvailable&&0===this.count()&&this.last&&(this.viewport.emit("clicked",{event:t,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this}),this.clickedAvailable=!1),e&&this.viewport.options.stopPropagation&&t.stopPropagation()}getPointerPosition(t){const e=new n.E9;return this.viewport.options.interaction?this.viewport.options.interaction.mapPositionToPoint(e,t.clientX,t.clientY):(e.x=t.clientX,e.y=t.clientY),e}handleWheel(t){if(this.viewport.pause||!this.viewport.worldVisible)return;if(this.viewport.options.interaction&&this.viewport.options.interaction.interactionDOMElement!==t.target)return;const e=this.viewport.toLocal(this.getPointerPosition(t));this.viewport.left<=e.x&&e.x<=this.viewport.right&&this.viewport.top<=e.y&&e.y<=this.viewport.bottom&&this.viewport.plugins.wheel(t)&&!this.viewport.options.passiveWheel&&t.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(t){for(const e of this.touches)if(e.id===t)return e;return null}remove(t){for(let e=0;e<this.touches.length;e++)if(this.touches[e].id===t)return void this.touches.splice(e,1)}count(){return(this.isMouseDown?1:0)+this.touches.length}}function B(t){let e,i=t[0],r=1;for(;r<t.length;){const n=t[r],s=t[r+1];if(r+=2,("optionalAccess"===n||"optionalCall"===n)&&null==i)return;"access"===n||"optionalAccess"===n?(e=i,i=s(i)):"call"!==n&&"optionalCall"!==n||(i=s(((...t)=>i.call(e,...t))),e=void 0)}return i}const G=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class X{constructor(t){this.viewport=t,this.list=[],this.plugins={}}add(t,e,i=G.length){this.plugins[t]=e;const r=G.indexOf(t);-1!==r&&G.splice(r,1),G.splice(i,0,t),this.sort()}get(t,e){return e&&B([this,"access",t=>t.plugins,"access",e=>e[t],"optionalAccess",t=>t.paused])?null:this.plugins[t]}update(t){for(const e of this.list)e.update(t)}resize(){for(const t of this.list)t.resize()}reset(){for(const t of this.list)t.reset()}removeAll(){this.plugins={},this.sort()}remove(t){this.plugins[t]&&(delete this.plugins[t],this.viewport.emit(`${t}-remove`),this.sort())}pause(t){B([this,"access",t=>t.plugins,"access",e=>e[t],"optionalAccess",t=>t.pause,"call",t=>t()])}resume(t){B([this,"access",t=>t.plugins,"access",e=>e[t],"optionalAccess",t=>t.resume,"call",t=>t()])}sort(){this.list=[];for(const t of G)this.plugins[t]&&this.list.push(this.plugins[t])}down(t){let e=!1;for(const i of this.list)i.down(t)&&(e=!0);return e}move(t){let e=!1;for(const i of this.viewport.plugins.list)i.move(t)&&(e=!0);return e}up(t){let e=!1;for(const i of this.list)i.up(t)&&(e=!0);return e}wheel(t){let e=!1;for(const i of this.list)i.wheel(t)&&(e=!0);return e}}const j={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,interaction:null,disableOnContextMenu:!1,ticker:o.vB.shared};class V extends s.W2{__init(){this._disableOnContextMenu=t=>t.preventDefault()}constructor(t={}){super(),V.prototype.__init.call(this),this.options=Object.assign({},{divWheel:document.body},j,t),this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.divWheel=this.options.divWheel||document.body,this.options.disableOnContextMenu&&this.options.divWheel.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new k(this),this.plugins=new X(this)}destroy(t){!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&this.options.divWheel.removeEventListener("contextmenu",this._disableOnContextMenu),this.input.destroy(),super.destroy(t)}update(t){this.pause||(this.plugins.update(t),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new n.Ae(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(t=window.innerWidth,e=window.innerHeight,i,r){this.screenWidth=t,this.screenHeight=e,void 0!==i&&(this._worldWidth=i),void 0!==r&&(this._worldHeight=r),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(t){this._worldWidth=t,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(t){this._worldHeight=t,this.plugins.resize()}getVisibleBounds(){return new n.Ae(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(t,e){return 2===arguments.length?this.toLocal(new n.E9(t,e)):this.toLocal(t)}toScreen(t,e){return 2===arguments.length?this.toGlobal(new n.E9(t,e)):this.toGlobal(t)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new n.E9(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(t){this.moveCenter(t)}moveCenter(...t){let e,i;"number"==typeof t[0]?(e=t[0],i=t[1]):(e=t[0].x,i=t[0].y);const r=(this.worldScreenWidth/2-e)*this.scale.x,n=(this.worldScreenHeight/2-i)*this.scale.y;return this.x===r&&this.y===n||(this.position.set(r,n),this.plugins.reset(),this.dirty=!0),this}get corner(){return new n.E9(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(t){this.moveCorner(t)}moveCorner(...t){let e,i;return 1===t.length?(e=-t[0].x*this.scale.x,i=-t[0].y*this.scale.y):(e=-t[0]*this.scale.x,i=-t[1]*this.scale.y),e===this.x&&i===this.y||(this.position.set(e,i),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(t){return this.screenWidth/t}findFitHeight(t){return this.screenHeight/t}findFit(t,e){const i=this.screenWidth/t,r=this.screenHeight/e;return Math.min(i,r)}findCover(t,e){const i=this.screenWidth/t,r=this.screenHeight/e;return Math.max(i,r)}fitWidth(t=this.worldWidth,e,i=!0,r){let n;e&&(n=this.center),this.scale.x=this.screenWidth/t,i&&(this.scale.y=this.scale.x);const s=this.plugins.get("clamp-zoom",!0);return!r&&s&&s.clamp(),e&&n&&this.moveCenter(n),this}fitHeight(t=this.worldHeight,e,i=!0,r){let n;e&&(n=this.center),this.scale.y=this.screenHeight/t,i&&(this.scale.x=this.scale.y);const s=this.plugins.get("clamp-zoom",!0);return!r&&s&&s.clamp(),e&&n&&this.moveCenter(n),this}fitWorld(t){let e;t&&(e=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),t&&e&&this.moveCenter(e),this}fit(t,e=this.worldWidth,i=this.worldHeight){let r;t&&(r=this.center),this.scale.x=this.screenWidth/e,this.scale.y=this.screenHeight/i,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const n=this.plugins.get("clamp-zoom",!0);return n&&n.clamp(),t&&r&&this.moveCenter(r),this}setZoom(t,e){let i;e&&(i=this.center),this.scale.set(t);const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),e&&i&&this.moveCenter(i),this}zoomPercent(t,e){return this.setZoom(this.scale.x+this.scale.x*t,e)}zoom(t,e){return this.fitWidth(t+this.worldScreenWidth,e),this}get scaled(){return this.scale.x}set scaled(t){this.setZoom(t,!0)}snapZoom(t){return this.plugins.add("snap-zoom",new U(this,t)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new n.E9(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(t){this.x=-t*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(t){this.x=-t*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(t){this.y=-t*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(t){this.y=-t*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(t){this._dirty=t}get forceHitArea(){return this._forceHitArea}set forceHitArea(t){t?(this._forceHitArea=t,this.hitArea=t):(this._forceHitArea=null,this.hitArea=new n.Ae(0,0,this.worldWidth,this.worldHeight))}drag(t){return this.plugins.add("drag",new w(this,t)),this}clamp(t){return this.plugins.add("clamp",new v(this,t)),this}decelerate(t){return this.plugins.add("decelerate",new S(this,t)),this}bounce(t){return this.plugins.add("bounce",new _(this,t)),this}pinch(t){return this.plugins.add("pinch",new P(this,t)),this}snap(t,e,i){return this.plugins.add("snap",new D(this,t,e,i)),this}follow(t,e){return this.plugins.add("follow",new I(this,t,e)),this}wheel(t){return this.plugins.add("wheel",new L(this,t)),this}animate(t){return this.plugins.add("animate",new p(this,t)),this}clampZoom(t){return this.plugins.add("clamp-zoom",new b(this,t)),this}mouseEdges(t){return this.plugins.add("mouse-edges",new O(this,t)),this}get pause(){return!!this._pause}set pause(t){this._pause=t,this.lastViewport=null,this.moving=!1,this.zooming=!1,t&&this.input.pause()}ensureVisible(t,e,i,r,n){n&&(i>this.worldScreenWidth||r>this.worldScreenHeight)&&(this.fit(!0,i,r),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let s=!1;t<this.left?(this.left=t,s=!0):t+i>this.right&&(this.right=t+i,s=!0),e<this.top?(this.top=e,s=!0):e+r>this.bottom&&(this.bottom=e+r,s=!0),s&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}var Y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{},H=function(t){var e={exports:{}};return function(t,e){(function(){var e,i;i=e={linear:function(t,e,i,r){return i*t/r+e},easeInQuad:function(t,e,i,r){return i*(t/=r)*t+e},easeOutQuad:function(t,e,i,r){return-i*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,r){return i*(t/=r)*t*t+e},easeOutCubic:function(t,e,i,r){return i*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,r){return i*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,i,r){return-i*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,r){return i*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,i,r){return i*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,r){return i*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,i,r){return 0===t?e:i*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,i,r){return t===r?e+i:i*(1-Math.pow(2,-10*t/r))+e},easeInOutExpo:function(t,e,i,r){return(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,r){var n,s,o;return o=1.70158,0===t||(t/=r),(s=0)||(s=.3*r),(n=i)<Math.abs(i)?(n=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/n),-n*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s)+e},easeOutElastic:function(t,e,i,r){var n,s,o;return o=1.70158,0===t||(t/=r),(s=0)||(s=.3*r),(n=i)<Math.abs(i)?(n=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/n),n*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/s)+i+e},easeInOutElastic:function(t,e,i,r){var n,s,o;return o=1.70158,0===t||(t/=r/2),(s=0)||(s=r*(.3*1.5)),(n=i)<Math.abs(i)?(n=i,o=s/4):o=s/(2*Math.PI)*Math.asin(i/n),t<1?n*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s)*-.5+e:n*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/s)*.5+i+e},easeInBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),i*(t/=r)*t*((n+1)*t-n)+e},easeOutBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),i*((t=t/r-1)*t*((n+1)*t+n)+1)+e},easeInOutBack:function(t,e,i,r,n){return void 0===n&&(n=1.70158),(t/=r/2)<1?i/2*(t*t*((1+(n*=1.525))*t-n))+e:i/2*((t-=2)*t*((1+(n*=1.525))*t+n)+2)+e},easeInBounce:function(t,i,r,n){return r-e.easeOutBounce(n-t,0,r,n)+i},easeOutBounce:function(t,e,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,i,r,n){return t<n/2?.5*e.easeInBounce(2*t,0,r,n)+i:.5*e.easeOutBounce(2*t-n,0,r,n)+.5*r+i}},t.exports=i}).call(Y)}(e),e.exports}();const W={boxWidth:100,boxHeight:100,scrollbarSize:10,scrollbarBackground:14540253,scrollbarBackgroundAlpha:1,scrollbarForeground:8947848,scrollbarForegroundAlpha:1,dragScroll:!0,stopPropagation:!0,scrollbarOffsetHorizontal:0,scrollbarOffsetVertical:0,underflow:"top-left",fadeScrollbar:!1,fadeScrollbarTime:1e3,fadeScrollboxWait:3e3,fadeScrollboxEase:"easeInOutSine",passiveWheel:!1,clampWheel:!0};class z extends r.Container{constructor(t={}){if(super(),this.options=Object.assign({},W,t),t.overflow&&(this.options.overflowX=this.options.overflowY=t.overflow),this.ease="function"==typeof this.options.fadeScrollboxEase?this.options.fadeScrollboxEase:H[this.options.fadeScrollboxEase],this.content=this.addChild(new V({passiveWheel:!1,stopPropagation:this.options.stopPropagation,screenWidth:this.options.boxWidth,screenHeight:this.options.boxHeight,interaction:this.options.interaction,divWheel:this.options.divWheel})),this.content.decelerate().on("moved",(()=>this._drawScrollbars())),t.ticker)this.options.ticker=t.ticker;else{let e;const i=r;e=parseInt(/^(\d+)\./.exec(r.VERSION)[1])<5?i.ticker.shared:i.Ticker.shared,this.options.ticker=t.ticker||e}this.scrollbar=this.addChild(new r.Graphics),this.scrollbar.interactive=!0,this.scrollbar.on("pointerdown",this.scrollbarDown,this),this.interactive=!0,this.on("pointermove",this.scrollbarMove,this),this.on("pointerup",this.scrollbarUp,this),this.on("pointercancel",this.scrollbarUp,this),this.on("pointerupoutside",this.scrollbarUp,this),this._maskContent=this.addChild(new r.Graphics),this.update(),this.options.noTicker||(this.tickerFunction=()=>this.updateLoop(Math.min(this.options.ticker.elapsedMS,16.6667)),this.options.ticker.add(this.tickerFunction))}get scrollbarOffsetHorizontal(){return this.options.scrollbarOffsetHorizontal}set scrollbarOffsetHorizontal(t){this.options.scrollbarOffsetHorizontal=t}get scrollbarOffsetVertical(){return this.options.scrollbarOffsetVertical}set scrollbarOffsetVertical(t){this.options.scrollbarOffsetVertical=t}get disable(){return this._disabled}set disable(t){this._disabled!==t&&(this._disabled=t,this.update())}get stopPropagation(){return this.options.stopPropagation}set stopPropagation(t){this.options.stopPropagation=t}get dragScroll(){return this.options.dragScroll}set dragScroll(t){this.options.dragScroll=t,t?this.content.drag():void 0!==this.content.removePlugin?this.content.removePlugin("drag"):this.content.plugins.remove("drag"),this.update()}get boxWidth(){return this.options.boxWidth}set boxWidth(t){this.options.boxWidth=t,this.content.screenWidth=t,this.update()}get overflow(){return this.options.overflow}set overflow(t){this.options.overflow=t,this.options.overflowX=t,this.options.overflowY=t,this.update()}get overflowX(){return this.options.overflowX}set overflowX(t){this.options.overflowX=t,this.update()}get overflowY(){return this.options.overflowY}set overflowY(t){this.options.overflowY=t,this.update()}get boxHeight(){return this.options.boxHeight}set boxHeight(t){this.options.boxHeight=t,this.content.screenHeight=t,this.update()}get scrollbarSize(){return this.options.scrollbarSize}set scrollbarSize(t){this.options.scrollbarSize=t}get contentWidth(){return this.options.boxWidth-(this.isScrollbarVertical?this.options.scrollbarSize:0)}get contentHeight(){return this.options.boxHeight-(this.isScrollbarHorizontal?this.options.scrollbarSize:0)}get isScrollbarVertical(){return this._isScrollbarVertical}get isScrollbarHorizontal(){return this._isScrollbarHorizontal}get scrollTop(){return this.content.top}set scrollTop(t){this.content.top=t,this._drawScrollbars()}get scrollLeft(){return this.content.left}set scrollLeft(t){this.content.left=t,this._drawScrollbars()}get scrollWidth(){return this._scrollWidth||this.content.width}set scrollWidth(t){this._scrollWidth=t}get scrollHeight(){return this._scrollHeight||this.content.height}set scrollHeight(t){this._scrollHeight=t}_drawScrollbars(){this._isScrollbarHorizontal="scroll"===this.overflowX||-1===["hidden","none"].indexOf(this.overflowX)&&this.scrollWidth>this.options.boxWidth,this._isScrollbarVertical="scroll"===this.overflowY||-1===["hidden","none"].indexOf(this.overflowY)&&this.scrollHeight>this.options.boxHeight,this.scrollbar.clear(),this.scrollWidth,this._isScrollbarVertical&&this.options.scrollbarSize,this.scrollHeight,this.isScrollbarHorizontal&&this.options.scrollbarSize;const t=this.scrollWidth+(this.isScrollbarVertical?this.options.scrollbarSize:0),e=this.scrollHeight+(this.isScrollbarHorizontal?this.options.scrollbarSize:0);this.scrollbarTop=this.content.top/e*this.boxHeight,this.scrollbarTop=this.scrollbarTop<0?0:this.scrollbarTop,this.scrollbarHeight=this.boxHeight/e*this.boxHeight,this.scrollbarHeight=this.scrollbarTop+this.scrollbarHeight>this.boxHeight?this.boxHeight-this.scrollbarTop:this.scrollbarHeight,this.scrollbarLeft=this.content.left/t*this.boxWidth,this.scrollbarLeft=this.scrollbarLeft<0?0:this.scrollbarLeft,this.scrollbarWidth=this.boxWidth/t*this.boxWidth,this.scrollbarWidth=this.scrollbarWidth+this.scrollbarLeft>this.boxWidth?this.boxWidth-this.scrollbarLeft:this.scrollbarWidth,this.isScrollbarVertical&&this.scrollbar.beginFill(this.options.scrollbarBackground,this.options.scrollbarBackgroundAlpha).drawRect(this.boxWidth-this.scrollbarSize+this.options.scrollbarOffsetVertical,0,this.scrollbarSize,this.boxHeight).endFill(),this.isScrollbarHorizontal&&this.scrollbar.beginFill(this.options.scrollbarBackground,this.options.scrollbarBackgroundAlpha).drawRect(0,this.boxHeight-this.scrollbarSize+this.options.scrollbarOffsetHorizontal,this.boxWidth,this.scrollbarSize).endFill(),this.isScrollbarVertical&&this.scrollbar.beginFill(this.options.scrollbarForeground,this.options.scrollbarForegroundAlpha).drawRect(this.boxWidth-this.scrollbarSize+this.options.scrollbarOffsetVertical,this.scrollbarTop,this.scrollbarSize,this.scrollbarHeight).endFill(),this.isScrollbarHorizontal&&this.scrollbar.beginFill(this.options.scrollbarForeground,this.options.scrollbarForegroundAlpha).drawRect(this.scrollbarLeft,this.boxHeight-this.scrollbarSize+this.options.scrollbarOffsetHorizontal,this.scrollbarWidth,this.scrollbarSize).endFill(),this.activateFade()}_drawMask(){this._maskContent.beginFill(0).drawRect(0,0,this.boxWidth,this.boxHeight).endFill(),this.content.mask=this._maskContent}update(){if(this.content.mask=null,this._maskContent.clear(),!this._disabled){this._drawScrollbars(),this._drawMask();const t=this.isScrollbarHorizontal&&this.isScrollbarVertical?"all":this.isScrollbarHorizontal?"x":"y";null!==t&&(this.options.dragScroll&&this.content.drag({clampWheel:this.options.clampWheel,direction:t}),this.content.clamp({direction:t,underflow:this.options.underflow}))}}updateLoop(t){if(this.fade){if(this.fade.wait>0){if(this.fade.wait-=t,!(this.fade.wait<=0))return;t+=this.fade.wait}this.fade.duration+=t,this.fade.duration>=this.options.fadeScrollbarTime?(this.fade=null,this.scrollbar.alpha=0):this.scrollbar.alpha=this.ease(this.fade.duration,1,-1,this.options.fadeScrollbarTime),this.content.dirty=!0}}get dirty(){return this.content.dirty}set dirty(t){this.content.dirty=t}activateFade(){!this.fade&&this.options.fade&&(this.scrollbar.alpha=1,this.fade={wait:this.options.fadeScrollboxWait,duration:0})}scrollbarDown(t){const e=this.toLocal(t.data.global);return this.isScrollbarHorizontal&&e.y>this.boxHeight-this.scrollbarSize?(e.x>=this.scrollbarLeft&&e.x<=this.scrollbarLeft+this.scrollbarWidth?this.pointerDown={type:"horizontal",last:e}:e.x>this.scrollbarLeft?(this.content.left+=this.content.worldScreenWidth,this.update()):(this.content.left-=this.content.worldScreenWidth,this.update()),void(this.options.stopPropagation&&t.stopPropagation())):this.isScrollbarVertical&&e.x>this.boxWidth-this.scrollbarSize?(e.y>=this.scrollbarTop&&e.y<=this.scrollbarTop+this.scrollbarWidth?this.pointerDown={type:"vertical",last:e}:e.y>this.scrollbarTop?(this.content.top+=this.content.worldScreenHeight,this.update()):(this.content.top-=this.content.worldScreenHeight,this.update()),void(this.options.stopPropagation&&t.stopPropagation())):void 0}scrollbarMove(t){if(this.pointerDown){if("horizontal"===this.pointerDown.type){const e=this.toLocal(t.data.global),i=this.scrollWidth+(this.isScrollbarVertical?this.options.scrollbarSize:0);this.scrollbarLeft+=e.x-this.pointerDown.last.x,this.content.left=this.scrollbarLeft/this.boxWidth*i,this.pointerDown.last=e,this.update()}else if("vertical"===this.pointerDown.type){const e=this.toLocal(t.data.global),i=this.scrollHeight+(this.isScrollbarHorizontal?this.options.scrollbarSize:0);this.scrollbarTop+=e.y-this.pointerDown.last.y,this.content.top=this.scrollbarTop/this.boxHeight*i,this.pointerDown.last=e,this.update()}this.options.stopPropagation&&t.stopPropagation()}}scrollbarUp(){this.pointerDown=null}resize(t){this.options.boxWidth=void 0!==t.boxWidth?t.boxWidth:this.options.boxWidth,this.options.boxHeight=void 0!==t.boxHeight?t.boxHeight:this.options.boxHeight,t.scrollWidth&&(this.scrollWidth=t.scrollWidth),t.scrollHeight&&(this.scrollHeight=t.scrollHeight),this.content.resize(this.options.boxWidth,this.options.boxHeight,this.scrollWidth,this.scrollHeight),this.update()}ensureVisible(t,e,i,r){this.content.ensureVisible(t,e,i,r),this._drawScrollbars()}}},329:(t,e,i)=>{"use strict";i.r(e),i.d(e,{AttachmentType:()=>o,BinaryInput:()=>x,Color:()=>B,DebugUtils:()=>H,IntSet:()=>L,Interpolation:()=>X,MathUtils:()=>G,MixBlend:()=>_,MixDirection:()=>g,Pool:()=>W,PositionMode:()=>v,Pow:()=>j,PowOut:()=>V,RotateMode:()=>y,SkeletonBounds:()=>un,Spine:()=>wn,SpineBase:()=>tt,SpineMesh:()=>Q,SpineParser:()=>En,SpineSprite:()=>J,StringSet:()=>k,TextureAtlas:()=>P,TextureAtlasPage:()=>D,TextureAtlasRegion:()=>N,TextureFilter:()=>T,TextureRegion:()=>O,TextureWrap:()=>S,TimeKeeper:()=>q,TransformMode:()=>b,Utils:()=>Y,Vector2:()=>z,WindowedMean:()=>K,filterFromString:()=>A,settings:()=>Z,wrapFromString:()=>I});var r={};i.r(r),i.d(r,{Animation:()=>_t,AnimationState:()=>Ut,AnimationStateAdapter:()=>Bt,AnimationStateData:()=>Gt,AtlasAttachmentLoader:()=>Xt,Attachment:()=>ot,AttachmentTimeline:()=>wt,Bone:()=>jt,BoneData:()=>Vt,BoundingBoxAttachment:()=>ht,ClippingAttachment:()=>lt,ColorTimeline:()=>St,ConstraintData:()=>Yt,CurveTimeline:()=>vt,DeformTimeline:()=>It,DrawOrderTimeline:()=>Ot,Event:()=>Ht,EventData:()=>Wt,EventQueue:()=>Lt,EventTimeline:()=>Ct,EventType:()=>gt,IkConstraint:()=>zt,IkConstraintData:()=>qt,IkConstraintTimeline:()=>Mt,JitterEffect:()=>ft,MeshAttachment:()=>ut,PathAttachment:()=>ct,PathConstraint:()=>Zt,PathConstraintData:()=>Kt,PathConstraintMixTimeline:()=>Nt,PathConstraintPositionTimeline:()=>Rt,PathConstraintSpacingTimeline:()=>Dt,PointAttachment:()=>dt,RegionAttachment:()=>pt,RotateTimeline:()=>yt,ScaleTimeline:()=>xt,ShearTimeline:()=>Tt,Skeleton:()=>Qt,SkeletonBinary:()=>se,SkeletonBounds:()=>he,SkeletonData:()=>te,SkeletonJson:()=>le,Skin:()=>ne,SkinEntry:()=>re,Slot:()=>$t,SlotData:()=>ee,SpacingMode:()=>kt,Spine:()=>ce,SwirlEffect:()=>mt,TimelineType:()=>st,TrackEntry:()=>Ft,TransformConstraint:()=>Jt,TransformConstraintData:()=>ie,TransformConstraintTimeline:()=>Pt,TranslateTimeline:()=>bt,TwoColorTimeline:()=>Et,VertexAttachment:()=>at});var n={};i.r(n),i.d(n,{Animation:()=>we,AnimationState:()=>Ye,AnimationStateAdapter2:()=>qe,AnimationStateData:()=>Ke,AtlasAttachmentLoader:()=>Ze,Attachment:()=>me,AttachmentTimeline:()=>Ne,Bone:()=>$e,BoneData:()=>Je,BoundingBoxAttachment:()=>ge,ClippingAttachment:()=>ve,ColorTimeline:()=>Re,CurveTimeline:()=>Ie,DeformTimeline:()=>Fe,DrawOrderTimeline:()=>ke,Event:()=>Qe,EventData:()=>ti,EventQueue:()=>We,EventTimeline:()=>Le,EventType:()=>Ae,IkConstraint:()=>ei,IkConstraintData:()=>ii,IkConstraintTimeline:()=>Be,JitterEffect:()=>Se,MeshAttachment:()=>ye,PathAttachment:()=>be,PathConstraint:()=>ni,PathConstraintData:()=>ri,PathConstraintMixTimeline:()=>Ve,PathConstraintPositionTimeline:()=>Xe,PathConstraintSpacingTimeline:()=>je,PointAttachment:()=>xe,RegionAttachment:()=>Te,RotateTimeline:()=>Ce,ScaleTimeline:()=>Me,ShearTimeline:()=>Pe,Skeleton:()=>ai,SkeletonBounds:()=>hi,SkeletonData:()=>li,SkeletonJson:()=>pi,Skin:()=>di,Slot:()=>si,SlotData:()=>ui,SpacingMode:()=>ze,Spine:()=>mi,SwirlEffect:()=>Ee,TimelineType:()=>fe,TrackEntry:()=>He,TransformConstraint:()=>oi,TransformConstraintData:()=>ci,TransformConstraintTimeline:()=>Ge,TranslateTimeline:()=>Oe,TwoColorTimeline:()=>De,VertexAttachment:()=>_e});var s={};i.r(s),i.d(s,{AlphaTimeline:()=>Wi,Animation:()=>Oi,AnimationState:()=>nr,AnimationStateAdapter:()=>hr,AnimationStateData:()=>gr,AtlasAttachmentLoader:()=>vr,Attachment:()=>yi,AttachmentTimeline:()=>Ki,Bone:()=>yr,BoneData:()=>br,BoundingBoxAttachment:()=>xi,ClippingAttachment:()=>Ti,ConstraintData:()=>xr,CurveTimeline:()=>Pi,CurveTimeline1:()=>Ri,CurveTimeline2:()=>Di,DeformTimeline:()=>Zi,DrawOrderTimeline:()=>Ji,Event:()=>Tr,EventData:()=>Sr,EventQueue:()=>or,EventTimeline:()=>$i,EventType:()=>vi,IkConstraint:()=>Er,IkConstraintData:()=>wr,IkConstraintTimeline:()=>Qi,JitterEffect:()=>Ii,MeshAttachment:()=>Si,PathAttachment:()=>Ei,PathConstraint:()=>Ir,PathConstraintData:()=>Ar,PathConstraintMixTimeline:()=>rr,PathConstraintPositionTimeline:()=>er,PathConstraintSpacingTimeline:()=>ir,PointAttachment:()=>wi,RGB2Timeline:()=>qi,RGBA2Timeline:()=>zi,RGBATimeline:()=>Yi,RGBTimeline:()=>Hi,RegionAttachment:()=>Ai,RotateTimeline:()=>Ni,ScaleTimeline:()=>ki,ScaleXTimeline:()=>Bi,ScaleYTimeline:()=>Gi,ShearTimeline:()=>Xi,ShearXTimeline:()=>ji,ShearYTimeline:()=>Vi,Skeleton:()=>Mr,SkeletonBinary:()=>Fr,SkeletonBounds:()=>un,SkeletonData:()=>Pr,SkeletonJson:()=>cn,Skin:()=>Ur,SkinEntry:()=>Nr,Slot:()=>Cr,SlotData:()=>Rr,SpacingMode:()=>ar,Spine:()=>vn,SwirlEffect:()=>Ci,Timeline:()=>Mi,TrackEntry:()=>sr,TransformConstraint:()=>Or,TransformConstraintData:()=>Dr,TransformConstraintTimeline:()=>tr,TranslateTimeline:()=>Ui,TranslateXTimeline:()=>Fi,TranslateYTimeline:()=>Li,VertexAttachment:()=>bi});var o,a=i(3600),h=i(331),l=i(6921),u=i(6617),c=i(2975),d=i(7965),p=i(9660),f=i(2028),m=i(8281);!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point",t[t.Clipping=6]="Clipping"}(o||(o={}));var _,g,v,y,b,x=function(){function t(t,e,i,r){void 0===e&&(e=new Array),void 0===i&&(i=0),void 0===r&&(r=new DataView(t.buffer)),this.strings=e,this.index=i,this.buffer=r}return t.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},t.prototype.readUnsignedByte=function(){return this.buffer.getUint8(this.index++)},t.prototype.readShort=function(){var t=this.buffer.getInt16(this.index);return this.index+=2,t},t.prototype.readInt32=function(){var t=this.buffer.getInt32(this.index);return this.index+=4,t},t.prototype.readInt=function(t){var e=this.readByte(),i=127&e;return 0!=(128&e)&&(i|=(127&(e=this.readByte()))<<7,0!=(128&e)&&(i|=(127&(e=this.readByte()))<<14,0!=(128&e)&&(i|=(127&(e=this.readByte()))<<21,0!=(128&e)&&(i|=(127&(e=this.readByte()))<<28)))),t?i:i>>>1^-(1&i)},t.prototype.readStringRef=function(){var t=this.readInt(!0);return 0==t?null:this.strings[t-1]},t.prototype.readString=function(){var t=this.readInt(!0);switch(t){case 0:return null;case 1:return""}t--;for(var e="",i=0;i<t;){var r=this.readByte();switch(r>>4){case 12:case 13:e+=String.fromCharCode((31&r)<<6|63&this.readByte()),i+=2;break;case 14:e+=String.fromCharCode((15&r)<<12|(63&this.readByte())<<6|63&this.readByte()),i+=3;break;default:e+=String.fromCharCode(r),i++}}return e},t.prototype.readFloat=function(){var t=this.buffer.getFloat32(this.index);return this.index+=4,t},t.prototype.readBoolean=function(){return 0!=this.readByte()},t}();!function(t){t[t.setup=0]="setup",t[t.first=1]="first",t[t.replace=2]="replace",t[t.add=3]="add"}(_||(_={})),function(t){t[t.mixIn=0]="mixIn",t[t.mixOut=1]="mixOut"}(g||(g={})),function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(v||(v={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(y||(y={})),function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(b||(b={}));var T,S,E=function(t,e){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function w(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function A(t){switch(t.toLowerCase()){case"nearest":return T.Nearest;case"linear":return T.Linear;case"mipmap":return T.MipMap;case"mipmapnearestnearest":return T.MipMapNearestNearest;case"mipmaplinearnearest":return T.MipMapLinearNearest;case"mipmapnearestlinear":return T.MipMapNearestLinear;case"mipmaplinearlinear":return T.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}}function I(t){switch(t.toLowerCase()){case"mirroredtepeat":return S.MirroredRepeat;case"clamptoedge":return S.ClampToEdge;case"repeat":return S.Repeat;default:throw new Error("Unknown texture wrap "+t)}}!function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(T||(T={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(S||(S={}));var C,O=function(){function t(){this.size=null,this.names=null,this.values=null}return Object.defineProperty(t.prototype,"width",{get:function(){var t=this.texture;return t.trim?t.trim.width:t.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.texture;return t.trim?t.trim.height:t.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.spineOffsetY},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){return this.texture.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){return this.texture.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"degrees",{get:function(){return(360-45*this.texture.rotate)%360},enumerable:!1,configurable:!0}),t}(),M=function(){this.x=0,this.y=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.rotate=0,this.index=0},P=function(){function t(t,e,i){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,i)}return t.prototype.addTexture=function(t,e){for(var i=this.pages,r=null,n=0;n<i.length;n++)if(i[n].baseTexture===e.baseTexture){r=i[n];break}if(null===r){(r=new D).name="texturePage";var s=e.baseTexture;r.width=s.realWidth,r.height=s.realHeight,r.baseTexture=s,r.minFilter=r.magFilter=T.Nearest,r.uWrap=S.ClampToEdge,r.vWrap=S.ClampToEdge,i.push(r)}var o=new N;return o.name=t,o.page=r,o.texture=e,o.index=-1,this.regions.push(o),o},t.prototype.addTextureHash=function(t,e){for(var i in t)t.hasOwnProperty(i)&&this.addTexture(e&&-1!==i.indexOf(".")?i.substr(0,i.lastIndexOf(".")):i,t[i])},t.prototype.addSpineAtlas=function(t,e,i){return this.load(t,e,i)},t.prototype.load=function(t,e,i){var r=this;if(null==e)throw new Error("textureLoader cannot be null.");var n=new R(t),s=new Array(4),o=null,a={},c=null;a.size=function(){o.width=parseInt(s[1]),o.height=parseInt(s[2])},a.format=function(){},a.filter=function(){o.minFilter=A(s[1]),o.magFilter=A(s[2])},a.repeat=function(){-1!=s[1].indexOf("x")&&(o.uWrap=S.Repeat),-1!=s[1].indexOf("y")&&(o.vWrap=S.Repeat)},a.pma=function(){o.pma="true"==s[1]};for(var d={xy:function(){c.x=parseInt(s[1]),c.y=parseInt(s[2])},size:function(){c.width=parseInt(s[1]),c.height=parseInt(s[2])},bounds:function(){c.x=parseInt(s[1]),c.y=parseInt(s[2]),c.width=parseInt(s[3]),c.height=parseInt(s[4])},offset:function(){c.offsetX=parseInt(s[1]),c.offsetY=parseInt(s[2])},orig:function(){c.originalWidth=parseInt(s[1]),c.originalHeight=parseInt(s[2])},offsets:function(){c.offsetX=parseInt(s[1]),c.offsetY=parseInt(s[2]),c.originalWidth=parseInt(s[3]),c.originalHeight=parseInt(s[4])},rotate:function(){var t,e=s[1];t="true"==e.toLocaleLowerCase()?6:"false"==e.toLocaleLowerCase()?0:(720-parseFloat(e))%360/45,c.rotate=t},index:function(){c.index=parseInt(s[1])}},p=n.readLine();null!=p&&0==p.trim().length;)p=n.readLine();for(;null!=p&&0!=p.trim().length&&0!=n.readEntry(s,p);)p=n.readLine();var f=function(){for(;;){if(null==p)return i&&i(r);if(0==p.trim().length)o=null,p=n.readLine();else{if(null===o){for((o=new D).name=p.trim();0!=n.readEntry(s,p=n.readLine());)(g=a[s[0]])&&g();r.pages.push(o),e(o.name,(function(t){if(null===t)return r.pages.splice(r.pages.indexOf(o),1),i&&i(null);o.baseTexture=t,o.pma&&(t.alphaMode=l.iw.PMA),t.valid||t.setSize(o.width,o.height),r.pages.push(o),o.setFilters(),o.width&&o.height||(o.width=t.realWidth,o.height=t.realHeight,o.width&&o.height||console.log("ERROR spine atlas page "+o.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),f()})),r.pages.push(o);break}c=new M;var t=new N;t.name=p,t.page=o;for(var m=null,_=null;;){var g,v=n.readEntry(s,p=n.readLine());if(0==v)break;if(g=d[s[0]])g();else{null==m&&(m=[],_=[]),m.push(s[0]);for(var y=[],b=0;b<v;b++)y.push(parseInt(s[b+1]));_.push(y)}}0==c.originalWidth&&0==c.originalHeight&&(c.originalWidth=c.width,c.originalHeight=c.height);var x=o.baseTexture.resolution;c.x/=x,c.y/=x,c.width/=x,c.height/=x,c.originalWidth/=x,c.originalHeight/=x,c.offsetX/=x,c.offsetY/=x;var T=c.rotate%4!=0,S=new u.Ae(c.x,c.y,T?c.height:c.width,T?c.width:c.height),E=new u.Ae(0,0,c.originalWidth,c.originalHeight),w=new u.Ae(c.offsetX,c.originalHeight-c.height-c.offsetY,c.width,c.height);t.texture=new h.xE(t.page.baseTexture,S,E,w,c.rotate),t.index=c.index,t.texture.updateUvs(),r.regions.push(t)}}};f()},t.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},t.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},t}(),R=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readEntry=function(t,e){if(null==e)return 0;if(0==(e=e.trim()).length)return 0;var i=e.indexOf(":");if(-1==i)return 0;t[0]=e.substr(0,i).trim();for(var r=1,n=i+1;;r++){var s=e.indexOf(",",n);if(-1==s)return t[r]=e.substr(n).trim(),r;if(t[r]=e.substr(n,s-n).trim(),n=s+1,4==r)return 4}},t}(),D=function(){function t(){this.minFilter=T.Nearest,this.magFilter=T.Nearest,this.uWrap=S.ClampToEdge,this.vWrap=S.ClampToEdge}return t.prototype.setFilters=function(){var t=this.baseTexture,e=this.minFilter;e==T.Linear?t.scaleMode=l.aH.LINEAR:this.minFilter==T.Nearest?t.scaleMode=l.aH.NEAREST:(t.mipmap=l.WB.POW2,e==T.MipMapNearestNearest?t.scaleMode=l.aH.NEAREST:t.scaleMode=l.aH.LINEAR)},t}(),N=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return w(e,t),e}(O),U=(C=new Float32Array(1),function(t){return C[0]=t,C[0]}),F=Math.fround||U,L=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return null!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}(),k=function(){function t(){this.entries={},this.size=0}return t.prototype.add=function(t){var e=this.entries[t];return this.entries[t]=!0,!e&&(this.size++,!0)},t.prototype.addAll=function(t){for(var e=this.size,i=0,r=t.length;i<r;i++)this.add(t[i]);return e!=this.size},t.prototype.contains=function(t){return this.entries[t]},t.prototype.clear=function(){this.entries={},this.size=0},t}(),B=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.r=t,this.g=e,this.b=i,this.a=r}return t.prototype.set=function(t,e,i,r){return this.r=t,this.g=e,this.b=i,this.a=r,this.clamp()},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=8!=t.length?1:parseInt(t.substr(6,2),16)/255,this},t.prototype.add=function(t,e,i,r){return this.r+=t,this.g+=e,this.b+=i,this.a+=r,this.clamp()},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.rgba8888ToColor=function(t,e){t.r=((4278190080&e)>>>24)/255,t.g=((16711680&e)>>>16)/255,t.b=((65280&e)>>>8)/255,t.a=(255&e)/255},t.rgb888ToColor=function(t,e){t.r=((16711680&e)>>>16)/255,t.g=((65280&e)>>>8)/255,t.b=(255&e)/255},t.fromString=function(e){return(new t).setFromString(e)},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}(),G=function(){function t(){}return t.clamp=function(t,e,i){return t<e?e:t>i?i:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>0?1:t<0?-1:0},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.randomTriangular=function(e,i){return t.randomTriangularWith(e,i,.5*(e+i))},t.randomTriangularWith=function(t,e,i){var r=Math.random(),n=e-t;return r<=(i-t)/n?t+Math.sqrt(r*n*(i-t)):e-Math.sqrt((1-r)*n*(e-i))},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}(),X=function(){function t(){}return t.prototype.apply=function(t,e,i){return t+(e-t)*this.applyInternal(i)},t}(),j=function(t){function e(e){var i=t.call(this)||this;return i.power=2,i.power=e,i}return w(e,t),e.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},e}(X),V=function(t){function e(e){return t.call(this,e)||this}return w(e,t),e.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},e}(j),Y=function(){function t(){}return t.arrayCopy=function(t,e,i,r,n){for(var s=e,o=r;s<e+n;s++,o++)i[o]=t[s]},t.arrayFill=function(t,e,i,r){for(var n=e;n<i;n++)t[n]=r},t.setArraySize=function(t,e,i){void 0===i&&(i=0);var r=t.length;if(r==e)return t;if(t.length=e,r<e)for(var n=r;n<e;n++)t[n]=i;return t},t.ensureArrayCapacity=function(e,i,r){return void 0===r&&(r=0),e.length>=i?e:t.setArraySize(e,i,r)},t.newArray=function(t,e){for(var i=new Array(t),r=0;r<t;r++)i[r]=e;return i},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var i=new Array(e),r=0;r<i.length;r++)i[r]=0;return i},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var i=new Array(e),r=0;r<i.length;r++)i[r]=0;return i},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?F(e):e},t.webkit602BugfixHelper=function(t,e){},t.contains=function(t,e,i){for(var r=0;r<t.length;r++)if(t[r]==e)return!0;return!1},t.enumValue=function(t,e){return t[e[0].toUpperCase()+e.slice(1)]},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}(),H=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++){var i=t.bones[e],r=i.matrix;console.log(i.data.name+", "+r.a+", "+r.b+", "+r.c+", "+r.d+", "+r.tx+", "+r.ty)}},t}(),W=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)this.free(t[e])},t.prototype.clear=function(){this.items.length=0},t}(),z=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}(),q=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}(),K=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}(),Z={yDown:!0,FAIL_ON_NON_EXISTING_SKIN:!1,GLOBAL_AUTO_UPDATE:!0,GLOBAL_DELAY_LIMIT:0},$=[0,0,0],J=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.region=null,e.attachment=null,e}return w(e,t),e}(d.j),Q=function(t){function e(e,i,r,n,s){var o=t.call(this,e,i,r,n,s)||this;return o.region=null,o.attachment=null,o}return w(e,t),e}(p.AL),tt=function(t){function e(e){var i=t.call(this)||this;if(!e)throw new Error("The spineData param is required.");if("string"==typeof e)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');i.spineData=e,i.createSkeleton(e),i.slotContainers=[],i.tempClipContainers=[];for(var r=0,n=i.skeleton.slots.length;r<n;r++){var s=i.skeleton.slots[r],a=s.getAttachment(),h=i.newContainer();if(i.slotContainers.push(h),i.addChild(h),i.tempClipContainers.push(null),a)if(a.type===o.Region){var l=a.region.name,u=i.createSprite(s,a,l);s.currentSprite=u,s.currentSpriteName=l,h.addChild(u)}else if(a.type===o.Mesh){var c=i.createMesh(s,a);s.currentMesh=c,s.currentMeshId=a.id,s.currentMeshName=a.name,h.addChild(c)}else a.type===o.Clipping&&(i.createGraphics(s,a),h.addChild(s.clippingContainer),h.addChild(s.currentGraphics))}return i.tintRgb=new Float32Array([1,1,1]),i.autoUpdate=!0,i.visible=!0,i}return w(e,t),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,this.updateTransform=t?e.prototype.autoUpdateTransform:c.W2.prototype.updateTransform)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tint",{get:function(){return(0,m.rgb2hex)(this.tintRgb)},set:function(t){this.tintRgb=(0,m.hex2rgb)(t,this.tintRgb)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"delayLimit",{get:function(){return(void 0!==this.localDelayLimit?this.localDelayLimit:Z.GLOBAL_DELAY_LIMIT)||Number.MAX_VALUE},enumerable:!1,configurable:!0}),e.prototype.update=function(t){var e=this.delayLimit;if(t>e&&(t=e),this.state.update(t),this.state.apply(this.skeleton),this.skeleton){this.skeleton.updateWorldTransform();var i=this.skeleton.slots,r=this.color,n=null,s=null;r?(n=r.light,s=r.dark):n=this.tintRgb;for(var a=0,h=i.length;a<h;a++){var l=(O=i[a]).getAttachment(),c=this.slotContainers[a];if(l){var d=null,p=l.color;switch(l.type){case o.Region:var f=l.region;if(f){O.currentMesh&&(O.currentMesh.visible=!1,O.currentMesh=null,O.currentMeshId=void 0,O.currentMeshName=void 0);var _=f;if(O.currentSpriteName&&O.currentSpriteName===_.name)O.currentSpriteName!==_.name||O.hackRegion||this.setSpriteRegion(l,O.currentSprite,f);else{var g=_.name;if(O.currentSprite&&(O.currentSprite.visible=!1),O.sprites=O.sprites||{},void 0!==O.sprites[g])O.sprites[g].visible=!0;else{var v=this.createSprite(O,l,g);c.addChild(v)}O.currentSprite=O.sprites[g],O.currentSpriteName=g}}c.transform.setFromMatrix(O.bone.matrix),O.currentSprite.color?d=O.currentSprite.color:($[0]=n[0]*O.color.r*p.r,$[1]=n[1]*O.color.g*p.g,$[2]=n[2]*O.color.b*p.b,O.currentSprite.tint=(0,m.rgb2hex)($)),O.currentSprite.blendMode=O.blendMode;break;case o.Mesh:if(O.currentSprite){O.currentSprite.visible=!1,O.currentSprite=null,O.currentSpriteName=void 0;var y=new u.wx;y._parentID=-1,y._worldID=c.transform._worldID,c.transform=y}var b=l.id;if(!O.currentMeshId||O.currentMeshId!==b){var x=b;if(O.currentMesh&&(O.currentMesh.visible=!1),O.meshes=O.meshes||{},void 0!==O.meshes[x])O.meshes[x].visible=!0;else{var T=this.createMesh(O,l);c.addChild(T)}O.currentMesh=O.meshes[x],O.currentMeshName=l.name,O.currentMeshId=x}l.computeWorldVerticesOld(O,O.currentMesh.vertices),O.currentMesh.color?d=O.currentMesh.color:($[0]=n[0]*O.color.r*p.r,$[1]=n[1]*O.color.g*p.g,$[2]=n[2]*O.color.b*p.b,O.currentMesh.tint=(0,m.rgb2hex)($)),O.currentMesh.blendMode=O.blendMode;break;case o.Clipping:O.currentGraphics||(this.createGraphics(O,l),c.addChild(O.clippingContainer),c.addChild(O.currentGraphics)),this.updateGraphics(O,l),c.alpha=1,c.visible=!0;continue;default:c.visible=!1;continue}if(c.visible=!0,d){var S=O.color.r*p.r,E=O.color.g*p.g,w=O.color.b*p.b;d.setLight(n[0]*S+s[0]*(1-S),n[1]*E+s[1]*(1-E),n[2]*w+s[2]*(1-w)),O.darkColor?(S=O.darkColor.r,E=O.darkColor.g,w=O.darkColor.b):(S=0,E=0,w=0),d.setDark(n[0]*S+s[0]*(1-S),n[1]*E+s[1]*(1-E),n[2]*w+s[2]*(1-w))}c.alpha=O.color.a}else c.visible=!1}var A=this.skeleton.drawOrder,I=null,C=null;for(a=0,h=A.length;a<h;a++){var O=i[A[a].data.index];if(c=this.slotContainers[A[a].data.index],C||null!==c.parent&&c.parent!==this&&(c.parent.removeChild(c),c.parent=this),O.currentGraphics&&O.getAttachment())C=O.clippingContainer,I=O.getAttachment(),C.children.length=0,this.children[a]=c,I.endSlot===O.data&&(I.endSlot=null);else if(C){var M=this.tempClipContainers[a];M||((M=this.tempClipContainers[a]=this.newContainer()).visible=!1),this.children[a]=M,c.parent=null,C.addChild(c),I.endSlot==O.data&&(C.renderable=!0,C=null,I=null)}else this.children[a]=c}}},e.prototype.setSpriteRegion=function(t,e,i){e.attachment===t&&e.region===i||(e.region=i,e.attachment=t,e.texture=i.texture,e.rotation=t.rotation*G.degRad,e.position.x=t.x,e.position.y=t.y,e.alpha=t.color.a,i.size?(e.scale.x=i.size.width/i.originalWidth,e.scale.y=-i.size.height/i.originalHeight):(e.scale.x=t.scaleX*t.width/i.originalWidth,e.scale.y=-t.scaleY*t.height/i.originalHeight))},e.prototype.setMeshRegion=function(t,e,i){e.attachment===t&&e.region===i||(e.region=i,e.attachment=t,e.texture=i.texture,i.texture.updateUvs(),e.uvBuffer.update(t.regionUVs))},e.prototype.autoUpdateTransform=function(){if(Z.GLOBAL_AUTO_UPDATE){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;c.W2.prototype.updateTransform.call(this)},e.prototype.createSprite=function(t,e,i){var r=e.region;t.hackAttachment===e&&(r=t.hackRegion);var n=r.texture,s=this.newSprite(n);return s.anchor.set(.5),this.setSpriteRegion(e,s,e.region),t.sprites=t.sprites||{},t.sprites[i]=s,s},e.prototype.createMesh=function(t,e){var i=e.region;t.hackAttachment===e&&(i=t.hackRegion,t.hackAttachment=null,t.hackRegion=null);var r=this.newMesh(i.texture,new Float32Array(e.regionUVs.length),e.regionUVs,new Uint16Array(e.triangles),l.lg.TRIANGLES);return void 0!==r._canvasPadding&&(r._canvasPadding=1.5),r.alpha=e.color.a,r.region=e.region,this.setMeshRegion(e,r,i),t.meshes=t.meshes||{},t.meshes[e.id]=r,r},e.prototype.createGraphics=function(t,e){var i=this.newGraphics(),r=new u.mg([]);return i.clear(),i.beginFill(16777215,1),i.drawPolygon(r),i.renderable=!1,t.currentGraphics=i,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,i},e.prototype.updateGraphics=function(t,e){var i=t.currentGraphics.geometry,r=i.graphicsData[0].shape.points,n=e.worldVerticesLength;r.length=n,e.computeWorldVertices(t,0,n,r,0,2),i.invalidate()},e.prototype.hackTextureBySlotIndex=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var r=this.skeleton.slots[t];if(!r)return!1;var n=r.getAttachment(),s=n.region;return e?((s=new O).texture=e,s.size=i,r.hackRegion=s,r.hackAttachment=n):(r.hackRegion=null,r.hackAttachment=null),r.currentSprite&&r.currentSprite.region!=s?(this.setSpriteRegion(n,r.currentSprite,s),r.currentSprite.region=s):r.currentMesh&&r.currentMesh.region!=s&&this.setMeshRegion(n,r.currentMesh,s),!0},e.prototype.hackTextureBySlotName=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var r=this.skeleton.findSlotIndex(t);return-1!=r&&this.hackTextureBySlotIndex(r,e,i)},e.prototype.hackTextureAttachment=function(t,e,i,r){void 0===r&&(r=null);var n=this.skeleton.findSlotIndex(t),s=this.skeleton.getAttachmentByName(t,e);s.region.texture=i;var o=this.skeleton.slots[n];if(!o)return!1;var a=o.getAttachment();if(e===a.name){var h=s.region;return i?((h=new O).texture=i,h.size=r,o.hackRegion=h,o.hackAttachment=a):(o.hackRegion=null,o.hackAttachment=null),o.currentSprite&&o.currentSprite.region!=h?(this.setSpriteRegion(a,o.currentSprite,h),o.currentSprite.region=h):o.currentMesh&&o.currentMesh.region!=h&&this.setMeshRegion(a,o.currentMesh,h),!0}return!1},e.prototype.newContainer=function(){return new c.W2},e.prototype.newSprite=function(t){return new J(t)},e.prototype.newGraphics=function(){return new f.TC},e.prototype.newMesh=function(t,e,i,r,n){return new Q(t,e,i,r,n)},e.prototype.transformHack=function(){return 1},e.prototype.hackAttachmentGroups=function(t,e,i){if(t){for(var r=[],n=[],s=0,o=this.skeleton.slots.length;s<o;s++){var a=this.skeleton.slots[s],h=a.currentSpriteName||a.currentMeshName||"",l=a.currentSprite||a.currentMesh;h.endsWith(t)?(l.parentGroup=e,n.push(l)):i&&l&&(l.parentGroup=i,r.push(l))}return[r,n]}},e.prototype.destroy=function(e){for(var i=0,r=this.skeleton.slots.length;i<r;i++){var n=this.skeleton.slots[i];for(var s in n.meshes)n.meshes[s].destroy(e);for(var o in n.meshes=null,n.sprites)n.sprites[o].destroy(e);n.sprites=null}for(i=0,r=this.slotContainers.length;i<r;i++)this.slotContainers[i].destroy(e);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,t.prototype.destroy.call(this,e)},e.clippingPolygon=[],e}(c.W2);Object.defineProperty(tt.prototype,"visible",{get:function(){return this._visible},set:function(t){t!==this._visible&&(this._visible=t,t&&(this.lastTime=0))}}),a.kC.setExtensionXhrType("skel",a.kC.XHR_RESPONSE_TYPE.BUFFER);var et=function(){function t(){}return t.prototype.genMiddleware=function(){var t=this;return{use:function(e,i){if(!e.data)return i();var r=function(t){return t.type===a.kC.TYPE.JSON}(e)&&e.data.bones,n=function(t){return t.xhrType===a.kC.XHR_RESPONSE_TYPE.BUFFER}(e)&&("skel"===e.extension||e.metadata&&e.metadata.spineMetadata);if(!r&&!n)return i();var s=null,o=e.data;r?s=t.createJsonParser():(s=t.createBinaryParser(),e.data instanceof ArrayBuffer&&(o=new Uint8Array(e.data)));var h=e.metadata||{},u=h?h.spineSkeletonScale:null;u&&(s.scale=u);var c=h.spineAtlas;if(!1===c)return i();if(c&&c.pages)return t.parseData(e,s,c,o),i();var d=h.spineAtlasSuffix||".atlas",p=e.url,f=p.indexOf("?");f>0&&(p=p.substr(0,f)),p=p.substr(0,p.lastIndexOf("."))+d,h.spineAtlasFile&&(p=h.spineAtlasFile),p=p.replace(this.baseUrl,"");var m={crossOrigin:e.crossOrigin,xhrType:a.kC.XHR_RESPONSE_TYPE.TEXT,metadata:h.spineMetadata||null,parentResource:e},_={crossOrigin:e.crossOrigin,metadata:h.imageMetadata||null,parentResource:e},g=e.url.substr(0,e.url.lastIndexOf("/")+1);g=g.replace(this.baseUrl,"");var v=h.imageNamePrefix||e.name+"_atlas_page_",y=h.images?it(h.images):h.image?it({default:h.image}):h.imageLoader?h.imageLoader(this,v,g,_):function(t,e,i,r){return i&&i.lastIndexOf("/")!==i.length-1&&(i+="/"),function(n,s){var o=e+n,a=i+n,h=t.resources[o];if(h){var u=function(){s(h.texture.baseTexture)};h.texture?u():h.onAfterMiddleware.add(u)}else t.add(o,a,r,(function(t){t.error?s(null):(n.indexOf("-pma.")>=0&&(t.texture.baseTexture.alphaMode=l.iw.PMA),s(t.texture.baseTexture))}))}}(this,v,g,_);function b(r){new P(r,y,(function(r){r&&t.parseData(e,s,r,o),i()}))}h.atlasRawData?b(h.atlasRawData):this.add(e.name+"_atlas",p,m,(function(t){t.error?i():b(t.data)}))}}},t}();function it(t){return function(e,i){var r=t[e]||t.default;r&&r.baseTexture?i(r.baseTexture):i(r)}}var rt=function(t,e){return(rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function nt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}rt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var st,ot=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t},at=function(t){function e(i){var r=t.call(this,i)||this;return r.id=(65535&e.nextID++)<<11,r.worldVerticesLength=0,r.deformAttachment=r,r}return nt(e,t),e.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},e.prototype.computeWorldVertices=function(t,e,i,r,n,s){i=n+(i>>1)*s;var o=t.bone.skeleton,a=t.deform,h=this.vertices,l=this.bones;if(null!=l){for(var u=0,c=0,d=0;d<e;d+=2)u+=(_=l[u])+1,c+=_;var p=o.bones;if(0==a.length)for(C=n,E=3*c;C<i;C+=s){var f=0,m=0,_=l[u++];for(_+=u;u<_;u++,E+=3){b=p[l[u]].matrix,O=h[E],M=h[E+1];var g=h[E+2];f+=(O*b.a+M*b.c+b.tx)*g,m+=(O*b.b+M*b.d+b.ty)*g}r[C]=f,r[C+1]=m}else for(var v=a,y=(C=n,E=3*c,c<<1);C<i;C+=s){for(f=0,m=0,_=l[u++],_+=u;u<_;u++,E+=3,y+=2)b=p[l[u]].matrix,O=h[E]+v[y],M=h[E+1]+v[y+1],g=h[E+2],f+=(O*b.a+M*b.c+b.tx)*g,m+=(O*b.b+M*b.d+b.ty)*g;r[C]=f,r[C+1]=m}}else{a.length>0&&(h=a);for(var b,x=(b=t.bone.matrix).tx,T=b.ty,S=b.a,E=b.c,w=b.b,A=b.d,I=e,C=n;C<i;I+=2,C+=s){var O=h[I],M=h[I+1];r[C]=O*S+M*E+x,r[C+1]=O*w+M*A+T}}},e.prototype.copyTo=function(t){null!=this.bones?(t.bones=new Array(this.bones.length),Y.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,null!=this.vertices?(t.vertices=Y.newFloatArray(this.vertices.length),Y.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment},e.nextID=0,e}(ot),ht=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.BoundingBox,i.color=new B(1,1,1,1),i}return nt(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},e}(at),lt=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Clipping,i.color=new B(.2275,.2275,.8078,1),i}return nt(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},e}(at),ut=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Mesh,i.color=new B(1,1,1,1),i.tempColor=new B(0,0,0,0),i}return nt(e,t),e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},e.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var t=new e(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),Y.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=new Array(this.triangles.length),Y.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,null!=this.edges&&(t.edges=new Array(this.edges.length),Y.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t},e.prototype.newLinkedMesh=function(){var t=new e(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(null!=this.parentMesh?this.parentMesh:this),t},e}(at),ct=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Path,i.closed=!1,i.constantSpeed=!1,i.color=new B(1,1,1,1),i}return nt(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),Y.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t},e}(at),dt=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Point,i.color=new B(.38,.94,0,1),i}return nt(e,t),e.prototype.computeWorldPosition=function(t,e){var i=t.matrix;return e.x=this.x*i.a+this.y*i.c+t.worldX,e.y=this.x*i.b+this.y*i.d+t.worldY,e},e.prototype.computeWorldRotation=function(t){var e=t.matrix,i=G.cosDeg(this.rotation),r=G.sinDeg(this.rotation),n=i*e.a+r*e.c,s=i*e.b+r*e.d;return Math.atan2(s,n)*G.radDeg},e.prototype.copy=function(){var t=new e(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},e}(at),pt=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Region,i.x=0,i.y=0,i.scaleX=1,i.scaleY=1,i.rotation=0,i.width=0,i.height=0,i.color=new B(1,1,1,1),i.offset=Y.newFloatArray(8),i.uvs=Y.newFloatArray(8),i.tempColor=new B(1,1,1,1),i}return nt(e,t),e.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*i,s=r+this.region.width*t,o=n+this.region.height*i,a=this.rotation*Math.PI/180,h=Math.cos(a),l=Math.sin(a),u=r*h+this.x,c=r*l,d=n*h+this.y,p=n*l,f=s*h+this.x,m=s*l,_=o*h+this.y,g=o*l,v=this.offset;v[e.OX1]=u-p,v[e.OY1]=d+c,v[e.OX2]=u-g,v[e.OY2]=_+c,v[e.OX3]=f-g,v[e.OY3]=_+m,v[e.OX4]=f-p,v[e.OY4]=d+m},e.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},e.prototype.computeWorldVertices=function(t,i,r,n){var s=this.offset,o=t.matrix,a=o.tx,h=o.ty,l=o.a,u=o.c,c=o.b,d=o.d,p=0,f=0;p=s[e.OX1],f=s[e.OY1],i[r]=p*l+f*u+a,i[r+1]=p*c+f*d+h,r+=n,p=s[e.OX2],f=s[e.OY2],i[r]=p*l+f*u+a,i[r+1]=p*c+f*d+h,r+=n,p=s[e.OX3],f=s[e.OY3],i[r]=p*l+f*u+a,i[r+1]=p*c+f*d+h,r+=n,p=s[e.OX4],f=s[e.OY4],i[r]=p*l+f*u+a,i[r+1]=p*c+f*d+h},e.prototype.copy=function(){var t=new e(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,Y.arrayCopy(this.uvs,0,t.uvs,0,8),Y.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},e.OX1=0,e.OY1=1,e.OX2=2,e.OY2=3,e.OX3=4,e.OY3=5,e.OX4=6,e.OY4=7,e.X1=0,e.Y1=1,e.C1R=2,e.C1G=3,e.C1B=4,e.C1A=5,e.U1=6,e.V1=7,e.X2=8,e.Y2=9,e.C2R=10,e.C2G=11,e.C2B=12,e.C2A=13,e.U2=14,e.V2=15,e.X3=16,e.Y3=17,e.C3R=18,e.C3G=19,e.C3B=20,e.C3A=21,e.U3=22,e.V3=23,e.X4=24,e.Y4=25,e.C4R=26,e.C4G=27,e.C4B=28,e.C4A=29,e.U4=30,e.V4=31,e}(ot),ft=function(){function t(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return t.prototype.begin=function(t){},t.prototype.transform=function(t,e,i,r){t.x+=G.randomTriangular(-this.jitterX,this.jitterY),t.y+=G.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}(),mt=function(){function t(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return t.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},t.prototype.transform=function(e,i,r,n){var s=this.angle*G.degreesToRadians,o=e.x-this.worldX,a=e.y-this.worldY,h=Math.sqrt(o*o+a*a);if(h<this.radius){var l=t.interpolation.apply(0,s,(this.radius-h)/this.radius),u=Math.cos(l),c=Math.sin(l);e.x=u*o-c*a+this.worldX,e.y=c*o+u*a+this.worldY}},t.prototype.end=function(){},t.interpolation=new V(2),t}(),_t=function(){function t(t,e,i){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.timelineIds=[];for(var r=0;r<e.length;r++)this.timelineIds[e[r].getPropertyId()]=!0;this.duration=i}return t.prototype.hasTimeline=function(t){return 1==this.timelineIds[t]},t.prototype.apply=function(t,e,i,r,n,s,o,a){if(null==t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,l=0,u=h.length;l<u;l++)h[l].apply(t,e,i,n,s,o,a)},t.binarySearch=function(t,e,i){void 0===i&&(i=1);var r=0,n=t.length/i-2;if(0==n)return i;for(var s=n>>>1;;){if(t[(s+1)*i]<=e?r=s+1:n=s,r==n)return(r+1)*i;s=r+n>>>1}},t.linearSearch=function(t,e,i){for(var r=0,n=t.length-i;r<=n;r+=i)if(t[r]>e)return r;return-1},t}();!function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(st||(st={}));var gt,vt=function(){function t(e){if(e<=0)throw new Error("frameCount must be > 0: "+e);this.curves=Y.newFloatArray((e-1)*t.BEZIER_SIZE)}return t.prototype.getFrameCount=function(){return this.curves.length/t.BEZIER_SIZE+1},t.prototype.setLinear=function(e){this.curves[e*t.BEZIER_SIZE]=t.LINEAR},t.prototype.setStepped=function(e){this.curves[e*t.BEZIER_SIZE]=t.STEPPED},t.prototype.getCurveType=function(e){var i=e*t.BEZIER_SIZE;if(i==this.curves.length)return t.LINEAR;var r=this.curves[i];return r==t.LINEAR?t.LINEAR:r==t.STEPPED?t.STEPPED:t.BEZIER},t.prototype.setCurve=function(e,i,r,n,s){var o=.03*(2*-i+n),a=.03*(2*-r+s),h=.006*(3*(i-n)+1),l=.006*(3*(r-s)+1),u=2*o+h,c=2*a+l,d=.3*i+o+.16666667*h,p=.3*r+a+.16666667*l,f=e*t.BEZIER_SIZE,m=this.curves;m[f++]=t.BEZIER;for(var _=d,g=p,v=f+t.BEZIER_SIZE-1;f<v;f+=2)m[f]=_,m[f+1]=g,d+=u,p+=c,u+=h,c+=l,_+=d,g+=p},t.prototype.getCurvePercent=function(e,i){i=G.clamp(i,0,1);var r=this.curves,n=e*t.BEZIER_SIZE,s=r[n];if(s==t.LINEAR)return i;if(s==t.STEPPED)return 0;for(var o=0,a=++n,h=n+t.BEZIER_SIZE-1;n<h;n+=2)if((o=r[n])>=i){var l=void 0,u=void 0;return n==a?(l=0,u=0):(l=r[n-2],u=r[n-1]),u+(r[n+1]-u)*(i-l)/(o-l)}var c=r[n-1];return c+(1-c)*(i-o)/(1-o)},t.LINEAR=0,t.STEPPED=1,t.BEZIER=2,t.BEZIER_SIZE=19,t}(),yt=function(t){function e(e){var i=t.call(this,e)||this;return i.frames=Y.newFloatArray(e<<1),i}return nt(e,t),e.prototype.getPropertyId=function(){return(st.rotate<<24)+this.boneIndex},e.prototype.setFrame=function(t,i,r){t<<=1,this.frames[t]=i,this.frames[t+e.ROTATION]=r},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.bones[this.boneIndex];if(l.active)if(r<h[0])switch(o){case _.setup:return void(l.rotation=l.data.rotation);case _.first:var u=l.data.rotation-l.rotation;l.rotation+=(u-360*(16384-(16384.499999999996-u/360|0)))*s}else if(r>=h[h.length-e.ENTRIES]){var c=h[h.length+e.PREV_ROTATION];switch(o){case _.setup:l.rotation=l.data.rotation+c*s;break;case _.first:case _.replace:c+=l.data.rotation-l.rotation,c-=360*(16384-(16384.499999999996-c/360|0));case _.add:l.rotation+=c*s}}else{var d=_t.binarySearch(h,r,e.ENTRIES),p=h[d+e.PREV_ROTATION],f=h[d],m=this.getCurvePercent((d>>1)-1,1-(r-f)/(h[d+e.PREV_TIME]-f)),g=h[d+e.ROTATION]-p;switch(g=p+(g-360*(16384-(16384.499999999996-g/360|0)))*m,o){case _.setup:l.rotation=l.data.rotation+(g-360*(16384-(16384.499999999996-g/360|0)))*s;break;case _.first:case _.replace:g+=l.data.rotation-l.rotation;case _.add:l.rotation+=(g-360*(16384-(16384.499999999996-g/360|0)))*s}}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_ROTATION=-1,e.ROTATION=1,e}(vt),bt=function(t){function e(i){var r=t.call(this,i)||this;return r.frames=Y.newFloatArray(i*e.ENTRIES),r}return nt(e,t),e.prototype.getPropertyId=function(){return(st.translate<<24)+this.boneIndex},e.prototype.setFrame=function(t,i,r,n){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.X]=r,this.frames[t+e.Y]=n},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.bones[this.boneIndex];if(l.active)if(r<h[0])switch(o){case _.setup:return l.x=l.data.x,void(l.y=l.data.y);case _.first:l.x+=(l.data.x-l.x)*s,l.y+=(l.data.y-l.y)*s}else{var u=0,c=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_X],c=h[h.length+e.PREV_Y];else{var d=_t.binarySearch(h,r,e.ENTRIES);u=h[d+e.PREV_X],c=h[d+e.PREV_Y];var p=h[d],f=this.getCurvePercent(d/e.ENTRIES-1,1-(r-p)/(h[d+e.PREV_TIME]-p));u+=(h[d+e.X]-u)*f,c+=(h[d+e.Y]-c)*f}switch(o){case _.setup:l.x=l.data.x+u*s,l.y=l.data.y+c*s;break;case _.first:case _.replace:l.x+=(l.data.x+u-l.x)*s,l.y+=(l.data.y+c-l.y)*s;break;case _.add:l.x+=u*s,l.y+=c*s}}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_X=-2,e.PREV_Y=-1,e.X=1,e.Y=2,e}(vt),xt=function(t){function e(e){return t.call(this,e)||this}return nt(e,t),e.prototype.getPropertyId=function(){return(st.scale<<24)+this.boneIndex},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.bones[this.boneIndex];if(l.active)if(r<h[0])switch(o){case _.setup:return l.scaleX=l.data.scaleX,void(l.scaleY=l.data.scaleY);case _.first:l.scaleX+=(l.data.scaleX-l.scaleX)*s,l.scaleY+=(l.data.scaleY-l.scaleY)*s}else{var u=0,c=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_X]*l.data.scaleX,c=h[h.length+e.PREV_Y]*l.data.scaleY;else{var d=_t.binarySearch(h,r,e.ENTRIES);u=h[d+e.PREV_X],c=h[d+e.PREV_Y];var p=h[d],f=this.getCurvePercent(d/e.ENTRIES-1,1-(r-p)/(h[d+e.PREV_TIME]-p));u=(u+(h[d+e.X]-u)*f)*l.data.scaleX,c=(c+(h[d+e.Y]-c)*f)*l.data.scaleY}if(1==s)o==_.add?(l.scaleX+=u-l.data.scaleX,l.scaleY+=c-l.data.scaleY):(l.scaleX=u,l.scaleY=c);else{var m=0,v=0;if(a==g.mixOut)switch(o){case _.setup:m=l.data.scaleX,v=l.data.scaleY,l.scaleX=m+(Math.abs(u)*G.signum(m)-m)*s,l.scaleY=v+(Math.abs(c)*G.signum(v)-v)*s;break;case _.first:case _.replace:m=l.scaleX,v=l.scaleY,l.scaleX=m+(Math.abs(u)*G.signum(m)-m)*s,l.scaleY=v+(Math.abs(c)*G.signum(v)-v)*s;break;case _.add:m=l.scaleX,v=l.scaleY,l.scaleX=m+(Math.abs(u)*G.signum(m)-l.data.scaleX)*s,l.scaleY=v+(Math.abs(c)*G.signum(v)-l.data.scaleY)*s}else switch(o){case _.setup:m=Math.abs(l.data.scaleX)*G.signum(u),v=Math.abs(l.data.scaleY)*G.signum(c),l.scaleX=m+(u-m)*s,l.scaleY=v+(c-v)*s;break;case _.first:case _.replace:m=Math.abs(l.scaleX)*G.signum(u),v=Math.abs(l.scaleY)*G.signum(c),l.scaleX=m+(u-m)*s,l.scaleY=v+(c-v)*s;break;case _.add:m=G.signum(u),v=G.signum(c),l.scaleX=Math.abs(l.scaleX)*m+(u-Math.abs(l.data.scaleX)*m)*s,l.scaleY=Math.abs(l.scaleY)*v+(c-Math.abs(l.data.scaleY)*v)*s}}}},e}(bt),Tt=function(t){function e(e){return t.call(this,e)||this}return nt(e,t),e.prototype.getPropertyId=function(){return(st.shear<<24)+this.boneIndex},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.bones[this.boneIndex];if(l.active)if(r<h[0])switch(o){case _.setup:return l.shearX=l.data.shearX,void(l.shearY=l.data.shearY);case _.first:l.shearX+=(l.data.shearX-l.shearX)*s,l.shearY+=(l.data.shearY-l.shearY)*s}else{var u=0,c=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_X],c=h[h.length+e.PREV_Y];else{var d=_t.binarySearch(h,r,e.ENTRIES);u=h[d+e.PREV_X],c=h[d+e.PREV_Y];var p=h[d],f=this.getCurvePercent(d/e.ENTRIES-1,1-(r-p)/(h[d+e.PREV_TIME]-p));u+=(h[d+e.X]-u)*f,c+=(h[d+e.Y]-c)*f}switch(o){case _.setup:l.shearX=l.data.shearX+u*s,l.shearY=l.data.shearY+c*s;break;case _.first:case _.replace:l.shearX+=(l.data.shearX+u-l.shearX)*s,l.shearY+=(l.data.shearY+c-l.shearY)*s;break;case _.add:l.shearX+=u*s,l.shearY+=c*s}}},e}(bt),St=function(t){function e(i){var r=t.call(this,i)||this;return r.frames=Y.newFloatArray(i*e.ENTRIES),r}return nt(e,t),e.prototype.getPropertyId=function(){return(st.color<<24)+this.slotIndex},e.prototype.setFrame=function(t,i,r,n,s,o){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.R]=r,this.frames[t+e.G]=n,this.frames[t+e.B]=s,this.frames[t+e.A]=o},e.prototype.apply=function(t,i,r,n,s,o,a){var h=t.slots[this.slotIndex];if(h.bone.active){var l=this.frames;if(r<l[0])switch(o){case _.setup:return void h.color.setFromColor(h.data.color);case _.first:var u=h.color,c=h.data.color;u.add((c.r-u.r)*s,(c.g-u.g)*s,(c.b-u.b)*s,(c.a-u.a)*s)}else{var d=0,p=0,f=0,m=0;if(r>=l[l.length-e.ENTRIES]){var g=l.length;d=l[g+e.PREV_R],p=l[g+e.PREV_G],f=l[g+e.PREV_B],m=l[g+e.PREV_A]}else{var v=_t.binarySearch(l,r,e.ENTRIES);d=l[v+e.PREV_R],p=l[v+e.PREV_G],f=l[v+e.PREV_B],m=l[v+e.PREV_A];var y=l[v],b=this.getCurvePercent(v/e.ENTRIES-1,1-(r-y)/(l[v+e.PREV_TIME]-y));d+=(l[v+e.R]-d)*b,p+=(l[v+e.G]-p)*b,f+=(l[v+e.B]-f)*b,m+=(l[v+e.A]-m)*b}1==s?h.color.set(d,p,f,m):(u=h.color,o==_.setup&&u.setFromColor(h.data.color),u.add((d-u.r)*s,(p-u.g)*s,(f-u.b)*s,(m-u.a)*s))}}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_R=-4,e.PREV_G=-3,e.PREV_B=-2,e.PREV_A=-1,e.R=1,e.G=2,e.B=3,e.A=4,e}(vt),Et=function(t){function e(i){var r=t.call(this,i)||this;return r.frames=Y.newFloatArray(i*e.ENTRIES),r}return nt(e,t),e.prototype.getPropertyId=function(){return(st.twoColor<<24)+this.slotIndex},e.prototype.setFrame=function(t,i,r,n,s,o,a,h,l){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.R]=r,this.frames[t+e.G]=n,this.frames[t+e.B]=s,this.frames[t+e.A]=o,this.frames[t+e.R2]=a,this.frames[t+e.G2]=h,this.frames[t+e.B2]=l},e.prototype.apply=function(t,i,r,n,s,o,a){var h=t.slots[this.slotIndex];if(h.bone.active){var l=this.frames;if(r<l[0])switch(o){case _.setup:return h.color.setFromColor(h.data.color),void h.darkColor.setFromColor(h.data.darkColor);case _.first:var u=h.color,c=h.darkColor,d=h.data.color,p=h.data.darkColor;u.add((d.r-u.r)*s,(d.g-u.g)*s,(d.b-u.b)*s,(d.a-u.a)*s),c.add((p.r-c.r)*s,(p.g-c.g)*s,(p.b-c.b)*s,0)}else{var f=0,m=0,g=0,v=0,y=0,b=0,x=0;if(r>=l[l.length-e.ENTRIES]){var T=l.length;f=l[T+e.PREV_R],m=l[T+e.PREV_G],g=l[T+e.PREV_B],v=l[T+e.PREV_A],y=l[T+e.PREV_R2],b=l[T+e.PREV_G2],x=l[T+e.PREV_B2]}else{var S=_t.binarySearch(l,r,e.ENTRIES);f=l[S+e.PREV_R],m=l[S+e.PREV_G],g=l[S+e.PREV_B],v=l[S+e.PREV_A],y=l[S+e.PREV_R2],b=l[S+e.PREV_G2],x=l[S+e.PREV_B2];var E=l[S],w=this.getCurvePercent(S/e.ENTRIES-1,1-(r-E)/(l[S+e.PREV_TIME]-E));f+=(l[S+e.R]-f)*w,m+=(l[S+e.G]-m)*w,g+=(l[S+e.B]-g)*w,v+=(l[S+e.A]-v)*w,y+=(l[S+e.R2]-y)*w,b+=(l[S+e.G2]-b)*w,x+=(l[S+e.B2]-x)*w}1==s?(h.color.set(f,m,g,v),h.darkColor.set(y,b,x,1)):(u=h.color,c=h.darkColor,o==_.setup&&(u.setFromColor(h.data.color),c.setFromColor(h.data.darkColor)),u.add((f-u.r)*s,(m-u.g)*s,(g-u.b)*s,(v-u.a)*s),c.add((y-c.r)*s,(b-c.g)*s,(x-c.b)*s,0))}}},e.ENTRIES=8,e.PREV_TIME=-8,e.PREV_R=-7,e.PREV_G=-6,e.PREV_B=-5,e.PREV_A=-4,e.PREV_R2=-3,e.PREV_G2=-2,e.PREV_B2=-1,e.R=1,e.G=2,e.B=3,e.A=4,e.R2=5,e.G2=6,e.B2=7,e}(vt),wt=function(){function t(t){this.frames=Y.newFloatArray(t),this.attachmentNames=new Array(t)}return t.prototype.getPropertyId=function(){return(st.attachment<<24)+this.slotIndex},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},t.prototype.apply=function(t,e,i,r,n,s,o){var a=t.slots[this.slotIndex];if(a.bone.active)if(o!=g.mixOut){var h=this.frames;if(i<h[0])s!=_.setup&&s!=_.first||this.setAttachment(t,a,a.data.attachmentName);else{var l;l=i>=h[h.length-1]?h.length-1:_t.binarySearch(h,i,1)-1;var u=this.attachmentNames[l];t.slots[this.slotIndex].setAttachment(null==u?null:t.getAttachment(this.slotIndex,u))}}else s==_.setup&&this.setAttachment(t,a,a.data.attachmentName)},t.prototype.setAttachment=function(t,e,i){e.setAttachment(null==i?null:t.getAttachment(this.slotIndex,i))},t}(),At=null,It=function(t){function e(e){var i=t.call(this,e)||this;return i.frames=Y.newFloatArray(e),i.frameVertices=new Array(e),null==At&&(At=Y.newFloatArray(64)),i}return nt(e,t),e.prototype.getPropertyId=function(){return(st.deform<<27)+ +this.attachment.id+this.slotIndex},e.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.frameVertices[t]=i},e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.slots[this.slotIndex];if(a.bone.active){var h=a.getAttachment();if(h instanceof at&&h.deformAttachment==this.attachment){var l=a.deform;0==l.length&&(s=_.setup);var u=this.frameVertices,c=u[0].length,d=this.frames;if(i<d[0]){var p=h;switch(s){case _.setup:return void(l.length=0);case _.first:if(1==n){l.length=0;break}var f=Y.setArraySize(l,c);if(null==p.bones)for(var m=p.vertices,g=0;g<c;g++)f[g]+=(m[g]-f[g])*n;else for(n=1-n,g=0;g<c;g++)f[g]*=n}}else{var v=Y.setArraySize(l,c);if(i>=d[d.length-1]){var y=u[d.length-1];if(1==n)if(s==_.add)if(null==(p=h).bones){m=p.vertices;for(var b=0;b<c;b++)v[b]+=y[b]-m[b]}else for(var x=0;x<c;x++)v[x]+=y[x];else Y.arrayCopy(y,0,v,0,c);else switch(s){case _.setup:var T=h;if(null==T.bones){m=T.vertices;for(var S=0;S<c;S++){var E=m[S];v[S]=E+(y[S]-E)*n}}else for(var w=0;w<c;w++)v[w]=y[w]*n;break;case _.first:case _.replace:for(var A=0;A<c;A++)v[A]+=(y[A]-v[A])*n;break;case _.add:if(null==(p=h).bones){m=p.vertices;for(var I=0;I<c;I++)v[I]+=(y[I]-m[I])*n}else for(var C=0;C<c;C++)v[C]+=y[C]*n}}else{var O=_t.binarySearch(d,i),M=u[O-1],P=u[O],R=d[O],D=this.getCurvePercent(O-1,1-(i-R)/(d[O-1]-R));if(1==n)if(s==_.add)if(null==(p=h).bones){m=p.vertices;for(var N=0;N<c;N++){var U=M[N];v[N]+=U+(P[N]-U)*D-m[N]}}else for(var F=0;F<c;F++)U=M[F],v[F]+=U+(P[F]-U)*D;else for(var L=0;L<c;L++)U=M[L],v[L]=U+(P[L]-U)*D;else switch(s){case _.setup:var k=h;if(null==k.bones){m=k.vertices;for(var B=0;B<c;B++)U=M[B],E=m[B],v[B]=E+(U+(P[B]-U)*D-E)*n}else for(var G=0;G<c;G++)U=M[G],v[G]=(U+(P[G]-U)*D)*n;break;case _.first:case _.replace:for(var X=0;X<c;X++)U=M[X],v[X]+=(U+(P[X]-U)*D-v[X])*n;break;case _.add:if(null==(p=h).bones){m=p.vertices;for(var j=0;j<c;j++)U=M[j],v[j]+=(U+(P[j]-U)*D-m[j])*n}else for(var V=0;V<c;V++)U=M[V],v[V]+=(U+(P[V]-U)*D)*n}}}}}},e}(vt),Ct=function(){function t(t){this.frames=Y.newFloatArray(t),this.events=new Array(t)}return t.prototype.getPropertyId=function(){return st.event<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},t.prototype.apply=function(t,e,i,r,n,s,o){if(null!=r){var a=this.frames,h=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,r,n,s,o),e=-1;else if(e>=a[h-1])return;if(!(i<a[0])){var l=0;if(e<a[0])l=0;else for(var u=a[l=_t.binarySearch(a,e)];l>0&&a[l-1]==u;)l--;for(;l<h&&i>=a[l];l++)r.push(this.events[l])}}},t}(),Ot=function(){function t(t){this.frames=Y.newFloatArray(t),this.drawOrders=new Array(t)}return t.prototype.getPropertyId=function(){return st.drawOrder<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},t.prototype.apply=function(t,e,i,r,n,s,o){var a=t.drawOrder,h=t.slots;if(o!=g.mixOut||s!=_.setup){var l=this.frames;if(i<l[0])s!=_.setup&&s!=_.first||Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var u;u=i>=l[l.length-1]?l.length-1:_t.binarySearch(l,i)-1;var c=this.drawOrders[u];if(null==c)Y.arrayCopy(h,0,a,0,h.length);else for(var d=0,p=c.length;d<p;d++)a[d]=h[c[d]]}}else Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},t}(),Mt=function(t){function e(i){var r=t.call(this,i)||this;return r.frames=Y.newFloatArray(i*e.ENTRIES),r}return nt(e,t),e.prototype.getPropertyId=function(){return(st.ikConstraint<<24)+this.ikConstraintIndex},e.prototype.setFrame=function(t,i,r,n,s,o,a){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.MIX]=r,this.frames[t+e.SOFTNESS]=n,this.frames[t+e.BEND_DIRECTION]=s,this.frames[t+e.COMPRESS]=o?1:0,this.frames[t+e.STRETCH]=a?1:0},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.ikConstraints[this.ikConstraintIndex];if(l.active)if(r<h[0])switch(o){case _.setup:return l.mix=l.data.mix,l.softness=l.data.softness,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,void(l.stretch=l.data.stretch);case _.first:l.mix+=(l.data.mix-l.mix)*s,l.softness+=(l.data.softness-l.softness)*s,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch}else if(r>=h[h.length-e.ENTRIES])o==_.setup?(l.mix=l.data.mix+(h[h.length+e.PREV_MIX]-l.data.mix)*s,l.softness=l.data.softness+(h[h.length+e.PREV_SOFTNESS]-l.data.softness)*s,a==g.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=h[h.length+e.PREV_BEND_DIRECTION],l.compress=0!=h[h.length+e.PREV_COMPRESS],l.stretch=0!=h[h.length+e.PREV_STRETCH])):(l.mix+=(h[h.length+e.PREV_MIX]-l.mix)*s,l.softness+=(h[h.length+e.PREV_SOFTNESS]-l.softness)*s,a==g.mixIn&&(l.bendDirection=h[h.length+e.PREV_BEND_DIRECTION],l.compress=0!=h[h.length+e.PREV_COMPRESS],l.stretch=0!=h[h.length+e.PREV_STRETCH]));else{var u=_t.binarySearch(h,r,e.ENTRIES),c=h[u+e.PREV_MIX],d=h[u+e.PREV_SOFTNESS],p=h[u],f=this.getCurvePercent(u/e.ENTRIES-1,1-(r-p)/(h[u+e.PREV_TIME]-p));o==_.setup?(l.mix=l.data.mix+(c+(h[u+e.MIX]-c)*f-l.data.mix)*s,l.softness=l.data.softness+(d+(h[u+e.SOFTNESS]-d)*f-l.data.softness)*s,a==g.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=h[u+e.PREV_BEND_DIRECTION],l.compress=0!=h[u+e.PREV_COMPRESS],l.stretch=0!=h[u+e.PREV_STRETCH])):(l.mix+=(c+(h[u+e.MIX]-c)*f-l.mix)*s,l.softness+=(d+(h[u+e.SOFTNESS]-d)*f-l.softness)*s,a==g.mixIn&&(l.bendDirection=h[u+e.PREV_BEND_DIRECTION],l.compress=0!=h[u+e.PREV_COMPRESS],l.stretch=0!=h[u+e.PREV_STRETCH]))}},e.ENTRIES=6,e.PREV_TIME=-6,e.PREV_MIX=-5,e.PREV_SOFTNESS=-4,e.PREV_BEND_DIRECTION=-3,e.PREV_COMPRESS=-2,e.PREV_STRETCH=-1,e.MIX=1,e.SOFTNESS=2,e.BEND_DIRECTION=3,e.COMPRESS=4,e.STRETCH=5,e}(vt),Pt=function(t){function e(i){var r=t.call(this,i)||this;return r.frames=Y.newFloatArray(i*e.ENTRIES),r}return nt(e,t),e.prototype.getPropertyId=function(){return(st.transformConstraint<<24)+this.transformConstraintIndex},e.prototype.setFrame=function(t,i,r,n,s,o){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.ROTATE]=r,this.frames[t+e.TRANSLATE]=n,this.frames[t+e.SCALE]=s,this.frames[t+e.SHEAR]=o},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.transformConstraints[this.transformConstraintIndex];if(l.active)if(r<h[0]){var u=l.data;switch(o){case _.setup:return l.rotateMix=u.rotateMix,l.translateMix=u.translateMix,l.scaleMix=u.scaleMix,void(l.shearMix=u.shearMix);case _.first:l.rotateMix+=(u.rotateMix-l.rotateMix)*s,l.translateMix+=(u.translateMix-l.translateMix)*s,l.scaleMix+=(u.scaleMix-l.scaleMix)*s,l.shearMix+=(u.shearMix-l.shearMix)*s}}else{var c=0,d=0,p=0,f=0;if(r>=h[h.length-e.ENTRIES]){var m=h.length;c=h[m+e.PREV_ROTATE],d=h[m+e.PREV_TRANSLATE],p=h[m+e.PREV_SCALE],f=h[m+e.PREV_SHEAR]}else{var g=_t.binarySearch(h,r,e.ENTRIES);c=h[g+e.PREV_ROTATE],d=h[g+e.PREV_TRANSLATE],p=h[g+e.PREV_SCALE],f=h[g+e.PREV_SHEAR];var v=h[g],y=this.getCurvePercent(g/e.ENTRIES-1,1-(r-v)/(h[g+e.PREV_TIME]-v));c+=(h[g+e.ROTATE]-c)*y,d+=(h[g+e.TRANSLATE]-d)*y,p+=(h[g+e.SCALE]-p)*y,f+=(h[g+e.SHEAR]-f)*y}o==_.setup?(u=l.data,l.rotateMix=u.rotateMix+(c-u.rotateMix)*s,l.translateMix=u.translateMix+(d-u.translateMix)*s,l.scaleMix=u.scaleMix+(p-u.scaleMix)*s,l.shearMix=u.shearMix+(f-u.shearMix)*s):(l.rotateMix+=(c-l.rotateMix)*s,l.translateMix+=(d-l.translateMix)*s,l.scaleMix+=(p-l.scaleMix)*s,l.shearMix+=(f-l.shearMix)*s)}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_ROTATE=-4,e.PREV_TRANSLATE=-3,e.PREV_SCALE=-2,e.PREV_SHEAR=-1,e.ROTATE=1,e.TRANSLATE=2,e.SCALE=3,e.SHEAR=4,e}(vt),Rt=function(t){function e(i){var r=t.call(this,i)||this;return r.frames=Y.newFloatArray(i*e.ENTRIES),r}return nt(e,t),e.prototype.getPropertyId=function(){return(st.pathConstraintPosition<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(t,i,r){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.VALUE]=r},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(l.active)if(r<h[0])switch(o){case _.setup:return void(l.position=l.data.position);case _.first:l.position+=(l.data.position-l.position)*s}else{var u=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_VALUE];else{var c=_t.binarySearch(h,r,e.ENTRIES);u=h[c+e.PREV_VALUE];var d=h[c],p=this.getCurvePercent(c/e.ENTRIES-1,1-(r-d)/(h[c+e.PREV_TIME]-d));u+=(h[c+e.VALUE]-u)*p}o==_.setup?l.position=l.data.position+(u-l.data.position)*s:l.position+=(u-l.position)*s}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_VALUE=-1,e.VALUE=1,e}(vt),Dt=function(t){function e(e){return t.call(this,e)||this}return nt(e,t),e.prototype.getPropertyId=function(){return(st.pathConstraintSpacing<<24)+this.pathConstraintIndex},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(l.active)if(r<h[0])switch(o){case _.setup:return void(l.spacing=l.data.spacing);case _.first:l.spacing+=(l.data.spacing-l.spacing)*s}else{var u=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_VALUE];else{var c=_t.binarySearch(h,r,e.ENTRIES);u=h[c+e.PREV_VALUE];var d=h[c],p=this.getCurvePercent(c/e.ENTRIES-1,1-(r-d)/(h[c+e.PREV_TIME]-d));u+=(h[c+e.VALUE]-u)*p}o==_.setup?l.spacing=l.data.spacing+(u-l.data.spacing)*s:l.spacing+=(u-l.spacing)*s}},e}(Rt),Nt=function(t){function e(i){var r=t.call(this,i)||this;return r.frames=Y.newFloatArray(i*e.ENTRIES),r}return nt(e,t),e.prototype.getPropertyId=function(){return(st.pathConstraintMix<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(t,i,r,n){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.ROTATE]=r,this.frames[t+e.TRANSLATE]=n},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(l.active)if(r<h[0])switch(o){case _.setup:return l.rotateMix=l.data.rotateMix,void(l.translateMix=l.data.translateMix);case _.first:l.rotateMix+=(l.data.rotateMix-l.rotateMix)*s,l.translateMix+=(l.data.translateMix-l.translateMix)*s}else{var u=0,c=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_ROTATE],c=h[h.length+e.PREV_TRANSLATE];else{var d=_t.binarySearch(h,r,e.ENTRIES);u=h[d+e.PREV_ROTATE],c=h[d+e.PREV_TRANSLATE];var p=h[d],f=this.getCurvePercent(d/e.ENTRIES-1,1-(r-p)/(h[d+e.PREV_TIME]-p));u+=(h[d+e.ROTATE]-u)*f,c+=(h[d+e.TRANSLATE]-c)*f}o==_.setup?(l.rotateMix=l.data.rotateMix+(u-l.data.rotateMix)*s,l.translateMix=l.data.translateMix+(c-l.data.translateMix)*s):(l.rotateMix+=(u-l.rotateMix)*s,l.translateMix+=(c-l.translateMix)*s)}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_ROTATE=-2,e.PREV_TRANSLATE=-1,e.ROTATE=1,e.TRANSLATE=2,e}(vt),Ut=function(){function t(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new Lt(this),this.propertyIDs=new L,this.animationsChanged=!1,this.trackEntryPool=new W((function(){return new Ft})),this.data=t}return t.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,i=0,r=e.length;i<r;i++){var n=e[i];if(null!=n){n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;var s=t*n.timeScale;if(n.delay>0){if(n.delay-=s,n.delay>0)continue;s=-n.delay,n.delay=0}var o=n.next;if(null!=o){var a=n.trackLast-o.delay;if(a>=0){for(o.delay=0,o.trackTime+=0==n.timeScale?0:(a/n.timeScale+t)*o.timeScale,n.trackTime+=s,this.setCurrent(i,o,!0);null!=o.mixingFrom;)o.mixTime+=t,o=o.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&null==n.mixingFrom){e[i]=null,this.queue.end(n),this.disposeNext(n);continue}if(null!=n.mixingFrom&&this.updateMixingFrom(n,t)){var h=n.mixingFrom;for(n.mixingFrom=null,null!=h&&(h.mixingTo=null);null!=h;)this.queue.end(h),h=h.mixingFrom}n.trackTime+=s}}this.queue.drain()},t.prototype.updateMixingFrom=function(t,e){var i=t.mixingFrom;if(null==i)return!0;var r=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,null!=i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),r):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)},t.prototype.apply=function(e){if(null==e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var i=this.events,r=this.tracks,n=!1,s=0,o=r.length;s<o;s++){var a=r[s];if(!(null==a||a.delay>0)){n=!0;var h=0==s?_.first:a.mixBlend,l=a.alpha;null!=a.mixingFrom?l*=this.applyMixingFrom(a,e,h):a.trackTime>=a.trackEnd&&null==a.next&&(l=0);var u=a.animationLast,c=a.getAnimationTime(),d=a.animation.timelines.length,p=a.animation.timelines;if(0==s&&1==l||h==_.add)for(var f=0;f<d;f++){Y.webkit602BugfixHelper(l,h);var m=p[f];m instanceof wt?this.applyAttachmentTimeline(m,e,c,h,!0):m.apply(e,u,c,i,l,h,g.mixIn)}else{var v=a.timelineMode,y=0==a.timelinesRotation.length;y&&Y.setArraySize(a.timelinesRotation,d<<1,null);var b=a.timelinesRotation;for(f=0;f<d;f++){var x=p[f],T=v[f]==t.SUBSEQUENT?h:_.setup;x instanceof yt?this.applyRotateTimeline(x,e,c,l,T,b,f<<1,y):x instanceof wt?this.applyAttachmentTimeline(x,e,c,h,!0):(Y.webkit602BugfixHelper(l,h),x.apply(e,u,c,i,l,T,g.mixIn))}}this.queueEvents(a,c),i.length=0,a.nextAnimationLast=c,a.nextTrackLast=a.trackTime}}for(var S=this.unkeyedState+t.SETUP,E=e.slots,w=0,A=e.slots.length;w<A;w++){var I=E[w];if(I.attachmentState==S){var C=I.data.attachmentName;I.setAttachment(null==C?null:e.getAttachment(I.data.index,C))}}return this.unkeyedState+=2,this.queue.drain(),n},t.prototype.applyMixingFrom=function(e,i,r){var n=e.mixingFrom;null!=n.mixingFrom&&this.applyMixingFrom(n,i,r);var s=0;0==e.mixDuration?(s=1,r==_.first&&(r=_.setup)):((s=e.mixTime/e.mixDuration)>1&&(s=1),r!=_.first&&(r=n.mixBlend));var o=s<n.eventThreshold?this.events:null,a=s<n.attachmentThreshold,h=s<n.drawOrderThreshold,l=n.animationLast,u=n.getAnimationTime(),c=n.animation.timelines.length,d=n.animation.timelines,p=n.alpha*e.interruptAlpha,f=p*(1-s);if(r==_.add)for(var m=0;m<c;m++)d[m].apply(i,l,u,o,f,r,g.mixOut);else{var v=n.timelineMode,y=n.timelineHoldMix,b=0==n.timelinesRotation.length;b&&Y.setArraySize(n.timelinesRotation,c<<1,null);var x=n.timelinesRotation;for(n.totalAlpha=0,m=0;m<c;m++){var T=d[m],S=g.mixOut,E=void 0,w=0;switch(v[m]){case t.SUBSEQUENT:if(!h&&T instanceof Ot)continue;E=r,w=f;break;case t.FIRST:E=_.setup,w=f;break;case t.HOLD_SUBSEQUENT:E=r,w=p;break;case t.HOLD_FIRST:E=_.setup,w=p;break;default:E=_.setup;var A=y[m];w=p*Math.max(0,1-A.mixTime/A.mixDuration)}n.totalAlpha+=w,T instanceof yt?this.applyRotateTimeline(T,i,u,w,E,x,m<<1,b):T instanceof wt?this.applyAttachmentTimeline(T,i,u,E,a):(Y.webkit602BugfixHelper(w,r),h&&T instanceof Ot&&E==_.setup&&(S=g.mixIn),T.apply(i,l,u,o,w,E,S))}}return e.mixDuration>0&&this.queueEvents(n,u),this.events.length=0,n.nextAnimationLast=u,n.nextTrackLast=n.trackTime,s},t.prototype.applyAttachmentTimeline=function(e,i,r,n,s){var o=i.slots[e.slotIndex];if(o.bone.active){var a,h=e.frames;r<h[0]?n!=_.setup&&n!=_.first||this.setAttachment(i,o,o.data.attachmentName,s):(a=r>=h[h.length-1]?h.length-1:_t.binarySearch(h,r)-1,this.setAttachment(i,o,e.attachmentNames[a],s)),o.attachmentState<=this.unkeyedState&&(o.attachmentState=this.unkeyedState+t.SETUP)}},t.prototype.setAttachment=function(e,i,r,n){i.setAttachment(null==r?null:e.getAttachment(i.data.index,r)),n&&(i.attachmentState=this.unkeyedState+t.CURRENT)},t.prototype.applyRotateTimeline=function(t,e,i,r,n,s,o,a){if(a&&(s[o]=0),1!=r){var h=t,l=h.frames,u=e.bones[h.boneIndex];if(u.active){var c=0,d=0;if(i<l[0])switch(n){case _.setup:u.rotation=u.data.rotation;default:return;case _.first:c=u.rotation,d=u.data.rotation}else if(c=n==_.setup?u.data.rotation:u.rotation,i>=l[l.length-yt.ENTRIES])d=u.data.rotation+l[l.length+yt.PREV_ROTATION];else{var p=_t.binarySearch(l,i,yt.ENTRIES),f=l[p+yt.PREV_ROTATION],m=l[p],v=h.getCurvePercent((p>>1)-1,1-(i-m)/(l[p+yt.PREV_TIME]-m));d=l[p+yt.ROTATION]-f,d=f+(d-=360*(16384-(16384.499999999996-d/360|0)))*v+u.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0))}var y=0,b=d-c;if(0==(b-=360*(16384-(16384.499999999996-b/360|0))))y=s[o];else{var x=0,T=0;a?(x=0,T=b):(x=s[o],T=s[o+1]);var S=b>0,E=x>=0;G.signum(T)!=G.signum(b)&&Math.abs(T)<=90&&(Math.abs(x)>180&&(x+=360*G.signum(x)),E=S),y=b+x-x%360,E!=S&&(y+=360*G.signum(x)),s[o]=y}s[o+1]=b,c+=y*r,u.rotation=c-360*(16384-(16384.499999999996-c/360|0))}}else t.apply(e,0,i,null,1,n,g.mixIn)},t.prototype.queueEvents=function(t,e){for(var i=t.animationStart,r=t.animationEnd,n=r-i,s=t.trackLast%n,o=this.events,a=0,h=o.length;a<h;a++){var l=o[a];if(l.time<s)break;l.time>r||this.queue.event(t,l)}for((t.loop?0==n||s>t.trackTime%n:e>=r&&t.animationLast<r)&&this.queue.complete(t);a<h;a++)o[a].time<i||this.queue.event(t,o[a])},t.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,i=this.tracks.length;e<i;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},t.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var i=e;;){var r=i.mixingFrom;if(null==r)break;this.queue.end(r),i.mixingFrom=null,i.mixingTo=null,i=r}this.tracks[e.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(t,e,i){var r=this.expandToIndex(t);this.tracks[t]=e,null!=r&&(i&&this.queue.interrupt(r),e.mixingFrom=r,r.mixingTo=e,e.mixTime=0,null!=r.mixingFrom&&r.mixDuration>0&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)},t.prototype.setAnimation=function(t,e,i){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,i)},t.prototype.setAnimationWith=function(t,e,i){if(null==e)throw new Error("animation cannot be null.");var r=!0,n=this.expandToIndex(t);null!=n&&(-1==n.nextTrackLast?(this.tracks[t]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.disposeNext(n),n=n.mixingFrom,r=!1):this.disposeNext(n));var s=this.trackEntry(t,e,i,n);return this.setCurrent(t,s,r),this.queue.drain(),s},t.prototype.addAnimation=function(t,e,i,r){var n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,n,i,r)},t.prototype.addAnimationWith=function(t,e,i,r){if(null==e)throw new Error("animation cannot be null.");var n=this.expandToIndex(t);if(null!=n)for(;null!=n.next;)n=n.next;var s=this.trackEntry(t,e,i,n);if(null==n)this.setCurrent(t,s,!0),this.queue.drain();else if(n.next=s,r<=0){var o=n.animationEnd-n.animationStart;0!=o?(n.loop?r+=o*(1+(n.trackTime/o|0)):r+=Math.max(o,n.trackTime),r-=this.data.getMix(n.animation,e)):r=n.trackTime}return s.delay=r,s},t.prototype.setEmptyAnimation=function(e,i){var r=this.setAnimationWith(e,t.emptyAnimation,!1);return r.mixDuration=i,r.trackEnd=i,r},t.prototype.addEmptyAnimation=function(e,i,r){r<=0&&(r-=i);var n=this.addAnimationWith(e,t.emptyAnimation,!1,r);return n.mixDuration=i,n.trackEnd=i,n},t.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,r=this.tracks.length;i<r;i++){var n=this.tracks[i];null!=n&&this.setEmptyAnimation(n.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},t.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(Y.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},t.prototype.trackEntry=function(t,e,i,r){var n=this.trackEntryPool.obtain();return n.trackIndex=t,n.animation=e,n.loop=i,n.holdPrevious=!1,n.eventThreshold=0,n.attachmentThreshold=0,n.drawOrderThreshold=0,n.animationStart=0,n.animationEnd=e.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.interruptAlpha=1,n.mixTime=0,n.mixDuration=null==r?0:this.data.getMix(r.animation,e),n.mixBlend=_.replace,n},t.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=0,e=this.tracks.length;t<e;t++){var i=this.tracks[t];if(null!=i){for(;null!=i.mixingFrom;)i=i.mixingFrom;do{null!=i.mixingFrom&&i.mixBlend==_.add||this.computeHold(i),i=i.mixingTo}while(null!=i)}}},t.prototype.computeHold=function(e){var i=e.mixingTo,r=e.animation.timelines,n=e.animation.timelines.length,s=Y.setArraySize(e.timelineMode,n);e.timelineHoldMix.length=0;var o=Y.setArraySize(e.timelineHoldMix,n),a=this.propertyIDs;if(null!=i&&i.holdPrevious)for(var h=0;h<n;h++)s[h]=a.add(r[h].getPropertyId())?t.HOLD_FIRST:t.HOLD_SUBSEQUENT;else t:for(h=0;h<n;h++){var l=r[h],u=l.getPropertyId();if(a.add(u))if(null==i||l instanceof wt||l instanceof Ot||l instanceof Ct||!i.animation.hasTimeline(u))s[h]=t.FIRST;else{for(var c=i.mixingTo;null!=c;c=c.mixingTo)if(!c.animation.hasTimeline(u)){if(e.mixDuration>0){s[h]=t.HOLD_MIX,o[h]=c;continue t}break}s[h]=t.HOLD_FIRST}else s[h]=t.SUBSEQUENT}},t.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},t.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},t.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,i,r){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,i,r)},t.prototype.addAnimationByName=function(e,i,r,n){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,i,r,n)},t.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},t.emptyAnimation=new _t("<empty>",[],0),t.SUBSEQUENT=0,t.FIRST=1,t.HOLD_SUBSEQUENT=2,t.HOLD_FIRST=3,t.HOLD_MIX=4,t.SETUP=1,t.CURRENT=2,t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}(),Ft=function(){function t(){this.mixBlend=_.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(t.prototype,"time",{get:function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),t.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t}(),Lt=function(){function t(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return t.prototype.start=function(t){this.objects.push(gt.start),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.interrupt=function(t){this.objects.push(gt.interrupt),this.objects.push(t)},t.prototype.end=function(t){this.objects.push(gt.end),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.dispose=function(t){this.objects.push(gt.dispose),this.objects.push(t)},t.prototype.complete=function(t){this.objects.push(gt.complete),this.objects.push(t)},t.prototype.event=function(t,e){this.objects.push(gt.event),this.objects.push(t),this.objects.push(e)},t.prototype.deprecateStuff=function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,i=0;i<t.length;i+=2){var r=t[i],n=t[i+1];switch(r){case gt.start:null!=n.listener&&n.listener.start&&n.listener.start(n);for(var s=0;s<e.length;s++)e[s].start&&e[s].start(n);n.onStart&&this.deprecateStuff()&&n.onStart(n.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(n.trackIndex);break;case gt.interrupt:for(null!=n.listener&&n.listener.interrupt&&n.listener.interrupt(n),s=0;s<e.length;s++)e[s].interrupt&&e[s].interrupt(n);break;case gt.end:for(null!=n.listener&&n.listener.end&&n.listener.end(n),s=0;s<e.length;s++)e[s].end&&e[s].end(n);n.onEnd&&this.deprecateStuff()&&n.onEnd(n.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(n.trackIndex);case gt.dispose:for(null!=n.listener&&n.listener.dispose&&n.listener.dispose(n),s=0;s<e.length;s++)e[s].dispose&&e[s].dispose(n);this.animState.trackEntryPool.free(n);break;case gt.complete:for(null!=n.listener&&n.listener.complete&&n.listener.complete(n),s=0;s<e.length;s++)e[s].complete&&e[s].complete(n);var o=G.toInt(n.loopsCount());n.onComplete&&this.deprecateStuff()&&n.onComplete(n.trackIndex,o),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(n.trackIndex,o);break;case gt.event:var a=t[2+i++];for(null!=n.listener&&n.listener.event&&n.listener.event(n,a),s=0;s<e.length;s++)e[s].event&&e[s].event(n,a);n.onEvent&&this.deprecateStuff()&&n.onEvent(n.trackIndex,a),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(n.trackIndex,a)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t.deprecatedWarning1=!1,t}();!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(gt||(gt={}));var kt,Bt=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}(),Gt=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,i){var r=this.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);var n=this.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);this.setMixWith(r,n,i)},t.prototype.setMixByName=function(e,i,r){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,i,r)},t.prototype.setMixWith=function(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var r=t.name+"."+e.name;this.animationToMixTime[r]=i},t.prototype.getMix=function(t,e){var i=t.name+"."+e.name,r=this.animationToMixTime[i];return void 0===r?this.defaultMix:r},t.deprecatedWarning1=!1,t}(),Xt=function(){function t(t){this.atlas=t}return t.prototype.newRegionAttachment=function(t,e,i){var r=this.atlas.findRegion(i);if(null==r)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");var n=new pt(e);return n.region=r,n},t.prototype.newMeshAttachment=function(t,e,i){var r=this.atlas.findRegion(i);if(null==r)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");var n=new ut(e);return n.region=r,n},t.prototype.newBoundingBoxAttachment=function(t,e){return new ht(e)},t.prototype.newPathAttachment=function(t,e){return new ct(e)},t.prototype.newPointAttachment=function(t,e){return new dt(e)},t.prototype.newClippingAttachment=function(t,e){return new lt(e)},t}(),jt=function(){function t(t,e,i){if(this.matrix=new u.y3,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),t.prototype.isActive=function(){return this.active},t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(t,e,i,r,n,s,o){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=r,this.ascaleY=n,this.ashearX=s,this.ashearY=o,this.appliedValid=!0;var a=this.parent,h=this.matrix,l=this.skeleton.scaleX,u=Z.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==a){var c=this.skeleton,d=i+90+o;return h.a=G.cosDeg(i+s)*r*l,h.c=G.cosDeg(d)*n*l,h.b=G.sinDeg(i+s)*r*u,h.d=G.sinDeg(d)*n*u,h.tx=t*l+c.x,void(h.ty=e*u+c.y)}var p=a.matrix.a,f=a.matrix.c,m=a.matrix.b,_=a.matrix.d;switch(h.tx=p*t+f*e+a.matrix.tx,h.ty=m*t+_*e+a.matrix.ty,this.data.transformMode){case b.Normal:d=i+90+o;var g=G.cosDeg(i+s)*r,v=G.cosDeg(d)*n,y=G.sinDeg(i+s)*r,x=G.sinDeg(d)*n;return h.a=p*g+f*y,h.c=p*v+f*x,h.b=m*g+_*y,void(h.d=m*v+_*x);case b.OnlyTranslation:d=i+90+o,h.a=G.cosDeg(i+s)*r,h.c=G.cosDeg(d)*n,h.b=G.sinDeg(i+s)*r,h.d=G.sinDeg(d)*n;break;case b.NoRotationOrReflection:var T=0;(w=p*p+m*m)>1e-4?(w=Math.abs(p*_-f*m)/w,p/=this.skeleton.scaleX,f=(m/=this.skeleton.scaleY)*w,_=p*w,T=Math.atan2(m,p)*G.radDeg):(p=0,m=0,T=90-Math.atan2(_,f)*G.radDeg);var S=i+s-T,E=i+o-T+90;g=G.cosDeg(S)*r,v=G.cosDeg(E)*n,y=G.sinDeg(S)*r,x=G.sinDeg(E)*n,h.a=p*g-f*y,h.c=p*v-f*x,h.b=m*g+_*y,h.d=m*v+_*x;break;case b.NoScale:case b.NoScaleOrReflection:var w,A=G.cosDeg(i),I=G.sinDeg(i),C=(p*A+f*I)/l,O=(m*A+_*I)/u;(w=Math.sqrt(C*C+O*O))>1e-5&&(w=1/w),C*=w,O*=w,w=Math.sqrt(C*C+O*O),this.data.transformMode==b.NoScale&&p*_-f*m<0!=(Z.yDown?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(w=-w);var M=Math.PI/2+Math.atan2(O,C),P=Math.cos(M)*w,R=Math.sin(M)*w;g=G.cosDeg(s)*r,v=G.cosDeg(90+o)*n,y=G.sinDeg(s)*r,x=G.sinDeg(90+o)*n,h.a=C*g+P*y,h.c=C*v+P*x,h.b=O*g+R*y,h.d=O*v+R*x}h.a*=l,h.c*=l,h.b*=u,h.d*=u},t.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*G.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*G.radDeg},t.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},t.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,e=this.matrix;if(null==t)return this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*G.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,void(this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*G.radDeg);var i=t.matrix,r=1/(i.a*i.d-i.b*i.c),n=e.tx-i.tx,s=e.ty-i.ty;this.ax=n*i.d*r-s*i.c*r,this.ay=s*i.a*r-n*i.b*r;var o=r*i.d,a=r*i.a,h=r*i.c,l=r*i.b,u=o*e.a-h*e.b,c=o*e.c-h*e.d,d=a*e.b-l*e.a,p=a*e.d-l*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(u*u+d*d),this.ascaleX>1e-4){var f=u*p-c*d;this.ascaleY=f/this.ascaleX,this.ashearY=Math.atan2(u*c+d*p,f)*G.radDeg,this.arotation=Math.atan2(d,u)*G.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(c*c+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,c)*G.radDeg},t.prototype.worldToLocal=function(t){var e=this.matrix,i=e.a,r=e.c,n=e.b,s=e.d,o=1/(i*s-r*n),a=t.x-e.tx,h=t.y-e.ty;return t.x=a*s*o-h*r*o,t.y=h*i*o-a*n*o,t},t.prototype.localToWorld=function(t){var e=this.matrix,i=t.x,r=t.y;return t.x=i*e.a+r*e.c+e.tx,t.y=i*e.b+r*e.d+e.ty,t},t.prototype.worldToLocalRotation=function(t){var e=G.sinDeg(t),i=G.cosDeg(t),r=this.matrix;return Math.atan2(r.a*e-r.b*i,r.d*i-r.c*e)*G.radDeg},t.prototype.localToWorldRotation=function(t){var e=G.sinDeg(t),i=G.cosDeg(t),r=this.matrix;return Math.atan2(i*r.b+e*r.d,i*r.a+e*r.c)*G.radDeg},t.prototype.rotateWorld=function(t){var e=this.matrix,i=e.a,r=e.c,n=e.b,s=e.d,o=G.cosDeg(t),a=G.sinDeg(t);e.a=o*i-a*n,e.c=o*r-a*s,e.b=a*i+o*n,e.d=a*r+o*s,this.appliedValid=!1},t}(),Vt=function(t,e,i){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=b.Normal,this.skinRequired=!1,this.color=new B,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i},Yt=function(t,e,i){this.name=t,this.order=e,this.skinRequired=i},Ht=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},Wt=function(t){this.name=t},zt=function(){function t(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},t.prototype.apply1=function(t,e,i,r,n,s,o){t.appliedValid||t.updateAppliedTransform();var a=t.parent.matrix,h=a.a,l=a.c,u=a.b,c=a.d,d=-t.ashearX-t.arotation,p=0,f=0;switch(t.data.transformMode){case b.OnlyTranslation:p=e-t.worldX,f=i-t.worldY;break;case b.NoRotationOrReflection:var m=Math.abs(h*c-l*u)/(h*h+u*u),_=h/t.skeleton.scaleX,g=u/t.skeleton.scaleY;l=-g*m*t.skeleton.scaleX,c=_*m*t.skeleton.scaleY,d+=Math.atan2(g,_)*G.radDeg;default:var v=e-a.tx,y=i-a.ty,x=h*c-l*u;p=(v*c-y*l)/x-t.ax,f=(y*h-v*u)/x-t.ay}d+=Math.atan2(f,p)*G.radDeg,t.ascaleX<0&&(d+=180),d>180?d-=360:d<-180&&(d+=360);var T=t.ascaleX,S=t.ascaleY;if(r||n){switch(t.data.transformMode){case b.NoScale:case b.NoScaleOrReflection:p=e-t.worldX,f=i-t.worldY}var E=t.data.length*T,w=Math.sqrt(p*p+f*f);(r&&w<E||n&&w>E&&E>1e-4)&&(T*=m=(w/E-1)*o+1,s&&(S*=m))}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+d*o,T,S,t.ashearX,t.ashearY)},t.prototype.apply2=function(t,e,i,r,n,s,o,a){if(0!=a){t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var h=t.ax,l=t.ay,u=t.ascaleX,c=u,d=t.ascaleY,p=e.ascaleX,f=t.matrix,m=0,_=0,g=0;u<0?(u=-u,m=180,g=-1):(m=0,g=1),d<0&&(d=-d,g=-g),p<0?(p=-p,_=180):_=0;var v=e.ax,y=0,b=0,x=0,T=f.a,S=f.c,E=f.b,w=f.d,A=Math.abs(u-d)<=1e-4;A?(b=T*v+S*(y=e.ay)+f.tx,x=E*v+w*y+f.ty):(y=0,b=T*v+f.tx,x=E*v+f.ty);var I=t.parent.matrix;T=I.a,S=I.c,E=I.b;var C,O,M=1/(T*(w=I.d)-S*E),P=b-I.tx,R=x-I.ty,D=(P*w-R*S)*M-h,N=(R*T-P*E)*M-l,U=Math.sqrt(D*D+N*N),F=e.data.length*p;if(U<1e-4)return this.apply1(t,i,r,!1,s,!1,a),void e.updateWorldTransformWith(v,y,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);var L=((P=i-I.tx)*w-(R=r-I.ty)*S)*M-h,k=(R*T-P*E)*M-l,B=L*L+k*k;if(0!=o){o*=u*(p+1)/2;var X=Math.sqrt(B),j=X-U-F*u+o;if(j>0){var V=Math.min(1,j/(2*o))-1;B=(L-=(V=(j-o*(1-V*V))/X)*L)*L+(k-=V*k)*k}}t:if(A){var Y=(B-U*U-(F*=u)*F)/(2*U*F);Y<-1?Y=-1:Y>1&&(Y=1,s&&(c*=(Math.sqrt(B)/(U+F)-1)*a+1)),O=Math.acos(Y)*n,T=U+F*Y,S=F*Math.sin(O),C=Math.atan2(k*T-L*S,L*T+k*S)}else{var H=(T=u*F)*T,W=(S=d*F)*S,z=Math.atan2(k,L),q=-2*W*U,K=W-H;if((w=q*q-4*K*(E=W*U*U+H*B-H*W))>=0){var Z=Math.sqrt(w);q<0&&(Z=-Z);var $=(Z=-(q+Z)/2)/K,J=E/Z,Q=Math.abs($)<Math.abs(J)?$:J;if(Q*Q<=B){R=Math.sqrt(B-Q*Q)*n,C=z-Math.atan2(R,Q),O=Math.atan2(R/d,(Q-U)/u);break t}}var tt=G.PI,et=U-T,it=et*et,rt=0,nt=0,st=U+T,ot=st*st,at=0;(E=-T*U/(H-W))>=-1&&E<=1&&(E=Math.acos(E),(w=(P=T*Math.cos(E)+U)*P+(R=S*Math.sin(E))*R)<it&&(tt=E,it=w,et=P,rt=R),w>ot&&(nt=E,ot=w,st=P,at=R)),B<=(it+ot)/2?(C=z-Math.atan2(rt*n,et),O=tt*n):(C=z-Math.atan2(at*n,st),O=nt*n)}var ht=Math.atan2(y,v)*g,lt=t.arotation;(C=(C-ht)*G.radDeg+m-lt)>180?C-=360:C<-180&&(C+=360),t.updateWorldTransformWith(h,l,lt+C*a,c,t.ascaleY,0,0),lt=e.arotation,(O=((O+ht)*G.radDeg-e.ashearX)*g+_-lt)>180?O-=360:O<-180&&(O+=360),e.updateWorldTransformWith(v,y,lt+O*a,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}else e.updateWorldTransform()},t}(),qt=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i.bendDirection=1,i.compress=!1,i.stretch=!1,i.uniform=!1,i.mix=1,i.softness=0,i}return nt(e,t),e}(Yt),Kt=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i}return nt(e,t),e}(Yt);!function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(kt||(kt={}));var Zt=function(){function t(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var i=0,r=t.bones.length;i<r;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof ct){var i=this.rotateMix,r=this.translateMix,n=i>0;if(r>0||n){var s=this.data,o=s.spacingMode,a=o==kt.Length,h=s.rotateMode,l=h==y.Tangent,u=h==y.ChainScale,c=this.bones.length,d=l?c:c+1,p=this.bones,f=Y.setArraySize(this.spaces,d),m=null,_=this.spacing;if(u||a){u&&(m=Y.setArraySize(this.lengths,c));for(var g=0,b=d-1;g<b;){var x=(P=p[g]).data.length;if(x<t.epsilon)u&&(m[g]=0),f[++g]=0;else{var T=x*P.matrix.a,S=x*P.matrix.b,E=Math.sqrt(T*T+S*S);u&&(m[g]=E),f[++g]=(a?x+_:_)*E/x}}}else for(g=1;g<d;g++)f[g]=_;var w=this.computeWorldPositions(e,d,l,s.positionMode==v.Percent,o==kt.Percent),A=w[0],I=w[1],C=s.offsetRotation,O=!1;0==C?O=h==y.Chain:(O=!1,C*=(M=this.target.bone.matrix).a*M.d-M.b*M.c>0?G.degRad:-G.degRad),g=0;for(var M=3;g<c;g++,M+=3){var P,R=(P=p[g]).matrix;R.tx+=(A-R.tx)*r,R.ty+=(I-R.ty)*r;var D=(T=w[M])-A,N=(S=w[M+1])-I;if(u){var U=m[g];if(0!=U){var F=(Math.sqrt(D*D+N*N)/U-1)*i+1;R.a*=F,R.b*=F}}if(A=T,I=S,n){var L=R.a,k=R.c,B=R.b,X=R.d,j=0,V=0,H=0;if(j=l?w[M-1]:0==f[g+1]?w[M+2]:Math.atan2(N,D),j-=Math.atan2(B,L),O){V=Math.cos(j),H=Math.sin(j);var W=P.data.length;A+=(W*(V*L-H*B)-D)*i,I+=(W*(H*L+V*B)-N)*i}else j+=C;j>G.PI?j-=G.PI2:j<-G.PI&&(j+=G.PI2),j*=i,V=Math.cos(j),H=Math.sin(j),R.a=V*L-H*B,R.c=V*k-H*X,R.b=H*L+V*B,R.d=H*k+V*X}P.appliedValid=!1}}}},t.prototype.computeWorldPositions=function(e,i,r,n,s){var o=this.target,a=this.position,h=this.spaces,l=Y.setArraySize(this.positions,3*i+2),u=null,c=e.closed,d=e.worldVerticesLength,p=d/6,f=t.NONE;if(!e.constantSpeed){var m=e.lengths,_=m[p-=c?1:2];if(n&&(a*=_),s)for(var g=0;g<i;g++)h[g]*=_;u=Y.setArraySize(this.world,8),g=0;for(var v=0,y=0;g<i;g++,v+=3){var b=a+=H=h[g];if(c)(b%=_)<0&&(b+=_),y=0;else{if(b<0){f!=t.BEFORE&&(f=t.BEFORE,e.computeWorldVertices(o,2,4,u,0,2)),this.addBeforePosition(b,u,0,l,v);continue}if(b>_){f!=t.AFTER&&(f=t.AFTER,e.computeWorldVertices(o,d-6,4,u,0,2)),this.addAfterPosition(b-_,u,0,l,v);continue}}for(;;y++){var x=m[y];if(!(b>x)){0==y?b/=x:b=(b-(K=m[y-1]))/(x-K);break}}y!=f&&(f=y,c&&y==p?(e.computeWorldVertices(o,d-4,4,u,0,2),e.computeWorldVertices(o,0,4,u,4,2)):e.computeWorldVertices(o,6*y+2,8,u,0,2)),this.addCurvePosition(b,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,v,r||g>0&&0==H)}return l}c?(d+=2,u=Y.setArraySize(this.world,d),e.computeWorldVertices(o,2,d-4,u,0,2),e.computeWorldVertices(o,0,2,u,d-4,2),u[d-2]=u[0],u[d-1]=u[1]):(p--,d-=4,u=Y.setArraySize(this.world,d),e.computeWorldVertices(o,2,d,u,0,2));for(var T=Y.setArraySize(this.curves,p),S=0,E=u[0],w=u[1],A=0,I=0,C=0,O=0,M=0,P=0,R=0,D=0,N=0,U=0,F=0,L=0,k=0,B=0,G=(g=0,2);g<p;g++,G+=6)A=u[G],I=u[G+1],C=u[G+2],O=u[G+3],F=2*(R=.1875*(E-2*A+C))+(N=.09375*(3*(A-C)-E+(M=u[G+4]))),L=2*(D=.1875*(w-2*I+O))+(U=.09375*(3*(I-O)-w+(P=u[G+5]))),k=.75*(A-E)+R+.16666667*N,B=.75*(I-w)+D+.16666667*U,S+=Math.sqrt(k*k+B*B),k+=F,B+=L,F+=N,L+=U,S+=Math.sqrt(k*k+B*B),k+=F,B+=L,S+=Math.sqrt(k*k+B*B),k+=F+N,B+=L+U,S+=Math.sqrt(k*k+B*B),T[g]=S,E=M,w=P;if(n&&(a*=S),s)for(g=0;g<i;g++)h[g]*=S;for(var X=this.segments,j=0,V=(g=0,v=0,y=0,0);g<i;g++,v+=3){var H;if(b=a+=H=h[g],c)(b%=S)<0&&(b+=S),y=0;else{if(b<0){this.addBeforePosition(b,u,0,l,v);continue}if(b>S){this.addAfterPosition(b-S,u,d-4,l,v);continue}}for(;;y++){var W=T[y];if(!(b>W)){0==y?b/=W:b=(b-(K=T[y-1]))/(W-K);break}}if(y!=f){f=y;var z=6*y;for(E=u[z],w=u[z+1],A=u[z+2],I=u[z+3],C=u[z+4],O=u[z+5],F=2*(R=.03*(E-2*A+C))+(N=.006*(3*(A-C)-E+(M=u[z+6]))),L=2*(D=.03*(w-2*I+O))+(U=.006*(3*(I-O)-w+(P=u[z+7]))),k=.3*(A-E)+R+.16666667*N,B=.3*(I-w)+D+.16666667*U,j=Math.sqrt(k*k+B*B),X[0]=j,z=1;z<8;z++)k+=F,B+=L,F+=N,L+=U,j+=Math.sqrt(k*k+B*B),X[z]=j;k+=F,B+=L,j+=Math.sqrt(k*k+B*B),X[8]=j,k+=F+N,B+=L+U,j+=Math.sqrt(k*k+B*B),X[9]=j,V=0}for(b*=j;;V++){var q=X[V];if(!(b>q)){var K;0==V?b/=q:b=V+(b-(K=X[V-1]))/(q-K);break}}this.addCurvePosition(.1*b,E,w,A,I,C,O,M,P,l,v,r||g>0&&0==H)}return l},t.prototype.addBeforePosition=function(t,e,i,r,n){var s=e[i],o=e[i+1],a=e[i+2]-s,h=e[i+3]-o,l=Math.atan2(h,a);r[n]=s+t*Math.cos(l),r[n+1]=o+t*Math.sin(l),r[n+2]=l},t.prototype.addAfterPosition=function(t,e,i,r,n){var s=e[i+2],o=e[i+3],a=s-e[i],h=o-e[i+1],l=Math.atan2(h,a);r[n]=s+t*Math.cos(l),r[n+1]=o+t*Math.sin(l),r[n+2]=l},t.prototype.addCurvePosition=function(t,e,i,r,n,s,o,a,h,l,u,c){(0==t||isNaN(t))&&(t=1e-4);var d=t*t,p=d*t,f=1-t,m=f*f,_=m*f,g=f*t,v=3*g,y=f*v,b=v*t,x=e*_+r*y+s*b+a*p,T=i*_+n*y+o*b+h*p;l[u]=x,l[u+1]=T,c&&(l[u+2]=Math.atan2(T-(i*m+n*g*2+o*d),x-(e*m+r*g*2+s*d)))},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}(),$t=function(){function t(t,e){if(this.deform=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new B,this.darkColor=null==t.darkColor?null:new B,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},t.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}(),Jt=function(){function t(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new z,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix,n=this.target,s=n.matrix,o=s.a,a=s.c,h=s.b,l=s.d,u=o*l-a*h>0?G.degRad:-G.degRad,c=this.data.offsetRotation*u,d=this.data.offsetShearY*u,p=this.bones,f=0,m=p.length;f<m;f++){var _=p[f],g=!1,v=_.matrix;if(0!=t){var y=v.a,b=v.c,x=v.b,T=v.d;(C=Math.atan2(h,o)-Math.atan2(x,y)+c)>G.PI?C-=G.PI2:C<-G.PI&&(C+=G.PI2),C*=t;var S=Math.cos(C),E=Math.sin(C);v.a=S*y-E*x,v.c=S*b-E*T,v.b=E*y+S*x,v.d=E*b+S*T,g=!0}if(0!=e){var w=this.temp;n.localToWorld(w.set(this.data.offsetX,this.data.offsetY)),v.tx+=(w.x-v.tx)*e,v.ty+=(w.y-v.ty)*e,g=!0}if(i>0){var A=Math.sqrt(v.a*v.a+v.b*v.b),I=Math.sqrt(o*o+h*h);A>1e-5&&(A=(A+(I-A+this.data.offsetScaleX)*i)/A),v.a*=A,v.b*=A,A=Math.sqrt(v.c*v.c+v.d*v.d),I=Math.sqrt(a*a+l*l),A>1e-5&&(A=(A+(I-A+this.data.offsetScaleY)*i)/A),v.c*=A,v.d*=A,g=!0}if(r>0){b=v.c,T=v.d;var C,O=Math.atan2(T,b);(C=Math.atan2(l,a)-Math.atan2(h,o)-(O-Math.atan2(v.b,v.a)))>G.PI?C-=G.PI2:C<-G.PI&&(C+=G.PI2),C=O+(C+d)*r,A=Math.sqrt(b*b+T*T),v.c=Math.cos(C)*A,v.d=Math.sin(C)*A,g=!0}g&&(_.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix,n=this.target,s=n.matrix,o=s.a,a=s.c,h=s.b,l=s.d,u=o*l-a*h>0?G.degRad:-G.degRad,c=this.data.offsetRotation*u,d=this.data.offsetShearY*u,p=this.bones,f=0,m=p.length;f<m;f++){var _,g=p[f],v=!1,y=g.matrix;if(0!=t){var b=y.a,x=y.c,T=y.b,S=y.d;(_=Math.atan2(h,o)+c)>G.PI?_-=G.PI2:_<-G.PI&&(_+=G.PI2),_*=t;var E=Math.cos(_),w=Math.sin(_);y.a=E*b-w*T,y.c=E*x-w*S,y.b=w*b+E*T,y.d=w*x+E*S,v=!0}if(0!=e){var A=this.temp;n.localToWorld(A.set(this.data.offsetX,this.data.offsetY)),y.tx+=A.x*e,y.ty+=A.y*e,v=!0}if(i>0){var I=(Math.sqrt(o*o+h*h)-1+this.data.offsetScaleX)*i+1;y.a*=I,y.b*=I,I=(Math.sqrt(a*a+l*l)-1+this.data.offsetScaleY)*i+1,y.c*=I,y.d*=I,v=!0}r>0&&((_=Math.atan2(l,a)-Math.atan2(h,o))>G.PI?_-=G.PI2:_<-G.PI&&(_+=G.PI2),x=y.c,S=y.d,_=Math.atan2(S,x)+(_-G.PI/2+d)*r,I=Math.sqrt(x*x+S*S),y.c=Math.cos(_)*I,y.d=Math.sin(_)*I,v=!0),v&&(g.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix,n=this.target;n.appliedValid||n.updateAppliedTransform();for(var s=this.bones,o=0,a=s.length;o<a;o++){var h=s[o];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;if(0!=t){var u=n.arotation-l+this.data.offsetRotation;l+=(u-=360*(16384-(16384.499999999996-u/360|0)))*t}var c=h.ax,d=h.ay;0!=e&&(c+=(n.ax-c+this.data.offsetX)*e,d+=(n.ay-d+this.data.offsetY)*e);var p=h.ascaleX,f=h.ascaleY;i>0&&(p>1e-5&&(p=(p+(n.ascaleX-p+this.data.offsetScaleX)*i)/p),f>1e-5&&(f=(f+(n.ascaleY-f+this.data.offsetScaleY)*i)/f));var m=h.ashearY;r>0&&(u=n.ashearY-m+this.data.offsetShearY,u-=360*(16384-(16384.499999999996-u/360|0)),h.shearY+=u*r),h.updateWorldTransformWith(c,d,l,p,f,h.ashearX,m)}},t.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix,n=this.target;n.appliedValid||n.updateAppliedTransform();for(var s=this.bones,o=0,a=s.length;o<a;o++){var h=s[o];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;0!=t&&(l+=(n.arotation+this.data.offsetRotation)*t);var u=h.ax,c=h.ay;0!=e&&(u+=(n.ax+this.data.offsetX)*e,c+=(n.ay+this.data.offsetY)*e);var d=h.ascaleX,p=h.ascaleY;i>0&&(d>1e-5&&(d*=(n.ascaleX-1+this.data.offsetScaleX)*i+1),p>1e-5&&(p*=(n.ascaleY-1+this.data.offsetScaleY)*i+1));var f=h.ashearY;r>0&&(f+=(n.ashearY+this.data.offsetShearY)*r),h.updateWorldTransformWith(u,c,l,d,p,h.ashearX,f)}},t}(),Qt=function(){function t(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var i=t.bones[e],r=void 0;if(null==i.parent)r=new jt(i,this,null);else{var n=this.bones[i.parent.index];r=new jt(i,this,n),n.children.push(r)}this.bones.push(r)}for(this.slots=new Array,this.drawOrder=new Array,e=0;e<t.slots.length;e++){var s=t.slots[e],o=(r=this.bones[s.boneData.index],new $t(s,r));this.slots.push(o),this.drawOrder.push(o)}for(this.ikConstraints=new Array,e=0;e<t.ikConstraints.length;e++){var a=t.ikConstraints[e];this.ikConstraints.push(new zt(a,this))}for(this.transformConstraints=new Array,e=0;e<t.transformConstraints.length;e++){var h=t.transformConstraints[e];this.transformConstraints.push(new Jt(h,this))}for(this.pathConstraints=new Array,e=0;e<t.pathConstraints.length;e++){var l=t.pathConstraints[e];this.pathConstraints.push(new Zt(l,this))}this.color=new B(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,i=t.length;e<i;e++)(n=t[e]).sorted=n.data.skinRequired,n.active=!n.sorted;if(null!=this.skin){var r=this.skin.bones;for(e=0,i=this.skin.bones.length;e<i;e++){var n=this.bones[r[e].index];do{n.sorted=!1,n.active=!0,n=n.parent}while(null!=n)}}var s=this.ikConstraints,o=this.transformConstraints,a=this.pathConstraints,h=s.length,l=o.length,u=a.length,c=h+l+u;t:for(e=0;e<c;e++){for(var d=0;d<h;d++)if((p=s[d]).data.order==e){this.sortIkConstraint(p);continue t}for(d=0;d<l;d++)if((p=o[d]).data.order==e){this.sortTransformConstraint(p);continue t}for(d=0;d<u;d++){var p;if((p=a[d]).data.order==e){this.sortPathConstraint(p);continue t}}}for(e=0,i=t.length;e<i;e++)this.sortBone(t[e])},t.prototype.sortIkConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&Y.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target;this.sortBone(e);var i=t.bones,r=i[0];if(this.sortBone(r),i.length>1){var n=i[i.length-1];this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}this._updateCache.push(t),this.sortReset(r.children),i[i.length-1].sorted=!0}},t.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||null!=this.skin&&Y.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,i=e.data.index,r=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,i,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,r);for(var n=0,s=this.data.skins.length;n<s;n++)this.sortPathConstraintAttachment(this.data.skins[n],i,r);var o=e.getAttachment();o instanceof ct&&this.sortPathConstraintAttachmentWith(o,r);var a=t.bones,h=a.length;for(n=0;n<h;n++)this.sortBone(a[n]);for(this._updateCache.push(t),n=0;n<h;n++)this.sortReset(a[n].children);for(n=0;n<h;n++)a[n].sorted=!0}},t.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||null!=this.skin&&Y.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,i=e.length;if(t.data.local)for(var r=0;r<i;r++){var n=e[r];this.sortBone(n.parent),this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}else for(r=0;r<i;r++)this.sortBone(e[r]);this._updateCache.push(t);for(var s=0;s<i;s++)this.sortReset(e[s].children);for(s=0;s<i;s++)e[s].sorted=!0}},t.prototype.sortPathConstraintAttachment=function(t,e,i){var r=t.attachments[e];if(r)for(var n in r)this.sortPathConstraintAttachmentWith(r[n],i)},t.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof ct){var i=t.bones;if(null==i)this.sortBone(e);else for(var r=this.bones,n=0;n<i.length;)for(var s=i[n++],o=n+s;n<o;n++){var a=i[n];this.sortBone(r[a])}}},t.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},t.prototype.sortReset=function(t){for(var e=0,i=t.length;e<i;e++){var r=t[e];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=!1)}},t.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,i=t.length;e<i;e++){var r=t[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY,r.appliedValid=!0}var n=this._updateCache;for(e=0,i=n.length;e<i;e++)n[e].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();var r=this.ikConstraints;for(e=0,i=r.length;e<i;e++)(a=r[e]).mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch;var n=this.transformConstraints;for(e=0,i=n.length;e<i;e++){var s=(a=n[e]).data;a.rotateMix=s.rotateMix,a.translateMix=s.translateMix,a.scaleMix=s.scaleMix,a.shearMix=s.shearMix}var o=this.pathConstraints;for(e=0,i=o.length;e<i;e++){var a;s=(a=o[e]).data,a.position=s.position,a.spacing=s.spacing,a.rotateMix=s.rotateMix,a.translateMix=s.translateMix}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;Y.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,i=t.length;e<i;e++)t[e].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++)if(e[i].data.name==t)return i;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++)if(e[i].data.name==t)return i;return-1},t.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},t.prototype.setSkin=function(t){if(t!=this.skin){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i],s=n.data.attachmentName;if(null!=s){var o=t.getAttachment(i,s);null!=o&&n.setAttachment(o)}}this.skin=t,this.updateCache()}},t.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},t.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},t.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,r=0,n=i.length;r<n;r++){var s=i[r];if(s.data.name==t){var o=null;if(null!=e&&null==(o=this.getAttachment(r,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void s.setAttachment(o)}}throw new Error("Slot not found: "+t)},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.getBounds=function(t,e,i){if(void 0===i&&(i=new Array(2)),null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var r=this.drawOrder,n=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,h=0,l=r.length;h<l;h++){var u=r[h];if(u.bone.active){var c=0,d=null,p=u.getAttachment();if(p instanceof pt)c=8,d=Y.setArraySize(i,c,0),p.computeWorldVertices(u.bone,d,0,2);else if(p instanceof ut){var f=p;c=f.worldVerticesLength,d=Y.setArraySize(i,c,0),f.computeWorldVertices(u,0,c,d,0,2)}if(null!=d)for(var m=0,_=d.length;m<_;m+=2){var g=d[m],v=d[m+1];n=Math.min(n,g),s=Math.min(s,v),o=Math.max(o,g),a=Math.max(a,v)}}}t.set(n,s),e.set(o-n,a-s)},t.prototype.update=function(t){this.time+=t},Object.defineProperty(t.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),te=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t}(),ee=function(t,e,i){if(this.color=new B(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i},ie=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i.rotateMix=0,i.translateMix=0,i.scaleMix=0,i.shearMix=0,i.offsetRotation=0,i.offsetX=0,i.offsetY=0,i.offsetScaleX=0,i.offsetScaleY=0,i.offsetShearY=0,i.relative=!1,i.local=!1,i}return nt(e,t),e}(Yt),re=function(t,e,i){this.slotIndex=t,this.name=e,this.attachment=i},ne=function(){function t(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return t.prototype.setAttachment=function(t,e,i){if(null==i)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=i},t.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var i=t.bones[e],r=!1,n=0;n<this.bones.length;n++)if(this.bones[n]==i){r=!0;break}r||this.bones.push(i)}for(e=0;e<t.constraints.length;e++){var s=t.constraints[e];for(r=!1,n=0;n<this.constraints.length;n++)if(this.constraints[n]==s){r=!0;break}r||this.constraints.push(s)}var o=t.getAttachments();for(e=0;e<o.length;e++){var a=o[e];this.setAttachment(a.slotIndex,a.name,a.attachment)}},t.prototype.copySkin=function(t){for(var e=0;e<t.bones.length;e++){for(var i=t.bones[e],r=!1,n=0;n<this.bones.length;n++)if(this.bones[n]==i){r=!0;break}r||this.bones.push(i)}for(e=0;e<t.constraints.length;e++){var s=t.constraints[e];for(r=!1,n=0;n<this.constraints.length;n++)if(this.constraints[n]==s){r=!0;break}r||this.constraints.push(s)}var o=t.getAttachments();for(e=0;e<o.length;e++){var a=o[e];null!=a.attachment&&(a.attachment instanceof ut?(a.attachment=a.attachment.newLinkedMesh(),this.setAttachment(a.slotIndex,a.name,a.attachment)):(a.attachment=a.attachment.copy(),this.setAttachment(a.slotIndex,a.name,a.attachment)))}},t.prototype.getAttachment=function(t,e){var i=this.attachments[t];return i?i[e]:null},t.prototype.removeAttachment=function(t,e){var i=this.attachments[t];i&&(i[e]=null)},t.prototype.getAttachments=function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var i=this.attachments[e];if(i)for(var r in i){var n=i[r];n&&t.push(new re(e,r,n))}}return t},t.prototype.getAttachmentsForSlot=function(t,e){var i=this.attachments[t];if(i)for(var r in i){var n=i[r];n&&e.push(new re(t,r,n))}},t.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},t.prototype.attachAll=function(t,e){for(var i=0,r=0;r<t.slots.length;r++){var n=t.slots[r],s=n.getAttachment();if(s&&i<e.attachments.length){var o=e.attachments[i];for(var a in o)if(s==o[a]){var h=this.getAttachment(i,a);null!=h&&n.setAttachment(h);break}}i++}},t}(),se=function(){function t(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return t.prototype.readSkeletonData=function(e){var i=this.scale,r=new te;r.name="";var n=new x(e);r.hash=n.readString(),r.version=n.readString(),"3.8.75"===r.version&&console.error("Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine."),r.x=n.readFloat(),r.y=n.readFloat(),r.width=n.readFloat(),r.height=n.readFloat();var s=n.readBoolean();s&&(r.fps=n.readFloat(),r.imagesPath=n.readString(),r.audioPath=n.readString());var o=0;o=n.readInt(!0);for(var a=0;a<o;a++)n.strings.push(n.readString());for(o=n.readInt(!0),a=0;a<o;a++){var h=n.readString(),l=0==a?null:r.bones[n.readInt(!0)];(d=new Vt(a,h,l)).rotation=n.readFloat(),d.x=n.readFloat()*i,d.y=n.readFloat()*i,d.scaleX=n.readFloat(),d.scaleY=n.readFloat(),d.shearX=n.readFloat(),d.shearY=n.readFloat(),d.length=n.readFloat()*i,d.transformMode=t.TransformModeValues[n.readInt(!0)],d.skinRequired=n.readBoolean(),s&&B.rgba8888ToColor(d.color,n.readInt32()),r.bones.push(d)}for(o=n.readInt(!0),a=0;a<o;a++){var u=n.readString(),c=r.bones[n.readInt(!0)],d=new ee(a,u,c);B.rgba8888ToColor(d.color,n.readInt32());var p=n.readInt32();-1!=p&&B.rgb888ToColor(d.darkColor=new B,p),d.attachmentName=n.readStringRef(),d.blendMode=t.BlendModeValues[n.readInt(!0)],r.slots.push(d)}o=n.readInt(!0),a=0;for(var f=void 0;a<o;a++){(d=new qt(n.readString())).order=n.readInt(!0),d.skinRequired=n.readBoolean(),f=n.readInt(!0);for(var m=0;m<f;m++)d.bones.push(r.bones[n.readInt(!0)]);d.target=r.bones[n.readInt(!0)],d.mix=n.readFloat(),d.softness=n.readFloat()*i,d.bendDirection=n.readByte(),d.compress=n.readBoolean(),d.stretch=n.readBoolean(),d.uniform=n.readBoolean(),r.ikConstraints.push(d)}for(o=n.readInt(!0),a=0,f=void 0;a<o;a++){for((d=new ie(n.readString())).order=n.readInt(!0),d.skinRequired=n.readBoolean(),f=n.readInt(!0),m=0;m<f;m++)d.bones.push(r.bones[n.readInt(!0)]);d.target=r.bones[n.readInt(!0)],d.local=n.readBoolean(),d.relative=n.readBoolean(),d.offsetRotation=n.readFloat(),d.offsetX=n.readFloat()*i,d.offsetY=n.readFloat()*i,d.offsetScaleX=n.readFloat(),d.offsetScaleY=n.readFloat(),d.offsetShearY=n.readFloat(),d.rotateMix=n.readFloat(),d.translateMix=n.readFloat(),d.scaleMix=n.readFloat(),d.shearMix=n.readFloat(),r.transformConstraints.push(d)}for(o=n.readInt(!0),a=0,f=void 0;a<o;a++){for((d=new Kt(n.readString())).order=n.readInt(!0),d.skinRequired=n.readBoolean(),f=n.readInt(!0),m=0;m<f;m++)d.bones.push(r.bones[n.readInt(!0)]);d.target=r.slots[n.readInt(!0)],d.positionMode=t.PositionModeValues[n.readInt(!0)],d.spacingMode=t.SpacingModeValues[n.readInt(!0)],d.rotateMode=t.RotateModeValues[n.readInt(!0)],d.offsetRotation=n.readFloat(),d.position=n.readFloat(),d.positionMode==v.Fixed&&(d.position*=i),d.spacing=n.readFloat(),d.spacingMode!=kt.Length&&d.spacingMode!=kt.Fixed||(d.spacing*=i),d.rotateMix=n.readFloat(),d.translateMix=n.readFloat(),r.pathConstraints.push(d)}var _=this.readSkin(n,r,!0,s);for(null!=_&&(r.defaultSkin=_,r.skins.push(_)),a=r.skins.length,Y.setArraySize(r.skins,o=a+n.readInt(!0));a<o;a++)r.skins[a]=this.readSkin(n,r,!1,s);for(o=this.linkedMeshes.length,a=0;a<o;a++){var g=this.linkedMeshes[a],y=null==g.skin?r.defaultSkin:r.findSkin(g.skin);if(null==y)throw new Error("Skin not found: "+g.skin);var b=y.getAttachment(g.slotIndex,g.parent);if(null==b)throw new Error("Parent mesh not found: "+g.parent);g.mesh.deformAttachment=g.inheritDeform?b:g.mesh,g.mesh.setParentMesh(b)}for(this.linkedMeshes.length=0,o=n.readInt(!0),a=0;a<o;a++)(d=new Wt(n.readStringRef())).intValue=n.readInt(!1),d.floatValue=n.readFloat(),d.stringValue=n.readString(),d.audioPath=n.readString(),null!=d.audioPath&&(d.volume=n.readFloat(),d.balance=n.readFloat()),r.events.push(d);for(o=n.readInt(!0),a=0;a<o;a++)r.animations.push(this.readAnimation(n,n.readString(),r));return r},t.prototype.readSkin=function(t,e,i,r){var n=null,s=0;if(i){if(0==(s=t.readInt(!0)))return null;n=new ne("default")}else{(n=new ne(t.readStringRef())).bones.length=t.readInt(!0);for(var o=0,a=n.bones.length;o<a;o++)n.bones[o]=e.bones[t.readInt(!0)];for(o=0,a=t.readInt(!0);o<a;o++)n.constraints.push(e.ikConstraints[t.readInt(!0)]);for(o=0,a=t.readInt(!0);o<a;o++)n.constraints.push(e.transformConstraints[t.readInt(!0)]);for(o=0,a=t.readInt(!0);o<a;o++)n.constraints.push(e.pathConstraints[t.readInt(!0)]);s=t.readInt(!0)}for(o=0;o<s;o++)for(var h=t.readInt(!0),l=0,u=t.readInt(!0);l<u;l++){var c=t.readStringRef(),d=this.readAttachment(t,e,n,h,c,r);null!=d&&n.setAttachment(h,c,d)}return n},t.prototype.readAttachment=function(e,i,r,n,s,a){var h=this.scale,l=e.readStringRef();null==l&&(l=s);var u=e.readByte();switch(t.AttachmentTypeValues[u]){case o.Region:var c=e.readStringRef(),d=e.readFloat(),p=e.readFloat(),f=e.readFloat(),m=e.readFloat(),_=e.readFloat(),g=e.readFloat(),v=e.readFloat(),y=e.readInt32();null==c&&(c=l);var b=this.attachmentLoader.newRegionAttachment(r,l,c);return null==b?null:(b.path=c,b.x=p*h,b.y=f*h,b.scaleX=m,b.scaleY=_,b.rotation=d,b.width=g*h,b.height=v*h,B.rgba8888ToColor(b.color,y),b);case o.BoundingBox:var x=e.readInt(!0),T=this.readVertices(e,x),S=(y=a?e.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(r,l));return null==S?null:(S.worldVerticesLength=x<<1,S.vertices=T.vertices,S.bones=T.bones,a&&B.rgba8888ToColor(S.color,y),S);case o.Mesh:c=e.readStringRef(),y=e.readInt32(),x=e.readInt(!0);var E=this.readFloatArray(e,x<<1,1),w=this.readShortArray(e),A=(T=this.readVertices(e,x),e.readInt(!0)),I=null;return g=0,v=0,a&&(I=this.readShortArray(e),g=e.readFloat(),v=e.readFloat()),null==c&&(c=l),null==(C=this.attachmentLoader.newMeshAttachment(r,l,c))?null:(C.path=c,B.rgba8888ToColor(C.color,y),C.bones=T.bones,C.vertices=T.vertices,C.worldVerticesLength=x<<1,C.triangles=w,C.regionUVs=new Float32Array(E),C.hullLength=A<<1,a&&(C.edges=I,C.width=g*h,C.height=v*h),C);case o.LinkedMesh:c=e.readStringRef(),y=e.readInt32();var C,O=e.readStringRef(),M=e.readStringRef(),P=e.readBoolean();return g=0,v=0,a&&(g=e.readFloat(),v=e.readFloat()),null==c&&(c=l),null==(C=this.attachmentLoader.newMeshAttachment(r,l,c))?null:(C.path=c,B.rgba8888ToColor(C.color,y),a&&(C.width=g*h,C.height=v*h),this.linkedMeshes.push(new oe(C,O,n,M,P)),C);case o.Path:for(var R=e.readBoolean(),D=e.readBoolean(),N=(x=e.readInt(!0),T=this.readVertices(e,x),Y.newArray(x/3,0)),U=0,F=N.length;U<F;U++)N[U]=e.readFloat()*h;return y=a?e.readInt32():0,null==(c=this.attachmentLoader.newPathAttachment(r,l))?null:(c.closed=R,c.constantSpeed=D,c.worldVerticesLength=x<<1,c.vertices=T.vertices,c.bones=T.bones,c.lengths=N,a&&B.rgba8888ToColor(c.color,y),c);case o.Point:d=e.readFloat(),p=e.readFloat(),f=e.readFloat(),y=a?e.readInt32():0;var L=this.attachmentLoader.newPointAttachment(r,l);return null==L?null:(L.x=p*h,L.y=f*h,L.rotation=d,a&&B.rgba8888ToColor(L.color,y),L);case o.Clipping:var k=e.readInt(!0),G=(x=e.readInt(!0),T=this.readVertices(e,x),y=a?e.readInt32():0,this.attachmentLoader.newClippingAttachment(r,l));return null==G?null:(G.endSlot=i.slots[k],G.worldVerticesLength=x<<1,G.vertices=T.vertices,G.bones=T.bones,a&&B.rgba8888ToColor(G.color,y),G)}return null},t.prototype.readVertices=function(t,e){var i=e<<1,r=new ae,n=this.scale;if(!t.readBoolean())return r.vertices=this.readFloatArray(t,i,n),r;for(var s=new Array,o=new Array,a=0;a<e;a++){var h=t.readInt(!0);o.push(h);for(var l=0;l<h;l++)o.push(t.readInt(!0)),s.push(t.readFloat()*n),s.push(t.readFloat()*n),s.push(t.readFloat())}return r.vertices=Y.toFloatArray(s),r.bones=o,r},t.prototype.readFloatArray=function(t,e,i){var r=new Array(e);if(1==i)for(var n=0;n<e;n++)r[n]=t.readFloat();else for(n=0;n<e;n++)r[n]=t.readFloat()*i;return r},t.prototype.readShortArray=function(t){for(var e=t.readInt(!0),i=new Array(e),r=0;r<e;r++)i[r]=t.readShort();return i},t.prototype.readAnimation=function(e,i,r){for(var n=new Array,s=this.scale,o=0,a=new B,h=new B,l=0,u=e.readInt(!0);l<u;l++)for(var c=e.readInt(!0),d=0,p=e.readInt(!0);d<p;d++){var f=e.readByte(),m=e.readInt(!0);switch(f){case t.SLOT_ATTACHMENT:(b=new wt(m)).slotIndex=c;for(var _=0;_<m;_++)b.setFrame(_,e.readFloat(),e.readStringRef());n.push(b),o=Math.max(o,b.frames[m-1]);break;case t.SLOT_COLOR:for((b=new St(m)).slotIndex=c,_=0;_<m;_++){var g=e.readFloat();B.rgba8888ToColor(a,e.readInt32()),b.setFrame(_,g,a.r,a.g,a.b,a.a),_<m-1&&this.readCurve(e,_,b)}n.push(b),o=Math.max(o,b.frames[(m-1)*St.ENTRIES]);break;case t.SLOT_TWO_COLOR:for((b=new Et(m)).slotIndex=c,_=0;_<m;_++)g=e.readFloat(),B.rgba8888ToColor(a,e.readInt32()),B.rgb888ToColor(h,e.readInt32()),b.setFrame(_,g,a.r,a.g,a.b,a.a,h.r,h.g,h.b),_<m-1&&this.readCurve(e,_,b);n.push(b),o=Math.max(o,b.frames[(m-1)*Et.ENTRIES])}}for(l=0,u=e.readInt(!0);l<u;l++){var y=e.readInt(!0);for(d=0,p=e.readInt(!0);d<p;d++)switch(f=e.readByte(),m=e.readInt(!0),f){case t.BONE_ROTATE:for((b=new yt(m)).boneIndex=y,_=0;_<m;_++)b.setFrame(_,e.readFloat(),e.readFloat()),_<m-1&&this.readCurve(e,_,b);n.push(b),o=Math.max(o,b.frames[(m-1)*yt.ENTRIES]);break;case t.BONE_TRANSLATE:case t.BONE_SCALE:case t.BONE_SHEAR:var b=void 0,x=1;for(f==t.BONE_SCALE?b=new xt(m):f==t.BONE_SHEAR?b=new Tt(m):(b=new bt(m),x=s),b.boneIndex=y,_=0;_<m;_++)b.setFrame(_,e.readFloat(),e.readFloat()*x,e.readFloat()*x),_<m-1&&this.readCurve(e,_,b);n.push(b),o=Math.max(o,b.frames[(m-1)*bt.ENTRIES])}}for(l=0,u=e.readInt(!0);l<u;l++){var T=e.readInt(!0);for(m=e.readInt(!0),(b=new Mt(m)).ikConstraintIndex=T,_=0;_<m;_++)b.setFrame(_,e.readFloat(),e.readFloat(),e.readFloat()*s,e.readByte(),e.readBoolean(),e.readBoolean()),_<m-1&&this.readCurve(e,_,b);n.push(b),o=Math.max(o,b.frames[(m-1)*Mt.ENTRIES])}for(l=0,u=e.readInt(!0);l<u;l++){for(T=e.readInt(!0),m=e.readInt(!0),(b=new Pt(m)).transformConstraintIndex=T,_=0;_<m;_++)b.setFrame(_,e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat()),_<m-1&&this.readCurve(e,_,b);n.push(b),o=Math.max(o,b.frames[(m-1)*Pt.ENTRIES])}for(l=0,u=e.readInt(!0);l<u;l++){T=e.readInt(!0);var S=r.pathConstraints[T];for(d=0,p=e.readInt(!0);d<p;d++)switch(f=e.readByte(),m=e.readInt(!0),f){case t.PATH_POSITION:case t.PATH_SPACING:for(b=void 0,x=1,f==t.PATH_SPACING?(b=new Dt(m),S.spacingMode!=kt.Length&&S.spacingMode!=kt.Fixed||(x=s)):(b=new Rt(m),S.positionMode==v.Fixed&&(x=s)),b.pathConstraintIndex=T,_=0;_<m;_++)b.setFrame(_,e.readFloat(),e.readFloat()*x),_<m-1&&this.readCurve(e,_,b);n.push(b),o=Math.max(o,b.frames[(m-1)*Rt.ENTRIES]);break;case t.PATH_MIX:for((b=new Nt(m)).pathConstraintIndex=T,_=0;_<m;_++)b.setFrame(_,e.readFloat(),e.readFloat(),e.readFloat()),_<m-1&&this.readCurve(e,_,b);n.push(b),o=Math.max(o,b.frames[(m-1)*Nt.ENTRIES])}}for(l=0,u=e.readInt(!0);l<u;l++){var E=r.skins[e.readInt(!0)];for(d=0,p=e.readInt(!0);d<p;d++){c=e.readInt(!0);for(var w=0,A=e.readInt(!0);w<A;w++){var I=E.getAttachment(c,e.readStringRef()),C=null!=I.bones,O=I.vertices,M=C?O.length/3*2:O.length;for(m=e.readInt(!0),(b=new It(m)).slotIndex=c,b.attachment=I,_=0;_<m;_++){g=e.readFloat();var P=void 0,R=e.readInt(!0);if(0==R)P=C?Y.newFloatArray(M):O;else{P=Y.newFloatArray(M);var D=e.readInt(!0);if(R+=D,1==s)for(var N=D;N<R;N++)P[N]=e.readFloat();else for(N=D;N<R;N++)P[N]=e.readFloat()*s;if(!C){N=0;for(var U=P.length;N<U;N++)P[N]+=O[N]}}b.setFrame(_,g,P),_<m-1&&this.readCurve(e,_,b)}n.push(b),o=Math.max(o,b.frames[m-1])}}}var F=e.readInt(!0);if(F>0){b=new Ot(F);var L=r.slots.length;for(l=0;l<F;l++){g=e.readFloat();var k=e.readInt(!0),G=Y.newArray(L,0);for(d=L-1;d>=0;d--)G[d]=-1;var X=Y.newArray(L-k,0),j=0,V=0;for(d=0;d<k;d++){for(c=e.readInt(!0);j!=c;)X[V++]=j++;G[j+e.readInt(!0)]=j++}for(;j<L;)X[V++]=j++;for(d=L-1;d>=0;d--)-1==G[d]&&(G[d]=X[--V]);b.setFrame(l,g,G)}n.push(b),o=Math.max(o,b.frames[F-1])}var H=e.readInt(!0);if(H>0){for(b=new Ct(H),l=0;l<H;l++){g=e.readFloat();var W=r.events[e.readInt(!0)],z=new Ht(g,W);z.intValue=e.readInt(!1),z.floatValue=e.readFloat(),z.stringValue=e.readBoolean()?e.readString():W.stringValue,null!=z.data.audioPath&&(z.volume=e.readFloat(),z.balance=e.readFloat()),b.setFrame(l,z)}n.push(b),o=Math.max(o,b.frames[H-1])}return new _t(i,n,o)},t.prototype.readCurve=function(e,i,r){switch(e.readByte()){case t.CURVE_STEPPED:r.setStepped(i);break;case t.CURVE_BEZIER:this.setCurve(r,i,e.readFloat(),e.readFloat(),e.readFloat(),e.readFloat())}},t.prototype.setCurve=function(t,e,i,r,n,s){t.setCurve(e,i,r,n,s)},t.AttachmentTypeValues=[0,1,2,3,4,5,6],t.TransformModeValues=[b.Normal,b.OnlyTranslation,b.NoRotationOrReflection,b.NoScale,b.NoScaleOrReflection],t.PositionModeValues=[v.Fixed,v.Percent],t.SpacingModeValues=[kt.Length,kt.Fixed,kt.Percent],t.RotateModeValues=[y.Tangent,y.Chain,y.ChainScale],t.BlendModeValues=[l.T$.NORMAL,l.T$.ADD,l.T$.MULTIPLY,l.T$.SCREEN],t.BONE_ROTATE=0,t.BONE_TRANSLATE=1,t.BONE_SCALE=2,t.BONE_SHEAR=3,t.SLOT_ATTACHMENT=0,t.SLOT_COLOR=1,t.SLOT_TWO_COLOR=2,t.PATH_POSITION=0,t.PATH_SPACING=1,t.PATH_MIX=2,t.CURVE_LINEAR=0,t.CURVE_STEPPED=1,t.CURVE_BEZIER=2,t}(),oe=function(t,e,i,r,n){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=r,this.inheritDeform=n},ae=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e},he=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new W((function(){return Y.newFloatArray(16)}))}return t.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var i=this.boundingBoxes,r=this.polygons,n=this.polygonPool,s=t.slots,o=s.length;i.length=0,n.freeAll(r),r.length=0;for(var a=0;a<o;a++){var h=s[a];if(h.bone.active){var l=h.getAttachment();if(l instanceof ht){var u=l;i.push(u);var c=n.obtain();c.length!=u.worldVerticesLength&&(c=Y.newFloatArray(u.worldVerticesLength)),r.push(c),u.computeWorldVertices(h,0,u.worldVerticesLength,c,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=this.polygons,s=0,o=n.length;s<o;s++)for(var a=n[s],h=a,l=0,u=a.length;l<u;l+=2){var c=h[l],d=h[l+1];t=Math.min(t,c),e=Math.min(e,d),i=Math.max(i,c),r=Math.max(r,d)}this.minX=t,this.minY=e,this.maxX=i,this.maxY=r},t.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},t.prototype.aabbIntersectsSegment=function(t,e,i,r){var n=this.minX,s=this.minY,o=this.maxX,a=this.maxY;if(t<=n&&i<=n||e<=s&&r<=s||t>=o&&i>=o||e>=a&&r>=a)return!1;var h=(r-e)/(i-t),l=h*(n-t)+e;if(l>s&&l<a)return!0;if((l=h*(o-t)+e)>s&&l<a)return!0;var u=(s-e)/h+t;return u>n&&u<o||(u=(a-e)/h+t)>n&&u<o},t.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.containsPoint=function(t,e){for(var i=this.polygons,r=0,n=i.length;r<n;r++)if(this.containsPointPolygon(i[r],t,e))return this.boundingBoxes[r];return null},t.prototype.containsPointPolygon=function(t,e,i){for(var r=t,n=t.length,s=n-2,o=!1,a=0;a<n;a+=2){var h=r[a+1],l=r[s+1];if(h<i&&l>=i||l<i&&h>=i){var u=r[a];u+(i-h)/(l-h)*(r[s]-u)<e&&(o=!o)}s=a}return o},t.prototype.intersectsSegment=function(t,e,i,r){for(var n=this.polygons,s=0,o=n.length;s<o;s++)if(this.intersectsSegmentPolygon(n[s],t,e,i,r))return this.boundingBoxes[s];return null},t.prototype.intersectsSegmentPolygon=function(t,e,i,r,n){for(var s=t,o=t.length,a=e-r,h=i-n,l=e*n-i*r,u=s[o-2],c=s[o-1],d=0;d<o;d+=2){var p=s[d],f=s[d+1],m=u*f-c*p,_=u-p,g=c-f,v=a*g-h*_,y=(l*_-a*m)/v;if((y>=u&&y<=p||y>=p&&y<=u)&&(y>=e&&y<=r||y>=r&&y<=e)){var b=(l*g-h*m)/v;if((b>=c&&b<=f||b>=f&&b<=c)&&(b>=i&&b<=n||b>=n&&b<=i))return!0}u=p,c=f}return!1},t.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}(),le=function(){function t(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return t.prototype.readSkeletonData=function(e){var i=this.scale,r=new te,n="string"==typeof e?JSON.parse(e):e,s=n.skeleton;if(null!=s){if(r.hash=s.hash,r.version=s.spine,"3.8"!==r.version.substr(0,3)){var o="Spine 3.8 loader cant load version "+s.spine+". Please configure your pixi-spine bundle";console.error(o)}"3.8.75"===r.version&&(o="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.",console.error(o)),r.x=s.x,r.y=s.y,r.width=s.width,r.height=s.height,r.fps=s.fps,r.imagesPath=s.images}if(n.bones)for(var a=0;a<n.bones.length;a++){var h=n.bones[a],l=null,u=this.getValue(h,"parent",null);if(null!=u&&null==(l=r.findBone(u)))throw new Error("Parent bone not found: "+u);(f=new Vt(r.bones.length,h.name,l)).length=this.getValue(h,"length",0)*i,f.x=this.getValue(h,"x",0)*i,f.y=this.getValue(h,"y",0)*i,f.rotation=this.getValue(h,"rotation",0),f.scaleX=this.getValue(h,"scaleX",1),f.scaleY=this.getValue(h,"scaleY",1),f.shearX=this.getValue(h,"shearX",0),f.shearY=this.getValue(h,"shearY",0),f.transformMode=t.transformModeFromString(this.getValue(h,"transform","normal")),f.skinRequired=this.getValue(h,"skin",!1),r.bones.push(f)}if(n.slots)for(a=0;a<n.slots.length;a++){var c=(I=n.slots[a]).name,d=I.bone,p=r.findBone(d);if(null==p)throw new Error("Slot bone not found: "+d);var f=new ee(r.slots.length,c,p),m=this.getValue(I,"color",null);null!=m&&f.color.setFromString(m);var _=this.getValue(I,"dark",null);null!=_&&(f.darkColor=new B(1,1,1,1),f.darkColor.setFromString(_)),f.attachmentName=this.getValue(I,"attachment",null),f.blendMode=t.blendModeFromString(this.getValue(I,"blend","normal")),r.slots.push(f)}if(n.ik)for(a=0;a<n.ik.length;a++){var g=n.ik[a];(f=new qt(g.name)).order=this.getValue(g,"order",0),f.skinRequired=this.getValue(g,"skin",!1);for(var y=0;y<g.bones.length;y++){if(d=g.bones[y],null==(E=r.findBone(d)))throw new Error("IK bone not found: "+d);f.bones.push(E)}var b=g.target;if(f.target=r.findBone(b),null==f.target)throw new Error("IK target bone not found: "+b);f.mix=this.getValue(g,"mix",1),f.softness=this.getValue(g,"softness",0)*i,f.bendDirection=this.getValue(g,"bendPositive",!0)?1:-1,f.compress=this.getValue(g,"compress",!1),f.stretch=this.getValue(g,"stretch",!1),f.uniform=this.getValue(g,"uniform",!1),r.ikConstraints.push(f)}if(n.transform)for(a=0;a<n.transform.length;a++){for(g=n.transform[a],(f=new ie(g.name)).order=this.getValue(g,"order",0),f.skinRequired=this.getValue(g,"skin",!1),y=0;y<g.bones.length;y++){if(d=g.bones[y],null==(E=r.findBone(d)))throw new Error("Transform constraint bone not found: "+d);f.bones.push(E)}if(b=g.target,f.target=r.findBone(b),null==f.target)throw new Error("Transform constraint target bone not found: "+b);f.local=this.getValue(g,"local",!1),f.relative=this.getValue(g,"relative",!1),f.offsetRotation=this.getValue(g,"rotation",0),f.offsetX=this.getValue(g,"x",0)*i,f.offsetY=this.getValue(g,"y",0)*i,f.offsetScaleX=this.getValue(g,"scaleX",0),f.offsetScaleY=this.getValue(g,"scaleY",0),f.offsetShearY=this.getValue(g,"shearY",0),f.rotateMix=this.getValue(g,"rotateMix",1),f.translateMix=this.getValue(g,"translateMix",1),f.scaleMix=this.getValue(g,"scaleMix",1),f.shearMix=this.getValue(g,"shearMix",1),r.transformConstraints.push(f)}if(n.path)for(a=0;a<n.path.length;a++){for(g=n.path[a],(f=new Kt(g.name)).order=this.getValue(g,"order",0),f.skinRequired=this.getValue(g,"skin",!1),y=0;y<g.bones.length;y++){if(d=g.bones[y],null==(E=r.findBone(d)))throw new Error("Transform constraint bone not found: "+d);f.bones.push(E)}if(b=g.target,f.target=r.findSlot(b),null==f.target)throw new Error("Path target slot not found: "+b);f.positionMode=t.positionModeFromString(this.getValue(g,"positionMode","percent")),f.spacingMode=t.spacingModeFromString(this.getValue(g,"spacingMode","length")),f.rotateMode=t.rotateModeFromString(this.getValue(g,"rotateMode","tangent")),f.offsetRotation=this.getValue(g,"rotation",0),f.position=this.getValue(g,"position",0),f.positionMode==v.Fixed&&(f.position*=i),f.spacing=this.getValue(g,"spacing",0),f.spacingMode!=kt.Length&&f.spacingMode!=kt.Fixed||(f.spacing*=i),f.rotateMix=this.getValue(g,"rotateMix",1),f.translateMix=this.getValue(g,"translateMix",1),r.pathConstraints.push(f)}if(n.skins)for(a=0;a<n.skins.length;a++){var x=n.skins[a],T=new ne(x.name);if(x.bones)for(var S=0;S<x.bones.length;S++){var E;if(null==(E=r.findBone(x.bones[S])))throw new Error("Skin bone not found: "+x.bones[a]);T.bones.push(E)}if(x.ik)for(S=0;S<x.ik.length;S++){if(null==(w=r.findIkConstraint(x.ik[S])))throw new Error("Skin IK constraint not found: "+x.ik[a]);T.constraints.push(w)}if(x.transform)for(S=0;S<x.transform.length;S++){if(null==(w=r.findTransformConstraint(x.transform[S])))throw new Error("Skin transform constraint not found: "+x.transform[a]);T.constraints.push(w)}if(x.path)for(S=0;S<x.path.length;S++){var w;if(null==(w=r.findPathConstraint(x.path[S])))throw new Error("Skin path constraint not found: "+x.path[a]);T.constraints.push(w)}for(var c in x.attachments){var A=r.findSlot(c);if(null==A)throw new Error("Slot not found: "+c);var I=x.attachments[c];for(var C in I){var O=this.readAttachment(I[C],T,A.index,C,r);null!=O&&T.setAttachment(A.index,C,O)}}r.skins.push(T),"default"==T.name&&(r.defaultSkin=T)}a=0;for(var M=this.linkedMeshes.length;a<M;a++){var P=this.linkedMeshes[a];if(null==(T=null==P.skin?r.defaultSkin:r.findSkin(P.skin)))throw new Error("Skin not found: "+P.skin);var R=T.getAttachment(P.slotIndex,P.parent);if(null==R)throw new Error("Parent mesh not found: "+P.parent);P.mesh.deformAttachment=P.inheritDeform?R:P.mesh,P.mesh.setParentMesh(R)}if(this.linkedMeshes.length=0,n.events)for(var D in n.events){var N=n.events[D];(f=new Wt(D)).intValue=this.getValue(N,"int",0),f.floatValue=this.getValue(N,"float",0),f.stringValue=this.getValue(N,"string",""),f.audioPath=this.getValue(N,"audio",null),null!=f.audioPath&&(f.volume=this.getValue(N,"volume",1),f.balance=this.getValue(N,"balance",0)),r.events.push(f)}if(n.animations)for(var U in n.animations){var F=n.animations[U];this.readAnimation(F,U,r)}return r},t.prototype.readAttachment=function(t,e,i,r,n){var s=this.scale;switch(r=this.getValue(t,"name",r),this.getValue(t,"type","region")){case"region":var o=this.getValue(t,"path",r),a=this.attachmentLoader.newRegionAttachment(e,r,o);return null==a?null:(a.path=o,a.x=this.getValue(t,"x",0)*s,a.y=this.getValue(t,"y",0)*s,a.scaleX=this.getValue(t,"scaleX",1),a.scaleY=this.getValue(t,"scaleY",1),a.rotation=this.getValue(t,"rotation",0),a.width=t.width*s,a.height=t.height*s,null!=(g=this.getValue(t,"color",null))&&a.color.setFromString(g),a);case"boundingbox":var h=this.attachmentLoader.newBoundingBoxAttachment(e,r);return null==h?null:(this.readVertices(t,h,t.vertexCount<<1),null!=(g=this.getValue(t,"color",null))&&h.color.setFromString(g),h);case"mesh":case"linkedmesh":o=this.getValue(t,"path",r);var l=this.attachmentLoader.newMeshAttachment(e,r,o);if(null==l)return null;l.path=o,null!=(g=this.getValue(t,"color",null))&&l.color.setFromString(g),l.width=this.getValue(t,"width",0)*s,l.height=this.getValue(t,"height",0)*s;var u=this.getValue(t,"parent",null);if(null!=u)return this.linkedMeshes.push(new ue(l,this.getValue(t,"skin",null),i,u,this.getValue(t,"deform",!0))),l;var c=t.uvs;return this.readVertices(t,l,c.length),l.triangles=t.triangles,l.regionUVs=new Float32Array(c),l.edges=this.getValue(t,"edges",null),l.hullLength=2*this.getValue(t,"hull",0),l;case"path":if(null==(o=this.attachmentLoader.newPathAttachment(e,r)))return null;o.closed=this.getValue(t,"closed",!1),o.constantSpeed=this.getValue(t,"constantSpeed",!0);var d=t.vertexCount;this.readVertices(t,o,d<<1);for(var p=Y.newArray(d/3,0),f=0;f<t.lengths.length;f++)p[f]=t.lengths[f]*s;return o.lengths=p,null!=(g=this.getValue(t,"color",null))&&o.color.setFromString(g),o;case"point":var m=this.attachmentLoader.newPointAttachment(e,r);return null==m?null:(m.x=this.getValue(t,"x",0)*s,m.y=this.getValue(t,"y",0)*s,m.rotation=this.getValue(t,"rotation",0),null!=(g=this.getValue(t,"color",null))&&m.color.setFromString(g),m);case"clipping":var _=this.attachmentLoader.newClippingAttachment(e,r);if(null==_)return null;var g,v=this.getValue(t,"end",null);if(null!=v){var y=n.findSlot(v);if(null==y)throw new Error("Clipping end slot not found: "+v);_.endSlot=y}return d=t.vertexCount,this.readVertices(t,_,d<<1),null!=(g=this.getValue(t,"color",null))&&_.color.setFromString(g),_}return null},t.prototype.readVertices=function(t,e,i){var r=this.scale;e.worldVerticesLength=i;var n=t.vertices;if(i!=n.length){var s=new Array,o=new Array;for(u=0,c=n.length;u<c;){var a=n[u++];o.push(a);for(var h=u+4*a;u<h;u+=4)o.push(n[u]),s.push(n[u+1]*r),s.push(n[u+2]*r),s.push(n[u+3])}e.bones=o,e.vertices=Y.toFloatArray(s)}else{var l=Y.toFloatArray(n);if(1!=r)for(var u=0,c=n.length;u<c;u++)l[u]*=r;e.vertices=l}},t.prototype.readAnimation=function(t,e,i){var r=this.scale,n=new Array,s=0;if(t.slots)for(var o in t.slots){var a=t.slots[o];if(-1==(Q=i.findSlotIndex(o)))throw new Error("Slot not found: "+o);for(var h in a){var l=a[h];if("attachment"==h){(b=new wt(l.length)).slotIndex=Q;for(var u=0,c=0;c<l.length;c++){var d=l[c];b.setFrame(u++,this.getValue(d,"time",0),d.name)}n.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}else if("color"==h){for((b=new St(l.length)).slotIndex=Q,u=0,c=0;c<l.length;c++){d=l[c];var p=new B;p.setFromString(d.color||"ffffffff"),b.setFrame(u,this.getValue(d,"time",0),p.r,p.g,p.b,p.a),this.readCurve(d,b,u),u++}n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*St.ENTRIES])}else{if("twoColor"!=h)throw new Error("Invalid timeline type for a slot: "+h+" ("+o+")");for((b=new Et(l.length)).slotIndex=Q,u=0,c=0;c<l.length;c++){d=l[c];var f=new B,m=new B;f.setFromString(d.light),m.setFromString(d.dark),b.setFrame(u,this.getValue(d,"time",0),f.r,f.g,f.b,f.a,m.r,m.g,m.b),this.readCurve(d,b,u),u++}n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*Et.ENTRIES])}}}if(t.bones)for(var _ in t.bones){var g=t.bones[_],y=i.findBoneIndex(_);if(-1==y)throw new Error("Bone not found: "+_);for(var h in g)if(l=g[h],"rotate"===h){for((b=new yt(l.length)).boneIndex=y,u=0,c=0;c<l.length;c++)d=l[c],b.setFrame(u,this.getValue(d,"time",0),this.getValue(d,"angle",0)),this.readCurve(d,b,u),u++;n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*yt.ENTRIES])}else{if("translate"!==h&&"scale"!==h&&"shear"!==h)throw new Error("Invalid timeline type for a bone: "+h+" ("+_+")");var b=null,x=1,T=0;for("scale"===h?(b=new xt(l.length),T=1):"shear"===h?b=new Tt(l.length):(b=new bt(l.length),x=r),b.boneIndex=y,u=0,c=0;c<l.length;c++){d=l[c];var S=this.getValue(d,"x",T),E=this.getValue(d,"y",T);b.setFrame(u,this.getValue(d,"time",0),S*x,E*x),this.readCurve(d,b,u),u++}n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*bt.ENTRIES])}}if(t.ik)for(var w in t.ik){var A=t.ik[w],I=i.findIkConstraint(w);for((b=new Mt(A.length)).ikConstraintIndex=i.ikConstraints.indexOf(I),u=0,c=0;c<A.length;c++)d=A[c],b.setFrame(u,this.getValue(d,"time",0),this.getValue(d,"mix",1),this.getValue(d,"softness",0)*r,this.getValue(d,"bendPositive",!0)?1:-1,this.getValue(d,"compress",!1),this.getValue(d,"stretch",!1)),this.readCurve(d,b,u),u++;n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*Mt.ENTRIES])}if(t.transform)for(var w in t.transform){for(A=t.transform[w],I=i.findTransformConstraint(w),(b=new Pt(A.length)).transformConstraintIndex=i.transformConstraints.indexOf(I),u=0,c=0;c<A.length;c++)d=A[c],b.setFrame(u,this.getValue(d,"time",0),this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1),this.getValue(d,"scaleMix",1),this.getValue(d,"shearMix",1)),this.readCurve(d,b,u),u++;n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*Pt.ENTRIES])}if(t.path)for(var w in t.path){A=t.path[w];var C=i.findPathConstraintIndex(w);if(-1==C)throw new Error("Path constraint not found: "+w);var O=i.pathConstraints[C];for(var h in A)if(l=A[h],"position"===h||"spacing"===h){for(b=null,x=1,"spacing"===h?(b=new Dt(l.length),O.spacingMode!=kt.Length&&O.spacingMode!=kt.Fixed||(x=r)):(b=new Rt(l.length),O.positionMode==v.Fixed&&(x=r)),b.pathConstraintIndex=C,u=0,c=0;c<l.length;c++)d=l[c],b.setFrame(u,this.getValue(d,"time",0),this.getValue(d,h,0)*x),this.readCurve(d,b,u),u++;n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*Rt.ENTRIES])}else if("mix"===h){for((b=new Nt(l.length)).pathConstraintIndex=C,u=0,c=0;c<l.length;c++)d=l[c],b.setFrame(u,this.getValue(d,"time",0),this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1)),this.readCurve(d,b,u),u++;n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*Nt.ENTRIES])}}if(t.deform)for(var M in t.deform){var P=t.deform[M],R=i.findSkin(M);if(null!=R)for(var o in P){if(a=P[o],-1==(Q=i.findSlotIndex(o)))throw new Error("Slot not found: "+a.name);for(var h in a){l=a[h];var D=R.getAttachment(Q,h);if(null==D)throw new Error("Deform attachment not found: "+l.name);var N=null!=D.bones,U=D.vertices,F=N?U.length/3*2:U.length;(b=new It(l.length)).slotIndex=Q,b.attachment=D,u=0;for(var L=0;L<l.length;L++){d=l[L];var k=void 0,G=this.getValue(d,"vertices",null);if(null==G)k=N?Y.newFloatArray(F):U;else{k=Y.newFloatArray(F);var X=this.getValue(d,"offset",0);if(Y.arrayCopy(G,0,k,X,G.length),1!=r)for(var j=(c=X)+G.length;c<j;c++)k[c]*=r;if(!N)for(c=0;c<F;c++)k[c]+=U[c]}b.setFrame(u,this.getValue(d,"time",0),k),this.readCurve(d,b,u),u++}n.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}}else if(Z.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+M)}var V=t.drawOrder;if(null==V&&(V=t.draworder),null!=V){b=new Ot(V.length);var H=i.slots.length;for(u=0,L=0;L<V.length;L++){var W=V[L],z=null,q=this.getValue(W,"offsets",null);if(null!=q){z=Y.newArray(H,-1);var K=Y.newArray(H-q.length,0),$=0,J=0;for(c=0;c<q.length;c++){var Q,tt=q[c];if(-1==(Q=i.findSlotIndex(tt.slot)))throw new Error("Slot not found: "+tt.slot);for(;$!=Q;)K[J++]=$++;z[$+tt.offset]=$++}for(;$<H;)K[J++]=$++;for(c=H-1;c>=0;c--)-1==z[c]&&(z[c]=K[--J])}b.setFrame(u++,this.getValue(W,"time",0),z)}n.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}if(t.events){for(b=new Ct(t.events.length),u=0,c=0;c<t.events.length;c++){var et=t.events[c],it=i.findEvent(et.name);if(null==it)throw new Error("Event not found: "+et.name);var rt=new Ht(Y.toSinglePrecision(this.getValue(et,"time",0)),it);rt.intValue=this.getValue(et,"int",it.intValue),rt.floatValue=this.getValue(et,"float",it.floatValue),rt.stringValue=this.getValue(et,"string",it.stringValue),null!=rt.data.audioPath&&(rt.volume=this.getValue(et,"volume",1),rt.balance=this.getValue(et,"balance",0)),b.setFrame(u++,rt)}n.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");i.animations.push(new _t(e,n,s))},t.prototype.readCurve=function(t,e,i){if(t.hasOwnProperty("curve"))if("stepped"===t.curve)e.setStepped(i);else{var r=t.curve;e.setCurve(i,r,this.getValue(t,"c2",0),this.getValue(t,"c3",1),this.getValue(t,"c4",1))}},t.prototype.getValue=function(t,e,i){return void 0!==t[e]?t[e]:i},t.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return l.T$.NORMAL;if("additive"==t)return l.T$.ADD;if("multiply"==t)return l.T$.MULTIPLY;if("screen"==t)return l.T$.SCREEN;throw new Error("Unknown blend mode: "+t)},t.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return v.Fixed;if("percent"==t)return v.Percent;throw new Error("Unknown position mode: "+t)},t.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return kt.Length;if("fixed"==t)return kt.Fixed;if("percent"==t)return kt.Percent;throw new Error("Unknown position mode: "+t)},t.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return y.Tangent;if("chain"==t)return y.Chain;if("chainscale"==t)return y.ChainScale;throw new Error("Unknown rotate mode: "+t)},t.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return b.Normal;if("onlytranslation"==t)return b.OnlyTranslation;if("norotationorreflection"==t)return b.NoRotationOrReflection;if("noscale"==t)return b.NoScale;if("noscaleorreflection"==t)return b.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},t}(),ue=function(t,e,i,r,n){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=r,this.inheritDeform=n},ce=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nt(e,t),e.prototype.createSkeleton=function(t){this.skeleton=new Qt(t),this.skeleton.updateWorldTransform(),this.stateData=new Gt(t),this.state=new Ut(this.stateData)},e}(tt),de=function(t,e){return(de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function pe(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}de(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var fe,me=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t},_e=function(t){function e(i){var r=t.call(this,i)||this;return r.id=(65535&e.nextID++)<<11,r.worldVerticesLength=0,r}return pe(e,t),e.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},e.prototype.computeWorldVertices=function(t,e,i,r,n,s){i=n+(i>>1)*s;var o=t.bone.skeleton,a=t.attachmentVertices,h=this.vertices,l=this.bones;if(null!=l){for(var u=0,c=0,d=0;d<e;d+=2)u+=(_=l[u])+1,c+=_;var p=o.bones;if(0==a.length)for(C=n,E=3*c;C<i;C+=s){var f=0,m=0,_=l[u++];for(_+=u;u<_;u++,E+=3){b=p[l[u]].matrix,O=h[E],M=h[E+1];var g=h[E+2];f+=(O*b.a+M*b.c+b.tx)*g,m+=(O*b.b+M*b.d+b.ty)*g}r[C]=f,r[C+1]=m}else for(var v=a,y=(C=n,E=3*c,c<<1);C<i;C+=s){for(f=0,m=0,_=l[u++],_+=u;u<_;u++,E+=3,y+=2)b=p[l[u]].matrix,O=h[E]+v[y],M=h[E+1]+v[y+1],g=h[E+2],f+=(O*b.a+M*b.c+b.tx)*g,m+=(O*b.b+M*b.d+b.ty)*g;r[C]=f,r[C+1]=m}}else{a.length>0&&(h=a);for(var b,x=(b=t.bone.matrix).tx,T=b.ty,S=b.a,E=b.c,w=b.b,A=b.d,I=e,C=n;C<i;I+=2,C+=s){var O=h[I],M=h[I+1];r[C]=O*S+M*E+x,r[C+1]=O*w+M*A+T}}},e.prototype.applyDeform=function(t){return this==t},e.nextID=0,e}(me),ge=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.BoundingBox,i.color=new B(1,1,1,1),i}return pe(e,t),e}(_e),ve=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Clipping,i.color=new B(.2275,.2275,.8078,1),i}return pe(e,t),e}(_e),ye=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Mesh,i.color=new B(1,1,1,1),i.inheritDeform=!1,i.tempColor=new B(0,0,0,0),i}return pe(e,t),e.prototype.applyDeform=function(t){return this==t||this.inheritDeform&&this.parentMesh==t},e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},e}(_e),be=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Path,i.closed=!1,i.constantSpeed=!1,i.color=new B(1,1,1,1),i}return pe(e,t),e}(_e),xe=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Point,i.color=new B(.38,.94,0,1),i}return pe(e,t),e.prototype.computeWorldPosition=function(t,e){var i=t.matrix;return e.x=this.x*i.a+this.y*i.c+t.worldX,e.y=this.x*i.b+this.y*i.d+t.worldY,e},e.prototype.computeWorldRotation=function(t){var e=t.matrix,i=G.cosDeg(this.rotation),r=G.sinDeg(this.rotation),n=i*e.a+r*e.c,s=i*e.b+r*e.d;return Math.atan2(s,n)*G.radDeg},e}(_e),Te=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Region,i.x=0,i.y=0,i.scaleX=1,i.scaleY=1,i.rotation=0,i.width=0,i.height=0,i.color=new B(1,1,1,1),i.offset=Y.newFloatArray(8),i.uvs=Y.newFloatArray(8),i.tempColor=new B(1,1,1,1),i}return pe(e,t),e.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*i,s=r+this.region.width*t,o=n+this.region.height*i,a=this.rotation*Math.PI/180,h=Math.cos(a),l=Math.sin(a),u=r*h+this.x,c=r*l,d=n*h+this.y,p=n*l,f=s*h+this.x,m=s*l,_=o*h+this.y,g=o*l,v=this.offset;v[e.OX1]=u-p,v[e.OY1]=d+c,v[e.OX2]=u-g,v[e.OY2]=_+c,v[e.OX3]=f-g,v[e.OY3]=_+m,v[e.OX4]=f-p,v[e.OY4]=d+m},e.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},e.prototype.computeWorldVertices=function(t,i,r,n){var s=this.offset,o=t.matrix,a=o.tx,h=o.ty,l=o.a,u=o.c,c=o.b,d=o.d,p=0,f=0;p=s[e.OX1],f=s[e.OY1],i[r]=p*l+f*u+a,i[r+1]=p*c+f*d+h,r+=n,p=s[e.OX2],f=s[e.OY2],i[r]=p*l+f*u+a,i[r+1]=p*c+f*d+h,r+=n,p=s[e.OX3],f=s[e.OY3],i[r]=p*l+f*u+a,i[r+1]=p*c+f*d+h,r+=n,p=s[e.OX4],f=s[e.OY4],i[r]=p*l+f*u+a,i[r+1]=p*c+f*d+h},e.OX1=0,e.OY1=1,e.OX2=2,e.OY2=3,e.OX3=4,e.OY3=5,e.OX4=6,e.OY4=7,e.X1=0,e.Y1=1,e.C1R=2,e.C1G=3,e.C1B=4,e.C1A=5,e.U1=6,e.V1=7,e.X2=8,e.Y2=9,e.C2R=10,e.C2G=11,e.C2B=12,e.C2A=13,e.U2=14,e.V2=15,e.X3=16,e.Y3=17,e.C3R=18,e.C3G=19,e.C3B=20,e.C3A=21,e.U3=22,e.V3=23,e.X4=24,e.Y4=25,e.C4R=26,e.C4G=27,e.C4B=28,e.C4A=29,e.U4=30,e.V4=31,e}(me),Se=function(){function t(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return t.prototype.begin=function(t){},t.prototype.transform=function(t,e,i,r){t.x+=G.randomTriangular(-this.jitterX,this.jitterY),t.y+=G.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}(),Ee=function(){function t(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return t.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},t.prototype.transform=function(e,i,r,n){var s=this.angle*G.degreesToRadians,o=e.x-this.worldX,a=e.y-this.worldY,h=Math.sqrt(o*o+a*a);if(h<this.radius){var l=t.interpolation.apply(0,s,(this.radius-h)/this.radius),u=Math.cos(l),c=Math.sin(l);e.x=u*o-c*a+this.worldX,e.y=c*o+u*a+this.worldY}},t.prototype.end=function(){},t.interpolation=new V(2),t}(),we=function(){function t(t,e,i){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=i}return t.prototype.apply=function(t,e,i,r,n,s,o,a){if(null==t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,l=0,u=h.length;l<u;l++)h[l].apply(t,e,i,n,s,o,a)},t.binarySearch=function(t,e,i){void 0===i&&(i=1);var r=0,n=t.length/i-2;if(0==n)return i;for(var s=n>>>1;;){if(t[(s+1)*i]<=e?r=s+1:n=s,r==n)return(r+1)*i;s=r+n>>>1}},t.linearSearch=function(t,e,i){for(var r=0,n=t.length-i;r<=n;r+=i)if(t[r]>e)return r;return-1},t}();!function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(fe||(fe={}));var Ae,Ie=function(){function t(e){if(e<=0)throw new Error("frameCount must be > 0: "+e);this.curves=Y.newFloatArray((e-1)*t.BEZIER_SIZE)}return t.prototype.getFrameCount=function(){return this.curves.length/t.BEZIER_SIZE+1},t.prototype.setLinear=function(e){this.curves[e*t.BEZIER_SIZE]=t.LINEAR},t.prototype.setStepped=function(e){this.curves[e*t.BEZIER_SIZE]=t.STEPPED},t.prototype.getCurveType=function(e){var i=e*t.BEZIER_SIZE;if(i==this.curves.length)return t.LINEAR;var r=this.curves[i];return r==t.LINEAR?t.LINEAR:r==t.STEPPED?t.STEPPED:t.BEZIER},t.prototype.setCurve=function(e,i,r,n,s){var o=.03*(2*-i+n),a=.03*(2*-r+s),h=.006*(3*(i-n)+1),l=.006*(3*(r-s)+1),u=2*o+h,c=2*a+l,d=.3*i+o+.16666667*h,p=.3*r+a+.16666667*l,f=e*t.BEZIER_SIZE,m=this.curves;m[f++]=t.BEZIER;for(var _=d,g=p,v=f+t.BEZIER_SIZE-1;f<v;f+=2)m[f]=_,m[f+1]=g,d+=u,p+=c,u+=h,c+=l,_+=d,g+=p},t.prototype.getCurvePercent=function(e,i){i=G.clamp(i,0,1);var r=this.curves,n=e*t.BEZIER_SIZE,s=r[n];if(s==t.LINEAR)return i;if(s==t.STEPPED)return 0;for(var o=0,a=++n,h=n+t.BEZIER_SIZE-1;n<h;n+=2)if((o=r[n])>=i){var l=void 0,u=void 0;return n==a?(l=0,u=0):(l=r[n-2],u=r[n-1]),u+(r[n+1]-u)*(i-l)/(o-l)}var c=r[n-1];return c+(1-c)*(i-o)/(1-o)},t.LINEAR=0,t.STEPPED=1,t.BEZIER=2,t.BEZIER_SIZE=19,t}(),Ce=function(t){function e(e){var i=t.call(this,e)||this;return i.frames=Y.newFloatArray(e<<1),i}return pe(e,t),e.prototype.getPropertyId=function(){return(fe.rotate<<24)+this.boneIndex},e.prototype.setFrame=function(t,i,r){t<<=1,this.frames[t]=i,this.frames[t+e.ROTATION]=r},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.bones[this.boneIndex];if(r<h[0])switch(o){case _.setup:return void(l.rotation=l.data.rotation);case _.first:var u=l.data.rotation-l.rotation;l.rotation+=(u-360*(16384-(16384.499999999996-u/360|0)))*s}else if(r>=h[h.length-e.ENTRIES]){var c=h[h.length+e.PREV_ROTATION];switch(o){case _.setup:l.rotation=l.data.rotation+c*s;break;case _.first:case _.replace:c+=l.data.rotation-l.rotation,c-=360*(16384-(16384.499999999996-c/360|0));case _.add:l.rotation+=c*s}}else{var d=we.binarySearch(h,r,e.ENTRIES),p=h[d+e.PREV_ROTATION],f=h[d],m=this.getCurvePercent((d>>1)-1,1-(r-f)/(h[d+e.PREV_TIME]-f)),g=h[d+e.ROTATION]-p;switch(g=p+(g-360*(16384-(16384.499999999996-g/360|0)))*m,o){case _.setup:l.rotation=l.data.rotation+(g-360*(16384-(16384.499999999996-g/360|0)))*s;break;case _.first:case _.replace:g+=l.data.rotation-l.rotation;case _.add:l.rotation+=(g-360*(16384-(16384.499999999996-g/360|0)))*s}}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_ROTATION=-1,e.ROTATION=1,e}(Ie),Oe=function(t){function e(i){var r=t.call(this,i)||this;return r.frames=Y.newFloatArray(i*e.ENTRIES),r}return pe(e,t),e.prototype.getPropertyId=function(){return(fe.translate<<24)+this.boneIndex},e.prototype.setFrame=function(t,i,r,n){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.X]=r,this.frames[t+e.Y]=n},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.bones[this.boneIndex];if(r<h[0])switch(o){case _.setup:return l.x=l.data.x,void(l.y=l.data.y);case _.first:l.x+=(l.data.x-l.x)*s,l.y+=(l.data.y-l.y)*s}else{var u=0,c=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_X],c=h[h.length+e.PREV_Y];else{var d=we.binarySearch(h,r,e.ENTRIES);u=h[d+e.PREV_X],c=h[d+e.PREV_Y];var p=h[d],f=this.getCurvePercent(d/e.ENTRIES-1,1-(r-p)/(h[d+e.PREV_TIME]-p));u+=(h[d+e.X]-u)*f,c+=(h[d+e.Y]-c)*f}switch(o){case _.setup:l.x=l.data.x+u*s,l.y=l.data.y+c*s;break;case _.first:case _.replace:l.x+=(l.data.x+u-l.x)*s,l.y+=(l.data.y+c-l.y)*s;break;case _.add:l.x+=u*s,l.y+=c*s}}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_X=-2,e.PREV_Y=-1,e.X=1,e.Y=2,e}(Ie),Me=function(t){function e(e){return t.call(this,e)||this}return pe(e,t),e.prototype.getPropertyId=function(){return(fe.scale<<24)+this.boneIndex},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.bones[this.boneIndex];if(r<h[0])switch(o){case _.setup:return l.scaleX=l.data.scaleX,void(l.scaleY=l.data.scaleY);case _.first:l.scaleX+=(l.data.scaleX-l.scaleX)*s,l.scaleY+=(l.data.scaleY-l.scaleY)*s}else{var u=0,c=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_X]*l.data.scaleX,c=h[h.length+e.PREV_Y]*l.data.scaleY;else{var d=we.binarySearch(h,r,e.ENTRIES);u=h[d+e.PREV_X],c=h[d+e.PREV_Y];var p=h[d],f=this.getCurvePercent(d/e.ENTRIES-1,1-(r-p)/(h[d+e.PREV_TIME]-p));u=(u+(h[d+e.X]-u)*f)*l.data.scaleX,c=(c+(h[d+e.Y]-c)*f)*l.data.scaleY}if(1==s)o==_.add?(l.scaleX+=u-l.data.scaleX,l.scaleY+=c-l.data.scaleY):(l.scaleX=u,l.scaleY=c);else{var m=0,v=0;if(a==g.mixOut)switch(o){case _.setup:m=l.data.scaleX,v=l.data.scaleY,l.scaleX=m+(Math.abs(u)*G.signum(m)-m)*s,l.scaleY=v+(Math.abs(c)*G.signum(v)-v)*s;break;case _.first:case _.replace:m=l.scaleX,v=l.scaleY,l.scaleX=m+(Math.abs(u)*G.signum(m)-m)*s,l.scaleY=v+(Math.abs(c)*G.signum(v)-v)*s;break;case _.add:m=l.scaleX,v=l.scaleY,l.scaleX=m+(Math.abs(u)*G.signum(m)-l.data.scaleX)*s,l.scaleY=v+(Math.abs(c)*G.signum(v)-l.data.scaleY)*s}else switch(o){case _.setup:m=Math.abs(l.data.scaleX)*G.signum(u),v=Math.abs(l.data.scaleY)*G.signum(c),l.scaleX=m+(u-m)*s,l.scaleY=v+(c-v)*s;break;case _.first:case _.replace:m=Math.abs(l.scaleX)*G.signum(u),v=Math.abs(l.scaleY)*G.signum(c),l.scaleX=m+(u-m)*s,l.scaleY=v+(c-v)*s;break;case _.add:m=G.signum(u),v=G.signum(c),l.scaleX=Math.abs(l.scaleX)*m+(u-Math.abs(l.data.scaleX)*m)*s,l.scaleY=Math.abs(l.scaleY)*v+(c-Math.abs(l.data.scaleY)*v)*s}}}},e}(Oe),Pe=function(t){function e(e){return t.call(this,e)||this}return pe(e,t),e.prototype.getPropertyId=function(){return(fe.shear<<24)+this.boneIndex},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.bones[this.boneIndex];if(r<h[0])switch(o){case _.setup:return l.shearX=l.data.shearX,void(l.shearY=l.data.shearY);case _.first:l.shearX+=(l.data.shearX-l.shearX)*s,l.shearY+=(l.data.shearY-l.shearY)*s}else{var u=0,c=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_X],c=h[h.length+e.PREV_Y];else{var d=we.binarySearch(h,r,e.ENTRIES);u=h[d+e.PREV_X],c=h[d+e.PREV_Y];var p=h[d],f=this.getCurvePercent(d/e.ENTRIES-1,1-(r-p)/(h[d+e.PREV_TIME]-p));u+=(h[d+e.X]-u)*f,c+=(h[d+e.Y]-c)*f}switch(o){case _.setup:l.shearX=l.data.shearX+u*s,l.shearY=l.data.shearY+c*s;break;case _.first:case _.replace:l.shearX+=(l.data.shearX+u-l.shearX)*s,l.shearY+=(l.data.shearY+c-l.shearY)*s;break;case _.add:l.shearX+=u*s,l.shearY+=c*s}}},e}(Oe),Re=function(t){function e(i){var r=t.call(this,i)||this;return r.frames=Y.newFloatArray(i*e.ENTRIES),r}return pe(e,t),e.prototype.getPropertyId=function(){return(fe.color<<24)+this.slotIndex},e.prototype.setFrame=function(t,i,r,n,s,o){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.R]=r,this.frames[t+e.G]=n,this.frames[t+e.B]=s,this.frames[t+e.A]=o},e.prototype.apply=function(t,i,r,n,s,o,a){var h=t.slots[this.slotIndex],l=this.frames;if(r<l[0])switch(o){case _.setup:return void h.color.setFromColor(h.data.color);case _.first:var u=h.color,c=h.data.color;u.add((c.r-u.r)*s,(c.g-u.g)*s,(c.b-u.b)*s,(c.a-u.a)*s)}else{var d=0,p=0,f=0,m=0;if(r>=l[l.length-e.ENTRIES]){var g=l.length;d=l[g+e.PREV_R],p=l[g+e.PREV_G],f=l[g+e.PREV_B],m=l[g+e.PREV_A]}else{var v=we.binarySearch(l,r,e.ENTRIES);d=l[v+e.PREV_R],p=l[v+e.PREV_G],f=l[v+e.PREV_B],m=l[v+e.PREV_A];var y=l[v],b=this.getCurvePercent(v/e.ENTRIES-1,1-(r-y)/(l[v+e.PREV_TIME]-y));d+=(l[v+e.R]-d)*b,p+=(l[v+e.G]-p)*b,f+=(l[v+e.B]-f)*b,m+=(l[v+e.A]-m)*b}1==s?h.color.set(d,p,f,m):(u=h.color,o==_.setup&&u.setFromColor(h.data.color),u.add((d-u.r)*s,(p-u.g)*s,(f-u.b)*s,(m-u.a)*s))}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_R=-4,e.PREV_G=-3,e.PREV_B=-2,e.PREV_A=-1,e.R=1,e.G=2,e.B=3,e.A=4,e}(Ie),De=function(t){function e(i){var r=t.call(this,i)||this;return r.frames=Y.newFloatArray(i*e.ENTRIES),r}return pe(e,t),e.prototype.getPropertyId=function(){return(fe.twoColor<<24)+this.slotIndex},e.prototype.setFrame=function(t,i,r,n,s,o,a,h,l){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.R]=r,this.frames[t+e.G]=n,this.frames[t+e.B]=s,this.frames[t+e.A]=o,this.frames[t+e.R2]=a,this.frames[t+e.G2]=h,this.frames[t+e.B2]=l},e.prototype.apply=function(t,i,r,n,s,o,a){var h=t.slots[this.slotIndex],l=this.frames;if(r<l[0])switch(o){case _.setup:return h.color.setFromColor(h.data.color),void h.darkColor.setFromColor(h.data.darkColor);case _.first:var u=h.color,c=h.darkColor,d=h.data.color,p=h.data.darkColor;u.add((d.r-u.r)*s,(d.g-u.g)*s,(d.b-u.b)*s,(d.a-u.a)*s),c.add((p.r-c.r)*s,(p.g-c.g)*s,(p.b-c.b)*s,0)}else{var f=0,m=0,g=0,v=0,y=0,b=0,x=0;if(r>=l[l.length-e.ENTRIES]){var T=l.length;f=l[T+e.PREV_R],m=l[T+e.PREV_G],g=l[T+e.PREV_B],v=l[T+e.PREV_A],y=l[T+e.PREV_R2],b=l[T+e.PREV_G2],x=l[T+e.PREV_B2]}else{var S=we.binarySearch(l,r,e.ENTRIES);f=l[S+e.PREV_R],m=l[S+e.PREV_G],g=l[S+e.PREV_B],v=l[S+e.PREV_A],y=l[S+e.PREV_R2],b=l[S+e.PREV_G2],x=l[S+e.PREV_B2];var E=l[S],w=this.getCurvePercent(S/e.ENTRIES-1,1-(r-E)/(l[S+e.PREV_TIME]-E));f+=(l[S+e.R]-f)*w,m+=(l[S+e.G]-m)*w,g+=(l[S+e.B]-g)*w,v+=(l[S+e.A]-v)*w,y+=(l[S+e.R2]-y)*w,b+=(l[S+e.G2]-b)*w,x+=(l[S+e.B2]-x)*w}1==s?(h.color.set(f,m,g,v),h.darkColor.set(y,b,x,1)):(u=h.color,c=h.darkColor,o==_.setup&&(u.setFromColor(h.data.color),c.setFromColor(h.data.darkColor)),u.add((f-u.r)*s,(m-u.g)*s,(g-u.b)*s,(v-u.a)*s),c.add((y-c.r)*s,(b-c.g)*s,(x-c.b)*s,0))}},e.ENTRIES=8,e.PREV_TIME=-8,e.PREV_R=-7,e.PREV_G=-6,e.PREV_B=-5,e.PREV_A=-4,e.PREV_R2=-3,e.PREV_G2=-2,e.PREV_B2=-1,e.R=1,e.G=2,e.B=3,e.A=4,e.R2=5,e.G2=6,e.B2=7,e}(Ie),Ne=function(){function t(t){this.frames=Y.newFloatArray(t),this.attachmentNames=new Array(t)}return t.prototype.getPropertyId=function(){return(fe.attachment<<24)+this.slotIndex},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},t.prototype.apply=function(t,e,i,r,n,s,o){var a=t.slots[this.slotIndex];if(o!=g.mixOut||s!=_.setup){var h=this.frames;if(i<h[0]){if(s==_.setup||s==_.first){var l=a.data.attachmentName;a.setAttachment(null==l?null:t.getAttachment(this.slotIndex,l))}}else{var u;u=i>=h[h.length-1]?h.length-1:we.binarySearch(h,i,1)-1;var c=this.attachmentNames[u];t.slots[this.slotIndex].setAttachment(null==c?null:t.getAttachment(this.slotIndex,c))}}else{var d=a.data.attachmentName;a.setAttachment(null==d?null:t.getAttachment(this.slotIndex,d))}},t}(),Ue=null,Fe=function(t){function e(e){var i=t.call(this,e)||this;return i.frames=Y.newFloatArray(e),i.frameVertices=new Array(e),null==Ue&&(Ue=Y.newFloatArray(64)),i}return pe(e,t),e.prototype.getPropertyId=function(){return(fe.deform<<27)+ +this.attachment.id+this.slotIndex},e.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.frameVertices[t]=i},e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.slots[this.slotIndex],h=a.getAttachment();if(h instanceof _e&&h.applyDeform(this.attachment)){var l=a.attachmentVertices;0==l.length&&(s=_.setup);var u=this.frameVertices,c=u[0].length,d=this.frames;if(i<d[0]){var p=h;switch(s){case _.setup:return void(l.length=0);case _.first:if(1==n){l.length=0;break}var f=Y.setArraySize(l,c);if(null==p.bones)for(var m=p.vertices,g=0;g<c;g++)f[g]+=(m[g]-f[g])*n;else for(n=1-n,g=0;g<c;g++)f[g]*=n}}else{var v=Y.setArraySize(l,c);if(i>=d[d.length-1]){var y=u[d.length-1];if(1==n)if(s==_.add)if(null==(p=h).bones)for(m=p.vertices,g=0;g<c;g++)v[g]+=y[g]-m[g];else for(g=0;g<c;g++)v[g]+=y[g];else Y.arrayCopy(y,0,v,0,c);else switch(s){case _.setup:var b=h;if(null==b.bones)for(m=b.vertices,g=0;g<c;g++){var x=m[g];v[g]=x+(y[g]-x)*n}else for(g=0;g<c;g++)v[g]=y[g]*n;break;case _.first:case _.replace:for(g=0;g<c;g++)v[g]+=(y[g]-v[g])*n;case _.add:if(null==(p=h).bones)for(m=p.vertices,g=0;g<c;g++)v[g]+=(y[g]-m[g])*n;else for(g=0;g<c;g++)v[g]+=y[g]*n}}else{var T=we.binarySearch(d,i),S=u[T-1],E=u[T],w=d[T],A=this.getCurvePercent(T-1,1-(i-w)/(d[T-1]-w));if(1==n)if(s==_.add)if(null==(p=h).bones)for(m=p.vertices,g=0;g<c;g++){var I=S[g];v[g]+=I+(E[g]-I)*A-m[g]}else for(g=0;g<c;g++)I=S[g],v[g]+=I+(E[g]-I)*A;else for(g=0;g<c;g++)I=S[g],v[g]=I+(E[g]-I)*A;else switch(s){case _.setup:var C=h;if(null==C.bones)for(m=C.vertices,g=0;g<c;g++)I=S[g],x=m[g],v[g]=x+(I+(E[g]-I)*A-x)*n;else for(g=0;g<c;g++)I=S[g],v[g]=(I+(E[g]-I)*A)*n;break;case _.first:case _.replace:for(g=0;g<c;g++)I=S[g],v[g]+=(I+(E[g]-I)*A-v[g])*n;break;case _.add:if(null==(p=h).bones)for(m=p.vertices,g=0;g<c;g++)I=S[g],v[g]+=(I+(E[g]-I)*A-m[g])*n;else for(g=0;g<c;g++)I=S[g],v[g]+=(I+(E[g]-I)*A)*n}}}}},e}(Ie),Le=function(){function t(t){this.frames=Y.newFloatArray(t),this.events=new Array(t)}return t.prototype.getPropertyId=function(){return fe.event<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},t.prototype.apply=function(t,e,i,r,n,s,o){if(null!=r){var a=this.frames,h=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,r,n,s,o),e=-1;else if(e>=a[h-1])return;if(!(i<a[0])){var l=0;if(e<a[0])l=0;else for(var u=a[l=we.binarySearch(a,e)];l>0&&a[l-1]==u;)l--;for(;l<h&&i>=a[l];l++)r.push(this.events[l])}}},t}(),ke=function(){function t(t){this.frames=Y.newFloatArray(t),this.drawOrders=new Array(t)}return t.prototype.getPropertyId=function(){return fe.drawOrder<<24},t.prototype.getFrameCount=function(){return this.frames.length},t.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},t.prototype.apply=function(t,e,i,r,n,s,o){var a=t.drawOrder,h=t.slots;if(o!=g.mixOut||s!=_.setup){var l=this.frames;if(i<l[0])s!=_.setup&&s!=_.first||Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var u;u=i>=l[l.length-1]?l.length-1:we.binarySearch(l,i)-1;var c=this.drawOrders[u];if(null==c)Y.arrayCopy(h,0,a,0,h.length);else for(var d=0,p=c.length;d<p;d++)a[d]=h[c[d]]}}else Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},t}(),Be=function(t){function e(i){var r=t.call(this,i)||this;return r.frames=Y.newFloatArray(i*e.ENTRIES),r}return pe(e,t),e.prototype.getPropertyId=function(){return(fe.ikConstraint<<24)+this.ikConstraintIndex},e.prototype.setFrame=function(t,i,r,n,s,o){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.MIX]=r,this.frames[t+e.BEND_DIRECTION]=n,this.frames[t+e.COMPRESS]=s?1:0,this.frames[t+e.STRETCH]=o?1:0},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.ikConstraints[this.ikConstraintIndex];if(r<h[0])switch(o){case _.setup:return l.mix=l.data.mix,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,void(l.stretch=l.data.stretch);case _.first:l.mix+=(l.data.mix-l.mix)*s,l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch}else if(r>=h[h.length-e.ENTRIES])o==_.setup?(l.mix=l.data.mix+(h[h.length+e.PREV_MIX]-l.data.mix)*s,a==g.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=h[h.length+e.PREV_BEND_DIRECTION],l.compress=0!=h[h.length+e.PREV_COMPRESS],l.stretch=0!=h[h.length+e.PREV_STRETCH])):(l.mix+=(h[h.length+e.PREV_MIX]-l.mix)*s,a==g.mixIn&&(l.bendDirection=h[h.length+e.PREV_BEND_DIRECTION],l.compress=0!=h[h.length+e.PREV_COMPRESS],l.stretch=0!=h[h.length+e.PREV_STRETCH]));else{var u=we.binarySearch(h,r,e.ENTRIES),c=h[u+e.PREV_MIX],d=h[u],p=this.getCurvePercent(u/e.ENTRIES-1,1-(r-d)/(h[u+e.PREV_TIME]-d));o==_.setup?(l.mix=l.data.mix+(c+(h[u+e.MIX]-c)*p-l.data.mix)*s,a==g.mixOut?(l.bendDirection=l.data.bendDirection,l.compress=l.data.compress,l.stretch=l.data.stretch):(l.bendDirection=h[u+e.PREV_BEND_DIRECTION],l.compress=0!=h[u+e.PREV_COMPRESS],l.stretch=0!=h[u+e.PREV_STRETCH])):(l.mix+=(c+(h[u+e.MIX]-c)*p-l.mix)*s,a==g.mixIn&&(l.bendDirection=h[u+e.PREV_BEND_DIRECTION],l.compress=0!=h[u+e.PREV_COMPRESS],l.stretch=0!=h[u+e.PREV_STRETCH]))}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_MIX=-4,e.PREV_BEND_DIRECTION=-3,e.PREV_COMPRESS=-2,e.PREV_STRETCH=-1,e.MIX=1,e.BEND_DIRECTION=2,e.COMPRESS=3,e.STRETCH=4,e}(Ie),Ge=function(t){function e(i){var r=t.call(this,i)||this;return r.frames=Y.newFloatArray(i*e.ENTRIES),r}return pe(e,t),e.prototype.getPropertyId=function(){return(fe.transformConstraint<<24)+this.transformConstraintIndex},e.prototype.setFrame=function(t,i,r,n,s,o){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.ROTATE]=r,this.frames[t+e.TRANSLATE]=n,this.frames[t+e.SCALE]=s,this.frames[t+e.SHEAR]=o},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.transformConstraints[this.transformConstraintIndex];if(r<h[0]){var u=l.data;switch(o){case _.setup:return l.rotateMix=u.rotateMix,l.translateMix=u.translateMix,l.scaleMix=u.scaleMix,void(l.shearMix=u.shearMix);case _.first:l.rotateMix+=(u.rotateMix-l.rotateMix)*s,l.translateMix+=(u.translateMix-l.translateMix)*s,l.scaleMix+=(u.scaleMix-l.scaleMix)*s,l.shearMix+=(u.shearMix-l.shearMix)*s}}else{var c=0,d=0,p=0,f=0;if(r>=h[h.length-e.ENTRIES]){var m=h.length;c=h[m+e.PREV_ROTATE],d=h[m+e.PREV_TRANSLATE],p=h[m+e.PREV_SCALE],f=h[m+e.PREV_SHEAR]}else{var g=we.binarySearch(h,r,e.ENTRIES);c=h[g+e.PREV_ROTATE],d=h[g+e.PREV_TRANSLATE],p=h[g+e.PREV_SCALE],f=h[g+e.PREV_SHEAR];var v=h[g],y=this.getCurvePercent(g/e.ENTRIES-1,1-(r-v)/(h[g+e.PREV_TIME]-v));c+=(h[g+e.ROTATE]-c)*y,d+=(h[g+e.TRANSLATE]-d)*y,p+=(h[g+e.SCALE]-p)*y,f+=(h[g+e.SHEAR]-f)*y}o==_.setup?(u=l.data,l.rotateMix=u.rotateMix+(c-u.rotateMix)*s,l.translateMix=u.translateMix+(d-u.translateMix)*s,l.scaleMix=u.scaleMix+(p-u.scaleMix)*s,l.shearMix=u.shearMix+(f-u.shearMix)*s):(l.rotateMix+=(c-l.rotateMix)*s,l.translateMix+=(d-l.translateMix)*s,l.scaleMix+=(p-l.scaleMix)*s,l.shearMix+=(f-l.shearMix)*s)}},e.ENTRIES=5,e.PREV_TIME=-5,e.PREV_ROTATE=-4,e.PREV_TRANSLATE=-3,e.PREV_SCALE=-2,e.PREV_SHEAR=-1,e.ROTATE=1,e.TRANSLATE=2,e.SCALE=3,e.SHEAR=4,e}(Ie),Xe=function(t){function e(i){var r=t.call(this,i)||this;return r.frames=Y.newFloatArray(i*e.ENTRIES),r}return pe(e,t),e.prototype.getPropertyId=function(){return(fe.pathConstraintPosition<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(t,i,r){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.VALUE]=r},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(r<h[0])switch(o){case _.setup:return void(l.position=l.data.position);case _.first:l.position+=(l.data.position-l.position)*s}else{var u=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_VALUE];else{var c=we.binarySearch(h,r,e.ENTRIES);u=h[c+e.PREV_VALUE];var d=h[c],p=this.getCurvePercent(c/e.ENTRIES-1,1-(r-d)/(h[c+e.PREV_TIME]-d));u+=(h[c+e.VALUE]-u)*p}o==_.setup?l.position=l.data.position+(u-l.data.position)*s:l.position+=(u-l.position)*s}},e.ENTRIES=2,e.PREV_TIME=-2,e.PREV_VALUE=-1,e.VALUE=1,e}(Ie),je=function(t){function e(e){return t.call(this,e)||this}return pe(e,t),e.prototype.getPropertyId=function(){return(fe.pathConstraintSpacing<<24)+this.pathConstraintIndex},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(r<h[0])switch(o){case _.setup:return void(l.spacing=l.data.spacing);case _.first:l.spacing+=(l.data.spacing-l.spacing)*s}else{var u=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_VALUE];else{var c=we.binarySearch(h,r,e.ENTRIES);u=h[c+e.PREV_VALUE];var d=h[c],p=this.getCurvePercent(c/e.ENTRIES-1,1-(r-d)/(h[c+e.PREV_TIME]-d));u+=(h[c+e.VALUE]-u)*p}o==_.setup?l.spacing=l.data.spacing+(u-l.data.spacing)*s:l.spacing+=(u-l.spacing)*s}},e}(Xe),Ve=function(t){function e(i){var r=t.call(this,i)||this;return r.frames=Y.newFloatArray(i*e.ENTRIES),r}return pe(e,t),e.prototype.getPropertyId=function(){return(fe.pathConstraintMix<<24)+this.pathConstraintIndex},e.prototype.setFrame=function(t,i,r,n){t*=e.ENTRIES,this.frames[t]=i,this.frames[t+e.ROTATE]=r,this.frames[t+e.TRANSLATE]=n},e.prototype.apply=function(t,i,r,n,s,o,a){var h=this.frames,l=t.pathConstraints[this.pathConstraintIndex];if(r<h[0])switch(o){case _.setup:return l.rotateMix=l.data.rotateMix,void(l.translateMix=l.data.translateMix);case _.first:l.rotateMix+=(l.data.rotateMix-l.rotateMix)*s,l.translateMix+=(l.data.translateMix-l.translateMix)*s}else{var u=0,c=0;if(r>=h[h.length-e.ENTRIES])u=h[h.length+e.PREV_ROTATE],c=h[h.length+e.PREV_TRANSLATE];else{var d=we.binarySearch(h,r,e.ENTRIES);u=h[d+e.PREV_ROTATE],c=h[d+e.PREV_TRANSLATE];var p=h[d],f=this.getCurvePercent(d/e.ENTRIES-1,1-(r-p)/(h[d+e.PREV_TIME]-p));u+=(h[d+e.ROTATE]-u)*f,c+=(h[d+e.TRANSLATE]-c)*f}o==_.setup?(l.rotateMix=l.data.rotateMix+(u-l.data.rotateMix)*s,l.translateMix=l.data.translateMix+(c-l.data.translateMix)*s):(l.rotateMix+=(u-l.rotateMix)*s,l.translateMix+=(c-l.translateMix)*s)}},e.ENTRIES=3,e.PREV_TIME=-3,e.PREV_ROTATE=-2,e.PREV_TRANSLATE=-1,e.ROTATE=1,e.TRANSLATE=2,e}(Ie),Ye=function(){function t(t){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new We(this),this.propertyIDs=new L,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new W((function(){return new He})),this.data=t}return t.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,i=0,r=e.length;i<r;i++){var n=e[i];if(null!=n){n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;var s=t*n.timeScale;if(n.delay>0){if(n.delay-=s,n.delay>0)continue;s=-n.delay,n.delay=0}var o=n.next;if(null!=o){var a=n.trackLast-o.delay;if(a>=0){for(o.delay=0,o.trackTime=0==n.timeScale?0:(a/n.timeScale+t)*o.timeScale,n.trackTime+=s,this.setCurrent(i,o,!0);null!=o.mixingFrom;)o.mixTime+=t,o=o.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&null==n.mixingFrom){e[i]=null,this.queue.end(n),this.disposeNext(n);continue}if(null!=n.mixingFrom&&this.updateMixingFrom(n,t)){var h=n.mixingFrom;for(n.mixingFrom=null,null!=h&&(h.mixingTo=null);null!=h;)this.queue.end(h),h=h.mixingFrom}n.trackTime+=s}}this.queue.drain()},t.prototype.updateMixingFrom=function(t,e){var i=t.mixingFrom;if(null==i)return!0;var r=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,null!=i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),r):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)},t.prototype.apply=function(e){if(null==e)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var i=this.events,r=this.tracks,n=!1,s=0,o=r.length;s<o;s++){var a=r[s];if(!(null==a||a.delay>0)){n=!0;var h=0==s?_.first:a.mixBlend,l=a.alpha;null!=a.mixingFrom?l*=this.applyMixingFrom(a,e,h):a.trackTime>=a.trackEnd&&null==a.next&&(l=0);var u=a.animationLast,c=a.getAnimationTime(),d=a.animation.timelines.length,p=a.animation.timelines;if(0==s&&1==l||h==_.add)for(var f=0;f<d;f++)Y.webkit602BugfixHelper(l,h),p[f].apply(e,u,c,i,l,h,g.mixIn);else{var m=a.timelineMode,v=0==a.timelinesRotation.length;v&&Y.setArraySize(a.timelinesRotation,d<<1,null);var y=a.timelinesRotation;for(f=0;f<d;f++){var b=p[f],x=m[f]==t.SUBSEQUENT?h:_.setup;b instanceof Ce?this.applyRotateTimeline(b,e,c,l,x,y,f<<1,v):(Y.webkit602BugfixHelper(l,h),b.apply(e,u,c,i,l,x,g.mixIn))}}this.queueEvents(a,c),i.length=0,a.nextAnimationLast=c,a.nextTrackLast=a.trackTime}}return this.queue.drain(),n},t.prototype.applyMixingFrom=function(e,i,r){var n=e.mixingFrom;null!=n.mixingFrom&&this.applyMixingFrom(n,i,r);var s=0;0==e.mixDuration?(s=1,r==_.first&&(r=_.setup)):((s=e.mixTime/e.mixDuration)>1&&(s=1),r!=_.first&&(r=n.mixBlend));var o=s<n.eventThreshold?this.events:null,a=s<n.attachmentThreshold,h=s<n.drawOrderThreshold,l=n.animationLast,u=n.getAnimationTime(),c=n.animation.timelines.length,d=n.animation.timelines,p=n.alpha*e.interruptAlpha,f=p*(1-s);if(r==_.add)for(var m=0;m<c;m++)d[m].apply(i,l,u,o,f,r,g.mixOut);else{var v=n.timelineMode,y=n.timelineHoldMix,b=0==n.timelinesRotation.length;b&&Y.setArraySize(n.timelinesRotation,c<<1,null);var x=n.timelinesRotation;for(n.totalAlpha=0,m=0;m<c;m++){var T=d[m],S=g.mixOut,E=void 0,w=0;switch(v[m]){case t.SUBSEQUENT:if(!a&&T instanceof Ne)continue;if(!h&&T instanceof ke)continue;E=r,w=f;break;case t.FIRST:E=_.setup,w=f;break;case t.HOLD:E=_.setup,w=p;break;default:E=_.setup;var A=y[m];w=p*Math.max(0,1-A.mixTime/A.mixDuration)}n.totalAlpha+=w,T instanceof Ce?this.applyRotateTimeline(T,i,u,w,E,x,m<<1,b):(Y.webkit602BugfixHelper(w,r),E==_.setup&&(T instanceof Ne?a&&(S=g.mixOut):T instanceof ke&&h&&(S=g.mixOut)),T.apply(i,l,u,o,w,E,S))}}return e.mixDuration>0&&this.queueEvents(n,u),this.events.length=0,n.nextAnimationLast=u,n.nextTrackLast=n.trackTime,s},t.prototype.applyRotateTimeline=function(t,e,i,r,n,s,o,a){if(a&&(s[o]=0),1!=r){var h=t,l=h.frames,u=e.bones[h.boneIndex],c=0,d=0;if(i<l[0])switch(n){case _.setup:u.rotation=u.data.rotation;default:return;case _.first:c=u.rotation,d=u.data.rotation}else if(c=n==_.setup?u.data.rotation:u.rotation,i>=l[l.length-Ce.ENTRIES])d=u.data.rotation+l[l.length+Ce.PREV_ROTATION];else{var p=we.binarySearch(l,i,Ce.ENTRIES),f=l[p+Ce.PREV_ROTATION],m=l[p],v=h.getCurvePercent((p>>1)-1,1-(i-m)/(l[p+Ce.PREV_TIME]-m));d=l[p+Ce.ROTATION]-f,d=f+(d-=360*(16384-(16384.499999999996-d/360|0)))*v+u.data.rotation,d-=360*(16384-(16384.499999999996-d/360|0))}var y=0,b=d-c;if(0==(b-=360*(16384-(16384.499999999996-b/360|0))))y=s[o];else{var x=0,T=0;a?(x=0,T=b):(x=s[o],T=s[o+1]);var S=b>0,E=x>=0;G.signum(T)!=G.signum(b)&&Math.abs(T)<=90&&(Math.abs(x)>180&&(x+=360*G.signum(x)),E=S),y=b+x-x%360,E!=S&&(y+=360*G.signum(x)),s[o]=y}s[o+1]=b,c+=y*r,u.rotation=c-360*(16384-(16384.499999999996-c/360|0))}else t.apply(e,0,i,null,1,n,g.mixIn)},t.prototype.queueEvents=function(t,e){for(var i=t.animationStart,r=t.animationEnd,n=r-i,s=t.trackLast%n,o=this.events,a=0,h=o.length;a<h;a++){var l=o[a];if(l.time<s)break;l.time>r||this.queue.event(t,l)}for((t.loop?0==n||s>t.trackTime%n:e>=r&&t.animationLast<r)&&this.queue.complete(t);a<h;a++)o[a].time<i||this.queue.event(t,o[a])},t.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,i=this.tracks.length;e<i;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},t.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var i=e;;){var r=i.mixingFrom;if(null==r)break;this.queue.end(r),i.mixingFrom=null,i.mixingTo=null,i=r}this.tracks[e.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(t,e,i){var r=this.expandToIndex(t);this.tracks[t]=e,null!=r&&(i&&this.queue.interrupt(r),e.mixingFrom=r,r.mixingTo=e,e.mixTime=0,null!=r.mixingFrom&&r.mixDuration>0&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)},t.prototype.setAnimation=function(t,e,i){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,i)},t.prototype.setAnimationWith=function(t,e,i){if(null==e)throw new Error("animation cannot be null.");var r=!0,n=this.expandToIndex(t);null!=n&&(-1==n.nextTrackLast?(this.tracks[t]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.disposeNext(n),n=n.mixingFrom,r=!1):this.disposeNext(n));var s=this.trackEntry(t,e,i,n);return this.setCurrent(t,s,r),this.queue.drain(),s},t.prototype.addAnimation=function(t,e,i,r){var n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,n,i,r)},t.prototype.addAnimationWith=function(t,e,i,r){if(null==e)throw new Error("animation cannot be null.");var n=this.expandToIndex(t);if(null!=n)for(;null!=n.next;)n=n.next;var s=this.trackEntry(t,e,i,n);if(null==n)this.setCurrent(t,s,!0),this.queue.drain();else if(n.next=s,r<=0){var o=n.animationEnd-n.animationStart;0!=o?(n.loop?r+=o*(1+(n.trackTime/o|0)):r+=Math.max(o,n.trackTime),r-=this.data.getMix(n.animation,e)):r=n.trackTime}return s.delay=r,s},t.prototype.setEmptyAnimation=function(e,i){var r=this.setAnimationWith(e,t.emptyAnimation,!1);return r.mixDuration=i,r.trackEnd=i,r},t.prototype.addEmptyAnimation=function(e,i,r){r<=0&&(r-=i);var n=this.addAnimationWith(e,t.emptyAnimation,!1,r);return n.mixDuration=i,n.trackEnd=i,n},t.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,r=this.tracks.length;i<r;i++){var n=this.tracks[i];null!=n&&this.setEmptyAnimation(n.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},t.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(Y.ensureArrayCapacity(this.tracks,t-this.tracks.length+1,null),this.tracks.length=t+1,null)},t.prototype.trackEntry=function(t,e,i,r){var n=this.trackEntryPool.obtain();return n.trackIndex=t,n.animation=e,n.loop=i,n.holdPrevious=!1,n.eventThreshold=0,n.attachmentThreshold=0,n.drawOrderThreshold=0,n.animationStart=0,n.animationEnd=e.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.interruptAlpha=1,n.mixTime=0,n.mixDuration=null==r?0:this.data.getMix(r.animation,e),n},t.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=0,e=this.tracks.length;t<e;t++){var i=this.tracks[t];if(null!=i){for(;null!=i.mixingFrom;)i=i.mixingFrom;do{null!=i.mixingFrom&&i.mixBlend==_.add||this.setTimelineModes(i),i=i.mixingTo}while(null!=i)}}},t.prototype.setTimelineModes=function(e){var i=e.mixingTo,r=e.animation.timelines,n=e.animation.timelines.length,s=Y.setArraySize(e.timelineMode,n);e.timelineHoldMix.length=0;var o=Y.setArraySize(e.timelineHoldMix,n),a=this.propertyIDs;if(null!=i&&i.holdPrevious)for(var h=0;h<n;h++)a.add(r[h].getPropertyId()),s[h]=t.HOLD;else t:for(h=0;h<n;h++){var l=r[h].getPropertyId();if(a.add(l))if(null!=i&&this.hasTimeline(i,l)){for(var u=i.mixingTo;null!=u;u=u.mixingTo)if(!this.hasTimeline(u,l)){if(e.mixDuration>0){s[h]=t.HOLD_MIX,o[h]=u;continue t}break}s[h]=t.HOLD}else s[h]=t.FIRST;else s[h]=t.SUBSEQUENT}},t.prototype.hasTimeline=function(t,e){for(var i=t.animation.timelines,r=0,n=i.length;r<n;r++)if(i[r].getPropertyId()==e)return!0;return!1},t.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},t.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},t.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,i,r){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,i,r)},t.prototype.addAnimationByName=function(e,i,r,n){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,i,r,n)},t.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},t.emptyAnimation=new we("<empty>",[],0),t.SUBSEQUENT=0,t.FIRST=1,t.HOLD=2,t.HOLD_MIX=3,t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}(),He=function(){function t(){this.mixBlend=_.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(t.prototype,"time",{get:function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),t.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t}(),We=function(){function t(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return t.prototype.start=function(t){this.objects.push(Ae.start),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.interrupt=function(t){this.objects.push(Ae.interrupt),this.objects.push(t)},t.prototype.end=function(t){this.objects.push(Ae.end),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.dispose=function(t){this.objects.push(Ae.dispose),this.objects.push(t)},t.prototype.complete=function(t){this.objects.push(Ae.complete),this.objects.push(t)},t.prototype.event=function(t,e){this.objects.push(Ae.event),this.objects.push(t),this.objects.push(e)},t.prototype.deprecateStuff=function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,i=0;i<t.length;i+=2){var r=t[i],n=t[i+1];switch(r){case Ae.start:null!=n.listener&&n.listener.start&&n.listener.start(n);for(var s=0;s<e.length;s++)e[s].start&&e[s].start(n);n.onStart&&this.deprecateStuff()&&n.onStart(n.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(n.trackIndex);break;case Ae.interrupt:for(null!=n.listener&&n.listener.interrupt&&n.listener.interrupt(n),s=0;s<e.length;s++)e[s].interrupt&&e[s].interrupt(n);break;case Ae.end:for(null!=n.listener&&n.listener.end&&n.listener.end(n),s=0;s<e.length;s++)e[s].end&&e[s].end(n);n.onEnd&&this.deprecateStuff()&&n.onEnd(n.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(n.trackIndex);case Ae.dispose:for(null!=n.listener&&n.listener.dispose&&n.listener.dispose(n),s=0;s<e.length;s++)e[s].dispose&&e[s].dispose(n);this.animState.trackEntryPool.free(n);break;case Ae.complete:for(null!=n.listener&&n.listener.complete&&n.listener.complete(n),s=0;s<e.length;s++)e[s].complete&&e[s].complete(n);var o=G.toInt(n.loopsCount());n.onComplete&&this.deprecateStuff()&&n.onComplete(n.trackIndex,o),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(n.trackIndex,o);break;case Ae.event:var a=t[2+i++];for(null!=n.listener&&n.listener.event&&n.listener.event(n,a),s=0;s<e.length;s++)e[s].event&&e[s].event(n,a);n.onEvent&&this.deprecateStuff()&&n.onEvent(n.trackIndex,a),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(n.trackIndex,a)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t.deprecatedWarning1=!1,t}();!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(Ae||(Ae={}));var ze,qe=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}(),Ke=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,i){var r=this.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);var n=this.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);this.setMixWith(r,n,i)},t.prototype.setMixByName=function(e,i,r){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(e,i,r)},t.prototype.setMixWith=function(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var r=t.name+"."+e.name;this.animationToMixTime[r]=i},t.prototype.getMix=function(t,e){var i=t.name+"."+e.name,r=this.animationToMixTime[i];return void 0===r?this.defaultMix:r},t.deprecatedWarning1=!1,t}(),Ze=function(){function t(t){this.atlas=t}return t.prototype.newRegionAttachment=function(t,e,i){var r=this.atlas.findRegion(i);if(null==r)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");var n=new Te(e);return n.region=r,n},t.prototype.newMeshAttachment=function(t,e,i){var r=this.atlas.findRegion(i);if(null==r)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");var n=new ye(e);return n.region=r,n},t.prototype.newBoundingBoxAttachment=function(t,e){return new ge(e)},t.prototype.newPathAttachment=function(t,e){return new be(e)},t.prototype.newPointAttachment=function(t,e){return new xe(e)},t.prototype.newClippingAttachment=function(t,e){return new ve(e)},t}(),$e=function(){function t(t,e,i){if(this.matrix=new u.y3,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),t.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(t,e,i,r,n,s,o){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=r,this.ascaleY=n,this.ashearX=s,this.ashearY=o,this.appliedValid=!0;var a=this.parent,h=this.matrix,l=this.skeleton.scaleX,u=Z.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==a){var c=this.skeleton,d=i+90+o;return h.a=G.cosDeg(i+s)*r*l,h.c=G.cosDeg(d)*n*l,h.b=G.sinDeg(i+s)*r*u,h.d=G.sinDeg(d)*n*u,h.tx=t*l+c.x,void(h.ty=e*u+c.y)}var p=a.matrix.a,f=a.matrix.c,m=a.matrix.b,_=a.matrix.d;switch(h.tx=p*t+f*e+a.matrix.tx,h.ty=m*t+_*e+a.matrix.ty,this.data.transformMode){case b.Normal:d=i+90+o;var g=G.cosDeg(i+s)*r,v=G.cosDeg(d)*n,y=G.sinDeg(i+s)*r,x=G.sinDeg(d)*n;return h.a=p*g+f*y,h.c=p*v+f*x,h.b=m*g+_*y,void(h.d=m*v+_*x);case b.OnlyTranslation:d=i+90+o,h.a=G.cosDeg(i+s)*r,h.c=G.cosDeg(d)*n,h.b=G.sinDeg(i+s)*r,h.d=G.sinDeg(d)*n;break;case b.NoRotationOrReflection:var T=0;(w=p*p+m*m)>1e-4?(f=m*(w=Math.abs(p*_-f*m)/w),_=p*w,T=Math.atan2(m,p)*G.radDeg):(p=0,m=0,T=90-Math.atan2(_,f)*G.radDeg);var S=i+s-T,E=i+o-T+90;g=G.cosDeg(S)*r,v=G.cosDeg(E)*n,y=G.sinDeg(S)*r,x=G.sinDeg(E)*n,h.a=p*g-f*y,h.c=p*v-f*x,h.b=m*g+_*y,h.d=m*v+_*x;break;case b.NoScale:case b.NoScaleOrReflection:var w,A=G.cosDeg(i),I=G.sinDeg(i),C=(p*A+f*I)/l,O=(m*A+_*I)/u;(w=Math.sqrt(C*C+O*O))>1e-5&&(w=1/w),C*=w,O*=w,w=Math.sqrt(C*C+O*O),this.data.transformMode==b.NoScale&&p*_-f*m<0!=(Z.yDown?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(w=-w);var M=Math.PI/2+Math.atan2(O,C),P=Math.cos(M)*w,R=Math.sin(M)*w;g=G.cosDeg(s)*r,v=G.cosDeg(90+o)*n,y=G.sinDeg(s)*r,x=G.sinDeg(90+o)*n,h.a=C*g+P*y,h.c=C*v+P*x,h.b=O*g+R*y,h.d=O*v+R*x}h.a*=l,h.c*=l,h.b*=u,h.d*=u},t.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*G.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*G.radDeg},t.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},t.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},t.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var t=this.parent,e=this.matrix;if(null==t)return this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*G.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,void(this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*G.radDeg);var i=t.matrix,r=1/(i.a*i.d-i.b*i.c),n=e.tx-i.tx,s=e.ty-i.ty;this.ax=n*i.d*r-s*i.c*r,this.ay=s*i.a*r-n*i.b*r;var o=r*i.d,a=r*i.a,h=r*i.c,l=r*i.b,u=o*e.a-h*e.b,c=o*e.c-h*e.d,d=a*e.b-l*e.a,p=a*e.d-l*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(u*u+d*d),this.ascaleX>1e-4){var f=u*p-c*d;this.ascaleY=f/this.ascaleX,this.ashearY=Math.atan2(u*c+d*p,f)*G.radDeg,this.arotation=Math.atan2(d,u)*G.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(c*c+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,c)*G.radDeg},t.prototype.worldToLocal=function(t){var e=this.matrix,i=e.a,r=e.c,n=e.b,s=e.d,o=1/(i*s-r*n),a=t.x-e.tx,h=t.y-e.ty;return t.x=a*s*o-h*r*o,t.y=h*i*o-a*n*o,t},t.prototype.localToWorld=function(t){var e=this.matrix,i=t.x,r=t.y;return t.x=i*e.a+r*e.c+e.tx,t.y=i*e.b+r*e.d+e.ty,t},t.prototype.worldToLocalRotation=function(t){var e=G.sinDeg(t),i=G.cosDeg(t),r=this.matrix;return Math.atan2(r.a*e-r.b*i,r.d*i-r.c*e)*G.radDeg},t.prototype.localToWorldRotation=function(t){var e=G.sinDeg(t),i=G.cosDeg(t),r=this.matrix;return Math.atan2(i*r.b+e*r.d,i*r.a+e*r.c)*G.radDeg},t.prototype.rotateWorld=function(t){var e=this.matrix,i=e.a,r=e.c,n=e.b,s=e.d,o=G.cosDeg(t),a=G.sinDeg(t);e.a=o*i-a*n,e.c=o*r-a*s,e.b=a*i+o*n,e.d=a*r+o*s,this.appliedValid=!1},t}(),Je=function(t,e,i){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=b.Normal,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i},Qe=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},ti=function(t){this.name=t},ei=function(){function t(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return t.prototype.getOrder=function(){return this.data.order},t.prototype.apply=function(){this.update()},t.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.mix)}},t.prototype.apply1=function(t,e,i,r,n,s,o){t.appliedValid||t.updateAppliedTransform();var a=t.parent.matrix,h=1/(a.a*a.d-a.b*a.c),l=e-a.tx,u=i-a.ty,c=(l*a.d-u*a.c)*h-t.ax,d=(u*a.a-l*a.b)*h-t.ay,p=Math.atan2(d,c)*G.radDeg-t.ashearX-t.arotation;t.ascaleX<0&&(p+=180),p>180?p-=360:p<-180&&(p+=360);var f=t.ascaleX,m=t.ascaleY;if(r||n){var _=t.data.length*f,g=Math.sqrt(c*c+d*d);if(r&&g<_||n&&g>_&&_>1e-4){var v=(g/_-1)*o+1;f*=v,s&&(m*=v)}}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+p*o,f,m,t.ashearX,t.ashearY)},t.prototype.apply2=function(t,e,i,r,n,s,o){if(0!=o){t.appliedValid||t.updateAppliedTransform(),e.appliedValid||e.updateAppliedTransform();var a=t.ax,h=t.ay,l=t.ascaleX,u=l,c=t.ascaleY,d=e.ascaleX,p=t.matrix,f=0,m=0,_=0;l<0?(l=-l,f=180,_=-1):(f=0,_=1),c<0&&(c=-c,_=-_),d<0?(d=-d,m=180):m=0;var g=e.ax,v=0,y=0,b=0,x=p.a,T=p.c,S=p.b,E=p.d,w=Math.abs(l-c)<=1e-4;w?(y=x*g+T*(v=e.ay)+p.tx,b=S*g+E*v+p.ty):(v=0,y=x*g+p.tx,b=S*g+p.ty);var A=t.parent.matrix;x=A.a,T=A.c,S=A.b;var I=1/(x*(E=A.d)-T*S),C=i-A.tx,O=r-A.ty,M=(C*E-O*T)*I-a,P=(O*x-C*S)*I-h,R=M*M+P*P,D=((C=y-A.tx)*E-(O=b-A.ty)*T)*I-a,N=(O*x-C*S)*I-h,U=Math.sqrt(D*D+N*N),F=e.data.length*d,L=0,k=0;t:if(w){var B=(R-U*U-(F*=l)*F)/(2*U*F);B<-1?B=-1:B>1&&(B=1,s&&U+F>1e-4&&(u*=(Math.sqrt(R)/(U+F)-1)*o+1)),k=Math.acos(B)*n,x=U+F*B,T=F*Math.sin(k),L=Math.atan2(P*x-M*T,M*x+P*T)}else{var X=(x=l*F)*x,j=(T=c*F)*T,V=Math.atan2(P,M),Y=-2*j*U,H=j-X;if((E=Y*Y-4*H*(S=j*U*U+X*R-X*j))>=0){var W=Math.sqrt(E);Y<0&&(W=-W);var z=(W=-(Y+W)/2)/H,q=S/W,K=Math.abs(z)<Math.abs(q)?z:q;if(K*K<=R){O=Math.sqrt(R-K*K)*n,L=V-Math.atan2(O,K),k=Math.atan2(O/c,(K-U)/l);break t}}var Z=G.PI,$=U-x,J=$*$,Q=0,tt=0,et=U+x,it=et*et,rt=0;(S=-x*U/(X-j))>=-1&&S<=1&&(S=Math.acos(S),(E=(C=x*Math.cos(S)+U)*C+(O=T*Math.sin(S))*O)<J&&(Z=S,J=E,$=C,Q=O),E>it&&(tt=S,it=E,et=C,rt=O)),R<=(J+it)/2?(L=V-Math.atan2(Q*n,$),k=Z*n):(L=V-Math.atan2(rt*n,et),k=tt*n)}var nt=Math.atan2(v,g)*_,st=t.arotation;(L=(L-nt)*G.radDeg+f-st)>180?L-=360:L<-180&&(L+=360),t.updateWorldTransformWith(a,h,st+L*o,u,t.ascaleY,0,0),st=e.arotation,(k=((k+nt)*G.radDeg-e.ashearX)*_+m-st)>180?k-=360:k<-180&&(k+=360),e.updateWorldTransformWith(g,v,st+k*o,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)}else e.updateWorldTransform()},t}(),ii=function(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.name=t},ri=function(t){this.order=0,this.bones=new Array,this.name=t};!function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(ze||(ze={}));var ni=function(){function t(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var i=0,r=t.bones.length;i<r;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof be){var i=this.rotateMix,r=this.translateMix,n=i>0;if(r>0||n){var s=this.data,o=s.spacingMode,a=o==ze.Length,h=s.rotateMode,l=h==y.Tangent,u=h==y.ChainScale,c=this.bones.length,d=l?c:c+1,p=this.bones,f=Y.setArraySize(this.spaces,d),m=null,_=this.spacing;if(u||a){u&&(m=Y.setArraySize(this.lengths,c));for(var g=0,b=d-1;g<b;){var x=(P=p[g]).data.length;if(x<t.epsilon)u&&(m[g]=0),f[++g]=0;else{var T=x*P.matrix.a,S=x*P.matrix.b,E=Math.sqrt(T*T+S*S);u&&(m[g]=E),f[++g]=(a?x+_:_)*E/x}}}else for(g=1;g<d;g++)f[g]=_;var w=this.computeWorldPositions(e,d,l,s.positionMode==v.Percent,o==ze.Percent),A=w[0],I=w[1],C=s.offsetRotation,O=!1;0==C?O=h==y.Chain:(O=!1,C*=(M=this.target.bone.matrix).a*M.d-M.b*M.c>0?G.degRad:-G.degRad),g=0;for(var M=3;g<c;g++,M+=3){var P,R=(P=p[g]).matrix;R.tx+=(A-R.tx)*r,R.ty+=(I-R.ty)*r;var D=(T=w[M])-A,N=(S=w[M+1])-I;if(u){var U=m[g];if(0!=U){var F=(Math.sqrt(D*D+N*N)/U-1)*i+1;R.a*=F,R.b*=F}}if(A=T,I=S,n){var L=R.a,k=R.c,B=R.b,X=R.d,j=0,V=0,H=0;if(j=l?w[M-1]:0==f[g+1]?w[M+2]:Math.atan2(N,D),j-=Math.atan2(B,L),O){V=Math.cos(j),H=Math.sin(j);var W=P.data.length;A+=(W*(V*L-H*B)-D)*i,I+=(W*(H*L+V*B)-N)*i}else j+=C;j>G.PI?j-=G.PI2:j<-G.PI&&(j+=G.PI2),j*=i,V=Math.cos(j),H=Math.sin(j),R.a=V*L-H*B,R.c=V*k-H*X,R.b=H*L+V*B,R.d=H*k+V*X}P.appliedValid=!1}}}},t.prototype.computeWorldPositions=function(e,i,r,n,s){var o=this.target,a=this.position,h=this.spaces,l=Y.setArraySize(this.positions,3*i+2),u=null,c=e.closed,d=e.worldVerticesLength,p=d/6,f=t.NONE;if(!e.constantSpeed){var m=e.lengths,_=m[p-=c?1:2];if(n&&(a*=_),s)for(var g=0;g<i;g++)h[g]*=_;u=Y.setArraySize(this.world,8),g=0;for(var v=0,y=0;g<i;g++,v+=3){var b=a+=H=h[g];if(c)(b%=_)<0&&(b+=_),y=0;else{if(b<0){f!=t.BEFORE&&(f=t.BEFORE,e.computeWorldVertices(o,2,4,u,0,2)),this.addBeforePosition(b,u,0,l,v);continue}if(b>_){f!=t.AFTER&&(f=t.AFTER,e.computeWorldVertices(o,d-6,4,u,0,2)),this.addAfterPosition(b-_,u,0,l,v);continue}}for(;;y++){var x=m[y];if(!(b>x)){0==y?b/=x:b=(b-(K=m[y-1]))/(x-K);break}}y!=f&&(f=y,c&&y==p?(e.computeWorldVertices(o,d-4,4,u,0,2),e.computeWorldVertices(o,0,4,u,4,2)):e.computeWorldVertices(o,6*y+2,8,u,0,2)),this.addCurvePosition(b,u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],l,v,r||g>0&&0==H)}return l}c?(d+=2,u=Y.setArraySize(this.world,d),e.computeWorldVertices(o,2,d-4,u,0,2),e.computeWorldVertices(o,0,2,u,d-4,2),u[d-2]=u[0],u[d-1]=u[1]):(p--,d-=4,u=Y.setArraySize(this.world,d),e.computeWorldVertices(o,2,d,u,0,2));for(var T=Y.setArraySize(this.curves,p),S=0,E=u[0],w=u[1],A=0,I=0,C=0,O=0,M=0,P=0,R=0,D=0,N=0,U=0,F=0,L=0,k=0,B=0,G=(g=0,2);g<p;g++,G+=6)A=u[G],I=u[G+1],C=u[G+2],O=u[G+3],F=2*(R=.1875*(E-2*A+C))+(N=.09375*(3*(A-C)-E+(M=u[G+4]))),L=2*(D=.1875*(w-2*I+O))+(U=.09375*(3*(I-O)-w+(P=u[G+5]))),k=.75*(A-E)+R+.16666667*N,B=.75*(I-w)+D+.16666667*U,S+=Math.sqrt(k*k+B*B),k+=F,B+=L,F+=N,L+=U,S+=Math.sqrt(k*k+B*B),k+=F,B+=L,S+=Math.sqrt(k*k+B*B),k+=F+N,B+=L+U,S+=Math.sqrt(k*k+B*B),T[g]=S,E=M,w=P;if(n&&(a*=S),s)for(g=0;g<i;g++)h[g]*=S;for(var X=this.segments,j=0,V=(g=0,v=0,y=0,0);g<i;g++,v+=3){var H;if(b=a+=H=h[g],c)(b%=S)<0&&(b+=S),y=0;else{if(b<0){this.addBeforePosition(b,u,0,l,v);continue}if(b>S){this.addAfterPosition(b-S,u,d-4,l,v);continue}}for(;;y++){var W=T[y];if(!(b>W)){0==y?b/=W:b=(b-(K=T[y-1]))/(W-K);break}}if(y!=f){f=y;var z=6*y;for(E=u[z],w=u[z+1],A=u[z+2],I=u[z+3],C=u[z+4],O=u[z+5],F=2*(R=.03*(E-2*A+C))+(N=.006*(3*(A-C)-E+(M=u[z+6]))),L=2*(D=.03*(w-2*I+O))+(U=.006*(3*(I-O)-w+(P=u[z+7]))),k=.3*(A-E)+R+.16666667*N,B=.3*(I-w)+D+.16666667*U,j=Math.sqrt(k*k+B*B),X[0]=j,z=1;z<8;z++)k+=F,B+=L,F+=N,L+=U,j+=Math.sqrt(k*k+B*B),X[z]=j;k+=F,B+=L,j+=Math.sqrt(k*k+B*B),X[8]=j,k+=F+N,B+=L+U,j+=Math.sqrt(k*k+B*B),X[9]=j,V=0}for(b*=j;;V++){var q=X[V];if(!(b>q)){var K;0==V?b/=q:b=V+(b-(K=X[V-1]))/(q-K);break}}this.addCurvePosition(.1*b,E,w,A,I,C,O,M,P,l,v,r||g>0&&0==H)}return l},t.prototype.addBeforePosition=function(t,e,i,r,n){var s=e[i],o=e[i+1],a=e[i+2]-s,h=e[i+3]-o,l=Math.atan2(h,a);r[n]=s+t*Math.cos(l),r[n+1]=o+t*Math.sin(l),r[n+2]=l},t.prototype.addAfterPosition=function(t,e,i,r,n){var s=e[i+2],o=e[i+3],a=s-e[i],h=o-e[i+1],l=Math.atan2(h,a);r[n]=s+t*Math.cos(l),r[n+1]=o+t*Math.sin(l),r[n+2]=l},t.prototype.addCurvePosition=function(t,e,i,r,n,s,o,a,h,l,u,c){(0==t||isNaN(t))&&(t=1e-4);var d=t*t,p=d*t,f=1-t,m=f*f,_=m*f,g=f*t,v=3*g,y=f*v,b=v*t,x=e*_+r*y+s*b+a*p,T=i*_+n*y+o*b+h*p;l[u]=x,l[u+1]=T,c&&(l[u+2]=Math.atan2(T-(i*m+n*g*2+o*d),x-(e*m+r*g*2+s*d)))},t.prototype.getOrder=function(){return this.data.order},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}(),si=function(){function t(t,e){if(this.attachmentVertices=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new B,this.darkColor=null==t.darkColor?null:new B,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},t.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}(),oi=function(){function t(t,e){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new z,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix,this.scaleMix=t.scaleMix,this.shearMix=t.shearMix,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return t.prototype.apply=function(){this.update()},t.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},t.prototype.applyAbsoluteWorld=function(){for(var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix,n=this.target,s=n.matrix,o=s.a,a=s.c,h=s.b,l=s.d,u=o*l-a*h>0?G.degRad:-G.degRad,c=this.data.offsetRotation*u,d=this.data.offsetShearY*u,p=this.bones,f=0,m=p.length;f<m;f++){var _=p[f],g=!1,v=_.matrix;if(0!=t){var y=v.a,b=v.c,x=v.b,T=v.d;(C=Math.atan2(h,o)-Math.atan2(x,y)+c)>G.PI?C-=G.PI2:C<-G.PI&&(C+=G.PI2),C*=t;var S=Math.cos(C),E=Math.sin(C);v.a=S*y-E*x,v.c=S*b-E*T,v.b=E*y+S*x,v.d=E*b+S*T,g=!0}if(0!=e){var w=this.temp;n.localToWorld(w.set(this.data.offsetX,this.data.offsetY)),v.tx+=(w.x-v.tx)*e,v.ty+=(w.y-v.ty)*e,g=!0}if(i>0){var A=Math.sqrt(v.a*v.a+v.b*v.b),I=Math.sqrt(o*o+h*h);A>1e-5&&(A=(A+(I-A+this.data.offsetScaleX)*i)/A),v.a*=A,v.b*=A,A=Math.sqrt(v.c*v.c+v.d*v.d),I=Math.sqrt(a*a+l*l),A>1e-5&&(A=(A+(I-A+this.data.offsetScaleY)*i)/A),v.c*=A,v.d*=A,g=!0}if(r>0){b=v.c,T=v.d;var C,O=Math.atan2(T,b);(C=Math.atan2(l,a)-Math.atan2(h,o)-(O-Math.atan2(v.b,v.a)))>G.PI?C-=G.PI2:C<-G.PI&&(C+=G.PI2),C=O+(C+d)*r,A=Math.sqrt(b*b+T*T),v.c=Math.cos(C)*A,v.d=Math.sin(C)*A,g=!0}g&&(_.appliedValid=!1)}},t.prototype.applyRelativeWorld=function(){for(var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix,n=this.target,s=n.matrix,o=s.a,a=s.c,h=s.b,l=s.d,u=o*l-a*h>0?G.degRad:-G.degRad,c=this.data.offsetRotation*u,d=this.data.offsetShearY*u,p=this.bones,f=0,m=p.length;f<m;f++){var _,g=p[f],v=!1,y=g.matrix;if(0!=t){var b=y.a,x=y.c,T=y.b,S=y.d;(_=Math.atan2(h,o)+c)>G.PI?_-=G.PI2:_<-G.PI&&(_+=G.PI2),_*=t;var E=Math.cos(_),w=Math.sin(_);y.a=E*b-w*T,y.c=E*x-w*S,y.b=w*b+E*T,y.d=w*x+E*S,v=!0}if(0!=e){var A=this.temp;n.localToWorld(A.set(this.data.offsetX,this.data.offsetY)),y.tx+=A.x*e,y.ty+=A.y*e,v=!0}if(i>0){var I=(Math.sqrt(o*o+h*h)-1+this.data.offsetScaleX)*i+1;y.a*=I,y.b*=I,I=(Math.sqrt(a*a+l*l)-1+this.data.offsetScaleY)*i+1,y.c*=I,y.d*=I,v=!0}r>0&&((_=Math.atan2(l,a)-Math.atan2(h,o))>G.PI?_-=G.PI2:_<-G.PI&&(_+=G.PI2),x=y.c,S=y.d,_=Math.atan2(S,x)+(_-G.PI/2+d)*r,I=Math.sqrt(x*x+S*S),y.c=Math.cos(_)*I,y.d=Math.sin(_)*I,v=!0),v&&(g.appliedValid=!1)}},t.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix,n=this.target;n.appliedValid||n.updateAppliedTransform();for(var s=this.bones,o=0,a=s.length;o<a;o++){var h=s[o];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;if(0!=t){var u=n.arotation-l+this.data.offsetRotation;l+=(u-=360*(16384-(16384.499999999996-u/360|0)))*t}var c=h.ax,d=h.ay;0!=e&&(c+=(n.ax-c+this.data.offsetX)*e,d+=(n.ay-d+this.data.offsetY)*e);var p=h.ascaleX,f=h.ascaleY;i>0&&(p>1e-5&&(p=(p+(n.ascaleX-p+this.data.offsetScaleX)*i)/p),f>1e-5&&(f=(f+(n.ascaleY-f+this.data.offsetScaleY)*i)/f));var m=h.ashearY;r>0&&(u=n.ashearY-m+this.data.offsetShearY,u-=360*(16384-(16384.499999999996-u/360|0)),h.shearY+=u*r),h.updateWorldTransformWith(c,d,l,p,f,h.ashearX,m)}},t.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix,n=this.target;n.appliedValid||n.updateAppliedTransform();for(var s=this.bones,o=0,a=s.length;o<a;o++){var h=s[o];h.appliedValid||h.updateAppliedTransform();var l=h.arotation;0!=t&&(l+=(n.arotation+this.data.offsetRotation)*t);var u=h.ax,c=h.ay;0!=e&&(u+=(n.ax+this.data.offsetX)*e,c+=(n.ay+this.data.offsetY)*e);var d=h.ascaleX,p=h.ascaleY;i>0&&(d>1e-5&&(d*=(n.ascaleX-1+this.data.offsetScaleX)*i+1),p>1e-5&&(p*=(n.ascaleY-1+this.data.offsetScaleY)*i+1));var f=h.ashearY;r>0&&(f+=(n.ashearY+this.data.offsetShearY)*r),h.updateWorldTransformWith(u,c,l,d,p,h.ashearX,f)}},t.prototype.getOrder=function(){return this.data.order},t}(),ai=function(){function t(t){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var i=t.bones[e],r=void 0;if(null==i.parent)r=new $e(i,this,null);else{var n=this.bones[i.parent.index];r=new $e(i,this,n),n.children.push(r)}this.bones.push(r)}for(this.slots=new Array,this.drawOrder=new Array,e=0;e<t.slots.length;e++){var s=t.slots[e],o=(r=this.bones[s.boneData.index],new si(s,r));this.slots.push(o),this.drawOrder.push(o)}for(this.ikConstraints=new Array,e=0;e<t.ikConstraints.length;e++){var a=t.ikConstraints[e];this.ikConstraints.push(new ei(a,this))}for(this.transformConstraints=new Array,e=0;e<t.transformConstraints.length;e++){var h=t.transformConstraints[e];this.transformConstraints.push(new oi(h,this))}for(this.pathConstraints=new Array,e=0;e<t.pathConstraints.length;e++){var l=t.pathConstraints[e];this.pathConstraints.push(new ni(l,this))}this.color=new B(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].sorted=!1;var r=this.ikConstraints,n=this.transformConstraints,s=this.pathConstraints,o=r.length,a=n.length,h=s.length,l=o+a+h;t:for(e=0;e<l;e++){for(var u=0;u<o;u++)if((c=r[u]).data.order==e){this.sortIkConstraint(c);continue t}for(u=0;u<a;u++)if((c=n[u]).data.order==e){this.sortTransformConstraint(c);continue t}for(u=0;u<h;u++){var c;if((c=s[u]).data.order==e){this.sortPathConstraint(c);continue t}}}for(e=0,i=t.length;e<i;e++)this.sortBone(t[e])},t.prototype.sortIkConstraint=function(t){var e=t.target;this.sortBone(e);var i=t.bones,r=i[0];if(this.sortBone(r),i.length>1){var n=i[i.length-1];this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}this._updateCache.push(t),this.sortReset(r.children),i[i.length-1].sorted=!0},t.prototype.sortPathConstraint=function(t){var e=t.target,i=e.data.index,r=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,i,r),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,r);for(var n=0,s=this.data.skins.length;n<s;n++)this.sortPathConstraintAttachment(this.data.skins[n],i,r);var o=e.getAttachment();o instanceof be&&this.sortPathConstraintAttachmentWith(o,r);var a=t.bones,h=a.length;for(n=0;n<h;n++)this.sortBone(a[n]);for(this._updateCache.push(t),n=0;n<h;n++)this.sortReset(a[n].children);for(n=0;n<h;n++)a[n].sorted=!0},t.prototype.sortTransformConstraint=function(t){this.sortBone(t.target);var e=t.bones,i=e.length;if(t.data.local)for(var r=0;r<i;r++){var n=e[r];this.sortBone(n.parent),this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}else for(r=0;r<i;r++)this.sortBone(e[r]);this._updateCache.push(t);for(var s=0;s<i;s++)this.sortReset(e[s].children);for(s=0;s<i;s++)e[s].sorted=!0},t.prototype.sortPathConstraintAttachment=function(t,e,i){var r=t.attachments[e];if(r)for(var n in r)this.sortPathConstraintAttachmentWith(r[n],i)},t.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof be){var i=t.bones;if(null==i)this.sortBone(e);else for(var r=this.bones,n=0;n<i.length;)for(var s=i[n++],o=n+s;n<o;n++){var a=i[n];this.sortBone(r[a])}}},t.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},t.prototype.sortReset=function(t){for(var e=0,i=t.length;e<i;e++){var r=t[e];r.sorted&&this.sortReset(r.children),r.sorted=!1}},t.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,i=t.length;e<i;e++){var r=t[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY,r.appliedValid=!0}var n=this._updateCache;for(e=0,i=n.length;e<i;e++)n[e].update()},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();var r=this.ikConstraints;for(e=0,i=r.length;e<i;e++)(a=r[e]).bendDirection=a.data.bendDirection,a.mix=a.data.mix;var n=this.transformConstraints;for(e=0,i=n.length;e<i;e++){var s=(a=n[e]).data;a.rotateMix=s.rotateMix,a.translateMix=s.translateMix,a.scaleMix=s.scaleMix,a.shearMix=s.shearMix}var o=this.pathConstraints;for(e=0,i=o.length;e<i;e++){var a;s=(a=o[e]).data,a.position=s.position,a.spacing=s.spacing,a.rotateMix=s.rotateMix,a.translateMix=s.translateMix}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;Y.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,i=t.length;e<i;e++)t[e].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++)if(e[i].data.name==t)return i;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++)if(e[i].data.name==t)return i;return-1},t.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},t.prototype.setSkin=function(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i],s=n.data.attachmentName;if(null!=s){var o=t.getAttachment(i,s);null!=o&&n.setAttachment(o)}}this.skin=t},t.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},t.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},t.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,r=0,n=i.length;r<n;r++){var s=i[r];if(s.data.name==t){var o=null;if(null!=e&&null==(o=this.getAttachment(r,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void s.setAttachment(o)}}throw new Error("Slot not found: "+t)},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.getBounds=function(t,e,i){if(null==t)throw new Error("offset cannot be null.");if(null==e)throw new Error("size cannot be null.");for(var r=this.drawOrder,n=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,h=0,l=r.length;h<l;h++){var u=r[h],c=0,d=null,p=u.getAttachment();if(p instanceof Te)c=8,d=Y.setArraySize(i,c,0),p.computeWorldVertices(u.bone,d,0,2);else if(p instanceof ye){var f=p;c=f.worldVerticesLength,d=Y.setArraySize(i,c,0),f.computeWorldVertices(u,0,c,d,0,2)}if(null!=d)for(var m=0,_=d.length;m<_;m+=2){var g=d[m],v=d[m+1];n=Math.min(n,g),s=Math.min(s,v),o=Math.max(o,g),a=Math.max(a,v)}}t.set(n,s),e.set(o-n,a-s)},t.prototype.update=function(t){this.time+=t},Object.defineProperty(t.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),hi=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new W((function(){return Y.newFloatArray(16)}))}return t.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var i=this.boundingBoxes,r=this.polygons,n=this.polygonPool,s=t.slots,o=s.length;i.length=0,n.freeAll(r),r.length=0;for(var a=0;a<o;a++){var h=s[a],l=h.getAttachment();if(l instanceof ge){var u=l;i.push(u);var c=n.obtain();c.length!=u.worldVerticesLength&&(c=Y.newFloatArray(u.worldVerticesLength)),r.push(c),u.computeWorldVertices(h,0,u.worldVerticesLength,c,0,2)}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=this.polygons,s=0,o=n.length;s<o;s++)for(var a=n[s],h=a,l=0,u=a.length;l<u;l+=2){var c=h[l],d=h[l+1];t=Math.min(t,c),e=Math.min(e,d),i=Math.max(i,c),r=Math.max(r,d)}this.minX=t,this.minY=e,this.maxX=i,this.maxY=r},t.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},t.prototype.aabbIntersectsSegment=function(t,e,i,r){var n=this.minX,s=this.minY,o=this.maxX,a=this.maxY;if(t<=n&&i<=n||e<=s&&r<=s||t>=o&&i>=o||e>=a&&r>=a)return!1;var h=(r-e)/(i-t),l=h*(n-t)+e;if(l>s&&l<a)return!0;if((l=h*(o-t)+e)>s&&l<a)return!0;var u=(s-e)/h+t;return u>n&&u<o||(u=(a-e)/h+t)>n&&u<o},t.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.containsPoint=function(t,e){for(var i=this.polygons,r=0,n=i.length;r<n;r++)if(this.containsPointPolygon(i[r],t,e))return this.boundingBoxes[r];return null},t.prototype.containsPointPolygon=function(t,e,i){for(var r=t,n=t.length,s=n-2,o=!1,a=0;a<n;a+=2){var h=r[a+1],l=r[s+1];if(h<i&&l>=i||l<i&&h>=i){var u=r[a];u+(i-h)/(l-h)*(r[s]-u)<e&&(o=!o)}s=a}return o},t.prototype.intersectsSegment=function(t,e,i,r){for(var n=this.polygons,s=0,o=n.length;s<o;s++)if(this.intersectsSegmentPolygon(n[s],t,e,i,r))return this.boundingBoxes[s];return null},t.prototype.intersectsSegmentPolygon=function(t,e,i,r,n){for(var s=t,o=t.length,a=e-r,h=i-n,l=e*n-i*r,u=s[o-2],c=s[o-1],d=0;d<o;d+=2){var p=s[d],f=s[d+1],m=u*f-c*p,_=u-p,g=c-f,v=a*g-h*_,y=(l*_-a*m)/v;if((y>=u&&y<=p||y>=p&&y<=u)&&(y>=e&&y<=r||y>=r&&y<=e)){var b=(l*g-h*m)/v;if((b>=c&&b<=f||b>=f&&b<=c)&&(b>=i&&b<=n||b>=n&&b<=i))return!0}u=p,c=f}return!1},t.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}(),li=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t}(),ui=function(t,e,i){if(this.color=new B(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");if(null==i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i},ci=function(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==t)throw new Error("name cannot be null.");this.name=t},di=function(){function t(t){if(this.attachments=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return t.prototype.addAttachment=function(t,e,i){if(null==i)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=i},t.prototype.getAttachment=function(t,e){var i=this.attachments[t];return i?i[e]:null},t.prototype.attachAll=function(t,e){for(var i=0,r=0;r<t.slots.length;r++){var n=t.slots[r],s=n.getAttachment();if(s&&i<e.attachments.length){var o=e.attachments[i];for(var a in o)if(s==o[a]){var h=this.getAttachment(i,a);null!=h&&n.setAttachment(h);break}}i++}},t}(),pi=function(){function t(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return t.prototype.readSkeletonData=function(e){var i=this.scale,r=new li,n="string"==typeof e?JSON.parse(e):e,s=n.skeleton;if(null!=s&&(r.hash=s.hash,r.version=s.spine,r.width=s.width,r.height=s.height,r.fps=s.fps,r.imagesPath=s.images),n.bones)for(var o=0;o<n.bones.length;o++){var a=n.bones[o],h=null,l=this.getValue(a,"parent",null);if(null!=l&&null==(h=r.findBone(l)))throw new Error("Parent bone not found: "+l);(p=new Je(r.bones.length,a.name,h)).length=this.getValue(a,"length",0)*i,p.x=this.getValue(a,"x",0)*i,p.y=this.getValue(a,"y",0)*i,p.rotation=this.getValue(a,"rotation",0),p.scaleX=this.getValue(a,"scaleX",1),p.scaleY=this.getValue(a,"scaleY",1),p.shearX=this.getValue(a,"shearX",0),p.shearY=this.getValue(a,"shearY",0),p.transformMode=t.transformModeFromString(this.getValue(a,"transform","normal")),r.bones.push(p)}if(n.slots)for(o=0;o<n.slots.length;o++){var u=(w=n.slots[o]).name,c=w.bone,d=r.findBone(c);if(null==d)throw new Error("Slot bone not found: "+c);var p=new ui(r.slots.length,u,d),f=this.getValue(w,"color",null);null!=f&&p.color.setFromString(f);var m=this.getValue(w,"dark",null);null!=m&&(p.darkColor=new B(1,1,1,1),p.darkColor.setFromString(m)),p.attachmentName=this.getValue(w,"attachment",null),p.blendMode=t.blendModeFromString(this.getValue(w,"blend","normal")),r.slots.push(p)}if(n.ik)for(o=0;o<n.ik.length;o++){var _=n.ik[o];(p=new ii(_.name)).order=this.getValue(_,"order",0);for(var g=0;g<_.bones.length;g++){if(c=_.bones[g],null==(b=r.findBone(c)))throw new Error("IK bone not found: "+c);p.bones.push(b)}var y=_.target;if(p.target=r.findBone(y),null==p.target)throw new Error("IK target bone not found: "+y);p.bendDirection=this.getValue(_,"bendPositive",!0)?1:-1,p.mix=this.getValue(_,"mix",1),r.ikConstraints.push(p)}if(n.transform)for(o=0;o<n.transform.length;o++){for(_=n.transform[o],(p=new ci(_.name)).order=this.getValue(_,"order",0),g=0;g<_.bones.length;g++){if(c=_.bones[g],null==(b=r.findBone(c)))throw new Error("Transform constraint bone not found: "+c);p.bones.push(b)}if(y=_.target,p.target=r.findBone(y),null==p.target)throw new Error("Transform constraint target bone not found: "+y);p.local=this.getValue(_,"local",!1),p.relative=this.getValue(_,"relative",!1),p.offsetRotation=this.getValue(_,"rotation",0),p.offsetX=this.getValue(_,"x",0)*i,p.offsetY=this.getValue(_,"y",0)*i,p.offsetScaleX=this.getValue(_,"scaleX",0),p.offsetScaleY=this.getValue(_,"scaleY",0),p.offsetShearY=this.getValue(_,"shearY",0),p.rotateMix=this.getValue(_,"rotateMix",1),p.translateMix=this.getValue(_,"translateMix",1),p.scaleMix=this.getValue(_,"scaleMix",1),p.shearMix=this.getValue(_,"shearMix",1),r.transformConstraints.push(p)}if(n.path)for(o=0;o<n.path.length;o++){for(_=n.path[o],(p=new ri(_.name)).order=this.getValue(_,"order",0),g=0;g<_.bones.length;g++){var b;if(c=_.bones[g],null==(b=r.findBone(c)))throw new Error("Transform constraint bone not found: "+c);p.bones.push(b)}if(y=_.target,p.target=r.findSlot(y),null==p.target)throw new Error("Path target slot not found: "+y);p.positionMode=t.positionModeFromString(this.getValue(_,"positionMode","percent")),p.spacingMode=t.spacingModeFromString(this.getValue(_,"spacingMode","length")),p.rotateMode=t.rotateModeFromString(this.getValue(_,"rotateMode","tangent")),p.offsetRotation=this.getValue(_,"rotation",0),p.position=this.getValue(_,"position",0),p.positionMode==v.Fixed&&(p.position*=i),p.spacing=this.getValue(_,"spacing",0),p.spacingMode!=ze.Length&&p.spacingMode!=ze.Fixed||(p.spacing*=i),p.rotateMix=this.getValue(_,"rotateMix",1),p.translateMix=this.getValue(_,"translateMix",1),r.pathConstraints.push(p)}if(n.skins)for(var x in n.skins){var T=n.skins[x],S=new di(x);for(var u in T){var E=r.findSlotIndex(u);if(-1==E)throw new Error("Slot not found: "+u);var w=T[u];for(var A in w){var I=this.readAttachment(w[A],S,E,A,r);null!=I&&S.addAttachment(E,A,I)}}r.skins.push(S),"default"==S.name&&(r.defaultSkin=S)}o=0;for(var C=this.linkedMeshes.length;o<C;o++){var O=this.linkedMeshes[o];if(null==(S=null==O.skin?r.defaultSkin:r.findSkin(O.skin)))throw new Error("Skin not found: "+O.skin);var M=S.getAttachment(O.slotIndex,O.parent);if(null==M)throw new Error("Parent mesh not found: "+O.parent);O.mesh.setParentMesh(M)}if(this.linkedMeshes.length=0,n.events)for(var P in n.events){var R=n.events[P];(p=new ti(P)).intValue=this.getValue(R,"int",0),p.floatValue=this.getValue(R,"float",0),p.stringValue=this.getValue(R,"string",""),p.audioPath=this.getValue(R,"audio",null),null!=p.audioPath&&(p.volume=this.getValue(R,"volume",1),p.balance=this.getValue(R,"balance",0)),r.events.push(p)}if(n.animations)for(var D in n.animations){var N=n.animations[D];this.readAnimation(N,D,r)}return r},t.prototype.readAttachment=function(t,e,i,r,n){var s=this.scale;switch(r=this.getValue(t,"name",r),this.getValue(t,"type","region")){case"region":var o=this.getValue(t,"path",r),a=this.attachmentLoader.newRegionAttachment(e,r,o);return null==a?null:(a.path=o,a.x=this.getValue(t,"x",0)*s,a.y=this.getValue(t,"y",0)*s,a.scaleX=this.getValue(t,"scaleX",1),a.scaleY=this.getValue(t,"scaleY",1),a.rotation=this.getValue(t,"rotation",0),a.width=t.width*s,a.height=t.height*s,null!=(g=this.getValue(t,"color",null))&&a.color.setFromString(g),a);case"boundingbox":var h=this.attachmentLoader.newBoundingBoxAttachment(e,r);return null==h?null:(this.readVertices(t,h,t.vertexCount<<1),null!=(g=this.getValue(t,"color",null))&&h.color.setFromString(g),h);case"mesh":case"linkedmesh":o=this.getValue(t,"path",r);var l=this.attachmentLoader.newMeshAttachment(e,r,o);if(null==l)return null;l.path=o,null!=(g=this.getValue(t,"color",null))&&l.color.setFromString(g);var u=this.getValue(t,"parent",null);if(null!=u)return l.inheritDeform=this.getValue(t,"deform",!0),this.linkedMeshes.push(new fi(l,this.getValue(t,"skin",null),i,u)),l;var c=t.uvs;return this.readVertices(t,l,c.length),l.triangles=t.triangles,l.regionUVs=new Float32Array(c),l.hullLength=2*this.getValue(t,"hull",0),l;case"path":if(null==(o=this.attachmentLoader.newPathAttachment(e,r)))return null;o.closed=this.getValue(t,"closed",!1),o.constantSpeed=this.getValue(t,"constantSpeed",!0);var d=t.vertexCount;this.readVertices(t,o,d<<1);for(var p=Y.newArray(d/3,0),f=0;f<t.lengths.length;f++)p[f]=t.lengths[f]*s;return o.lengths=p,null!=(g=this.getValue(t,"color",null))&&o.color.setFromString(g),o;case"point":var m=this.attachmentLoader.newPointAttachment(e,r);return null==m?null:(m.x=this.getValue(t,"x",0)*s,m.y=this.getValue(t,"y",0)*s,m.rotation=this.getValue(t,"rotation",0),null!=(g=this.getValue(t,"color",null))&&m.color.setFromString(g),m);case"clipping":var _=this.attachmentLoader.newClippingAttachment(e,r);if(null==_)return null;var g,v=this.getValue(t,"end",null);if(null!=v){var y=n.findSlot(v);if(null==y)throw new Error("Clipping end slot not found: "+v);_.endSlot=y}return d=t.vertexCount,this.readVertices(t,_,d<<1),null!=(g=this.getValue(t,"color",null))&&_.color.setFromString(g),_}return null},t.prototype.readVertices=function(t,e,i){var r=this.scale;e.worldVerticesLength=i;var n=t.vertices;if(i!=n.length){var s=new Array,o=new Array;for(u=0,c=n.length;u<c;){var a=n[u++];o.push(a);for(var h=u+4*a;u<h;u+=4)o.push(n[u]),s.push(n[u+1]*r),s.push(n[u+2]*r),s.push(n[u+3])}e.bones=o,e.vertices=Y.toFloatArray(s)}else{var l=Y.toFloatArray(n);if(1!=r)for(var u=0,c=n.length;u<c;u++)l[u]*=r;e.vertices=l}},t.prototype.readAnimation=function(t,e,i){var r=this.scale,n=new Array,s=0;if(t.slots)for(var o in t.slots){var a=t.slots[o];if(-1==(J=i.findSlotIndex(o)))throw new Error("Slot not found: "+o);for(var h in a){var l=a[h];if("attachment"==h){(b=new Ne(l.length)).slotIndex=J;for(var u=0,c=0;c<l.length;c++){var d=l[c];b.setFrame(u++,d.time,d.name)}n.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}else if("color"==h){for((b=new Re(l.length)).slotIndex=J,u=0,c=0;c<l.length;c++){d=l[c];var p=new B;p.setFromString(d.color||"ffffffff"),b.setFrame(u,d.time,p.r,p.g,p.b,p.a),this.readCurve(d,b,u),u++}n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*Re.ENTRIES])}else{if("twoColor"!=h)throw new Error("Invalid timeline type for a slot: "+h+" ("+o+")");for((b=new De(l.length)).slotIndex=J,u=0,c=0;c<l.length;c++){d=l[c];var f=new B,m=new B;f.setFromString(d.light),m.setFromString(d.dark),b.setFrame(u,d.time,f.r,f.g,f.b,f.a,m.r,m.g,m.b),this.readCurve(d,b,u),u++}n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*De.ENTRIES])}}}if(t.bones)for(var _ in t.bones){var g=t.bones[_],y=i.findBoneIndex(_);if(-1==y)throw new Error("Bone not found: "+_);for(var h in g)if(l=g[h],"rotate"===h){for((b=new Ce(l.length)).boneIndex=y,u=0,c=0;c<l.length;c++)d=l[c],b.setFrame(u,d.time,d.angle),this.readCurve(d,b,u),u++;n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*Ce.ENTRIES])}else{if("translate"!==h&&"scale"!==h&&"shear"!==h)throw new Error("Invalid timeline type for a bone: "+h+" ("+_+")");var b=null,x=1;for("scale"===h?b=new Me(l.length):"shear"===h?b=new Pe(l.length):(b=new Oe(l.length),x=r),b.boneIndex=y,u=0,c=0;c<l.length;c++){d=l[c];var T=this.getValue(d,"x",0),S=this.getValue(d,"y",0);b.setFrame(u,d.time,T*x,S*x),this.readCurve(d,b,u),u++}n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*Oe.ENTRIES])}}if(t.ik)for(var E in t.ik){var w=t.ik[E],A=i.findIkConstraint(E);for((b=new Be(w.length)).ikConstraintIndex=i.ikConstraints.indexOf(A),u=0,c=0;c<w.length;c++)d=w[c],b.setFrame(u,d.time,this.getValue(d,"mix",1),this.getValue(d,"bendPositive",!0)?1:-1,this.getValue(d,"compress",!1),this.getValue(d,"stretch",!1)),this.readCurve(d,b,u),u++;n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*Be.ENTRIES])}if(t.transform)for(var E in t.transform){for(w=t.transform[E],A=i.findTransformConstraint(E),(b=new Ge(w.length)).transformConstraintIndex=i.transformConstraints.indexOf(A),u=0,c=0;c<w.length;c++)d=w[c],b.setFrame(u,d.time,this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1),this.getValue(d,"scaleMix",1),this.getValue(d,"shearMix",1)),this.readCurve(d,b,u),u++;n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*Ge.ENTRIES])}if(t.paths)for(var E in t.paths){w=t.paths[E];var I=i.findPathConstraintIndex(E);if(-1==I)throw new Error("Path constraint not found: "+E);var C=i.pathConstraints[I];for(var h in w)if(l=w[h],"position"===h||"spacing"===h){for(b=null,x=1,"spacing"===h?(b=new je(l.length),C.spacingMode!=ze.Length&&C.spacingMode!=ze.Fixed||(x=r)):(b=new Xe(l.length),C.positionMode==v.Fixed&&(x=r)),b.pathConstraintIndex=I,u=0,c=0;c<l.length;c++)d=l[c],b.setFrame(u,d.time,this.getValue(d,h,0)*x),this.readCurve(d,b,u),u++;n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*Xe.ENTRIES])}else if("mix"===h){for((b=new Ve(l.length)).pathConstraintIndex=I,u=0,c=0;c<l.length;c++)d=l[c],b.setFrame(u,d.time,this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1)),this.readCurve(d,b,u),u++;n.push(b),s=Math.max(s,b.frames[(b.getFrameCount()-1)*Ve.ENTRIES])}}if(t.deform)for(var O in t.deform){var M=t.deform[O],P=i.findSkin(O);if(null!=P)for(var o in M){if(a=M[o],-1==(J=i.findSlotIndex(o)))throw new Error("Slot not found: "+a.name);for(var h in a){l=a[h];var R=P.getAttachment(J,h);if(null==R)throw new Error("Deform attachment not found: "+l.name);var D=null!=R.bones,N=R.vertices,U=D?N.length/3*2:N.length;(b=new Fe(l.length)).slotIndex=J,b.attachment=R,u=0;for(var F=0;F<l.length;F++){d=l[F];var L=void 0,k=this.getValue(d,"vertices",null);if(null==k)L=D?Y.newFloatArray(U):N;else{L=Y.newFloatArray(U);var G=this.getValue(d,"offset",0);if(Y.arrayCopy(k,0,L,G,k.length),1!=r)for(var X=(c=G)+k.length;c<X;c++)L[c]*=r;if(!D)for(c=0;c<U;c++)L[c]+=N[c]}b.setFrame(u,d.time,L),this.readCurve(d,b,u),u++}n.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}}else if(Z.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+O)}var j=t.drawOrder;if(null==j&&(j=t.draworder),null!=j){b=new ke(j.length);var V=i.slots.length;for(u=0,F=0;F<j.length;F++){var H=j[F],W=null,z=this.getValue(H,"offsets",null);if(null!=z){W=Y.newArray(V,-1);var q=Y.newArray(V-z.length,0),K=0,$=0;for(c=0;c<z.length;c++){var J,Q=z[c];if(-1==(J=i.findSlotIndex(Q.slot)))throw new Error("Slot not found: "+Q.slot);for(;K!=J;)q[$++]=K++;W[K+Q.offset]=K++}for(;K<V;)q[$++]=K++;for(c=V-1;c>=0;c--)-1==W[c]&&(W[c]=q[--$])}b.setFrame(u++,H.time,W)}n.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}if(t.events){for(b=new Le(t.events.length),u=0,c=0;c<t.events.length;c++){var tt=t.events[c],et=i.findEvent(tt.name);if(null==et)throw new Error("Event not found: "+tt.name);var it=new Qe(Y.toSinglePrecision(tt.time),et);it.intValue=this.getValue(tt,"int",et.intValue),it.floatValue=this.getValue(tt,"float",et.floatValue),it.stringValue=this.getValue(tt,"string",et.stringValue),null!=it.data.audioPath&&(it.volume=this.getValue(tt,"volume",1),it.balance=this.getValue(tt,"balance",0)),b.setFrame(u++,it)}n.push(b),s=Math.max(s,b.frames[b.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");i.animations.push(new we(e,n,s))},t.prototype.readCurve=function(t,e,i){if(t.curve)if("stepped"===t.curve)e.setStepped(i);else if("[object Array]"===Object.prototype.toString.call(t.curve)){var r=t.curve;e.setCurve(i,r[0],r[1],r[2],r[3])}},t.prototype.getValue=function(t,e,i){return void 0!==t[e]?t[e]:i},t.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return l.T$.NORMAL;if("additive"==t)return l.T$.ADD;if("multiply"==t)return l.T$.MULTIPLY;if("screen"==t)return l.T$.SCREEN;throw new Error("Unknown blend mode: "+t)},t.positionModeFromString=function(t){if("fixed"==(t=t.toLowerCase()))return v.Fixed;if("percent"==t)return v.Percent;throw new Error("Unknown position mode: "+t)},t.spacingModeFromString=function(t){if("length"==(t=t.toLowerCase()))return ze.Length;if("fixed"==t)return ze.Fixed;if("percent"==t)return ze.Percent;throw new Error("Unknown position mode: "+t)},t.rotateModeFromString=function(t){if("tangent"==(t=t.toLowerCase()))return y.Tangent;if("chain"==t)return y.Chain;if("chainscale"==t)return y.ChainScale;throw new Error("Unknown rotate mode: "+t)},t.transformModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return b.Normal;if("onlytranslation"==t)return b.OnlyTranslation;if("norotationorreflection"==t)return b.NoRotationOrReflection;if("noscale"==t)return b.NoScale;if("noscaleorreflection"==t)return b.NoScaleOrReflection;throw new Error("Unknown transform mode: "+t)},t}(),fi=function(t,e,i,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=r},mi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return pe(e,t),e.prototype.createSkeleton=function(t){this.skeleton=new ai(t),this.skeleton.updateWorldTransform(),this.stateData=new Ke(t),this.state=new Ye(this.stateData)},e}(tt),_i=function(t,e){return(_i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function gi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}_i(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var vi,yi=function(t){if(!t)throw new Error("name cannot be null.");this.name=t},bi=function(t){function e(i){var r=t.call(this,i)||this;return r.id=e.nextID++,r.worldVerticesLength=0,r.deformAttachment=r,r}return gi(e,t),e.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},e.prototype.computeWorldVertices=function(t,e,i,r,n,s){i=n+(i>>1)*s;var o=t.bone.skeleton,a=t.deform,h=this.vertices,l=this.bones;if(l){for(var u=0,c=0,d=0;d<e;d+=2)u+=(_=l[u])+1,c+=_;var p=o.bones;if(0==a.length)for(C=n,E=3*c;C<i;C+=s){var f=0,m=0,_=l[u++];for(_+=u;u<_;u++,E+=3){b=p[l[u]].matrix,O=h[E],M=h[E+1];var g=h[E+2];f+=(O*b.a+M*b.c+b.tx)*g,m+=(O*b.b+M*b.d+b.ty)*g}r[C]=f,r[C+1]=m}else for(var v=a,y=(C=n,E=3*c,c<<1);C<i;C+=s){for(f=0,m=0,_=l[u++],_+=u;u<_;u++,E+=3,y+=2)b=p[l[u]].matrix,O=h[E]+v[y],M=h[E+1]+v[y+1],g=h[E+2],f+=(O*b.a+M*b.c+b.tx)*g,m+=(O*b.b+M*b.d+b.ty)*g;r[C]=f,r[C+1]=m}}else{a.length>0&&(h=a);for(var b,x=(b=t.bone.matrix).tx,T=b.ty,S=b.a,E=b.c,w=b.b,A=b.d,I=e,C=n;C<i;I+=2,C+=s){var O=h[I],M=h[I+1];r[C]=O*S+M*E+x,r[C+1]=O*w+M*A+T}}},e.prototype.copyTo=function(t){this.bones?(t.bones=new Array(this.bones.length),Y.arrayCopy(this.bones,0,t.bones,0,this.bones.length)):t.bones=null,this.vertices?(t.vertices=Y.newFloatArray(this.vertices.length),Y.arrayCopy(this.vertices,0,t.vertices,0,this.vertices.length)):t.vertices=null,t.worldVerticesLength=this.worldVerticesLength,t.deformAttachment=this.deformAttachment},e.nextID=0,e}(yi),xi=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.BoundingBox,i.color=new B(1,1,1,1),i}return gi(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.color.setFromColor(this.color),t},e}(bi),Ti=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Clipping,i.color=new B(.2275,.2275,.8078,1),i}return gi(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.endSlot=this.endSlot,t.color.setFromColor(this.color),t},e}(bi),Si=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Mesh,i.color=new B(1,1,1,1),i.tempColor=new B(0,0,0,0),i}return gi(e,t),e.prototype.getParentMesh=function(){return this.parentMesh},e.prototype.setParentMesh=function(t){this.parentMesh=t,t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},e.prototype.copy=function(){if(this.parentMesh)return this.newLinkedMesh();var t=new e(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),this.copyTo(t),t.regionUVs=new Float32Array(this.regionUVs.length),Y.arrayCopy(this.regionUVs,0,t.regionUVs,0,this.regionUVs.length),t.triangles=new Array(this.triangles.length),Y.arrayCopy(this.triangles,0,t.triangles,0,this.triangles.length),t.hullLength=this.hullLength,this.edges&&(t.edges=new Array(this.edges.length),Y.arrayCopy(this.edges,0,t.edges,0,this.edges.length)),t.width=this.width,t.height=this.height,t},e.prototype.newLinkedMesh=function(){var t=new e(this.name);return t.region=this.region,t.path=this.path,t.color.setFromColor(this.color),t.deformAttachment=this.deformAttachment,t.setParentMesh(this.parentMesh?this.parentMesh:this),t},e}(bi),Ei=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Path,i.closed=!1,i.constantSpeed=!1,i.color=new B(1,1,1,1),i}return gi(e,t),e.prototype.copy=function(){var t=new e(this.name);return this.copyTo(t),t.lengths=new Array(this.lengths.length),Y.arrayCopy(this.lengths,0,t.lengths,0,this.lengths.length),t.closed=closed,t.constantSpeed=this.constantSpeed,t.color.setFromColor(this.color),t},e}(bi),wi=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Point,i.color=new B(.38,.94,0,1),i}return gi(e,t),e.prototype.computeWorldPosition=function(t,e){var i=t.matrix;return e.x=this.x*i.a+this.y*i.c+t.worldX,e.y=this.x*i.b+this.y*i.d+t.worldY,e},e.prototype.computeWorldRotation=function(t){var e=t.matrix,i=G.cosDeg(this.rotation),r=G.sinDeg(this.rotation),n=i*e.a+r*e.c,s=i*e.b+r*e.d;return Math.atan2(s,n)*G.radDeg},e.prototype.copy=function(){var t=new e(this.name);return t.x=this.x,t.y=this.y,t.rotation=this.rotation,t.color.setFromColor(this.color),t},e}(bi),Ai=function(t){function e(e){var i=t.call(this,e)||this;return i.type=o.Region,i.x=0,i.y=0,i.scaleX=1,i.scaleY=1,i.rotation=0,i.width=0,i.height=0,i.color=new B(1,1,1,1),i.offset=Y.newFloatArray(8),i.uvs=Y.newFloatArray(8),i.tempColor=new B(1,1,1,1),i}return gi(e,t),e.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*i,s=r+this.region.width*t,o=n+this.region.height*i,a=this.rotation*Math.PI/180,h=Math.cos(a),l=Math.sin(a),u=r*h+this.x,c=r*l,d=n*h+this.y,p=n*l,f=s*h+this.x,m=s*l,_=o*h+this.y,g=o*l,v=this.offset;v[e.OX1]=u-p,v[e.OY1]=d+c,v[e.OX2]=u-g,v[e.OY2]=_+c,v[e.OX3]=f-g,v[e.OY3]=_+m,v[e.OX4]=f-p,v[e.OY4]=d+m},e.prototype.setRegion=function(t){this.region=t;var e=this.uvs;90==t.degrees?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},e.prototype.computeWorldVertices=function(t,i,r,n){var s=this.offset,o=t.matrix,a=o.tx,h=o.ty,l=o.a,u=o.c,c=o.b,d=o.d,p=0,f=0;p=s[e.OX1],f=s[e.OY1],i[r]=p*l+f*u+a,i[r+1]=p*c+f*d+h,r+=n,p=s[e.OX2],f=s[e.OY2],i[r]=p*l+f*u+a,i[r+1]=p*c+f*d+h,r+=n,p=s[e.OX3],f=s[e.OY3],i[r]=p*l+f*u+a,i[r+1]=p*c+f*d+h,r+=n,p=s[e.OX4],f=s[e.OY4],i[r]=p*l+f*u+a,i[r+1]=p*c+f*d+h},e.prototype.copy=function(){var t=new e(this.name);return t.region=this.region,t.rendererObject=this.rendererObject,t.path=this.path,t.x=this.x,t.y=this.y,t.scaleX=this.scaleX,t.scaleY=this.scaleY,t.rotation=this.rotation,t.width=this.width,t.height=this.height,Y.arrayCopy(this.uvs,0,t.uvs,0,8),Y.arrayCopy(this.offset,0,t.offset,0,8),t.color.setFromColor(this.color),t},e.OX1=0,e.OY1=1,e.OX2=2,e.OY2=3,e.OX3=4,e.OY3=5,e.OX4=6,e.OY4=7,e.X1=0,e.Y1=1,e.C1R=2,e.C1G=3,e.C1B=4,e.C1A=5,e.U1=6,e.V1=7,e.X2=8,e.Y2=9,e.C2R=10,e.C2G=11,e.C2B=12,e.C2A=13,e.U2=14,e.V2=15,e.X3=16,e.Y3=17,e.C3R=18,e.C3G=19,e.C3B=20,e.C3A=21,e.U3=22,e.V3=23,e.X4=24,e.Y4=25,e.C4R=26,e.C4G=27,e.C4B=28,e.C4A=29,e.U4=30,e.V4=31,e}(yi),Ii=function(){function t(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return t.prototype.begin=function(t){},t.prototype.transform=function(t,e,i,r){t.x+=G.randomTriangular(-this.jitterX,this.jitterY),t.y+=G.randomTriangular(-this.jitterX,this.jitterY)},t.prototype.end=function(){},t}(),Ci=function(){function t(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return t.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},t.prototype.transform=function(e,i,r,n){var s=this.angle*G.degreesToRadians,o=e.x-this.worldX,a=e.y-this.worldY,h=Math.sqrt(o*o+a*a);if(h<this.radius){var l=t.interpolation.apply(0,s,(this.radius-h)/this.radius),u=Math.cos(l),c=Math.sin(l);e.x=u*o-c*a+this.worldX,e.y=c*o+u*a+this.worldY}},t.prototype.end=function(){},t.interpolation=new V(2),t}(),Oi=function(){function t(t,e,i){if(!t)throw new Error("name cannot be null.");this.name=t,this.setTimelines(e),this.duration=i}return t.prototype.setTimelines=function(t){if(!t)throw new Error("timelines cannot be null.");this.timelines=t,this.timelineIds=new k;for(var e=0;e<t.length;e++)this.timelineIds.addAll(t[e].getPropertyIds())},t.prototype.hasTimeline=function(t){for(var e=0;e<t.length;e++)if(this.timelineIds.contains(t[e]))return!0;return!1},t.prototype.apply=function(t,e,i,r,n,s,o,a){if(!t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));for(var h=this.timelines,l=0,u=h.length;l<u;l++)h[l].apply(t,e,i,n,s,o,a)},t}(),Mi=function(){function t(t,e){this.propertyIds=e,this.frames=Y.newFloatArray(t*this.getFrameEntries())}return t.prototype.getPropertyIds=function(){return this.propertyIds},t.prototype.getFrameEntries=function(){return 1},t.prototype.getFrameCount=function(){return this.frames.length/this.getFrameEntries()},t.prototype.getDuration=function(){return this.frames[this.frames.length-this.getFrameEntries()]},t.search1=function(t,e){for(var i=t.length,r=1;r<i;r++)if(t[r]>e)return r-1;return i-1},t.search=function(t,e,i){for(var r=t.length,n=i;n<r;n+=i)if(t[n]>e)return n-i;return r-i},t}(),Pi=function(t){function e(e,i,r){var n=t.call(this,e,r)||this;return n.curves=Y.newFloatArray(e+18*i),n.curves[e-1]=1,n}return gi(e,t),e.prototype.setLinear=function(t){this.curves[t]=0},e.prototype.setStepped=function(t){this.curves[t]=1},e.prototype.shrink=function(t){var e=this.getFrameCount()+18*t;if(this.curves.length>e){var i=Y.newFloatArray(e);Y.arrayCopy(this.curves,0,i,0,e),this.curves=i}},e.prototype.setBezier=function(t,e,i,r,n,s,o,a,h,l,u){var c=this.curves,d=this.getFrameCount()+18*t;0==i&&(c[e]=2+d);for(var p=.03*(r-2*s+a),f=.03*(n-2*o+h),m=.006*(3*(s-a)-r+l),_=.006*(3*(o-h)-n+u),g=2*p+m,v=2*f+_,y=.3*(s-r)+p+.16666667*m,b=.3*(o-n)+f+.16666667*_,x=r+y,T=n+b,S=d+18;d<S;d+=2)c[d]=x,c[d+1]=T,y+=g,b+=v,g+=m,v+=_,x+=y,T+=b},e.prototype.getBezierValue=function(t,e,i,r){var n=this.curves;if(n[r]>t){var s=this.frames[e],o=this.frames[e+i];return o+(t-s)/(n[r]-s)*(n[r+1]-o)}var a=r+18;for(r+=2;r<a;r+=2)if(n[r]>=t){var h=n[r-2],l=n[r-1];return l+(t-h)/(n[r]-h)*(n[r+1]-l)}e+=this.getFrameEntries();var u=n[a-2],c=n[a-1];return c+(t-u)/(this.frames[e]-u)*(this.frames[e+i]-c)},e}(Mi),Ri=function(t){function e(e,i,r){return t.call(this,e,i,[r])||this}return gi(e,t),e.prototype.getFrameEntries=function(){return 2},e.prototype.setFrame=function(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+1]=i},e.prototype.getCurveValue=function(t){for(var e=this.frames,i=e.length-2,r=2;r<=i;r+=2)if(e[r]>t){i=r-2;break}var n=this.curves[i>>1];switch(n){case 0:var s=e[i],o=e[i+1];return o+(t-s)/(e[i+2]-s)*(e[i+2+1]-o);case 1:return e[i+1]}return this.getBezierValue(t,i,1,n-2)},e}(Pi),Di=function(t){function e(e,i,r,n){return t.call(this,e,i,[r,n])||this}return gi(e,t),e.prototype.getFrameEntries=function(){return 3},e.prototype.setFrame=function(t,e,i,r){t*=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r},e}(Pi),Ni=function(t){function e(e,i,r){var n=t.call(this,e,i,"0|"+r)||this;return n.boneIndex=0,n.boneIndex=r,n}return gi(e,t),e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.bones[this.boneIndex];if(a.active)if(i<this.frames[0])switch(s){case _.setup:return void(a.rotation=a.data.rotation);case _.first:a.rotation+=(a.data.rotation-a.rotation)*n}else{var h=this.getCurveValue(i);switch(s){case _.setup:a.rotation=a.data.rotation+h*n;break;case _.first:case _.replace:h+=a.data.rotation-a.rotation;case _.add:a.rotation+=h*n}}},e}(Ri),Ui=function(t){function e(e,i,r){var n=t.call(this,e,i,"1|"+r,"2|"+r)||this;return n.boneIndex=0,n.boneIndex=r,n}return gi(e,t),e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.bones[this.boneIndex];if(a.active){var h=this.frames;if(i<h[0])switch(s){case _.setup:return a.x=a.data.x,void(a.y=a.data.y);case _.first:a.x+=(a.data.x-a.x)*n,a.y+=(a.data.y-a.y)*n}else{var l=0,u=0,c=Mi.search(h,i,3),d=this.curves[c/3];switch(d){case 0:var p=h[c];l=h[c+1],u=h[c+2];var f=(i-p)/(h[c+3]-p);l+=(h[c+3+1]-l)*f,u+=(h[c+3+2]-u)*f;break;case 1:l=h[c+1],u=h[c+2];break;default:l=this.getBezierValue(i,c,1,d-2),u=this.getBezierValue(i,c,2,d+18-2)}switch(s){case _.setup:a.x=a.data.x+l*n,a.y=a.data.y+u*n;break;case _.first:case _.replace:a.x+=(a.data.x+l-a.x)*n,a.y+=(a.data.y+u-a.y)*n;break;case _.add:a.x+=l*n,a.y+=u*n}}}},e}(Di),Fi=function(t){function e(e,i,r){var n=t.call(this,e,i,"1|"+r)||this;return n.boneIndex=0,n.boneIndex=r,n}return gi(e,t),e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.bones[this.boneIndex];if(a.active)if(i<this.frames[0])switch(s){case _.setup:return void(a.x=a.data.x);case _.first:a.x+=(a.data.x-a.x)*n}else{var h=this.getCurveValue(i);switch(s){case _.setup:a.x=a.data.x+h*n;break;case _.first:case _.replace:a.x+=(a.data.x+h-a.x)*n;break;case _.add:a.x+=h*n}}},e}(Ri),Li=function(t){function e(e,i,r){var n=t.call(this,e,i,"2|"+r)||this;return n.boneIndex=0,n.boneIndex=r,n}return gi(e,t),e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.bones[this.boneIndex];if(a.active)if(i<this.frames[0])switch(s){case _.setup:return void(a.y=a.data.y);case _.first:a.y+=(a.data.y-a.y)*n}else{var h=this.getCurveValue(i);switch(s){case _.setup:a.y=a.data.y+h*n;break;case _.first:case _.replace:a.y+=(a.data.y+h-a.y)*n;break;case _.add:a.y+=h*n}}},e}(Ri),ki=function(t){function e(e,i,r){var n=t.call(this,e,i,"3|"+r,"4|"+r)||this;return n.boneIndex=0,n.boneIndex=r,n}return gi(e,t),e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.bones[this.boneIndex];if(a.active){var h=this.frames;if(i<h[0])switch(s){case _.setup:return a.scaleX=a.data.scaleX,void(a.scaleY=a.data.scaleY);case _.first:a.scaleX+=(a.data.scaleX-a.scaleX)*n,a.scaleY+=(a.data.scaleY-a.scaleY)*n}else{var l,u,c=Mi.search(h,i,3),d=this.curves[c/3];switch(d){case 0:var p=h[c];l=h[c+1],u=h[c+2];var f=(i-p)/(h[c+3]-p);l+=(h[c+3+1]-l)*f,u+=(h[c+3+2]-u)*f;break;case 1:l=h[c+1],u=h[c+2];break;default:l=this.getBezierValue(i,c,1,d-2),u=this.getBezierValue(i,c,2,d+18-2)}if(l*=a.data.scaleX,u*=a.data.scaleY,1==n)s==_.add?(a.scaleX+=l-a.data.scaleX,a.scaleY+=u-a.data.scaleY):(a.scaleX=l,a.scaleY=u);else{var m=0,v=0;if(o==g.mixOut)switch(s){case _.setup:m=a.data.scaleX,v=a.data.scaleY,a.scaleX=m+(Math.abs(l)*G.signum(m)-m)*n,a.scaleY=v+(Math.abs(u)*G.signum(v)-v)*n;break;case _.first:case _.replace:m=a.scaleX,v=a.scaleY,a.scaleX=m+(Math.abs(l)*G.signum(m)-m)*n,a.scaleY=v+(Math.abs(u)*G.signum(v)-v)*n;break;case _.add:m=a.scaleX,v=a.scaleY,a.scaleX=m+(Math.abs(l)*G.signum(m)-a.data.scaleX)*n,a.scaleY=v+(Math.abs(u)*G.signum(v)-a.data.scaleY)*n}else switch(s){case _.setup:m=Math.abs(a.data.scaleX)*G.signum(l),v=Math.abs(a.data.scaleY)*G.signum(u),a.scaleX=m+(l-m)*n,a.scaleY=v+(u-v)*n;break;case _.first:case _.replace:m=Math.abs(a.scaleX)*G.signum(l),v=Math.abs(a.scaleY)*G.signum(u),a.scaleX=m+(l-m)*n,a.scaleY=v+(u-v)*n;break;case _.add:m=G.signum(l),v=G.signum(u),a.scaleX=Math.abs(a.scaleX)*m+(l-Math.abs(a.data.scaleX)*m)*n,a.scaleY=Math.abs(a.scaleY)*v+(u-Math.abs(a.data.scaleY)*v)*n}}}}},e}(Di),Bi=function(t){function e(e,i,r){var n=t.call(this,e,i,"3|"+r)||this;return n.boneIndex=0,n.boneIndex=r,n}return gi(e,t),e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.bones[this.boneIndex];if(a.active)if(i<this.frames[0])switch(s){case _.setup:return void(a.scaleX=a.data.scaleX);case _.first:a.scaleX+=(a.data.scaleX-a.scaleX)*n}else{var h=this.getCurveValue(i)*a.data.scaleX;if(1==n)s==_.add?a.scaleX+=h-a.data.scaleX:a.scaleX=h;else{var l=0;if(o==g.mixOut)switch(s){case _.setup:l=a.data.scaleX,a.scaleX=l+(Math.abs(h)*G.signum(l)-l)*n;break;case _.first:case _.replace:l=a.scaleX,a.scaleX=l+(Math.abs(h)*G.signum(l)-l)*n;break;case _.add:l=a.scaleX,a.scaleX=l+(Math.abs(h)*G.signum(l)-a.data.scaleX)*n}else switch(s){case _.setup:l=Math.abs(a.data.scaleX)*G.signum(h),a.scaleX=l+(h-l)*n;break;case _.first:case _.replace:l=Math.abs(a.scaleX)*G.signum(h),a.scaleX=l+(h-l)*n;break;case _.add:l=G.signum(h),a.scaleX=Math.abs(a.scaleX)*l+(h-Math.abs(a.data.scaleX)*l)*n}}}},e}(Ri),Gi=function(t){function e(e,i,r){var n=t.call(this,e,i,"4|"+r)||this;return n.boneIndex=0,n.boneIndex=r,n}return gi(e,t),e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.bones[this.boneIndex];if(a.active)if(i<this.frames[0])switch(s){case _.setup:return void(a.scaleY=a.data.scaleY);case _.first:a.scaleY+=(a.data.scaleY-a.scaleY)*n}else{var h=this.getCurveValue(i)*a.data.scaleY;if(1==n)s==_.add?a.scaleY+=h-a.data.scaleY:a.scaleY=h;else{var l=0;if(o==g.mixOut)switch(s){case _.setup:l=a.data.scaleY,a.scaleY=l+(Math.abs(h)*G.signum(l)-l)*n;break;case _.first:case _.replace:l=a.scaleY,a.scaleY=l+(Math.abs(h)*G.signum(l)-l)*n;break;case _.add:l=a.scaleY,a.scaleY=l+(Math.abs(h)*G.signum(l)-a.data.scaleY)*n}else switch(s){case _.setup:l=Math.abs(a.data.scaleY)*G.signum(h),a.scaleY=l+(h-l)*n;break;case _.first:case _.replace:l=Math.abs(a.scaleY)*G.signum(h),a.scaleY=l+(h-l)*n;break;case _.add:l=G.signum(h),a.scaleY=Math.abs(a.scaleY)*l+(h-Math.abs(a.data.scaleY)*l)*n}}}},e}(Ri),Xi=function(t){function e(e,i,r){var n=t.call(this,e,i,"5|"+r,"6|"+r)||this;return n.boneIndex=0,n.boneIndex=r,n}return gi(e,t),e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.bones[this.boneIndex];if(a.active){var h=this.frames;if(i<h[0])switch(s){case _.setup:return a.shearX=a.data.shearX,void(a.shearY=a.data.shearY);case _.first:a.shearX+=(a.data.shearX-a.shearX)*n,a.shearY+=(a.data.shearY-a.shearY)*n}else{var l=0,u=0,c=Mi.search(h,i,3),d=this.curves[c/3];switch(d){case 0:var p=h[c];l=h[c+1],u=h[c+2];var f=(i-p)/(h[c+3]-p);l+=(h[c+3+1]-l)*f,u+=(h[c+3+2]-u)*f;break;case 1:l=h[c+1],u=h[c+2];break;default:l=this.getBezierValue(i,c,1,d-2),u=this.getBezierValue(i,c,2,d+18-2)}switch(s){case _.setup:a.shearX=a.data.shearX+l*n,a.shearY=a.data.shearY+u*n;break;case _.first:case _.replace:a.shearX+=(a.data.shearX+l-a.shearX)*n,a.shearY+=(a.data.shearY+u-a.shearY)*n;break;case _.add:a.shearX+=l*n,a.shearY+=u*n}}}},e}(Di),ji=function(t){function e(e,i,r){var n=t.call(this,e,i,"5|"+r)||this;return n.boneIndex=0,n.boneIndex=r,n}return gi(e,t),e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.bones[this.boneIndex];if(a.active)if(i<this.frames[0])switch(s){case _.setup:return void(a.shearX=a.data.shearX);case _.first:a.shearX+=(a.data.shearX-a.shearX)*n}else{var h=this.getCurveValue(i);switch(s){case _.setup:a.shearX=a.data.shearX+h*n;break;case _.first:case _.replace:a.shearX+=(a.data.shearX+h-a.shearX)*n;break;case _.add:a.shearX+=h*n}}},e}(Ri),Vi=function(t){function e(e,i,r){var n=t.call(this,e,i,"6|"+r)||this;return n.boneIndex=0,n.boneIndex=r,n}return gi(e,t),e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.bones[this.boneIndex];if(a.active)if(i<this.frames[0])switch(s){case _.setup:return void(a.shearY=a.data.shearY);case _.first:a.shearY+=(a.data.shearY-a.shearY)*n}else{var h=this.getCurveValue(i);switch(s){case _.setup:a.shearY=a.data.shearY+h*n;break;case _.first:case _.replace:a.shearY+=(a.data.shearY+h-a.shearY)*n;break;case _.add:a.shearY+=h*n}}},e}(Ri),Yi=function(t){function e(e,i,r){var n=t.call(this,e,i,["7|"+r,"8|"+r])||this;return n.slotIndex=0,n.slotIndex=r,n}return gi(e,t),e.prototype.getFrameEntries=function(){return 5},e.prototype.setFrame=function(t,e,i,r,n,s){t*=5,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r,this.frames[t+3]=n,this.frames[t+4]=s},e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.slots[this.slotIndex];if(a.bone.active){var h=this.frames,l=a.color;if(i<h[0]){var u=a.data.color;switch(s){case _.setup:return void l.setFromColor(u);case _.first:l.add((u.r-l.r)*n,(u.g-l.g)*n,(u.b-l.b)*n,(u.a-l.a)*n)}}else{var c=0,d=0,p=0,f=0,m=Mi.search(h,i,5),g=this.curves[m/5];switch(g){case 0:var v=h[m];c=h[m+1],d=h[m+2],p=h[m+3],f=h[m+4];var y=(i-v)/(h[m+5]-v);c+=(h[m+5+1]-c)*y,d+=(h[m+5+2]-d)*y,p+=(h[m+5+3]-p)*y,f+=(h[m+5+4]-f)*y;break;case 1:c=h[m+1],d=h[m+2],p=h[m+3],f=h[m+4];break;default:c=this.getBezierValue(i,m,1,g-2),d=this.getBezierValue(i,m,2,g+18-2),p=this.getBezierValue(i,m,3,g+36-2),f=this.getBezierValue(i,m,4,g+54-2)}1==n?l.set(c,d,p,f):(s==_.setup&&l.setFromColor(a.data.color),l.add((c-l.r)*n,(d-l.g)*n,(p-l.b)*n,(f-l.a)*n))}}},e}(Pi),Hi=function(t){function e(e,i,r){var n=t.call(this,e,i,["7|"+r])||this;return n.slotIndex=0,n.slotIndex=r,n}return gi(e,t),e.prototype.getFrameEntries=function(){return 4},e.prototype.setFrame=function(t,e,i,r,n){t<<=2,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r,this.frames[t+3]=n},e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.slots[this.slotIndex];if(a.bone.active){var h=this.frames,l=a.color;if(i<h[0]){var u=a.data.color;switch(s){case _.setup:return l.r=u.r,l.g=u.g,void(l.b=u.b);case _.first:l.r+=(u.r-l.r)*n,l.g+=(u.g-l.g)*n,l.b+=(u.b-l.b)*n}}else{var c=0,d=0,p=0,f=Mi.search(h,i,4),m=this.curves[f>>2];switch(m){case 0:var g=h[f];c=h[f+1],d=h[f+2],p=h[f+3];var v=(i-g)/(h[f+4]-g);c+=(h[f+4+1]-c)*v,d+=(h[f+4+2]-d)*v,p+=(h[f+4+3]-p)*v;break;case 1:c=h[f+1],d=h[f+2],p=h[f+3];break;default:c=this.getBezierValue(i,f,1,m-2),d=this.getBezierValue(i,f,2,m+18-2),p=this.getBezierValue(i,f,3,m+36-2)}1==n?(l.r=c,l.g=d,l.b=p):(s==_.setup&&(u=a.data.color,l.r=u.r,l.g=u.g,l.b=u.b),l.r+=(c-l.r)*n,l.g+=(d-l.g)*n,l.b+=(p-l.b)*n)}}},e}(Pi),Wi=function(t){function e(e,i,r){var n=t.call(this,e,i,"8|"+r)||this;return n.slotIndex=0,n.slotIndex=r,n}return gi(e,t),e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.slots[this.slotIndex];if(a.bone.active){var h=a.color;if(i<this.frames[0]){var l=a.data.color;switch(s){case _.setup:return void(h.a=l.a);case _.first:h.a+=(l.a-h.a)*n}}else{var u=this.getCurveValue(i);1==n?h.a=u:(s==_.setup&&(h.a=a.data.color.a),h.a+=(u-h.a)*n)}}},e}(Ri),zi=function(t){function e(e,i,r){var n=t.call(this,e,i,["7|"+r,"8|"+r,"9|"+r])||this;return n.slotIndex=0,n.slotIndex=r,n}return gi(e,t),e.prototype.getFrameEntries=function(){return 8},e.prototype.setFrame=function(t,e,i,r,n,s,o,a,h){t<<=3,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r,this.frames[t+3]=n,this.frames[t+4]=s,this.frames[t+5]=o,this.frames[t+6]=a,this.frames[t+7]=h},e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.slots[this.slotIndex];if(a.bone.active){var h=this.frames,l=a.color,u=a.darkColor;if(i<h[0]){var c=a.data.color,d=a.data.darkColor;switch(s){case _.setup:return l.setFromColor(c),u.r=d.r,u.g=d.g,void(u.b=d.b);case _.first:l.add((c.r-l.r)*n,(c.g-l.g)*n,(c.b-l.b)*n,(c.a-l.a)*n),u.r+=(d.r-u.r)*n,u.g+=(d.g-u.g)*n,u.b+=(d.b-u.b)*n}}else{var p=0,f=0,m=0,g=0,v=0,y=0,b=0,x=Mi.search(h,i,8),T=this.curves[x>>3];switch(T){case 0:var S=h[x];p=h[x+1],f=h[x+2],m=h[x+3],g=h[x+4],v=h[x+5],y=h[x+6],b=h[x+7];var E=(i-S)/(h[x+8]-S);p+=(h[x+8+1]-p)*E,f+=(h[x+8+2]-f)*E,m+=(h[x+8+3]-m)*E,g+=(h[x+8+4]-g)*E,v+=(h[x+8+5]-v)*E,y+=(h[x+8+6]-y)*E,b+=(h[x+8+7]-b)*E;break;case 1:p=h[x+1],f=h[x+2],m=h[x+3],g=h[x+4],v=h[x+5],y=h[x+6],b=h[x+7];break;default:p=this.getBezierValue(i,x,1,T-2),f=this.getBezierValue(i,x,2,T+18-2),m=this.getBezierValue(i,x,3,T+36-2),g=this.getBezierValue(i,x,4,T+54-2),v=this.getBezierValue(i,x,5,T+72-2),y=this.getBezierValue(i,x,6,T+90-2),b=this.getBezierValue(i,x,7,T+108-2)}1==n?(l.set(p,f,m,g),u.r=v,u.g=y,u.b=b):(s==_.setup&&(l.setFromColor(a.data.color),d=a.data.darkColor,u.r=d.r,u.g=d.g,u.b=d.b),l.add((p-l.r)*n,(f-l.g)*n,(m-l.b)*n,(g-l.a)*n),u.r+=(v-u.r)*n,u.g+=(y-u.g)*n,u.b+=(b-u.b)*n)}}},e}(Pi),qi=function(t){function e(e,i,r){var n=t.call(this,e,i,["7|"+r,"9|"+r])||this;return n.slotIndex=0,n.slotIndex=r,n}return gi(e,t),e.prototype.getFrameEntries=function(){return 7},e.prototype.setFrame=function(t,e,i,r,n,s,o,a){t*=7,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r,this.frames[t+3]=n,this.frames[t+4]=s,this.frames[t+5]=o,this.frames[t+6]=a},e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.slots[this.slotIndex];if(a.bone.active){var h=this.frames,l=a.color,u=a.darkColor;if(i<h[0]){var c=a.data.color,d=a.data.darkColor;switch(s){case _.setup:return l.r=c.r,l.g=c.g,l.b=c.b,u.r=d.r,u.g=d.g,void(u.b=d.b);case _.first:l.r+=(c.r-l.r)*n,l.g+=(c.g-l.g)*n,l.b+=(c.b-l.b)*n,u.r+=(d.r-u.r)*n,u.g+=(d.g-u.g)*n,u.b+=(d.b-u.b)*n}}else{var p=0,f=0,m=0,g=0,v=0,y=0,b=Mi.search(h,i,7),x=this.curves[b/7];switch(x){case 0:var T=h[b];p=h[b+1],f=h[b+2],m=h[b+3],g=h[b+4],v=h[b+5],y=h[b+6];var S=(i-T)/(h[b+7]-T);p+=(h[b+7+1]-p)*S,f+=(h[b+7+2]-f)*S,m+=(h[b+7+3]-m)*S,g+=(h[b+7+4]-g)*S,v+=(h[b+7+5]-v)*S,y+=(h[b+7+6]-y)*S;break;case 1:p=h[b+1],f=h[b+2],m=h[b+3],g=h[b+4],v=h[b+5],y=h[b+6];break;default:p=this.getBezierValue(i,b,1,x-2),f=this.getBezierValue(i,b,2,x+18-2),m=this.getBezierValue(i,b,3,x+36-2),g=this.getBezierValue(i,b,4,x+54-2),v=this.getBezierValue(i,b,5,x+72-2),y=this.getBezierValue(i,b,6,x+90-2)}1==n?(l.r=p,l.g=f,l.b=m,u.r=g,u.g=v,u.b=y):(s==_.setup&&(c=a.data.color,d=a.data.darkColor,l.r=c.r,l.g=c.g,l.b=c.b,u.r=d.r,u.g=d.g,u.b=d.b),l.r+=(p-l.r)*n,l.g+=(f-l.g)*n,l.b+=(m-l.b)*n,u.r+=(g-u.r)*n,u.g+=(v-u.g)*n,u.b+=(y-u.b)*n)}}},e}(Pi),Ki=function(t){function e(e,i){var r=t.call(this,e,["10|"+i])||this;return r.slotIndex=0,r.slotIndex=i,r.attachmentNames=new Array(e),r}return gi(e,t),e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.slots[this.slotIndex];a.bone.active&&(o!=g.mixOut?i<this.frames[0]?s!=_.setup&&s!=_.first||this.setAttachment(t,a,a.data.attachmentName):this.setAttachment(t,a,this.attachmentNames[Mi.search1(this.frames,i)]):s==_.setup&&this.setAttachment(t,a,a.data.attachmentName))},e.prototype.setAttachment=function(t,e,i){e.setAttachment(i?t.getAttachment(this.slotIndex,i):null)},e}(Mi),Zi=function(t){function e(e,i,r,n){var s=t.call(this,e,i,["11|"+r+"|"+n.id])||this;return s.slotIndex=0,s.slotIndex=r,s.attachment=n,s.vertices=new Array(e),s}return gi(e,t),e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.vertices[t]=i},e.prototype.setBezier=function(t,e,i,r,n,s,o,a,h,l,u){var c=this.curves,d=this.getFrameCount()+18*t;0==i&&(c[e]=2+d);for(var p=.03*(r-2*s+a),f=.03*h-.06*o,m=.006*(3*(s-a)-r+l),_=.018*(o-h+.33333333),g=2*p+m,v=2*f+_,y=.3*(s-r)+p+.16666667*m,b=.3*o+f+.16666667*_,x=r+y,T=b,S=d+18;d<S;d+=2)c[d]=x,c[d+1]=T,y+=g,b+=v,g+=m,v+=_,x+=y,T+=b},e.prototype.getCurvePercent=function(t,e){var i=this.curves,r=i[e];switch(r){case 0:var n=this.frames[e];return(t-n)/(this.frames[e+this.getFrameEntries()]-n);case 1:return 0}if(i[r-=2]>t){var s=this.frames[e];return i[r+1]*(t-s)/(i[r]-s)}var o=r+18;for(r+=2;r<o;r+=2)if(i[r]>=t){var a=i[r-2],h=i[r-1];return h+(t-a)/(i[r]-a)*(i[r+1]-h)}var l=i[o-2],u=i[o-1];return u+(1-u)*(t-l)/(this.frames[e+this.getFrameEntries()]-l)},e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.slots[this.slotIndex];if(a.bone.active){var h=a.getAttachment();if(h instanceof bi&&h.deformAttachment==this.attachment){var l=a.deform;0==l.length&&(s=_.setup);var u=this.vertices,c=u[0].length,d=this.frames;if(i<d[0]){var p=h;switch(s){case _.setup:return void(l.length=0);case _.first:if(1==n)return void(l.length=0);if(l.length=c,p.bones)for(n=1-n,m=0;m<c;m++)l[m]*=n;else for(var f=p.vertices,m=0;m<c;m++)l[m]+=(f[m]-l[m])*n}}else if(l.length=c,i>=d[d.length-1]){var g=u[d.length-1];if(1==n)if(s==_.add)if((p=h).bones)for(var v=0;v<c;v++)l[v]+=g[v];else{f=p.vertices;for(var y=0;y<c;y++)l[y]+=g[y]-f[y]}else Y.arrayCopy(g,0,l,0,c);else switch(s){case _.setup:var b=h;if(b.bones)for(var x=0;x<c;x++)l[x]=g[x]*n;else{f=b.vertices;for(var T=0;T<c;T++){var S=f[T];l[T]=S+(g[T]-S)*n}}break;case _.first:case _.replace:for(var E=0;E<c;E++)l[E]+=(g[E]-l[E])*n;break;case _.add:if((p=h).bones)for(var w=0;w<c;w++)l[w]+=g[w]*n;else{f=p.vertices;for(var A=0;A<c;A++)l[A]+=(g[A]-f[A])*n}}}else{var I=Mi.search1(d,i),C=this.getCurvePercent(i,I),O=u[I],M=u[I+1];if(1==n)if(s==_.add)if((p=h).bones)for(var P=0;P<c;P++)D=O[P],l[P]+=D+(M[P]-D)*C;else{f=p.vertices;for(var R=0;R<c;R++){var D=O[R];l[R]+=D+(M[R]-D)*C-f[R]}}else for(var N=0;N<c;N++)D=O[N],l[N]=D+(M[N]-D)*C;else switch(s){case _.setup:var U=h;if(U.bones)for(var F=0;F<c;F++)D=O[F],l[F]=(D+(M[F]-D)*C)*n;else{f=U.vertices;for(var L=0;L<c;L++)D=O[L],S=f[L],l[L]=S+(D+(M[L]-D)*C-S)*n}break;case _.first:case _.replace:for(var k=0;k<c;k++)D=O[k],l[k]+=(D+(M[k]-D)*C-l[k])*n;break;case _.add:if((p=h).bones)for(var B=0;B<c;B++)D=O[B],l[B]+=(D+(M[B]-D)*C)*n;else{f=p.vertices;for(var G=0;G<c;G++)D=O[G],l[G]+=(D+(M[G]-D)*C-f[G])*n}}}}}},e}(Pi),$i=function(t){function e(i){var r=t.call(this,i,e.propertyIds)||this;return r.events=new Array(i),r}return gi(e,t),e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},e.prototype.apply=function(t,e,i,r,n,s,o){if(r){var a=this.frames,h=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,r,n,s,o),e=-1;else if(e>=a[h-1])return;if(!(i<a[0])){var l=0;if(e<a[0])l=0;else for(var u=a[l=Mi.search1(a,e)+1];l>0&&a[l-1]==u;)l--;for(;l<h&&i>=a[l];l++)r.push(this.events[l])}}},e.propertyIds=["12"],e}(Mi),Ji=function(t){function e(i){var r=t.call(this,i,e.propertyIds)||this;return r.drawOrders=new Array(i),r}return gi(e,t),e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},e.prototype.apply=function(t,e,i,r,n,s,o){if(o!=g.mixOut)if(i<this.frames[0])s!=_.setup&&s!=_.first||Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length);else{var a=this.drawOrders[Mi.search1(this.frames,i)];if(a)for(var h=t.drawOrder,l=t.slots,u=0,c=a.length;u<c;u++)h[u]=l[a[u]];else Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)}else s==_.setup&&Y.arrayCopy(t.slots,0,t.drawOrder,0,t.slots.length)},e.propertyIds=["13"],e}(Mi),Qi=function(t){function e(e,i,r){var n=t.call(this,e,i,["14|"+r])||this;return n.ikConstraintIndex=r,n}return gi(e,t),e.prototype.getFrameEntries=function(){return 6},e.prototype.setFrame=function(t,e,i,r,n,s,o){t*=6,this.frames[t]=e,this.frames[t+1]=i,this.frames[t+2]=r,this.frames[t+3]=n,this.frames[t+4]=s?1:0,this.frames[t+5]=o?1:0},e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.ikConstraints[this.ikConstraintIndex];if(a.active){var h=this.frames;if(i<h[0])switch(s){case _.setup:return a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,void(a.stretch=a.data.stretch);case _.first:a.mix+=(a.data.mix-a.mix)*n,a.softness+=(a.data.softness-a.softness)*n,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}else{var l=0,u=0,c=Mi.search(h,i,6),d=this.curves[c/6];switch(d){case 0:var p=h[c];l=h[c+1],u=h[c+2];var f=(i-p)/(h[c+6]-p);l+=(h[c+6+1]-l)*f,u+=(h[c+6+2]-u)*f;break;case 1:l=h[c+1],u=h[c+2];break;default:l=this.getBezierValue(i,c,1,d-2),u=this.getBezierValue(i,c,2,d+18-2)}s==_.setup?(a.mix=a.data.mix+(l-a.data.mix)*n,a.softness=a.data.softness+(u-a.data.softness)*n,o==g.mixOut?(a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch):(a.bendDirection=h[c+3],a.compress=0!=h[c+4],a.stretch=0!=h[c+5])):(a.mix+=(l-a.mix)*n,a.softness+=(u-a.softness)*n,o==g.mixIn&&(a.bendDirection=h[c+3],a.compress=0!=h[c+4],a.stretch=0!=h[c+5]))}}},e}(Pi),tr=function(t){function e(e,i,r){var n=t.call(this,e,i,["15|"+r])||this;return n.transformConstraintIndex=r,n}return gi(e,t),e.prototype.getFrameEntries=function(){return 7},e.prototype.setFrame=function(t,e,i,r,n,s,o,a){var h=this.frames;h[t*=7]=e,h[t+1]=i,h[t+2]=r,h[t+3]=n,h[t+4]=s,h[t+5]=o,h[t+6]=a},e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.transformConstraints[this.transformConstraintIndex];if(a.active){var h=this.frames;if(i<h[0]){var l=a.data;switch(s){case _.setup:return a.mixRotate=l.mixRotate,a.mixX=l.mixX,a.mixY=l.mixY,a.mixScaleX=l.mixScaleX,a.mixScaleY=l.mixScaleY,void(a.mixShearY=l.mixShearY);case _.first:a.mixRotate+=(l.mixRotate-a.mixRotate)*n,a.mixX+=(l.mixX-a.mixX)*n,a.mixY+=(l.mixY-a.mixY)*n,a.mixScaleX+=(l.mixScaleX-a.mixScaleX)*n,a.mixScaleY+=(l.mixScaleY-a.mixScaleY)*n,a.mixShearY+=(l.mixShearY-a.mixShearY)*n}}else{var u,c,d,p,f,m,g=Mi.search(h,i,7),v=this.curves[g/7];switch(v){case 0:var y=h[g];u=h[g+1],c=h[g+2],d=h[g+3],p=h[g+4],f=h[g+5],m=h[g+6];var b=(i-y)/(h[g+7]-y);u+=(h[g+7+1]-u)*b,c+=(h[g+7+2]-c)*b,d+=(h[g+7+3]-d)*b,p+=(h[g+7+4]-p)*b,f+=(h[g+7+5]-f)*b,m+=(h[g+7+6]-m)*b;break;case 1:u=h[g+1],c=h[g+2],d=h[g+3],p=h[g+4],f=h[g+5],m=h[g+6];break;default:u=this.getBezierValue(i,g,1,v-2),c=this.getBezierValue(i,g,2,v+18-2),d=this.getBezierValue(i,g,3,v+36-2),p=this.getBezierValue(i,g,4,v+54-2),f=this.getBezierValue(i,g,5,v+72-2),m=this.getBezierValue(i,g,6,v+90-2)}s==_.setup?(l=a.data,a.mixRotate=l.mixRotate+(u-l.mixRotate)*n,a.mixX=l.mixX+(c-l.mixX)*n,a.mixY=l.mixY+(d-l.mixY)*n,a.mixScaleX=l.mixScaleX+(p-l.mixScaleX)*n,a.mixScaleY=l.mixScaleY+(f-l.mixScaleY)*n,a.mixShearY=l.mixShearY+(m-l.mixShearY)*n):(a.mixRotate+=(u-a.mixRotate)*n,a.mixX+=(c-a.mixX)*n,a.mixY+=(d-a.mixY)*n,a.mixScaleX+=(p-a.mixScaleX)*n,a.mixScaleY+=(f-a.mixScaleY)*n,a.mixShearY+=(m-a.mixShearY)*n)}}},e}(Pi),er=function(t){function e(e,i,r){var n=t.call(this,e,i,"16|"+r)||this;return n.pathConstraintIndex=r,n}return gi(e,t),e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.pathConstraints[this.pathConstraintIndex];if(a.active)if(i<this.frames[0])switch(s){case _.setup:return void(a.position=a.data.position);case _.first:a.position+=(a.data.position-a.position)*n}else{var h=this.getCurveValue(i);s==_.setup?a.position=a.data.position+(h-a.data.position)*n:a.position+=(h-a.position)*n}},e}(Ri),ir=function(t){function e(e,i,r){var n=t.call(this,e,i,"17|"+r)||this;return n.pathConstraintIndex=0,n.pathConstraintIndex=r,n}return gi(e,t),e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.pathConstraints[this.pathConstraintIndex];if(a.active)if(i<this.frames[0])switch(s){case _.setup:return void(a.spacing=a.data.spacing);case _.first:a.spacing+=(a.data.spacing-a.spacing)*n}else{var h=this.getCurveValue(i);s==_.setup?a.spacing=a.data.spacing+(h-a.data.spacing)*n:a.spacing+=(h-a.spacing)*n}},e}(Ri),rr=function(t){function e(e,i,r){var n=t.call(this,e,i,["18|"+r])||this;return n.pathConstraintIndex=0,n.pathConstraintIndex=r,n}return gi(e,t),e.prototype.getFrameEntries=function(){return 4},e.prototype.setFrame=function(t,e,i,r,n){var s=this.frames;s[t<<=2]=e,s[t+1]=i,s[t+2]=r,s[t+3]=n},e.prototype.apply=function(t,e,i,r,n,s,o){var a=t.pathConstraints[this.pathConstraintIndex];if(a.active){var h=this.frames;if(i<h[0])switch(s){case _.setup:return a.mixRotate=a.data.mixRotate,a.mixX=a.data.mixX,void(a.mixY=a.data.mixY);case _.first:a.mixRotate+=(a.data.mixRotate-a.mixRotate)*n,a.mixX+=(a.data.mixX-a.mixX)*n,a.mixY+=(a.data.mixY-a.mixY)*n}else{var l,u,c,d=Mi.search(h,i,4),p=this.curves[d>>2];switch(p){case 0:var f=h[d];l=h[d+1],u=h[d+2],c=h[d+3];var m=(i-f)/(h[d+4]-f);l+=(h[d+4+1]-l)*m,u+=(h[d+4+2]-u)*m,c+=(h[d+4+3]-c)*m;break;case 1:l=h[d+1],u=h[d+2],c=h[d+3];break;default:l=this.getBezierValue(i,d,1,p-2),u=this.getBezierValue(i,d,2,p+18-2),c=this.getBezierValue(i,d,3,p+36-2)}if(s==_.setup){var g=a.data;a.mixRotate=g.mixRotate+(l-g.mixRotate)*n,a.mixX=g.mixX+(u-g.mixX)*n,a.mixY=g.mixY+(c-g.mixY)*n}else a.mixRotate+=(l-a.mixRotate)*n,a.mixX+=(u-a.mixX)*n,a.mixY+=(c-a.mixY)*n}}},e}(Pi),nr=function(){function t(t){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new or(this),this.propertyIDs=new k,this.animationsChanged=!1,this.trackEntryPool=new W((function(){return new sr})),this.data=t}return t.emptyAnimation=function(){return _r||(_r=new Oi("<empty>",[],0)),_r},t.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,i=0,r=e.length;i<r;i++){var n=e[i];if(n){n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;var s=t*n.timeScale;if(n.delay>0){if(n.delay-=s,n.delay>0)continue;s=-n.delay,n.delay=0}var o=n.next;if(o){var a=n.trackLast-o.delay;if(a>=0){for(o.delay=0,o.trackTime+=0==n.timeScale?0:(a/n.timeScale+t)*o.timeScale,n.trackTime+=s,this.setCurrent(i,o,!0);o.mixingFrom;)o.mixTime+=t,o=o.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&!n.mixingFrom){e[i]=null,this.queue.end(n),this.clearNext(n);continue}if(n.mixingFrom&&this.updateMixingFrom(n,t)){var h=n.mixingFrom;for(n.mixingFrom=null,h&&(h.mixingTo=null);h;)this.queue.end(h),h=h.mixingFrom}n.trackTime+=s}}this.queue.drain()},t.prototype.updateMixingFrom=function(t,e){var i=t.mixingFrom;if(!i)return!0;var r=this.updateMixingFrom(i,e);return i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,t.mixTime>0&&t.mixTime>=t.mixDuration?(0!=i.totalAlpha&&0!=t.mixDuration||(t.mixingFrom=i.mixingFrom,i.mixingFrom&&(i.mixingFrom.mixingTo=t),t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),r):(i.trackTime+=e*i.timeScale,t.mixTime+=e,!1)},t.prototype.apply=function(t){if(!t)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var e=this.events,i=this.tracks,r=!1,n=0,s=i.length;n<s;n++){var o=i[n];if(o&&!(o.delay>0)){r=!0;var a=0==n?_.first:o.mixBlend,h=o.alpha;o.mixingFrom?h*=this.applyMixingFrom(o,t,a):o.trackTime>=o.trackEnd&&!o.next&&(h=0);var l=o.animationLast,u=o.getAnimationTime(),c=u,d=e;o.reverse&&(c=o.animation.duration-c,d=null);var p=o.animation.timelines,f=p.length;if(0==n&&1==h||a==_.add)for(var m=0;m<f;m++){Y.webkit602BugfixHelper(h,a);var v=p[m];v instanceof Ki?this.applyAttachmentTimeline(v,t,c,a,!0):v.apply(t,l,c,d,h,a,g.mixIn)}else{var y=o.timelineMode,b=o.timelinesRotation.length!=f<<1;for(b&&(o.timelinesRotation.length=f<<1),m=0;m<f;m++){var x=p[m],T=y[m]==lr?a:_.setup;x instanceof Ni?this.applyRotateTimeline(x,t,c,h,T,o.timelinesRotation,m<<1,b):x instanceof Ki?this.applyAttachmentTimeline(x,t,c,a,!0):(Y.webkit602BugfixHelper(h,a),x.apply(t,l,c,d,h,T,g.mixIn))}}this.queueEvents(o,u),e.length=0,o.nextAnimationLast=u,o.nextTrackLast=o.trackTime}}for(var S=this.unkeyedState+fr,E=t.slots,w=0,A=t.slots.length;w<A;w++){var I=E[w];if(I.attachmentState==S){var C=I.data.attachmentName;I.setAttachment(C?t.getAttachment(I.data.index,C):null)}}return this.unkeyedState+=2,this.queue.drain(),r},t.prototype.applyMixingFrom=function(t,e,i){var r=t.mixingFrom;r.mixingFrom&&this.applyMixingFrom(r,e,i);var n=0;0==t.mixDuration?(n=1,i==_.first&&(i=_.setup)):((n=t.mixTime/t.mixDuration)>1&&(n=1),i!=_.first&&(i=r.mixBlend));var s=n<r.attachmentThreshold,o=n<r.drawOrderThreshold,a=r.animation.timelines,h=a.length,l=r.alpha*t.interruptAlpha,u=l*(1-n),c=r.animationLast,d=r.getAnimationTime(),p=d,f=null;if(r.reverse?p=r.animation.duration-p:n<r.eventThreshold&&(f=this.events),i==_.add)for(var m=0;m<h;m++)a[m].apply(e,c,p,f,u,i,g.mixOut);else{var v=r.timelineMode,y=r.timelineHoldMix,b=r.timelinesRotation.length!=h<<1;for(b&&(r.timelinesRotation.length=h<<1),r.totalAlpha=0,m=0;m<h;m++){var x=a[m],T=g.mixOut,S=void 0,E=0;switch(v[m]){case lr:if(!o&&x instanceof Ji)continue;S=i,E=u;break;case ur:S=_.setup,E=u;break;case cr:S=i,E=l;break;case dr:S=_.setup,E=l;break;default:S=_.setup;var w=y[m];E=l*Math.max(0,1-w.mixTime/w.mixDuration)}r.totalAlpha+=E,x instanceof Ni?this.applyRotateTimeline(x,e,p,E,S,r.timelinesRotation,m<<1,b):x instanceof Ki?this.applyAttachmentTimeline(x,e,p,S,s):(Y.webkit602BugfixHelper(E,i),o&&x instanceof Ji&&S==_.setup&&(T=g.mixIn),x.apply(e,c,p,f,E,S,T))}}return t.mixDuration>0&&this.queueEvents(r,d),this.events.length=0,r.nextAnimationLast=d,r.nextTrackLast=r.trackTime,n},t.prototype.applyAttachmentTimeline=function(t,e,i,r,n){var s=e.slots[t.slotIndex];s.bone.active&&(i<t.frames[0]?r!=_.setup&&r!=_.first||this.setAttachment(e,s,s.data.attachmentName,n):this.setAttachment(e,s,t.attachmentNames[Mi.search1(t.frames,i)],n),s.attachmentState<=this.unkeyedState&&(s.attachmentState=this.unkeyedState+fr))},t.prototype.setAttachment=function(t,e,i,r){e.setAttachment(i?t.getAttachment(e.data.index,i):null),r&&(e.attachmentState=this.unkeyedState+mr)},t.prototype.applyRotateTimeline=function(t,e,i,r,n,s,o,a){if(a&&(s[o]=0),1!=r){var h=e.bones[t.boneIndex];if(h.active){var l=0,u=0;if(i<t.frames[0])switch(n){case _.setup:h.rotation=h.data.rotation;default:return;case _.first:l=h.rotation,u=h.data.rotation}else l=n==_.setup?h.data.rotation:h.rotation,u=h.data.rotation+t.getCurveValue(i);var c=0,d=u-l;if(0==(d-=360*(16384-(16384.499999999996-d/360|0))))c=s[o];else{var p=0,f=0;a?(p=0,f=d):(p=s[o],f=s[o+1]);var m=d>0,v=p>=0;G.signum(f)!=G.signum(d)&&Math.abs(f)<=90&&(Math.abs(p)>180&&(p+=360*G.signum(p)),v=m),c=d+p-p%360,v!=m&&(c+=360*G.signum(p)),s[o]=c}s[o+1]=d,h.rotation=l+c*r}}else t.apply(e,0,i,null,1,n,g.mixIn)},t.prototype.queueEvents=function(t,e){for(var i=t.animationStart,r=t.animationEnd,n=r-i,s=t.trackLast%n,o=this.events,a=0,h=o.length;a<h;a++){var l=o[a];if(l.time<s)break;l.time>r||this.queue.event(t,l)}for((t.loop?0==n||s>t.trackTime%n:e>=r&&t.animationLast<r)&&this.queue.complete(t);a<h;a++){var u=o[a];u.time<i||this.queue.event(t,u)}},t.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,i=this.tracks.length;e<i;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},t.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(e){this.queue.end(e),this.clearNext(e);for(var i=e;;){var r=i.mixingFrom;if(!r)break;this.queue.end(r),i.mixingFrom=null,i.mixingTo=null,i=r}this.tracks[e.trackIndex]=null,this.queue.drain()}}},t.prototype.setCurrent=function(t,e,i){var r=this.expandToIndex(t);this.tracks[t]=e,e.previous=null,r&&(i&&this.queue.interrupt(r),e.mixingFrom=r,r.mixingTo=e,e.mixTime=0,r.mixingFrom&&r.mixDuration>0&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)},t.prototype.setAnimation=function(t,e,i){void 0===i&&(i=!1);var r=this.data.skeletonData.findAnimation(e);if(!r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,i)},t.prototype.setAnimationWith=function(t,e,i){if(void 0===i&&(i=!1),!e)throw new Error("animation cannot be null.");var r=!0,n=this.expandToIndex(t);n&&(-1==n.nextTrackLast?(this.tracks[t]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.clearNext(n),n=n.mixingFrom,r=!1):this.clearNext(n));var s=this.trackEntry(t,e,i,n);return this.setCurrent(t,s,r),this.queue.drain(),s},t.prototype.addAnimation=function(t,e,i,r){void 0===i&&(i=!1),void 0===r&&(r=0);var n=this.data.skeletonData.findAnimation(e);if(!n)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,n,i,r)},t.prototype.addAnimationWith=function(t,e,i,r){if(void 0===i&&(i=!1),void 0===r&&(r=0),!e)throw new Error("animation cannot be null.");var n=this.expandToIndex(t);if(n)for(;n.next;)n=n.next;var s=this.trackEntry(t,e,i,n);return n?(n.next=s,s.previous=n,r<=0&&(r+=n.getTrackComplete()-s.mixDuration)):(this.setCurrent(t,s,!0),this.queue.drain()),s.delay=r,s},t.prototype.setEmptyAnimation=function(e,i){void 0===i&&(i=0);var r=this.setAnimationWith(e,t.emptyAnimation(),!1);return r.mixDuration=i,r.trackEnd=i,r},t.prototype.addEmptyAnimation=function(e,i,r){void 0===i&&(i=0),void 0===r&&(r=0);var n=this.addAnimationWith(e,t.emptyAnimation(),!1,r);return r<=0&&(n.delay+=n.mixDuration-i),n.mixDuration=i,n.trackEnd=i,n},t.prototype.setEmptyAnimations=function(t){void 0===t&&(t=0);var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,r=this.tracks.length;i<r;i++){var n=this.tracks[i];n&&this.setEmptyAnimation(n.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},t.prototype.expandToIndex=function(t){return t<this.tracks.length?this.tracks[t]:(Y.ensureArrayCapacity(this.tracks,t+1,null),this.tracks.length=t+1,null)},t.prototype.trackEntry=function(t,e,i,r){var n=this.trackEntryPool.obtain();return n.trackIndex=t,n.animation=e,n.loop=i,n.holdPrevious=!1,n.eventThreshold=0,n.attachmentThreshold=0,n.drawOrderThreshold=0,n.animationStart=0,n.animationEnd=e.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.interruptAlpha=1,n.mixTime=0,n.mixDuration=r?this.data.getMix(r.animation,e):0,n.mixBlend=_.replace,n},t.prototype.clearNext=function(t){for(var e=t.next;e;)this.queue.dispose(e),e=e.next;t.next=null},t.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var t=this.tracks,e=0,i=t.length;e<i;e++){var r=t[e];if(r){for(;r.mixingFrom;)r=r.mixingFrom;do{r.mixingTo&&r.mixBlend==_.add||this.computeHold(r),r=r.mixingTo}while(r)}}},t.prototype.computeHold=function(t){var e=t.mixingTo,i=t.animation.timelines,r=t.animation.timelines.length,n=t.timelineMode;n.length=r;var s=t.timelineHoldMix;s.length=0;var o=this.propertyIDs;if(e&&e.holdPrevious)for(var a=0;a<r;a++)n[a]=o.addAll(i[a].getPropertyIds())?dr:cr;else t:for(a=0;a<r;a++){var h=i[a],l=h.getPropertyIds();if(o.addAll(l))if(!e||h instanceof Ki||h instanceof Ji||h instanceof $i||!e.animation.hasTimeline(l))n[a]=ur;else{for(var u=e.mixingTo;u;u=u.mixingTo)if(!u.animation.hasTimeline(l)){if(t.mixDuration>0){n[a]=pr,s[a]=u;continue t}break}n[a]=dr}else n[a]=lr}},t.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},t.prototype.addListener=function(t){if(!t)throw new Error("listener cannot be null.");this.listeners.push(t)},t.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},t.prototype.clearListeners=function(){this.listeners.length=0},t.prototype.clearListenerNotifications=function(){this.queue.clear()},t.prototype.setAnimationByName=function(e,i,r){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(e,i,r)},t.prototype.addAnimationByName=function(e,i,r,n){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(e,i,r,n)},t.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},t.prototype.hasAnimationByName=function(e){return t.deprecatedWarning3||(t.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(e)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t.deprecatedWarning3=!1,t}(),sr=function(){function t(){this.mixBlend=_.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return t.prototype.reset=function(){this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},t.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},t.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},t.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},t.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},t.prototype.getTrackComplete=function(){var t=this.animationEnd-this.animationStart;if(0!=t){if(this.loop)return t*(1+(this.trackTime/t|0));if(this.trackTime<t)return t}return this.trackTime},Object.defineProperty(t.prototype,"time",{get:function(){return t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"endTime",{get:function(){return t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(e){t.deprecatedWarning2||(t.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=e},enumerable:!1,configurable:!0}),t.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},t.deprecatedWarning1=!1,t.deprecatedWarning2=!1,t}(),or=function(){function t(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return t.prototype.start=function(t){this.objects.push(vi.start),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.interrupt=function(t){this.objects.push(vi.interrupt),this.objects.push(t)},t.prototype.end=function(t){this.objects.push(vi.end),this.objects.push(t),this.animState.animationsChanged=!0},t.prototype.dispose=function(t){this.objects.push(vi.dispose),this.objects.push(t)},t.prototype.complete=function(t){this.objects.push(vi.complete),this.objects.push(t)},t.prototype.event=function(t,e){this.objects.push(vi.event),this.objects.push(t),this.objects.push(e)},t.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var t=this.objects,e=this.animState.listeners,i=0;i<t.length;i+=2){var r=t[i],n=t[i+1];switch(r){case vi.start:null!=n.listener&&n.listener.start&&n.listener.start(n);for(var s=0;s<e.length;s++)e[s].start&&e[s].start(n);break;case vi.interrupt:for(null!=n.listener&&n.listener.interrupt&&n.listener.interrupt(n),s=0;s<e.length;s++)e[s].interrupt&&e[s].interrupt(n);break;case vi.end:for(null!=n.listener&&n.listener.end&&n.listener.end(n),s=0;s<e.length;s++)e[s].end&&e[s].end(n);case vi.dispose:for(null!=n.listener&&n.listener.dispose&&n.listener.dispose(n),s=0;s<e.length;s++)e[s].dispose&&e[s].dispose(n);this.animState.trackEntryPool.free(n);break;case vi.complete:for(null!=n.listener&&n.listener.complete&&n.listener.complete(n),s=0;s<e.length;s++)e[s].complete&&e[s].complete(n);break;case vi.event:var o=t[2+i++];for(null!=n.listener&&n.listener.event&&n.listener.event(n,o),s=0;s<e.length;s++)e[s].event&&e[s].event(n,o)}}this.clear(),this.drainDisabled=!1}},t.prototype.clear=function(){this.objects.length=0},t}();!function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(vi||(vi={}));var ar,hr=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}(),lr=0,ur=1,cr=2,dr=3,pr=4,fr=1,mr=2,_r=null,gr=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,i){var r=this.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);var n=this.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);this.setMixWith(r,n,i)},t.prototype.setMixWith=function(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var r=t.name+"."+e.name;this.animationToMixTime[r]=i},t.prototype.getMix=function(t,e){var i=t.name+"."+e.name,r=this.animationToMixTime[i];return void 0===r?this.defaultMix:r},t}(),vr=function(){function t(t){this.atlas=t}return t.prototype.newRegionAttachment=function(t,e,i){var r=this.atlas.findRegion(i);if(null==r)throw new Error("Region not found in atlas: "+i+" (region attachment: "+e+")");var n=new Ai(e);return n.region=r,n},t.prototype.newMeshAttachment=function(t,e,i){var r=this.atlas.findRegion(i);if(null==r)throw new Error("Region not found in atlas: "+i+" (mesh attachment: "+e+")");var n=new Si(e);return n.region=r,n},t.prototype.newBoundingBoxAttachment=function(t,e){return new xi(e)},t.prototype.newPathAttachment=function(t,e){return new Ei(e)},t.prototype.newPointAttachment=function(t,e){return new wi(e)},t.prototype.newClippingAttachment=function(t,e){return new Ti(e)},t}(),yr=function(){function t(t,e,i){if(this.matrix=new u.y3,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.sorted=!1,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}return Object.defineProperty(t.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),t.prototype.isActive=function(){return this.active},t.prototype.update=function(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)},t.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},t.prototype.updateWorldTransformWith=function(t,e,i,r,n,s,o){this.ax=t,this.ay=e,this.arotation=i,this.ascaleX=r,this.ascaleY=n,this.ashearX=s,this.ashearY=o;var a=this.parent,h=this.matrix,l=this.skeleton.scaleX,u=Z.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(!a){var c=this.skeleton,d=i+90+o;return h.a=G.cosDeg(i+s)*r*l,h.c=G.cosDeg(d)*n*l,h.b=G.sinDeg(i+s)*r*u,h.d=G.sinDeg(d)*n*u,h.tx=t*l+c.x,void(h.ty=e*u+c.y)}var p=a.matrix.a,f=a.matrix.c,m=a.matrix.b,_=a.matrix.d;switch(h.tx=p*t+f*e+a.matrix.tx,h.ty=m*t+_*e+a.matrix.ty,this.data.transformMode){case b.Normal:d=i+90+o;var g=G.cosDeg(i+s)*r,v=G.cosDeg(d)*n,y=G.sinDeg(i+s)*r,x=G.sinDeg(d)*n;return h.a=p*g+f*y,h.c=p*v+f*x,h.b=m*g+_*y,void(h.d=m*v+_*x);case b.OnlyTranslation:d=i+90+o,h.a=G.cosDeg(i+s)*r,h.c=G.cosDeg(d)*n,h.b=G.sinDeg(i+s)*r,h.d=G.sinDeg(d)*n;break;case b.NoRotationOrReflection:var T=0;(w=p*p+m*m)>1e-4?(w=Math.abs(p*_-f*m)/w,p/=this.skeleton.scaleX,f=(m/=this.skeleton.scaleY)*w,_=p*w,T=Math.atan2(m,p)*G.radDeg):(p=0,m=0,T=90-Math.atan2(_,f)*G.radDeg);var S=i+s-T,E=i+o-T+90;g=G.cosDeg(S)*r,v=G.cosDeg(E)*n,y=G.sinDeg(S)*r,x=G.sinDeg(E)*n,h.a=p*g-f*y,h.c=p*v-f*x,h.b=m*g+_*y,h.d=m*v+_*x;break;case b.NoScale:case b.NoScaleOrReflection:var w,A=G.cosDeg(i),I=G.sinDeg(i),C=(p*A+f*I)/l,O=(m*A+_*I)/u;(w=Math.sqrt(C*C+O*O))>1e-5&&(w=1/w),C*=w,O*=w,w=Math.sqrt(C*C+O*O),this.data.transformMode==b.NoScale&&p*_-f*m<0!=(Z.yDown?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(w=-w);var M=Math.PI/2+Math.atan2(O,C),P=Math.cos(M)*w,R=Math.sin(M)*w;g=G.cosDeg(s)*r,v=G.cosDeg(90+o)*n,y=G.sinDeg(s)*r,x=G.sinDeg(90+o)*n,h.a=C*g+P*y,h.c=C*v+P*x,h.b=O*g+R*y,h.d=O*v+R*x}h.a*=l,h.c*=l,h.b*=u,h.d*=u},t.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},t.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*G.radDeg},t.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*G.radDeg},t.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.b*t.b)},t.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.c*t.c+t.d*t.d)},t.prototype.updateAppliedTransform=function(){var t=this.parent,e=this.matrix;if(!t)return this.ax=e.tx,this.ay=e.ty,this.arotation=Math.atan2(e.b,e.a)*G.radDeg,this.ascaleX=Math.sqrt(e.a*e.a+e.b*e.b),this.ascaleY=Math.sqrt(e.c*e.c+e.d*e.d),this.ashearX=0,void(this.ashearY=Math.atan2(e.a*e.c+e.b*e.d,e.a*e.d-e.b*e.c)*G.radDeg);var i=t.matrix,r=1/(i.a*i.d-i.b*i.c),n=e.tx-i.tx,s=e.ty-i.ty;this.ax=n*i.d*r-s*i.c*r,this.ay=s*i.a*r-n*i.b*r;var o=r*i.d,a=r*i.a,h=r*i.c,l=r*i.b,u=o*e.a-h*e.b,c=o*e.c-h*e.d,d=a*e.b-l*e.a,p=a*e.d-l*e.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(u*u+d*d),this.ascaleX>1e-4){var f=u*p-c*d;this.ascaleY=f/this.ascaleX,this.ashearY=Math.atan2(u*c+d*p,f)*G.radDeg,this.arotation=Math.atan2(d,u)*G.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(c*c+p*p),this.ashearY=0,this.arotation=90-Math.atan2(p,c)*G.radDeg},t.prototype.worldToLocal=function(t){var e=this.matrix,i=e.a,r=e.c,n=e.b,s=e.d,o=1/(i*s-r*n),a=t.x-e.tx,h=t.y-e.ty;return t.x=a*s*o-h*r*o,t.y=h*i*o-a*n*o,t},t.prototype.localToWorld=function(t){var e=this.matrix,i=t.x,r=t.y;return t.x=i*e.a+r*e.c+e.tx,t.y=i*e.b+r*e.d+e.ty,t},t.prototype.worldToLocalRotation=function(t){var e=G.sinDeg(t),i=G.cosDeg(t),r=this.matrix;return Math.atan2(r.a*e-r.b*i,r.d*i-r.c*e)*G.radDeg},t.prototype.localToWorldRotation=function(t){t-=this.rotation-this.shearX;var e=G.sinDeg(t),i=G.cosDeg(t),r=this.matrix;return Math.atan2(i*r.b+e*r.d,i*r.a+e*r.c)*G.radDeg},t.prototype.rotateWorld=function(t){var e=this.matrix,i=e.a,r=e.c,n=e.b,s=e.d,o=G.cosDeg(t),a=G.sinDeg(t);e.a=o*i-a*n,e.c=o*r-a*s,e.b=a*i+o*n,e.d=a*r+o*s},t}(),br=function(t,e,i){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=b.Normal,this.skinRequired=!1,this.color=new B,t<0)throw new Error("index must be >= 0.");if(null==e)throw new Error("name cannot be null.");this.index=t,this.name=e,this.parent=i},xr=function(t,e,i){this.name=t,this.order=e,this.skinRequired=i},Tr=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e},Sr=function(t){this.name=t},Er=function(){function t(t,e){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.softness=t.softness,this.bendDirection=t.bendDirection,this.compress=t.compress,this.stretch=t.stretch,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.update=function(){if(0!=this.mix){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}},t.prototype.apply1=function(t,e,i,r,n,s,o){var a=t.parent.matrix,h=a.a,l=a.c,u=a.b,c=a.d,d=-t.ashearX-t.arotation,p=0,f=0;switch(t.data.transformMode){case b.OnlyTranslation:p=e-t.worldX,f=i-t.worldY;break;case b.NoRotationOrReflection:var m=Math.abs(h*c-l*u)/(h*h+u*u),_=h/t.skeleton.scaleX,g=u/t.skeleton.scaleY;l=-g*m*t.skeleton.scaleX,c=_*m*t.skeleton.scaleY,d+=Math.atan2(g,_)*G.radDeg;default:var v=e-a.tx,y=i-a.ty,x=h*c-l*u;p=(v*c-y*l)/x-t.ax,f=(y*h-v*u)/x-t.ay}d+=Math.atan2(f,p)*G.radDeg,t.ascaleX<0&&(d+=180),d>180?d-=360:d<-180&&(d+=360);var T=t.ascaleX,S=t.ascaleY;if(r||n){switch(t.data.transformMode){case b.NoScale:case b.NoScaleOrReflection:p=e-t.worldX,f=i-t.worldY}var E=t.data.length*T,w=Math.sqrt(p*p+f*f);(r&&w<E||n&&w>E&&E>1e-4)&&(T*=m=(w/E-1)*o+1,s&&(S*=m))}t.updateWorldTransformWith(t.ax,t.ay,t.arotation+d*o,T,S,t.ashearX,t.ashearY)},t.prototype.apply2=function(t,e,i,r,n,s,o,a,h){var l=t.ax,u=t.ay,c=t.ascaleX,d=t.ascaleY,p=c,f=d,m=e.ascaleX,_=t.matrix,g=0,v=0,y=0;c<0?(c=-c,g=180,y=-1):(g=0,y=1),d<0&&(d=-d,y=-y),m<0?(m=-m,v=180):v=0;var b=e.ax,x=0,T=0,S=0,E=_.a,w=_.c,A=_.b,I=_.d,C=Math.abs(c-d)<=1e-4;!C||s?(x=0,T=E*b+_.tx,S=A*b+_.ty):(T=E*b+w*(x=e.ay)+_.tx,S=A*b+I*x+_.ty);var O=t.parent.matrix;E=O.a,w=O.c,A=O.b;var M,P,R=1/(E*(I=O.d)-w*A),D=T-O.tx,N=S-O.ty,U=(D*I-N*w)*R-l,F=(N*E-D*A)*R-u,L=Math.sqrt(U*U+F*F),k=e.data.length*m;if(L<1e-4)return this.apply1(t,i,r,!1,s,!1,h),void e.updateWorldTransformWith(b,x,0,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY);var B=((D=i-O.tx)*I-(N=r-O.ty)*w)*R-l,X=(N*E-D*A)*R-u,j=B*B+X*X;if(0!=a){a*=c*(m+1)*.5;var V=Math.sqrt(j),Y=V-L-k*c+a;if(Y>0){var H=Math.min(1,Y/(2*a))-1;j=(B-=(H=(Y-a*(1-H*H))/V)*B)*B+(X-=H*X)*X}}t:if(C){var W=(j-L*L-(k*=c)*k)/(2*L*k);W<-1?(W=-1,P=Math.PI*n):W>1?(W=1,P=0,s&&(p*=E=(Math.sqrt(j)/(L+k)-1)*h+1,o&&(f*=E))):P=Math.acos(W)*n,E=L+k*W,w=k*Math.sin(P),M=Math.atan2(X*E-B*w,B*E+X*w)}else{var z=(E=c*k)*E,q=(w=d*k)*w,K=Math.atan2(X,B),Z=-2*q*L,$=q-z;if((I=Z*Z-4*$*(A=q*L*L+z*j-z*q))>=0){var J=Math.sqrt(I);Z<0&&(J=-J);var Q=(J=.5*-(Z+J))/$,tt=A/J,et=Math.abs(Q)<Math.abs(tt)?Q:tt;if(et*et<=j){N=Math.sqrt(j-et*et)*n,M=K-Math.atan2(N,et),P=Math.atan2(N/d,(et-L)/c);break t}}var it=G.PI,rt=L-E,nt=rt*rt,st=0,ot=0,at=L+E,ht=at*at,lt=0;(A=-E*L/(z-q))>=-1&&A<=1&&(A=Math.acos(A),(I=(D=E*Math.cos(A)+L)*D+(N=w*Math.sin(A))*N)<nt&&(it=A,nt=I,rt=D,st=N),I>ht&&(ot=A,ht=I,at=D,lt=N)),j<=.5*(nt+ht)?(M=K-Math.atan2(st*n,rt),P=it*n):(M=K-Math.atan2(lt*n,at),P=ot*n)}var ut=Math.atan2(x,b)*y,ct=t.arotation;(M=(M-ut)*G.radDeg+g-ct)>180?M-=360:M<-180&&(M+=360),t.updateWorldTransformWith(l,u,ct+M*h,p,f,0,0),ct=e.arotation,(P=((P+ut)*G.radDeg-e.ashearX)*y+v-ct)>180?P-=360:P<-180&&(P+=360),e.updateWorldTransformWith(b,x,ct+P*h,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)},t}(),wr=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i.bendDirection=1,i.compress=!1,i.stretch=!1,i.uniform=!1,i.mix=1,i.softness=0,i}return gi(e,t),e}(xr),Ar=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i.mixRotate=0,i.mixX=0,i.mixY=0,i}return gi(e,t),e}(xr);!function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent",t[t.Proportional=3]="Proportional"}(ar||(ar={}));var Ir=function(){function t(t,e){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var i=0,r=t.bones.length;i<r;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY}return t.prototype.isActive=function(){return this.active},t.prototype.update=function(){var e=this.target.getAttachment();if(e instanceof Ei){var i=this.mixRotate,r=this.mixX,n=this.mixY;if(0!=i||0!=r||0!=n){var s=this.data,o=s.rotateMode==y.Tangent,a=s.rotateMode==y.ChainScale,h=this.bones.length,l=o?h:h+1,u=this.bones,c=Y.setArraySize(this.spaces,l),d=a?this.lengths=Y.setArraySize(this.lengths,h):null,p=this.spacing;switch(s.spacingMode){case ar.Percent:if(a)for(var f=0,m=l-1;f<m;f++)if((T=(M=u[f]).data.length)<t.epsilon)d[f]=0;else{var _=T*M.matrix.a,g=T*M.matrix.b;d[f]=Math.sqrt(_*_+g*g)}Y.arrayFill(c,1,l,p);break;case ar.Proportional:var v=0;for(f=0,m=l-1;f<m;)if((T=(M=u[f]).data.length)<t.epsilon)a&&(d[f]=0),c[++f]=p;else{_=T*M.matrix.a,g=T*M.matrix.b;var b=Math.sqrt(_*_+g*g);a&&(d[f]=b),c[++f]=b,v+=b}if(v>0)for(v=l/v*p,f=1;f<l;f++)c[f]*=v;break;default:var x=s.spacingMode==ar.Length;for(f=0,m=l-1;f<m;){var T;if((T=(M=u[f]).data.length)<t.epsilon)a&&(d[f]=0),c[++f]=p;else{_=T*M.matrix.a,g=T*M.matrix.b;var S=Math.sqrt(_*_+g*g);a&&(d[f]=S),c[++f]=(x?T+p:p)*S/T}}}var E=this.computeWorldPositions(e,l,o),w=E[0],A=E[1],I=s.offsetRotation,C=!1;0==I?C=s.rotateMode==y.Chain:(C=!1,I*=(O=this.target.bone.matrix).a*O.d-O.b*O.c>0?G.degRad:-G.degRad),f=0;for(var O=3;f<h;f++,O+=3){var M,P=(M=u[f]).matrix;P.tx+=(w-P.tx)*r,P.ty+=(A-P.ty)*n;var R=(_=E[O])-w,D=(g=E[O+1])-A;if(a){var N=d[f];if(0!=N){var U=(Math.sqrt(R*R+D*D)/N-1)*i+1;P.a*=U,P.b*=U}}if(w=_,A=g,i>0){var F=P.a,L=P.c,k=P.b,B=P.d,X=0,j=0,V=0;if(X=o?E[O-1]:0==c[f+1]?E[O+2]:Math.atan2(D,R),X-=Math.atan2(k,F),C){j=Math.cos(X),V=Math.sin(X);var H=M.data.length;w+=(H*(j*F-V*k)-R)*i,A+=(H*(V*F+j*k)-D)*i}else X+=I;X>G.PI?X-=G.PI2:X<-G.PI&&(X+=G.PI2),X*=i,j=Math.cos(X),V=Math.sin(X),P.a=j*F-V*k,P.c=j*L-V*B,P.b=V*F+j*k,P.d=V*L+j*B}M.updateAppliedTransform()}}}},t.prototype.computeWorldPositions=function(e,i,r){var n=this.target,s=this.position,o=this.spaces,a=Y.setArraySize(this.positions,3*i+2),h=null,l=e.closed,u=e.worldVerticesLength,c=u/6,d=t.NONE;if(!e.constantSpeed){var p,f=e.lengths,m=f[c-=l?1:2];switch(this.data.positionMode==v.Percent&&(s*=m),this.data.spacingMode){case ar.Percent:p=m;break;case ar.Proportional:p=m/i;break;default:p=1}h=Y.setArraySize(this.world,8);for(var _=0,g=0,y=0;_<i;_++,g+=3){var b=s+=W=o[_]*p;if(l)(b%=m)<0&&(b+=m),y=0;else{if(b<0){d!=t.BEFORE&&(d=t.BEFORE,e.computeWorldVertices(n,2,4,h,0,2)),this.addBeforePosition(b,h,0,a,g);continue}if(b>m){d!=t.AFTER&&(d=t.AFTER,e.computeWorldVertices(n,u-6,4,h,0,2)),this.addAfterPosition(b-m,h,0,a,g);continue}}for(;;y++){var x=f[y];if(!(b>x)){0==y?b/=x:b=(b-(Z=f[y-1]))/(x-Z);break}}y!=d&&(d=y,l&&y==c?(e.computeWorldVertices(n,u-4,4,h,0,2),e.computeWorldVertices(n,0,4,h,4,2)):e.computeWorldVertices(n,6*y+2,8,h,0,2)),this.addCurvePosition(b,h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],a,g,r||_>0&&0==W)}return a}l?(u+=2,h=Y.setArraySize(this.world,u),e.computeWorldVertices(n,2,u-4,h,0,2),e.computeWorldVertices(n,0,2,h,u-4,2),h[u-2]=h[0],h[u-1]=h[1]):(c--,u-=4,h=Y.setArraySize(this.world,u),e.computeWorldVertices(n,2,u,h,0,2));for(var T=Y.setArraySize(this.curves,c),S=0,E=h[0],w=h[1],A=0,I=0,C=0,O=0,M=0,P=0,R=0,D=0,N=0,U=0,F=0,L=0,k=0,B=0,G=(_=0,2);_<c;_++,G+=6)A=h[G],I=h[G+1],C=h[G+2],O=h[G+3],F=2*(R=.1875*(E-2*A+C))+(N=.09375*(3*(A-C)-E+(M=h[G+4]))),L=2*(D=.1875*(w-2*I+O))+(U=.09375*(3*(I-O)-w+(P=h[G+5]))),k=.75*(A-E)+R+.16666667*N,B=.75*(I-w)+D+.16666667*U,S+=Math.sqrt(k*k+B*B),k+=F,B+=L,F+=N,L+=U,S+=Math.sqrt(k*k+B*B),k+=F,B+=L,S+=Math.sqrt(k*k+B*B),k+=F+N,B+=L+U,S+=Math.sqrt(k*k+B*B),T[_]=S,E=M,w=P;this.data.positionMode==v.Percent&&(s*=S);var X=0;switch(this.data.spacingMode){case ar.Percent:X=S;break;case ar.Proportional:X=S/i;break;default:X=1}for(var j=this.segments,V=0,H=(_=0,g=0,y=0,0);_<i;_++,g+=3){var W;if(b=s+=W=o[_]*X,l)(b%=S)<0&&(b+=S),y=0;else{if(b<0){this.addBeforePosition(b,h,0,a,g);continue}if(b>S){this.addAfterPosition(b-S,h,u-4,a,g);continue}}for(;;y++){var z=T[y];if(!(b>z)){0==y?b/=z:b=(b-(Z=T[y-1]))/(z-Z);break}}if(y!=d){d=y;var q=6*y;for(E=h[q],w=h[q+1],A=h[q+2],I=h[q+3],C=h[q+4],O=h[q+5],F=2*(R=.03*(E-2*A+C))+(N=.006*(3*(A-C)-E+(M=h[q+6]))),L=2*(D=.03*(w-2*I+O))+(U=.006*(3*(I-O)-w+(P=h[q+7]))),k=.3*(A-E)+R+.16666667*N,B=.3*(I-w)+D+.16666667*U,V=Math.sqrt(k*k+B*B),j[0]=V,q=1;q<8;q++)k+=F,B+=L,F+=N,L+=U,V+=Math.sqrt(k*k+B*B),j[q]=V;k+=F,B+=L,V+=Math.sqrt(k*k+B*B),j[8]=V,k+=F+N,B+=L+U,V+=Math.sqrt(k*k+B*B),j[9]=V,H=0}for(b*=V;;H++){var K=j[H];if(!(b>K)){var Z;0==H?b/=K:b=H+(b-(Z=j[H-1]))/(K-Z);break}}this.addCurvePosition(.1*b,E,w,A,I,C,O,M,P,a,g,r||_>0&&0==W)}return a},t.prototype.addBeforePosition=function(t,e,i,r,n){var s=e[i],o=e[i+1],a=e[i+2]-s,h=e[i+3]-o,l=Math.atan2(h,a);r[n]=s+t*Math.cos(l),r[n+1]=o+t*Math.sin(l),r[n+2]=l},t.prototype.addAfterPosition=function(t,e,i,r,n){var s=e[i+2],o=e[i+3],a=s-e[i],h=o-e[i+1],l=Math.atan2(h,a);r[n]=s+t*Math.cos(l),r[n+1]=o+t*Math.sin(l),r[n+2]=l},t.prototype.addCurvePosition=function(t,e,i,r,n,s,o,a,h,l,u,c){if(0==t||isNaN(t))return l[u]=e,l[u+1]=i,void(l[u+2]=Math.atan2(n-i,r-e));var d=t*t,p=d*t,f=1-t,m=f*f,_=m*f,g=f*t,v=3*g,y=f*v,b=v*t,x=e*_+r*y+s*b+a*p,T=i*_+n*y+o*b+h*p;l[u]=x,l[u+1]=T,c&&(l[u+2]=t<.001?Math.atan2(n-i,r-e):Math.atan2(T-(i*m+n*g*2+o*d),x-(e*m+r*g*2+s*d)))},t.NONE=-1,t.BEFORE=-2,t.AFTER=-3,t.epsilon=1e-5,t}(),Cr=function(){function t(t,e){if(this.deform=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("bone cannot be null.");this.data=t,this.bone=e,this.color=new B,this.darkColor=null==t.darkColor?null:new B,this.setToSetupPose(),this.blendMode=this.data.blendMode}return t.prototype.getSkeleton=function(){return this.bone.skeleton},t.prototype.getAttachment=function(){return this.attachment},t.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},t.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},t.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},t.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},t}(),Or=function(){function t(t,e){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new z,this.active=!1,!t)throw new Error("data cannot be null.");if(!e)throw new Error("skeleton cannot be null.");this.data=t,this.mixRotate=t.mixRotate,this.mixX=t.mixX,this.mixY=t.mixY,this.mixScaleX=t.mixScaleX,this.mixScaleY=t.mixScaleY,this.mixShearY=t.mixShearY,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return t.prototype.isActive=function(){return this.active},t.prototype.update=function(){0==this.mixRotate&&0==this.mixX&&0==this.mixY&&0==this.mixScaleX&&0==this.mixScaleX&&0==this.mixShearY||(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())},t.prototype.applyAbsoluteWorld=function(){for(var t=this.mixRotate,e=this.mixX,i=this.mixY,r=this.mixScaleX,n=this.mixScaleY,s=this.mixShearY,o=0!=e||0!=i,a=this.target,h=a.matrix,l=h.a,u=h.c,c=h.b,d=h.d,p=l*d-u*c>0?G.degRad:-G.degRad,f=this.data.offsetRotation*p,m=this.data.offsetShearY*p,_=this.bones,g=0,v=_.length;g<v;g++){var y=_[g],b=y.matrix;if(0!=t){var x=b.a,T=b.c,S=b.b,E=b.d;(C=Math.atan2(c,l)-Math.atan2(S,x)+f)>G.PI?C-=G.PI2:C<-G.PI&&(C+=G.PI2),C*=t;var w=Math.cos(C),A=Math.sin(C);b.a=w*x-A*S,b.c=w*T-A*E,b.b=A*x+w*S,b.d=A*T+w*E}if(o){var I=this.temp;a.localToWorld(I.set(this.data.offsetX,this.data.offsetY)),b.tx+=(I.x-b.tx)*e,b.ty+=(I.y-b.ty)*i}if(0!=r&&(0!=(M=Math.sqrt(b.a*b.a+b.b*b.b))&&(M=(M+(Math.sqrt(l*l+c*c)-M+this.data.offsetScaleX)*r)/M),b.a*=M,b.b*=M),0!=n&&(0!=(M=Math.sqrt(b.c*b.c+b.d*b.d))&&(M=(M+(Math.sqrt(u*u+d*d)-M+this.data.offsetScaleY)*n)/M),b.c*=M,b.d*=M),s>0){T=b.c,E=b.d;var C,O=Math.atan2(E,T);(C=Math.atan2(d,u)-Math.atan2(c,l)-(O-Math.atan2(b.b,b.a)))>G.PI?C-=G.PI2:C<-G.PI&&(C+=G.PI2),C=O+(C+m)*s;var M=Math.sqrt(T*T+E*E);b.c=Math.cos(C)*M,b.d=Math.sin(C)*M}y.updateAppliedTransform()}},t.prototype.applyRelativeWorld=function(){for(var t=this.mixRotate,e=this.mixX,i=this.mixY,r=this.mixScaleX,n=this.mixScaleY,s=this.mixShearY,o=0!=e||0!=i,a=this.target,h=a.matrix,l=h.a,u=h.c,c=h.b,d=h.d,p=l*d-u*c>0?G.degRad:-G.degRad,f=this.data.offsetRotation*p,m=this.data.offsetShearY*p,_=this.bones,g=0,v=_.length;g<v;g++){var y,b=_[g],x=b.matrix;if(0!=t){var T=x.a,S=x.c,E=x.b,w=x.d;(y=Math.atan2(c,l)+f)>G.PI?y-=G.PI2:y<-G.PI&&(y+=G.PI2),y*=t;var A=Math.cos(y),I=Math.sin(y);x.a=A*T-I*E,x.c=A*S-I*w,x.b=I*T+A*E,x.d=I*S+A*w}if(o){var C=this.temp;a.localToWorld(C.set(this.data.offsetX,this.data.offsetY)),x.tx+=C.x*e,x.ty+=C.y*i}if(0!=r){var O=(Math.sqrt(l*l+c*c)-1+this.data.offsetScaleX)*r+1;x.a*=O,x.b*=O}0!=n&&(O=(Math.sqrt(u*u+d*d)-1+this.data.offsetScaleY)*n+1,x.c*=O,x.d*=O),s>0&&((y=Math.atan2(d,u)-Math.atan2(c,l))>G.PI?y-=G.PI2:y<-G.PI&&(y+=G.PI2),S=x.c,w=x.d,y=Math.atan2(w,S)+(y-G.PI/2+m)*s,O=Math.sqrt(S*S+w*w),x.c=Math.cos(y)*O,x.d=Math.sin(y)*O),b.updateAppliedTransform()}},t.prototype.applyAbsoluteLocal=function(){for(var t=this.mixRotate,e=this.mixX,i=this.mixY,r=this.mixScaleX,n=this.mixScaleY,s=this.mixShearY,o=this.target,a=this.bones,h=0,l=a.length;h<l;h++){var u=a[h],c=u.arotation;if(0!=t){var d=o.arotation-c+this.data.offsetRotation;c+=(d-=360*(16384-(16384.499999999996-d/360|0)))*t}var p=u.ax,f=u.ay;p+=(o.ax-p+this.data.offsetX)*e,f+=(o.ay-f+this.data.offsetY)*i;var m=u.ascaleX,_=u.ascaleY;0!=r&&0!=m&&(m=(m+(o.ascaleX-m+this.data.offsetScaleX)*r)/m),0!=n&&0!=_&&(_=(_+(o.ascaleY-_+this.data.offsetScaleY)*n)/_);var g=u.ashearY;0!=s&&(d=o.ashearY-g+this.data.offsetShearY,g+=(d-=360*(16384-(16384.499999999996-d/360|0)))*s),u.updateWorldTransformWith(p,f,c,m,_,u.ashearX,g)}},t.prototype.applyRelativeLocal=function(){for(var t=this.mixRotate,e=this.mixX,i=this.mixY,r=this.mixScaleX,n=this.mixScaleY,s=this.mixShearY,o=this.target,a=this.bones,h=0,l=a.length;h<l;h++){var u=a[h],c=u.arotation+(o.arotation+this.data.offsetRotation)*t,d=u.ax+(o.ax+this.data.offsetX)*e,p=u.ay+(o.ay+this.data.offsetY)*i,f=u.ascaleX*((o.ascaleX-1+this.data.offsetScaleX)*r)+1,m=u.ascaleY*((o.ascaleY-1+this.data.offsetScaleY)*n)+1,_=u.ashearY+(o.ashearY+this.data.offsetShearY)*s;u.updateWorldTransformWith(d,p,c,f,m,u.ashearX,_)}},t}(),Mr=function(){function t(t){if(this._updateCache=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!t)throw new Error("data cannot be null.");this.data=t,this.bones=new Array;for(var e=0;e<t.bones.length;e++){var i=t.bones[e],r=void 0;if(i.parent){var n=this.bones[i.parent.index];r=new yr(i,this,n),n.children.push(r)}else r=new yr(i,this,null);this.bones.push(r)}for(this.slots=new Array,this.drawOrder=new Array,e=0;e<t.slots.length;e++){var s=t.slots[e],o=(r=this.bones[s.boneData.index],new Cr(s,r));this.slots.push(o),this.drawOrder.push(o)}for(this.ikConstraints=new Array,e=0;e<t.ikConstraints.length;e++){var a=t.ikConstraints[e];this.ikConstraints.push(new Er(a,this))}for(this.transformConstraints=new Array,e=0;e<t.transformConstraints.length;e++){var h=t.transformConstraints[e];this.transformConstraints.push(new Or(h,this))}for(this.pathConstraints=new Array,e=0;e<t.pathConstraints.length;e++){var l=t.pathConstraints[e];this.pathConstraints.push(new Ir(l,this))}this.color=new B(1,1,1,1),this.updateCache()}return t.prototype.updateCache=function(){this._updateCache.length=0;for(var t=this.bones,e=0,i=t.length;e<i;e++)(n=t[e]).sorted=n.data.skinRequired,n.active=!n.sorted;if(this.skin){var r=this.skin.bones;for(e=0,i=this.skin.bones.length;e<i;e++){var n=this.bones[r[e].index];do{n.sorted=!1,n.active=!0,n=n.parent}while(n)}}var s=this.ikConstraints,o=this.transformConstraints,a=this.pathConstraints,h=s.length,l=o.length,u=a.length,c=h+l+u;t:for(e=0;e<c;e++){for(var d=0;d<h;d++)if((p=s[d]).data.order==e){this.sortIkConstraint(p);continue t}for(d=0;d<l;d++)if((p=o[d]).data.order==e){this.sortTransformConstraint(p);continue t}for(d=0;d<u;d++){var p;if((p=a[d]).data.order==e){this.sortPathConstraint(p);continue t}}}for(e=0,i=t.length;e<i;e++)this.sortBone(t[e])},t.prototype.sortIkConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&Y.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target;this.sortBone(e);var i=t.bones,r=i[0];if(this.sortBone(r),1==i.length)this._updateCache.push(t),this.sortReset(r.children);else{var n=i[i.length-1];this.sortBone(n),this._updateCache.push(t),this.sortReset(r.children),n.sorted=!0}}},t.prototype.sortPathConstraint=function(t){if(t.active=t.target.bone.isActive()&&(!t.data.skinRequired||this.skin&&Y.contains(this.skin.constraints,t.data,!0)),t.active){var e=t.target,i=e.data.index,r=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,i,r),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,i,r);for(var n=0,s=this.data.skins.length;n<s;n++)this.sortPathConstraintAttachment(this.data.skins[n],i,r);var o=e.getAttachment();o instanceof Ei&&this.sortPathConstraintAttachmentWith(o,r);var a=t.bones,h=a.length;for(n=0;n<h;n++)this.sortBone(a[n]);for(this._updateCache.push(t),n=0;n<h;n++)this.sortReset(a[n].children);for(n=0;n<h;n++)a[n].sorted=!0}},t.prototype.sortTransformConstraint=function(t){if(t.active=t.target.isActive()&&(!t.data.skinRequired||this.skin&&Y.contains(this.skin.constraints,t.data,!0)),t.active){this.sortBone(t.target);var e=t.bones,i=e.length;if(t.data.local)for(var r=0;r<i;r++){var n=e[r];this.sortBone(n.parent),this.sortBone(n)}else for(r=0;r<i;r++)this.sortBone(e[r]);for(this._updateCache.push(t),r=0;r<i;r++)this.sortReset(e[r].children);for(r=0;r<i;r++)e[r].sorted=!0}},t.prototype.sortPathConstraintAttachment=function(t,e,i){var r=t.attachments[e];if(r)for(var n in r)this.sortPathConstraintAttachmentWith(r[n],i)},t.prototype.sortPathConstraintAttachmentWith=function(t,e){if(t instanceof Ei){var i=t.bones;if(i)for(var r=this.bones,n=0,s=i.length;n<s;){var o=i[n++];for(o+=n;n<o;)this.sortBone(r[i[n++]])}else this.sortBone(e)}},t.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},t.prototype.sortReset=function(t){for(var e=0,i=t.length;e<i;e++){var r=t[e];r.active&&(r.sorted&&this.sortReset(r.children),r.sorted=!1)}},t.prototype.updateWorldTransform=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++){var r=t[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY}var n=this._updateCache;for(e=0,i=n.length;e<i;e++)n[e].update()},t.prototype.updateWorldTransformWith=function(t){var e=this.getRootBone(),i=t.matrix.a,r=t.matrix.c,n=t.matrix.b,s=t.matrix.d;e.matrix.tx=i*this.x+r*this.y+t.worldX,e.matrix.ty=n*this.x+s*this.y+t.worldY;var o=e.rotation+90+e.shearY,a=G.cosDeg(e.rotation+e.shearX)*e.scaleX,h=G.cosDeg(o)*e.scaleY,l=G.sinDeg(e.rotation+e.shearX)*e.scaleX,u=G.sinDeg(o)*e.scaleY,c=this.scaleX,d=Z.yDown?-this.scaleY:this.scaleY;e.matrix.a=(i*a+r*l)*c,e.matrix.c=(i*h+r*u)*c,e.matrix.b=(n*a+s*l)*d,e.matrix.d=(n*h+s*u)*d;for(var p=this._updateCache,f=0,m=p.length;f<m;f++){var _=p[f];_!=e&&_.update()}},t.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},t.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();var r=this.ikConstraints;for(e=0,i=r.length;e<i;e++)(a=r[e]).mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch;var n=this.transformConstraints;for(e=0,i=n.length;e<i;e++){var s=(a=n[e]).data;a.mixRotate=s.mixRotate,a.mixX=s.mixX,a.mixY=s.mixY,a.mixScaleX=s.mixScaleX,a.mixScaleY=s.mixScaleY,a.mixShearY=s.mixShearY}var o=this.pathConstraints;for(e=0,i=o.length;e<i;e++){var a;s=(a=o[e]).data,a.position=s.position,a.spacing=s.spacing,a.mixRotate=s.mixRotate,a.mixX=s.mixX,a.mixY=s.mixY}},t.prototype.setSlotsToSetupPose=function(){var t=this.slots;Y.arrayCopy(t,0,this.drawOrder,0,t.length);for(var e=0,i=t.length;e<i;e++)t[e].setToSetupPose()},t.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},t.prototype.findBone=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.findBoneIndex=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++)if(e[i].data.name==t)return i;return-1},t.prototype.findSlot=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.findSlotIndex=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++)if(e[i].data.name==t)return i;return-1},t.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(!e)throw new Error("Skin not found: "+t);this.setSkin(e)},t.prototype.setSkin=function(t){if(t!=this.skin){if(t)if(this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i],s=n.data.attachmentName;if(s){var o=t.getAttachment(i,s);o&&n.setAttachment(o)}}this.skin=t,this.updateCache()}},t.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},t.prototype.getAttachment=function(t,e){if(!e)throw new Error("attachmentName cannot be null.");if(this.skin){var i=this.skin.getAttachment(t,e);if(i)return i}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},t.prototype.setAttachment=function(t,e){if(!t)throw new Error("slotName cannot be null.");for(var i=this.slots,r=0,n=i.length;r<n;r++){var s=i[r];if(s.data.name==t){var o=null;if(e&&!(o=this.getAttachment(r,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void s.setAttachment(o)}}throw new Error("Slot not found: "+t)},t.prototype.findIkConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.findTransformConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.findPathConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},t.prototype.getBounds=function(t,e,i){if(void 0===i&&(i=new Array(2)),!t)throw new Error("offset cannot be null.");if(!e)throw new Error("size cannot be null.");for(var r=this.drawOrder,n=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,h=0,l=r.length;h<l;h++){var u=r[h];if(u.bone.active){var c=0,d=null,p=u.getAttachment();if(p instanceof Ai)c=8,d=Y.setArraySize(i,c,0),p.computeWorldVertices(u.bone,d,0,2);else if(p instanceof Si){var f=p;c=f.worldVerticesLength,d=Y.setArraySize(i,c,0),f.computeWorldVertices(u,0,c,d,0,2)}if(d)for(var m=0,_=d.length;m<_;m+=2){var g=d[m],v=d[m+1];n=Math.min(n,g),s=Math.min(s,v),o=Math.max(o,g),a=Math.max(a,v)}}}t.set(n,s),e.set(o-n,a-s)},t.prototype.update=function(t){this.time+=t},Object.defineProperty(t.prototype,"flipX",{get:function(){return-1==this.scaleX},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=e?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flipY",{get:function(){return-1==this.scaleY},set:function(e){t.deprecatedWarning1||(t.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=e?1:-1},enumerable:!1,configurable:!0}),t.deprecatedWarning1=!1,t}(),Pr=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findBoneIndex=function(t){if(!t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t.prototype.findSlot=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findSlotIndex=function(t){if(!t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t.prototype.findSkin=function(t){if(!t)throw new Error("skinName cannot be null.");for(var e=this.skins,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findEvent=function(t){if(!t)throw new Error("eventDataName cannot be null.");for(var e=this.events,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findAnimation=function(t){if(!t)throw new Error("animationName cannot be null.");for(var e=this.animations,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findIkConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findTransformConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findPathConstraint=function(t){if(!t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t}(),Rr=function(t,e,i){if(this.color=new B(1,1,1,1),t<0)throw new Error("index must be >= 0.");if(!e)throw new Error("name cannot be null.");if(!i)throw new Error("boneData cannot be null.");this.index=t,this.name=e,this.boneData=i},Dr=function(t){function e(e){var i=t.call(this,e,0,!1)||this;return i.bones=new Array,i.mixRotate=0,i.mixX=0,i.mixY=0,i.mixScaleX=0,i.mixScaleY=0,i.mixShearY=0,i.offsetRotation=0,i.offsetX=0,i.offsetY=0,i.offsetScaleX=0,i.offsetScaleY=0,i.offsetShearY=0,i.relative=!1,i.local=!1,i}return gi(e,t),e}(xr),Nr=function(t,e,i){this.slotIndex=t,this.name=e,this.attachment=i},Ur=function(){function t(t){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!t)throw new Error("name cannot be null.");this.name=t}return t.prototype.setAttachment=function(t,e,i){if(!i)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=i},t.prototype.addSkin=function(t){for(var e=0;e<t.bones.length;e++){for(var i=t.bones[e],r=!1,n=0;n<this.bones.length;n++)if(this.bones[n]==i){r=!0;break}r||this.bones.push(i)}for(e=0;e<t.constraints.length;e++){var s=t.constraints[e];for(r=!1,n=0;n<this.constraints.length;n++)if(this.constraints[n]==s){r=!0;break}r||this.constraints.push(s)}var o=t.getAttachments();for(e=0;e<o.length;e++){var a=o[e];this.setAttachment(a.slotIndex,a.name,a.attachment)}},t.prototype.copySkin=function(t){for(var e=0;e<t.bones.length;e++){for(var i=t.bones[e],r=!1,n=0;n<this.bones.length;n++)if(this.bones[n]==i){r=!0;break}r||this.bones.push(i)}for(e=0;e<t.constraints.length;e++){var s=t.constraints[e];for(r=!1,n=0;n<this.constraints.length;n++)if(this.constraints[n]==s){r=!0;break}r||this.constraints.push(s)}var o=t.getAttachments();for(e=0;e<o.length;e++){var a=o[e];a.attachment&&(a.attachment instanceof Si?(a.attachment=a.attachment.newLinkedMesh(),this.setAttachment(a.slotIndex,a.name,a.attachment)):(a.attachment=a.attachment.copy(),this.setAttachment(a.slotIndex,a.name,a.attachment)))}},t.prototype.getAttachment=function(t,e){var i=this.attachments[t];return i?i[e]:null},t.prototype.removeAttachment=function(t,e){var i=this.attachments[t];i&&(i[e]=null)},t.prototype.getAttachments=function(){for(var t=new Array,e=0;e<this.attachments.length;e++){var i=this.attachments[e];if(i)for(var r in i){var n=i[r];n&&t.push(new Nr(e,r,n))}}return t},t.prototype.getAttachmentsForSlot=function(t,e){var i=this.attachments[t];if(i)for(var r in i){var n=i[r];n&&e.push(new Nr(t,r,n))}},t.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},t.prototype.attachAll=function(t,e){for(var i=0,r=0;r<t.slots.length;r++){var n=t.slots[r],s=n.getAttachment();if(s&&i<e.attachments.length){var o=e.attachments[i];for(var a in o)if(s==o[a]){var h=this.getAttachment(i,a);h&&n.setAttachment(h);break}}i++}},t}(),Fr=function(){function t(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return t.prototype.readSkeletonData=function(e){var i=this.scale,r=new Pr;r.name="";var n=new x(e),s=n.readInt32(),o=n.readInt32();if(r.hash=0==o&&0==s?null:o.toString(16)+s.toString(16),r.version=n.readString(),"4.0"!==r.version.substr(0,3)){var a="Spine 4.0 loader cant load version "+r.version+". Please configure your pixi-spine bundle";console.error(a)}r.x=n.readFloat(),r.y=n.readFloat(),r.width=n.readFloat(),r.height=n.readFloat();var h=n.readBoolean();h&&(r.fps=n.readFloat(),r.imagesPath=n.readString(),r.audioPath=n.readString());var l=0;l=n.readInt(!0);for(var u=0;u<l;u++)n.strings.push(n.readString());for(l=n.readInt(!0),u=0;u<l;u++){var c=n.readString(),d=0==u?null:r.bones[n.readInt(!0)];(m=new br(u,c,d)).rotation=n.readFloat(),m.x=n.readFloat()*i,m.y=n.readFloat()*i,m.scaleX=n.readFloat(),m.scaleY=n.readFloat(),m.shearX=n.readFloat(),m.shearY=n.readFloat(),m.length=n.readFloat()*i,m.transformMode=n.readInt(!0),m.skinRequired=n.readBoolean(),h&&B.rgba8888ToColor(m.color,n.readInt32()),r.bones.push(m)}for(l=n.readInt(!0),u=0;u<l;u++){var p=n.readString(),f=r.bones[n.readInt(!0)],m=new Rr(u,p,f);B.rgba8888ToColor(m.color,n.readInt32());var _=n.readInt32();-1!=_&&B.rgb888ToColor(m.darkColor=new B,_),m.attachmentName=n.readStringRef(),m.blendMode=t.BlendModeValues[n.readInt(!0)],r.slots.push(m)}l=n.readInt(!0),u=0;for(var g=void 0;u<l;u++){(m=new wr(n.readString())).order=n.readInt(!0),m.skinRequired=n.readBoolean(),g=n.readInt(!0);for(var y=0;y<g;y++)m.bones.push(r.bones[n.readInt(!0)]);m.target=r.bones[n.readInt(!0)],m.mix=n.readFloat(),m.softness=n.readFloat()*i,m.bendDirection=n.readByte(),m.compress=n.readBoolean(),m.stretch=n.readBoolean(),m.uniform=n.readBoolean(),r.ikConstraints.push(m)}for(l=n.readInt(!0),u=0,g=void 0;u<l;u++){for((m=new Dr(n.readString())).order=n.readInt(!0),m.skinRequired=n.readBoolean(),g=n.readInt(!0),y=0;y<g;y++)m.bones.push(r.bones[n.readInt(!0)]);m.target=r.bones[n.readInt(!0)],m.local=n.readBoolean(),m.relative=n.readBoolean(),m.offsetRotation=n.readFloat(),m.offsetX=n.readFloat()*i,m.offsetY=n.readFloat()*i,m.offsetScaleX=n.readFloat(),m.offsetScaleY=n.readFloat(),m.offsetShearY=n.readFloat(),m.mixRotate=n.readFloat(),m.mixX=n.readFloat(),m.mixY=n.readFloat(),m.mixScaleX=n.readFloat(),m.mixScaleY=n.readFloat(),m.mixShearY=n.readFloat(),r.transformConstraints.push(m)}for(l=n.readInt(!0),u=0,g=void 0;u<l;u++){for((m=new Ar(n.readString())).order=n.readInt(!0),m.skinRequired=n.readBoolean(),g=n.readInt(!0),y=0;y<g;y++)m.bones.push(r.bones[n.readInt(!0)]);m.target=r.slots[n.readInt(!0)],m.positionMode=n.readInt(!0),m.spacingMode=n.readInt(!0),m.rotateMode=n.readInt(!0),m.offsetRotation=n.readFloat(),m.position=n.readFloat(),m.positionMode==v.Fixed&&(m.position*=i),m.spacing=n.readFloat(),m.spacingMode!=ar.Length&&m.spacingMode!=ar.Fixed||(m.spacing*=i),m.mixRotate=n.readFloat(),m.mixX=n.readFloat(),m.mixY=n.readFloat(),r.pathConstraints.push(m)}var b=this.readSkin(n,r,!0,h);for(b&&(r.defaultSkin=b,r.skins.push(b)),u=r.skins.length,Y.setArraySize(r.skins,l=u+n.readInt(!0));u<l;u++)r.skins[u]=this.readSkin(n,r,!1,h);for(l=this.linkedMeshes.length,u=0;u<l;u++){var T=this.linkedMeshes[u],S=(T.skin?r.findSkin(T.skin):r.defaultSkin).getAttachment(T.slotIndex,T.parent);T.mesh.deformAttachment=T.inheritDeform?S:T.mesh,T.mesh.setParentMesh(S)}for(this.linkedMeshes.length=0,l=n.readInt(!0),u=0;u<l;u++)(m=new Sr(n.readStringRef())).intValue=n.readInt(!1),m.floatValue=n.readFloat(),m.stringValue=n.readString(),m.audioPath=n.readString(),m.audioPath&&(m.volume=n.readFloat(),m.balance=n.readFloat()),r.events.push(m);for(l=n.readInt(!0),u=0;u<l;u++)r.animations.push(this.readAnimation(n,n.readString(),r));return r},t.prototype.readSkin=function(t,e,i,r){var n=null,s=0;if(i){if(0==(s=t.readInt(!0)))return null;n=new Ur("default")}else{(n=new Ur(t.readStringRef())).bones.length=t.readInt(!0);for(var o=0,a=n.bones.length;o<a;o++)n.bones[o]=e.bones[t.readInt(!0)];for(o=0,a=t.readInt(!0);o<a;o++)n.constraints.push(e.ikConstraints[t.readInt(!0)]);for(o=0,a=t.readInt(!0);o<a;o++)n.constraints.push(e.transformConstraints[t.readInt(!0)]);for(o=0,a=t.readInt(!0);o<a;o++)n.constraints.push(e.pathConstraints[t.readInt(!0)]);s=t.readInt(!0)}for(o=0;o<s;o++)for(var h=t.readInt(!0),l=0,u=t.readInt(!0);l<u;l++){var c=t.readStringRef(),d=this.readAttachment(t,e,n,h,c,r);d&&n.setAttachment(h,c,d)}return n},t.prototype.readAttachment=function(t,e,i,r,n,s){var a=this.scale,h=t.readStringRef();switch(h||(h=n),t.readByte()){case o.Region:var l=t.readStringRef(),u=t.readFloat(),c=t.readFloat(),d=t.readFloat(),p=t.readFloat(),f=t.readFloat(),m=t.readFloat(),_=t.readFloat(),g=t.readInt32();l||(l=h);var v=this.attachmentLoader.newRegionAttachment(i,h,l);return v?(v.path=l,v.x=c*a,v.y=d*a,v.scaleX=p,v.scaleY=f,v.rotation=u,v.width=m*a,v.height=_*a,B.rgba8888ToColor(v.color,g),v):null;case o.BoundingBox:var y=t.readInt(!0),b=this.readVertices(t,y),x=(g=s?t.readInt32():0,this.attachmentLoader.newBoundingBoxAttachment(i,h));return x?(x.worldVerticesLength=y<<1,x.vertices=b.vertices,x.bones=b.bones,s&&B.rgba8888ToColor(x.color,g),x):null;case o.Mesh:l=t.readStringRef(),g=t.readInt32(),y=t.readInt(!0);var T=this.readFloatArray(t,y<<1,1),S=this.readShortArray(t),E=(b=this.readVertices(t,y),t.readInt(!0)),w=null;return m=0,_=0,s&&(w=this.readShortArray(t),m=t.readFloat(),_=t.readFloat()),l||(l=h),(A=this.attachmentLoader.newMeshAttachment(i,h,l))?(A.path=l,B.rgba8888ToColor(A.color,g),A.bones=b.bones,A.vertices=b.vertices,A.worldVerticesLength=y<<1,A.triangles=S,A.regionUVs=new Float32Array(T),A.hullLength=E<<1,s&&(A.edges=w,A.width=m*a,A.height=_*a),A):null;case o.LinkedMesh:l=t.readStringRef(),g=t.readInt32();var A,I=t.readStringRef(),C=t.readStringRef(),O=t.readBoolean();return m=0,_=0,s&&(m=t.readFloat(),_=t.readFloat()),l||(l=h),(A=this.attachmentLoader.newMeshAttachment(i,h,l))?(A.path=l,B.rgba8888ToColor(A.color,g),s&&(A.width=m*a,A.height=_*a),this.linkedMeshes.push(new Lr(A,I,r,C,O)),A):null;case o.Path:for(var M=t.readBoolean(),P=t.readBoolean(),R=(y=t.readInt(!0),b=this.readVertices(t,y),Y.newArray(y/3,0)),D=0,N=R.length;D<N;D++)R[D]=t.readFloat()*a;return g=s?t.readInt32():0,(l=this.attachmentLoader.newPathAttachment(i,h))?(l.closed=M,l.constantSpeed=P,l.worldVerticesLength=y<<1,l.vertices=b.vertices,l.bones=b.bones,l.lengths=R,s&&B.rgba8888ToColor(l.color,g),l):null;case o.Point:u=t.readFloat(),c=t.readFloat(),d=t.readFloat(),g=s?t.readInt32():0;var U=this.attachmentLoader.newPointAttachment(i,h);return U?(U.x=c*a,U.y=d*a,U.rotation=u,s&&B.rgba8888ToColor(U.color,g),U):null;case o.Clipping:var F=t.readInt(!0),L=(y=t.readInt(!0),b=this.readVertices(t,y),g=s?t.readInt32():0,this.attachmentLoader.newClippingAttachment(i,h));return L?(L.endSlot=e.slots[F],L.worldVerticesLength=y<<1,L.vertices=b.vertices,L.bones=b.bones,s&&B.rgba8888ToColor(L.color,g),L):null}return null},t.prototype.readVertices=function(t,e){var i=this.scale,r=e<<1,n=new kr;if(!t.readBoolean())return n.vertices=this.readFloatArray(t,r,i),n;for(var s=new Array,o=new Array,a=0;a<e;a++){var h=t.readInt(!0);o.push(h);for(var l=0;l<h;l++)o.push(t.readInt(!0)),s.push(t.readFloat()*i),s.push(t.readFloat()*i),s.push(t.readFloat())}return n.vertices=Y.toFloatArray(s),n.bones=o,n},t.prototype.readFloatArray=function(t,e,i){var r=new Array(e);if(1==i)for(var n=0;n<e;n++)r[n]=t.readFloat();else for(n=0;n<e;n++)r[n]=t.readFloat()*i;return r},t.prototype.readShortArray=function(t){for(var e=t.readInt(!0),i=new Array(e),r=0;r<e;r++)i[r]=t.readShort();return i},t.prototype.readAnimation=function(t,e,i){t.readInt(!0);for(var r=new Array,n=this.scale,s=0,o=t.readInt(!0);s<o;s++)for(var a=t.readInt(!0),h=0,l=t.readInt(!0);h<l;h++){var u=t.readByte(),c=(F=t.readInt(!0))-1;switch(u){case Jr:for(var d=new Ki(F,a),p=0;p<F;p++)d.setFrame(p,t.readFloat(),t.readStringRef());r.push(d);break;case Qr:for(var f=t.readInt(!0),m=(d=new Yi(F,f,a),t.readFloat()),_=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,x=(p=0,0);d.setFrame(p,m,_,g,y,b),p!=c;p++){var T=t.readFloat(),S=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,A=t.readUnsignedByte()/255;switch(t.readByte()){case hn:d.setStepped(p);break;case ln:Xr(t,d,x++,p,0,m,T,_,S,1),Xr(t,d,x++,p,1,m,T,g,E,1),Xr(t,d,x++,p,2,m,T,y,w,1),Xr(t,d,x++,p,3,m,T,b,A,1)}m=T,_=S,g=E,y=w,b=A}r.push(d);break;case tn:for(f=t.readInt(!0),d=new Hi(F,f,a),m=t.readFloat(),_=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,p=0,x=0;d.setFrame(p,m,_,g,y),p!=c;p++){switch(T=t.readFloat(),S=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,t.readByte()){case hn:d.setStepped(p);break;case ln:Xr(t,d,x++,p,0,m,T,_,S,1),Xr(t,d,x++,p,1,m,T,g,E,1),Xr(t,d,x++,p,2,m,T,y,w,1)}m=T,_=S,g=E,y=w}r.push(d);break;case en:for(f=t.readInt(!0),d=new zi(F,f,a),m=t.readFloat(),_=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,b=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,p=0,x=0;d.setFrame(p,m,_,g,y,b,S,E,w),p!=c;p++){T=t.readFloat();var I=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255,M=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,R=t.readUnsignedByte()/255,D=t.readUnsignedByte()/255;switch(t.readByte()){case hn:d.setStepped(p);break;case ln:Xr(t,d,x++,p,0,m,T,_,I,1),Xr(t,d,x++,p,1,m,T,g,C,1),Xr(t,d,x++,p,2,m,T,y,O,1),Xr(t,d,x++,p,3,m,T,b,M,1),Xr(t,d,x++,p,4,m,T,S,P,1),Xr(t,d,x++,p,5,m,T,E,R,1),Xr(t,d,x++,p,6,m,T,w,D,1)}m=T,_=I,g=C,y=O,b=M,S=P,E=R,w=D}r.push(d);break;case rn:for(f=t.readInt(!0),d=new qi(F,f,a),m=t.readFloat(),_=t.readUnsignedByte()/255,g=t.readUnsignedByte()/255,y=t.readUnsignedByte()/255,S=t.readUnsignedByte()/255,E=t.readUnsignedByte()/255,w=t.readUnsignedByte()/255,p=0,x=0;d.setFrame(p,m,_,g,y,S,E,w),p!=c;p++){switch(T=t.readFloat(),I=t.readUnsignedByte()/255,C=t.readUnsignedByte()/255,O=t.readUnsignedByte()/255,P=t.readUnsignedByte()/255,R=t.readUnsignedByte()/255,D=t.readUnsignedByte()/255,t.readByte()){case hn:d.setStepped(p);break;case ln:Xr(t,d,x++,p,0,m,T,_,I,1),Xr(t,d,x++,p,1,m,T,g,C,1),Xr(t,d,x++,p,2,m,T,y,O,1),Xr(t,d,x++,p,3,m,T,S,P,1),Xr(t,d,x++,p,4,m,T,E,R,1),Xr(t,d,x++,p,5,m,T,w,D,1)}m=T,_=I,g=C,y=O,S=P,E=R,w=D}r.push(d);break;case nn:for(d=new Wi(F,t.readInt(!0),a),m=t.readFloat(),b=t.readUnsignedByte()/255,p=0,x=0;d.setFrame(p,m,b),p!=c;p++){switch(T=t.readFloat(),A=t.readUnsignedByte()/255,t.readByte()){case hn:d.setStepped(p);break;case ln:Xr(t,d,x++,p,0,m,T,b,A,1)}m=T,b=A}r.push(d)}}for(s=0,o=t.readInt(!0);s<o;s++){var N=t.readInt(!0);for(h=0,l=t.readInt(!0);h<l;h++){var U=t.readByte(),F=t.readInt(!0);switch(f=t.readInt(!0),U){case jr:r.push(Br(t,new Ni(F,f,N),1));break;case Vr:r.push(Gr(t,new Ui(F,f,N),n));break;case Yr:r.push(Br(t,new Fi(F,f,N),n));break;case Hr:r.push(Br(t,new Li(F,f,N),n));break;case Wr:r.push(Gr(t,new ki(F,f,N),1));break;case zr:r.push(Br(t,new Bi(F,f,N),1));break;case qr:r.push(Br(t,new Gi(F,f,N),1));break;case Kr:r.push(Gr(t,new Xi(F,f,N),1));break;case Zr:r.push(Br(t,new ji(F,f,N),1));break;case $r:r.push(Br(t,new Vi(F,f,N),1))}}}for(s=0,o=t.readInt(!0);s<o;s++){var L=t.readInt(!0),k=(c=(F=t.readInt(!0))-1,d=new Qi(F,t.readInt(!0),L),m=t.readFloat(),t.readFloat()),B=t.readFloat()*n;for(p=0,x=0;d.setFrame(p,m,k,B,t.readByte(),t.readBoolean(),t.readBoolean()),p!=c;p++){T=t.readFloat();var G=t.readFloat(),X=t.readFloat()*n;switch(t.readByte()){case hn:d.setStepped(p);break;case ln:Xr(t,d,x++,p,0,m,T,k,G,1),Xr(t,d,x++,p,1,m,T,B,X,n)}m=T,k=G,B=X}r.push(d)}for(s=0,o=t.readInt(!0);s<o;s++){L=t.readInt(!0),c=(F=t.readInt(!0))-1,d=new tr(F,t.readInt(!0),L),m=t.readFloat();var j=t.readFloat(),V=t.readFloat(),H=t.readFloat(),W=t.readFloat(),z=t.readFloat(),q=t.readFloat();for(p=0,x=0;d.setFrame(p,m,j,V,H,W,z,q),p!=c;p++){T=t.readFloat();var K=t.readFloat(),Z=t.readFloat(),$=t.readFloat(),J=t.readFloat(),Q=t.readFloat(),tt=t.readFloat();switch(t.readByte()){case hn:d.setStepped(p);break;case ln:Xr(t,d,x++,p,0,m,T,j,K,1),Xr(t,d,x++,p,1,m,T,V,Z,1),Xr(t,d,x++,p,2,m,T,H,$,1),Xr(t,d,x++,p,3,m,T,W,J,1),Xr(t,d,x++,p,4,m,T,z,Q,1),Xr(t,d,x++,p,5,m,T,q,tt,1)}m=T,j=K,V=Z,H=$,W=J,z=Q,q=tt}r.push(d)}for(s=0,o=t.readInt(!0);s<o;s++){L=t.readInt(!0);var et=i.pathConstraints[L];for(h=0,l=t.readInt(!0);h<l;h++)switch(t.readByte()){case sn:r.push(Br(t,new er(t.readInt(!0),t.readInt(!0),L),et.positionMode==v.Fixed?n:1));break;case on:r.push(Br(t,new ir(t.readInt(!0),t.readInt(!0),L),et.spacingMode==ar.Length||et.spacingMode==ar.Fixed?n:1));break;case an:for(d=new rr(t.readInt(!0),t.readInt(!0),L),m=t.readFloat(),j=t.readFloat(),V=t.readFloat(),H=t.readFloat(),p=0,x=0,c=d.getFrameCount()-1;d.setFrame(p,m,j,V,H),p!=c;p++){switch(T=t.readFloat(),K=t.readFloat(),Z=t.readFloat(),$=t.readFloat(),t.readByte()){case hn:d.setStepped(p);break;case ln:Xr(t,d,x++,p,0,m,T,j,K,1),Xr(t,d,x++,p,1,m,T,V,Z,1),Xr(t,d,x++,p,2,m,T,H,$,1)}m=T,j=K,V=Z,H=$}r.push(d)}}for(s=0,o=t.readInt(!0);s<o;s++){var it=i.skins[t.readInt(!0)];for(h=0,l=t.readInt(!0);h<l;h++){a=t.readInt(!0);for(var rt=0,nt=t.readInt(!0);rt<nt;rt++){var st=t.readStringRef(),ot=it.getAttachment(a,st),at=ot.bones,ht=ot.vertices,lt=at?ht.length/3*2:ht.length;for(c=(F=t.readInt(!0))-1,f=t.readInt(!0),d=new Zi(F,f,a,ot),m=t.readFloat(),p=0,x=0;;p++){var ut=void 0,ct=t.readInt(!0);if(0==ct)ut=at?Y.newFloatArray(lt):ht;else{ut=Y.newFloatArray(lt);var dt=t.readInt(!0);if(ct+=dt,1==n)for(var pt=dt;pt<ct;pt++)ut[pt]=t.readFloat();else for(pt=dt;pt<ct;pt++)ut[pt]=t.readFloat()*n;if(!at){pt=0;for(var ft=ut.length;pt<ft;pt++)ut[pt]+=ht[pt]}}if(d.setFrame(p,m,ut),p==c)break;switch(T=t.readFloat(),t.readByte()){case hn:d.setStepped(p);break;case ln:Xr(t,d,x++,p,0,m,T,0,1,1)}m=T}r.push(d)}}}var mt=t.readInt(!0);if(mt>0){d=new Ji(mt);var _t=i.slots.length;for(s=0;s<mt;s++){m=t.readFloat();var gt=t.readInt(!0),vt=Y.newArray(_t,0);for(h=_t-1;h>=0;h--)vt[h]=-1;var yt=Y.newArray(_t-gt,0),bt=0,xt=0;for(h=0;h<gt;h++){for(a=t.readInt(!0);bt!=a;)yt[xt++]=bt++;vt[bt+t.readInt(!0)]=bt++}for(;bt<_t;)yt[xt++]=bt++;for(h=_t-1;h>=0;h--)-1==vt[h]&&(vt[h]=yt[--xt]);d.setFrame(s,m,vt)}r.push(d)}var Tt=t.readInt(!0);if(Tt>0){for(d=new $i(Tt),s=0;s<Tt;s++){m=t.readFloat();var St=i.events[t.readInt(!0)],Et=new Tr(m,St);Et.intValue=t.readInt(!1),Et.floatValue=t.readFloat(),Et.stringValue=t.readBoolean()?t.readString():St.stringValue,Et.data.audioPath&&(Et.volume=t.readFloat(),Et.balance=t.readFloat()),d.setFrame(s,Et)}r.push(d)}var wt=0;for(s=0,o=r.length;s<o;s++)wt=Math.max(wt,r[s].getDuration());return new Oi(e,r,wt)},t.BlendModeValues=[l.T$.NORMAL,l.T$.ADD,l.T$.MULTIPLY,l.T$.SCREEN],t}(),Lr=function(t,e,i,r,n){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=r,this.inheritDeform=n},kr=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.bones=t,this.vertices=e};function Br(t,e,i){for(var r=t.readFloat(),n=t.readFloat()*i,s=0,o=0,a=e.getFrameCount()-1;e.setFrame(s,r,n),s!=a;s++){var h=t.readFloat(),l=t.readFloat()*i;switch(t.readByte()){case hn:e.setStepped(s);break;case ln:Xr(t,e,o++,s,0,r,h,n,l,i)}r=h,n=l}return e}function Gr(t,e,i){for(var r=t.readFloat(),n=t.readFloat()*i,s=t.readFloat()*i,o=0,a=0,h=e.getFrameCount()-1;e.setFrame(o,r,n,s),o!=h;o++){var l=t.readFloat(),u=t.readFloat()*i,c=t.readFloat()*i;switch(t.readByte()){case hn:e.setStepped(o);break;case ln:Xr(t,e,a++,o,0,r,l,n,u,i),Xr(t,e,a++,o,1,r,l,s,c,i)}r=l,n=u,s=c}return e}function Xr(t,e,i,r,n,s,o,a,h,l){e.setBezier(i,r,n,s,a,t.readFloat(),t.readFloat()*l,t.readFloat(),t.readFloat()*l,o,h)}var jr=0,Vr=1,Yr=2,Hr=3,Wr=4,zr=5,qr=6,Kr=7,Zr=8,$r=9,Jr=0,Qr=1,tn=2,en=3,rn=4,nn=5,sn=0,on=1,an=2,hn=1,ln=2,un=function(){function t(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new W((function(){return Y.newFloatArray(16)}))}return t.prototype.update=function(t,e){if(null==t)throw new Error("skeleton cannot be null.");var i=this.boundingBoxes,r=this.polygons,n=this.polygonPool,s=t.slots,o=s.length;i.length=0,n.freeAll(r),r.length=0;for(var a=0;a<o;a++){var h=s[a];if(h.bone.active){var l=h.getAttachment();if(l instanceof xi){var u=l;i.push(u);var c=n.obtain();c.length!=u.worldVerticesLength&&(c=Y.newFloatArray(u.worldVerticesLength)),r.push(c),u.computeWorldVertices(h,0,u.worldVerticesLength,c,0,2)}}}e?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},t.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=this.polygons,s=0,o=n.length;s<o;s++)for(var a=n[s],h=a,l=0,u=a.length;l<u;l+=2){var c=h[l],d=h[l+1];t=Math.min(t,c),e=Math.min(e,d),i=Math.max(i,c),r=Math.max(r,d)}this.minX=t,this.minY=e,this.maxX=i,this.maxY=r},t.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},t.prototype.aabbIntersectsSegment=function(t,e,i,r){var n=this.minX,s=this.minY,o=this.maxX,a=this.maxY;if(t<=n&&i<=n||e<=s&&r<=s||t>=o&&i>=o||e>=a&&r>=a)return!1;var h=(r-e)/(i-t),l=h*(n-t)+e;if(l>s&&l<a)return!0;if((l=h*(o-t)+e)>s&&l<a)return!0;var u=(s-e)/h+t;return u>n&&u<o||(u=(a-e)/h+t)>n&&u<o},t.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},t.prototype.containsPoint=function(t,e){for(var i=this.polygons,r=0,n=i.length;r<n;r++)if(this.containsPointPolygon(i[r],t,e))return this.boundingBoxes[r];return null},t.prototype.containsPointPolygon=function(t,e,i){for(var r=t,n=t.length,s=n-2,o=!1,a=0;a<n;a+=2){var h=r[a+1],l=r[s+1];if(h<i&&l>=i||l<i&&h>=i){var u=r[a];u+(i-h)/(l-h)*(r[s]-u)<e&&(o=!o)}s=a}return o},t.prototype.intersectsSegment=function(t,e,i,r){for(var n=this.polygons,s=0,o=n.length;s<o;s++)if(this.intersectsSegmentPolygon(n[s],t,e,i,r))return this.boundingBoxes[s];return null},t.prototype.intersectsSegmentPolygon=function(t,e,i,r,n){for(var s=t,o=t.length,a=e-r,h=i-n,l=e*n-i*r,u=s[o-2],c=s[o-1],d=0;d<o;d+=2){var p=s[d],f=s[d+1],m=u*f-c*p,_=u-p,g=c-f,v=a*g-h*_,y=(l*_-a*m)/v;if((y>=u&&y<=p||y>=p&&y<=u)&&(y>=e&&y<=r||y>=r&&y<=e)){var b=(l*g-h*m)/v;if((b>=c&&b<=f||b>=f&&b<=c)&&(b>=i&&b<=n||b>=n&&b<=i))return!0}u=p,c=f}return!1},t.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},t.prototype.getWidth=function(){return this.maxX-this.minX},t.prototype.getHeight=function(){return this.maxY-this.minY},t}(),cn=function(){function t(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return t.prototype.readSkeletonData=function(e){var i=this.scale,r=new Pr,n="string"==typeof e?JSON.parse(e):e,s=n.skeleton;if(s){if(r.hash=s.hash,r.version=s.spine,"4.0"!==r.version.substr(0,3)){var o="Spine 4.0 loader cant load version "+s.spine+". Please configure your pixi-spine bundle";console.error(o)}r.x=s.x,r.y=s.y,r.width=s.width,r.height=s.height,r.fps=s.fps,r.imagesPath=s.images}if(n.bones)for(var a=0;a<n.bones.length;a++){var h=n.bones[a],l=null,u=_n(h,"parent",null);if(null!=u&&null==(l=r.findBone(u)))throw new Error("Parent bone not found: "+u);(m=new br(r.bones.length,h.name,l)).length=_n(h,"length",0)*i,m.x=_n(h,"x",0)*i,m.y=_n(h,"y",0)*i,m.rotation=_n(h,"rotation",0),m.scaleX=_n(h,"scaleX",1),m.scaleY=_n(h,"scaleY",1),m.shearX=_n(h,"shearX",0),m.shearY=_n(h,"shearY",0),m.transformMode=Y.enumValue(b,_n(h,"transform","Normal")),m.skinRequired=_n(h,"skin",!1),(f=_n(h,"color",null))&&m.color.setFromString(f),r.bones.push(m)}if(n.slots)for(a=0;a<n.slots.length;a++){var c=(C=n.slots[a]).name,d=C.bone,p=r.findBone(d);if(null==p)throw new Error("Slot bone not found: "+d);var f,m=new Rr(r.slots.length,c,p);(f=_n(C,"color",null))&&m.color.setFromString(f);var _=_n(C,"dark",null);_&&(m.darkColor=B.fromString(_)),m.attachmentName=_n(C,"attachment",null),m.blendMode=t.blendModeFromString(_n(C,"blend","normal")),r.slots.push(m)}if(n.ik)for(a=0;a<n.ik.length;a++){var g=n.ik[a];(m=new wr(g.name)).order=_n(g,"order",0),m.skinRequired=_n(g,"skin",!1);for(var x=0;x<g.bones.length;x++){if(d=g.bones[x],null==(w=r.findBone(d)))throw new Error("IK bone not found: "+d);m.bones.push(w)}m.target=r.findBone(g.target),m.mix=_n(g,"mix",1),m.softness=_n(g,"softness",0)*i,m.bendDirection=_n(g,"bendPositive",!0)?1:-1,m.compress=_n(g,"compress",!1),m.stretch=_n(g,"stretch",!1),m.uniform=_n(g,"uniform",!1),r.ikConstraints.push(m)}if(n.transform)for(a=0;a<n.transform.length;a++){for(g=n.transform[a],(m=new Dr(g.name)).order=_n(g,"order",0),m.skinRequired=_n(g,"skin",!1),x=0;x<g.bones.length;x++){if(d=g.bones[x],null==(w=r.findBone(d)))throw new Error("Transform constraint bone not found: "+d);m.bones.push(w)}var T=g.target;if(m.target=r.findBone(T),null==m.target)throw new Error("Transform constraint target bone not found: "+T);m.local=_n(g,"local",!1),m.relative=_n(g,"relative",!1),m.offsetRotation=_n(g,"rotation",0),m.offsetX=_n(g,"x",0)*i,m.offsetY=_n(g,"y",0)*i,m.offsetScaleX=_n(g,"scaleX",0),m.offsetScaleY=_n(g,"scaleY",0),m.offsetShearY=_n(g,"shearY",0),m.mixRotate=_n(g,"mixRotate",1),m.mixX=_n(g,"mixX",1),m.mixY=_n(g,"mixY",m.mixX),m.mixScaleX=_n(g,"mixScaleX",1),m.mixScaleY=_n(g,"mixScaleY",m.mixScaleX),m.mixShearY=_n(g,"mixShearY",1),r.transformConstraints.push(m)}if(n.path)for(a=0;a<n.path.length;a++){for(g=n.path[a],(m=new Ar(g.name)).order=_n(g,"order",0),m.skinRequired=_n(g,"skin",!1),x=0;x<g.bones.length;x++){if(d=g.bones[x],null==(w=r.findBone(d)))throw new Error("Transform constraint bone not found: "+d);m.bones.push(w)}if(T=g.target,m.target=r.findSlot(T),null==m.target)throw new Error("Path target slot not found: "+T);m.positionMode=Y.enumValue(v,_n(g,"positionMode","Percent")),m.spacingMode=Y.enumValue(ar,_n(g,"spacingMode","Length")),m.rotateMode=Y.enumValue(y,_n(g,"rotateMode","Tangent")),m.offsetRotation=_n(g,"rotation",0),m.position=_n(g,"position",0),m.positionMode==v.Fixed&&(m.position*=i),m.spacing=_n(g,"spacing",0),m.spacingMode!=ar.Length&&m.spacingMode!=ar.Fixed||(m.spacing*=i),m.mixRotate=_n(g,"mixRotate",1),m.mixX=_n(g,"mixX",1),m.mixY=_n(g,"mixY",m.mixX),r.pathConstraints.push(m)}if(n.skins)for(a=0;a<n.skins.length;a++){var S=n.skins[a],E=new Ur(S.name);if(S.bones)for(x=0;x<S.bones.length;x++){var w;if(null==(w=r.findBone(S.bones[x])))throw new Error("Skin bone not found: "+S.bones[a]);E.bones.push(w)}if(S.ik)for(x=0;x<S.ik.length;x++){if(null==(A=r.findIkConstraint(S.ik[x])))throw new Error("Skin IK constraint not found: "+S.ik[a]);E.constraints.push(A)}if(S.transform)for(x=0;x<S.transform.length;x++){if(null==(A=r.findTransformConstraint(S.transform[x])))throw new Error("Skin transform constraint not found: "+S.transform[a]);E.constraints.push(A)}if(S.path)for(x=0;x<S.path.length;x++){var A;if(null==(A=r.findPathConstraint(S.path[x])))throw new Error("Skin path constraint not found: "+S.path[a]);E.constraints.push(A)}for(var c in S.attachments){var I=r.findSlot(c);if(null==I)throw new Error("Slot not found: "+c);var C=S.attachments[c];for(var O in C){var M=this.readAttachment(C[O],E,I.index,O,r);M&&E.setAttachment(I.index,O,M)}}r.skins.push(E),"default"==E.name&&(r.defaultSkin=E)}a=0;for(var P=this.linkedMeshes.length;a<P;a++){var R=this.linkedMeshes[a],D=(E=R.skin?r.findSkin(R.skin):r.defaultSkin).getAttachment(R.slotIndex,R.parent);R.mesh.deformAttachment=R.inheritDeform?D:R.mesh,R.mesh.setParentMesh(D)}if(this.linkedMeshes.length=0,n.events)for(var N in n.events){var U=n.events[N];(m=new Sr(N)).intValue=_n(U,"int",0),m.floatValue=_n(U,"float",0),m.stringValue=_n(U,"string",""),m.audioPath=_n(U,"audio",null),m.audioPath&&(m.volume=_n(U,"volume",1),m.balance=_n(U,"balance",0)),r.events.push(m)}if(n.animations)for(var F in n.animations){var L=n.animations[F];this.readAnimation(L,F,r)}return r},t.prototype.readAttachment=function(t,e,i,r,n){var s=this.scale;switch(r=_n(t,"name",r),_n(t,"type","region")){case"region":var o=_n(t,"path",r),a=this.attachmentLoader.newRegionAttachment(e,r,o);return a?(a.path=o,a.x=_n(t,"x",0)*s,a.y=_n(t,"y",0)*s,a.scaleX=_n(t,"scaleX",1),a.scaleY=_n(t,"scaleY",1),a.rotation=_n(t,"rotation",0),a.width=t.width*s,a.height=t.height*s,(g=_n(t,"color",null))&&a.color.setFromString(g),a):null;case"boundingbox":var h=this.attachmentLoader.newBoundingBoxAttachment(e,r);return h?(this.readVertices(t,h,t.vertexCount<<1),(g=_n(t,"color",null))&&h.color.setFromString(g),h):null;case"mesh":case"linkedmesh":o=_n(t,"path",r);var l=this.attachmentLoader.newMeshAttachment(e,r,o);if(!l)return null;l.path=o,(g=_n(t,"color",null))&&l.color.setFromString(g),l.width=_n(t,"width",0)*s,l.height=_n(t,"height",0)*s;var u=_n(t,"parent",null);if(u)return this.linkedMeshes.push(new dn(l,_n(t,"skin",null),i,u,_n(t,"deform",!0))),l;var c=t.uvs;return this.readVertices(t,l,c.length),l.triangles=t.triangles,l.regionUVs=new Float32Array(c),l.edges=_n(t,"edges",null),l.hullLength=2*_n(t,"hull",0),l;case"path":if(!(o=this.attachmentLoader.newPathAttachment(e,r)))return null;o.closed=_n(t,"closed",!1),o.constantSpeed=_n(t,"constantSpeed",!0);var d=t.vertexCount;this.readVertices(t,o,d<<1);for(var p=Y.newArray(d/3,0),f=0;f<t.lengths.length;f++)p[f]=t.lengths[f]*s;return o.lengths=p,(g=_n(t,"color",null))&&o.color.setFromString(g),o;case"point":var m=this.attachmentLoader.newPointAttachment(e,r);return m?(m.x=_n(t,"x",0)*s,m.y=_n(t,"y",0)*s,m.rotation=_n(t,"rotation",0),(g=_n(t,"color",null))&&m.color.setFromString(g),m):null;case"clipping":var _=this.attachmentLoader.newClippingAttachment(e,r);if(!_)return null;var g,v=_n(t,"end",null);if(null!=v){var y=n.findSlot(v);if(null==y)throw new Error("Clipping end slot not found: "+v);_.endSlot=y}return d=t.vertexCount,this.readVertices(t,_,d<<1),(g=_n(t,"color",null))&&_.color.setFromString(g),_}return null},t.prototype.readVertices=function(t,e,i){var r=this.scale;e.worldVerticesLength=i;var n=t.vertices;if(i!=n.length){var s=new Array,o=new Array;for(u=0,c=n.length;u<c;){var a=n[u++];o.push(a);for(var h=u+4*a;u<h;u+=4)o.push(n[u]),s.push(n[u+1]*r),s.push(n[u+2]*r),s.push(n[u+3])}e.bones=o,e.vertices=Y.toFloatArray(s)}else{var l=Y.toFloatArray(n);if(1!=r)for(var u=0,c=n.length;u<c;u++)l[u]*=r;e.vertices=l}},t.prototype.readAnimation=function(t,e,i){var r=this.scale,n=new Array;if(t.slots)for(var s in t.slots){var o=t.slots[s];if(-1==(mt=i.findSlotIndex(s)))throw new Error("Slot not found: "+s);for(var a in o)if(z=o[a])if("attachment"==a){for(var h=new Ki(z.length,mt),l=0;l<z.length;l++){var u=z[l];h.setFrame(l,_n(u,"time",0),u.name)}n.push(h)}else if("rgba"==a){h=new Yi(z.length,z.length<<2,mt);for(var c=_n(u=z[0],"time",0),d=B.fromString(u.color),p=(l=0,0);;l++){if(h.setFrame(l,c,d.r,d.g,d.b,d.a),!(Q=z[l+1])){h.shrink(p);break}var f=_n(Q,"time",0),m=B.fromString(Q.color);(tt=u.curve)&&(p=mn(tt,h,p,l,0,c,f,d.r,m.r,1),p=mn(tt,h,p,l,1,c,f,d.g,m.g,1),p=mn(tt,h,p,l,2,c,f,d.b,m.b,1),p=mn(tt,h,p,l,3,c,f,d.a,m.a,1)),c=f,d=m,u=Q}n.push(h)}else if("rgb"==a){for(h=new Hi(z.length,3*z.length,mt),c=_n(u=z[0],"time",0),d=B.fromString(u.color),l=0,p=0;;l++){if(h.setFrame(l,c,d.r,d.g,d.b),!(Q=z[l+1])){h.shrink(p);break}f=_n(Q,"time",0),m=B.fromString(Q.color),(tt=u.curve)&&(p=mn(tt,h,p,l,0,c,f,d.r,m.r,1),p=mn(tt,h,p,l,1,c,f,d.g,m.g,1),p=mn(tt,h,p,l,2,c,f,d.b,m.b,1)),c=f,d=m,u=Q}n.push(h)}else if("alpha"==a)n.push(pn(z,new Wi(z.length,z.length,mt),0,1));else if("rgba2"==a){h=new zi(z.length,7*z.length,mt),c=_n(u=z[0],"time",0),d=B.fromString(u.light);var _=B.fromString(u.dark);for(l=0,p=0;;l++){if(h.setFrame(l,c,d.r,d.g,d.b,d.a,_.r,_.g,_.b),!(Q=z[l+1])){h.shrink(p);break}f=_n(Q,"time",0),m=B.fromString(Q.light);var g=B.fromString(Q.dark);(tt=u.curve)&&(p=mn(tt,h,p,l,0,c,f,d.r,m.r,1),p=mn(tt,h,p,l,1,c,f,d.g,m.g,1),p=mn(tt,h,p,l,2,c,f,d.b,m.b,1),p=mn(tt,h,p,l,3,c,f,d.a,m.a,1),p=mn(tt,h,p,l,4,c,f,_.r,g.r,1),p=mn(tt,h,p,l,5,c,f,_.g,g.g,1),p=mn(tt,h,p,l,6,c,f,_.b,g.b,1)),c=f,d=m,_=g,u=Q}n.push(h)}else{if("rgb2"!=a)throw new Error("Invalid timeline type for a slot: "+a+" ("+s+")");for(h=new qi(z.length,6*z.length,mt),c=_n(u=z[0],"time",0),d=B.fromString(u.light),_=B.fromString(u.dark),l=0,p=0;;l++){if(h.setFrame(l,c,d.r,d.g,d.b,_.r,_.g,_.b),!(Q=z[l+1])){h.shrink(p);break}f=_n(Q,"time",0),m=B.fromString(Q.light),g=B.fromString(Q.dark),(tt=u.curve)&&(p=mn(tt,h,p,l,0,c,f,d.r,m.r,1),p=mn(tt,h,p,l,1,c,f,d.g,m.g,1),p=mn(tt,h,p,l,2,c,f,d.b,m.b,1),p=mn(tt,h,p,l,3,c,f,_.r,g.r,1),p=mn(tt,h,p,l,4,c,f,_.g,g.g,1),p=mn(tt,h,p,l,5,c,f,_.b,g.b,1)),c=f,d=m,_=g,u=Q}n.push(h)}}if(t.bones)for(var y in t.bones){var b=t.bones[y],x=i.findBoneIndex(y);if(-1==x)throw new Error("Bone not found: "+y);for(var a in b)0!=(z=b[a]).length&&("rotate"===a?n.push(pn(z,new Ni(z.length,z.length,x),0,1)):"translate"===a?(h=new Ui(z.length,z.length<<1,x),n.push(fn(z,h,"x","y",0,r))):"translatex"===a?(h=new Fi(z.length,z.length,x),n.push(pn(z,h,0,r))):"translatey"===a?(h=new Li(z.length,z.length,x),n.push(pn(z,h,0,r))):"scale"===a?(h=new ki(z.length,z.length<<1,x),n.push(fn(z,h,"x","y",1,1))):"scalex"===a?(h=new Bi(z.length,z.length,x),n.push(pn(z,h,1,1))):"scaley"===a?(h=new Gi(z.length,z.length,x),n.push(pn(z,h,1,1))):"shear"===a?(h=new Xi(z.length,z.length<<1,x),n.push(fn(z,h,"x","y",0,1))):"shearx"===a?(h=new ji(z.length,z.length,x),n.push(pn(z,h,0,1))):"sheary"===a&&(h=new Vi(z.length,z.length,x),n.push(pn(z,h,0,1))))}if(t.ik)for(var T in t.ik)if(u=(j=t.ik[T])[0]){var S=i.findIkConstraint(T),E=i.ikConstraints.indexOf(S),w=(h=new Qi(j.length,j.length<<1,E),c=_n(u,"time",0),_n(u,"mix",1)),A=_n(u,"softness",0)*r;for(l=0,p=0;;l++){if(h.setFrame(l,c,w,A,_n(u,"bendPositive",!0)?1:-1,_n(u,"compress",!1),_n(u,"stretch",!1)),!(Q=j[l+1])){h.shrink(p);break}f=_n(Q,"time",0);var I=_n(Q,"mix",1),C=_n(Q,"softness",0)*r;(tt=u.curve)&&(p=mn(tt,h,p,l,0,c,f,w,I,1),p=mn(tt,h,p,l,1,c,f,A,C,r)),c=f,w=I,A=C,u=Q}n.push(h)}if(t.transform)for(var T in t.transform)if(u=(z=t.transform[T])[0]){S=i.findTransformConstraint(T),E=i.transformConstraints.indexOf(S),h=new tr(z.length,z.length<<2,E),c=_n(u,"time",0);var O=_n(u,"mixRotate",1),M=_n(u,"mixX",1),P=_n(u,"mixY",M),R=_n(u,"mixScaleX",1),D=_n(u,"mixScaleY",R),N=_n(u,"mixShearY",1);for(l=0,p=0;;l++){if(h.setFrame(l,c,O,M,P,R,D,N),!(Q=z[l+1])){h.shrink(p);break}f=_n(Q,"time",0);var U=_n(Q,"mixRotate",1),F=_n(Q,"mixX",1),L=_n(Q,"mixY",F),k=_n(Q,"mixScaleX",1),G=_n(Q,"mixScaleY",k),X=_n(Q,"mixShearY",1);(tt=u.curve)&&(p=mn(tt,h,p,l,0,c,f,O,U,1),p=mn(tt,h,p,l,1,c,f,M,F,1),p=mn(tt,h,p,l,2,c,f,P,L,1),p=mn(tt,h,p,l,3,c,f,R,k,1),p=mn(tt,h,p,l,4,c,f,D,G,1),p=mn(tt,h,p,l,5,c,f,N,X,1)),c=f,O=U,M=F,P=L,R=k,D=G,R=k,u=Q}n.push(h)}if(t.path)for(var T in t.path){var j=t.path[T];if(-1==(E=i.findPathConstraintIndex(T)))throw new Error("Path constraint not found: "+T);for(var a in S=i.pathConstraints[E],j)if(u=(z=j[a])[0])if("position"===a)h=new er(z.length,z.length,E),n.push(pn(z,h,0,S.positionMode==v.Fixed?r:1));else if("spacing"===a)h=new ir(z.length,z.length,E),n.push(pn(z,h,0,S.spacingMode==ar.Length||S.spacingMode==ar.Fixed?r:1));else if("mix"===a){for(h=new rr(z.length,3*z.length,E),c=_n(u,"time",0),O=_n(u,"mixRotate",1),M=_n(u,"mixX",1),P=_n(u,"mixY",M),l=0,p=0;;l++){if(h.setFrame(l,c,O,M,P),!(Q=z[l+1])){h.shrink(p);break}f=_n(Q,"time",0),U=_n(Q,"mixRotate",1),F=_n(Q,"mixX",1),L=_n(Q,"mixY",F),(tt=u.curve)&&(p=mn(tt,h,p,l,0,c,f,O,U,1),p=mn(tt,h,p,l,1,c,f,M,F,1),p=mn(tt,h,p,l,2,c,f,P,L,1)),c=f,O=U,M=F,P=L,u=Q}n.push(h)}}if(t.deform)for(var V in t.deform){var H=t.deform[V],W=i.findSkin(V);if(null!=W)for(var s in H){if(o=H[s],-1==(mt=i.findSlotIndex(s)))throw new Error("Slot not found: "+o.name);for(var a in o){var z;if(u=(z=o[a])[0]){var q=W.getAttachment(mt,a);if(null==q)throw new Error("Deform attachment not found: "+z.name);var K=null!=q.bones,$=q.vertices,J=K?$.length/3*2:$.length;for(h=new Zi(z.length,z.length,mt,q),c=_n(u,"time",0),l=0,p=0;;l++){var Q,tt,et=void 0,it=_n(u,"vertices",null);if(it){et=Y.newFloatArray(J);var rt=_n(u,"offset",0);if(Y.arrayCopy(it,0,et,rt,it.length),1!=r)for(var nt=(st=rt)+it.length;st<nt;st++)et[st]*=r;if(!K)for(var st=0;st<J;st++)et[st]+=$[st]}else et=K?Y.newFloatArray(J):$;if(h.setFrame(l,c,et),!(Q=z[l+1])){h.shrink(p);break}f=_n(Q,"time",0),(tt=u.curve)&&(p=mn(tt,h,p,l,0,c,f,0,1,1)),c=f,u=Q}n.push(h)}}}else if(Z.FAIL_ON_NON_EXISTING_SKIN)throw new Error("Skin not found: "+V)}if(t.drawOrder){h=new Ji(t.drawOrder.length);var ot=i.slots.length;for(l=0,st=0;st<t.drawOrder.length;st++,l++){var at=t.drawOrder[st],ht=null,lt=_n(at,"offsets",null);if(lt){ht=Y.newArray(ot,-1);for(var ut=Y.newArray(ot-lt.length,0),ct=0,dt=0,pt=0;pt<lt.length;pt++){for(var ft=lt[pt],mt=i.findSlotIndex(ft.slot);ct!=mt;)ut[dt++]=ct++;ht[ct+ft.offset]=ct++}for(;ct<ot;)ut[dt++]=ct++;for(pt=ot-1;pt>=0;pt--)-1==ht[pt]&&(ht[pt]=ut[--dt])}h.setFrame(l,_n(at,"time",0),ht)}n.push(h)}if(t.events){for(h=new $i(t.events.length),l=0,st=0;st<t.events.length;st++,l++){var _t=t.events[st],gt=i.findEvent(_t.name),vt=new Tr(Y.toSinglePrecision(_n(_t,"time",0)),gt);vt.intValue=_n(_t,"int",gt.intValue),vt.floatValue=_n(_t,"float",gt.floatValue),vt.stringValue=_n(_t,"string",gt.stringValue),vt.data.audioPath&&(vt.volume=_n(_t,"volume",1),vt.balance=_n(_t,"balance",0)),h.setFrame(l,vt)}n.push(h)}var yt=0;for(st=0,nt=n.length;st<nt;st++)yt=Math.max(yt,n[st].getDuration());if(isNaN(yt))throw new Error("Error while parsing animation, duration is NaN");i.animations.push(new Oi(e,n,yt))},t.blendModeFromString=function(t){if("normal"==(t=t.toLowerCase()))return l.T$.NORMAL;if("additive"==t)return l.T$.ADD;if("multiply"==t)return l.T$.MULTIPLY;if("screen"==t)return l.T$.SCREEN;throw new Error("Unknown blend mode: "+t)},t}(),dn=function(t,e,i,r,n){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=r,this.inheritDeform=n};function pn(t,e,i,r){for(var n=t[0],s=_n(n,"time",0),o=_n(n,"value",i)*r,a=0,h=0;;h++){e.setFrame(h,s,o);var l=t[h+1];if(!l)return e.shrink(a),e;var u=_n(l,"time",0),c=_n(l,"value",i)*r;n.curve&&(a=mn(n.curve,e,a,h,0,s,u,o,c,r)),s=u,o=c,n=l}}function fn(t,e,i,r,n,s){for(var o=t[0],a=_n(o,"time",0),h=_n(o,i,n)*s,l=_n(o,r,n)*s,u=0,c=0;;c++){e.setFrame(c,a,h,l);var d=t[c+1];if(!d)return e.shrink(u),e;var p=_n(d,"time",0),f=_n(d,i,n)*s,m=_n(d,r,n)*s,_=o.curve;_&&(u=mn(_,e,u,c,0,a,p,h,f,s),u=mn(_,e,u,c,1,a,p,l,m,s)),a=p,h=f,l=m,o=d}}function mn(t,e,i,r,n,s,o,a,h,l){if("stepped"==t)return e.setStepped(r),i;var u=n<<2,c=t[u],d=t[u+1]*l,p=t[u+2],f=t[u+3]*l;return e.setBezier(i,r,n,s,a,c,d,p,f,o,h),i+1}function _n(t,e,i){return void 0!==t[e]?t[e]:i}var gn,vn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gi(e,t),e.prototype.createSkeleton=function(t){this.skeleton=new Mr(t),this.skeleton.updateWorldTransform(),this.stateData=new gr(t),this.state=new nr(this.stateData)},e}(tt),yn=function(t,e){return(yn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])})(t,e)};function bn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function i(){this.constructor=t}yn(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function xn(t){var e=t.substr(0,3),i=Math.floor(10*+e+.001);return"3.7"===e?gn.VER37:"3.8"===e?gn.VER38:"4.0"===e?gn.VER40:i<gn.VER37?gn.VER37:gn.UNKNOWN}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VER37=37]="VER37",t[t.VER38=38]="VER38",t[t.VER40=40]="VER40"}(gn||(gn={}));var Tn=function(){function t(){this.scale=1}return t.prototype.readSkeletonData=function(t,e){var i=new x(e);i.readString();var r=i.readString(),n=xn(r),s=null;if(n===gn.VER38&&(s=new se(new Xt(t))),(i=new x(e)).readInt32(),i.readInt32(),(n=xn(r=i.readString()))===gn.VER40&&(s=new Fr(new vr(t))),!s){var o="Unsupported version of spine model "+r+", please update pixi-spine";console.error(o)}return s.scale=this.scale,s.readSkeletonData(e)},t}(),Sn=function(){function t(){this.scale=1}return t.prototype.readSkeletonData=function(t,e){var i=e.skeleton.spine,r=xn(i),n=null;if(r===gn.VER37&&(n=new pi(new Ze(t))),r===gn.VER38&&(n=new le(new Xt(t))),r===gn.VER40&&(n=new cn(new vr(t))),!n){var s="Unsupported version of spine model "+i+", please update pixi-spine";console.error(s)}return n.scale=this.scale,n.readSkeletonData(e)},t}(),En=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bn(e,t),e.prototype.createBinaryParser=function(){return new Tn},e.prototype.createJsonParser=function(){return new Sn},e.prototype.parseData=function(t,e,i,r){var n=e;t.spineData=n.readSkeletonData(i,r),t.spineAtlas=i},e.registerLoaderPlugin=function(){a.aN.registerPlugin(e)},e.use=(new e).genMiddleware().use,e}(et),wn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return bn(e,t),e.prototype.createSkeleton=function(t){var e=xn(t.version),i=null;if(e===gn.VER37&&(i=n),e===gn.VER38&&(i=r),e===gn.VER40&&(i=s),!i){var o="Cant detect version of spine model "+t.version;console.error(o)}this.skeleton=new i.Skeleton(t),this.skeleton.updateWorldTransform(),this.stateData=new i.AnimationStateData(t),this.state=new i.AnimationState(this.stateData)},e}(tt);En.registerLoaderPlugin()},5697:(t,e,i)=>{t=i.nmd(t),function(t){const e=t.PIXI;class i extends e.Container{constructor(t){super(),this._input_style=Object.assign({position:"absolute",background:"none",border:"none",outline:"none",transformOrigin:"0 0",lineHeight:"1"},t.input),t.box?this._box_generator="function"==typeof t.box?t.box:new r(t.box):this._box_generator=null,this._input_style.hasOwnProperty("multiline")?(this._multiline=!!this._input_style.multiline,delete this._input_style.multiline):this._multiline=!1,this._box_cache={},this._previous={},this._dom_added=!1,this._dom_visible=!0,this._placeholder="",this._placeholderColor=11119017,this._selection=[0,0],this._restrict_value="",this._createDOMInput(),this.substituteText=!0,this._setState("DEFAULT"),this._addListeners()}get substituteText(){return this._substituted}set substituteText(t){this._substituted!=t&&(this._substituted=t,t?(this._createSurrogate(),this._dom_visible=!1):(this._destroySurrogate(),this._dom_visible=!0),this.placeholder=this._placeholder,this._update())}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this._substituted?(this._updateSurrogate(),this._dom_input.placeholder=""):this._dom_input.placeholder=t}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._dom_input.disabled=t,this._setState(t?"DISABLED":"DEFAULT")}get maxLength(){return this._max_length}set maxLength(t){this._max_length=t,this._dom_input.setAttribute("maxlength",t)}get restrict(){return this._restrict_regex}set restrict(t){t instanceof RegExp?("^"!==(t=t.toString().slice(1,-1)).charAt(0)&&(t="^"+t),"$"!==t.charAt(t.length-1)&&(t+="$"),t=new RegExp(t)):t=new RegExp("^["+t+"]*$"),this._restrict_regex=t}get text(){return this._dom_input.value}set text(t){this._dom_input.value=t,this._substituted&&this._updateSurrogate()}get htmlInput(){return this._dom_input}focus(){this._substituted&&!this.dom_visible&&this._setDOMInputVisible(!0),this._dom_input.focus()}blur(){this._dom_input.blur()}select(){this.focus(),this._dom_input.select()}setInputStyle(t,e){this._input_style[t]=e,this._dom_input.style[t]=e,!this._substituted||"fontFamily"!==t&&"fontSize"!==t||this._updateFontMetrics(),this._last_renderer&&this._update()}destroy(t){this._destroyBoxCache(),super.destroy(t)}_createDOMInput(){this._multiline?(this._dom_input=document.createElement("textarea"),this._dom_input.style.resize="none"):(this._dom_input=document.createElement("input"),this._dom_input.type="text");for(let t in this._input_style)this._dom_input.style[t]=this._input_style[t]}_addListeners(){this.on("added",this._onAdded.bind(this)),this.on("removed",this._onRemoved.bind(this)),this._dom_input.addEventListener("keydown",this._onInputKeyDown.bind(this)),this._dom_input.addEventListener("input",this._onInputInput.bind(this)),this._dom_input.addEventListener("keyup",this._onInputKeyUp.bind(this)),this._dom_input.addEventListener("focus",this._onFocused.bind(this)),this._dom_input.addEventListener("blur",this._onBlurred.bind(this))}_onInputKeyDown(t){this._selection=[this._dom_input.selectionStart,this._dom_input.selectionEnd],this.emit("keydown",t.keyCode)}_onInputInput(t){this._restrict_regex&&this._applyRestriction(),this._substituted&&this._updateSubstitution(),this.emit("input",this.text)}_onInputKeyUp(t){this.emit("keyup",t.keyCode)}_onFocused(){this._setState("FOCUSED"),this.emit("focus")}_onBlurred(){this._setState("DEFAULT"),this.emit("blur")}_onAdded(){document.body.appendChild(this._dom_input),this._dom_input.style.display="none",this._dom_added=!0}_onRemoved(){document.body.removeChild(this._dom_input),this._dom_added=!1}_setState(t){this.state=t,this._updateBox(),this._substituted&&this._updateSubstitution()}renderWebGL(t){super.renderWebGL(t),this._renderInternal(t)}renderCanvas(t){super.renderCanvas(t),this._renderInternal(t)}render(t){super.render(t),this._renderInternal(t)}_renderInternal(t){this._resolution=t.resolution,this._last_renderer=t,this._canvas_bounds=this._getCanvasBounds(),this._needsUpdate()&&this._update()}_update(){this._updateDOMInput(),this._substituted&&this._updateSurrogate(),this._updateBox()}_updateBox(){this._box_generator&&(this._needsNewBoxCache()&&this._buildBoxCache(),this.state==this._previous.state&&this._box==this._box_cache[this.state]||(this._box&&this.removeChild(this._box),this._box=this._box_cache[this.state],this.addChildAt(this._box,0),this._previous.state=this.state))}_updateSubstitution(){"FOCUSED"===this.state?(this._dom_visible=!0,this._surrogate.visible=0===this.text.length):(this._dom_visible=!1,this._surrogate.visible=!0),this._updateDOMInput(),this._updateSurrogate()}_updateDOMInput(){this._canvas_bounds&&(this._dom_input.style.top=(this._canvas_bounds.top||0)+"px",this._dom_input.style.left=(this._canvas_bounds.left||0)+"px",this._dom_input.style.transform=this._pixiMatrixToCSS(this._getDOMRelativeWorldTransform()),this._dom_input.style.opacity=this.worldAlpha,this._setDOMInputVisible(this.worldVisible&&this._dom_visible),this._previous.canvas_bounds=this._canvas_bounds,this._previous.world_transform=this.worldTransform.clone(),this._previous.world_alpha=this.worldAlpha,this._previous.world_visible=this.worldVisible)}_applyRestriction(){this._restrict_regex.test(this.text)?this._restrict_value=this.text:(this.text=this._restrict_value,this._dom_input.setSelectionRange(this._selection[0],this._selection[1]))}_needsUpdate(){return!this._comparePixiMatrices(this.worldTransform,this._previous.world_transform)||!this._compareClientRects(this._canvas_bounds,this._previous.canvas_bounds)||this.worldAlpha!=this._previous.world_alpha||this.worldVisible!=this._previous.world_visible}_needsNewBoxCache(){let t=this._getDOMInputBounds();return!this._previous.input_bounds||t.width!=this._previous.input_bounds.width||t.height!=this._previous.input_bounds.height}_createSurrogate(){this._surrogate_hitbox=new e.Graphics,this._surrogate_hitbox.alpha=0,this._surrogate_hitbox.interactive=!0,this._surrogate_hitbox.cursor="text",this._surrogate_hitbox.on("pointerdown",this._onSurrogateFocus.bind(this)),this.addChild(this._surrogate_hitbox),this._surrogate_mask=new e.Graphics,this.addChild(this._surrogate_mask),this._surrogate=new e.Text("",{}),this.addChild(this._surrogate),this._surrogate.mask=this._surrogate_mask,this._updateFontMetrics(),this._updateSurrogate()}_updateSurrogate(){let t=this._deriveSurrogatePadding(),e=this._getDOMInputBounds();switch(this._surrogate.style=this._deriveSurrogateStyle(),this._surrogate.style.padding=Math.max.apply(Math,t),this._surrogate.y=this._multiline?t[0]:(e.height-this._surrogate.height)/2,this._surrogate.x=t[3],this._surrogate.text=this._deriveSurrogateText(),this._surrogate.style.align){case"left":this._surrogate.x=t[3];break;case"center":this._surrogate.x=.5*e.width-.5*this._surrogate.width;break;case"right":this._surrogate.x=e.width-t[1]-this._surrogate.width}this._updateSurrogateHitbox(e),this._updateSurrogateMask(e,t)}_updateSurrogateHitbox(t){this._surrogate_hitbox.clear(),this._surrogate_hitbox.beginFill(0),this._surrogate_hitbox.drawRect(0,0,t.width,t.height),this._surrogate_hitbox.endFill(),this._surrogate_hitbox.interactive=!this._disabled}_updateSurrogateMask(t,e){this._surrogate_mask.clear(),this._surrogate_mask.beginFill(0),this._surrogate_mask.drawRect(e[3],0,t.width-e[3]-e[1],t.height),this._surrogate_mask.endFill()}_destroySurrogate(){this._surrogate&&(this.removeChild(this._surrogate),this.removeChild(this._surrogate_hitbox),this._surrogate.destroy(),this._surrogate_hitbox.destroy(),this._surrogate=null,this._surrogate_hitbox=null)}_onSurrogateFocus(){this._setDOMInputVisible(!0),setTimeout(this._ensureFocus.bind(this),10)}_ensureFocus(){this._hasFocus()||this.focus()}_deriveSurrogateStyle(){let t=new e.TextStyle;for(var i in this._input_style)switch(i){case"color":t.fill=this._input_style.color;break;case"fontFamily":case"fontSize":case"fontWeight":case"fontVariant":case"fontStyle":t[i]=this._input_style[i];break;case"letterSpacing":t.letterSpacing=parseFloat(this._input_style.letterSpacing);break;case"textAlign":t.align=this._input_style.textAlign}return this._multiline&&(t.lineHeight=parseFloat(t.fontSize),t.wordWrap=!0,t.wordWrapWidth=this._getDOMInputBounds().width),0===this._dom_input.value.length&&(t.fill=this._placeholderColor),t}_deriveSurrogatePadding(){let t=this._input_style.textIndent?parseFloat(this._input_style.textIndent):0;if(this._input_style.padding&&this._input_style.padding.length>0){let e=this._input_style.padding.trim().split(" ");if(1==e.length){let i=parseFloat(e[0]);return[i,i,i,i+t]}if(2==e.length){let i=parseFloat(e[0]),r=parseFloat(e[1]);return[i,r,i,r+t]}if(4==e.length){let i=e.map((t=>parseFloat(t)));return i[3]+=t,i}}return[0,0,0,t]}_deriveSurrogateText(){return 0===this._dom_input.value.length?this._placeholder:"password"==this._dom_input.type?"•".repeat(this._dom_input.value.length):this._dom_input.value}_updateFontMetrics(){const t=this._deriveSurrogateStyle().toFontString();this._font_metrics=e.TextMetrics.measureFont(t)}_buildBoxCache(){this._destroyBoxCache();let t=["DEFAULT","FOCUSED","DISABLED"],e=this._getDOMInputBounds();for(let i in t)this._box_cache[t[i]]=this._box_generator(e.width,e.height,t[i]);this._previous.input_bounds=e}_destroyBoxCache(){this._box&&(this.removeChild(this._box),this._box=null);for(let t in this._box_cache)this._box_cache[t].destroy(),this._box_cache[t]=null,delete this._box_cache[t]}_hasFocus(){return document.activeElement===this._dom_input}_setDOMInputVisible(t){this._dom_input.style.display=t?"block":"none"}_getCanvasBounds(){let t=this._last_renderer.view.getBoundingClientRect(),e={top:t.top,left:t.left,width:t.width,height:t.height};return e.left+=window.scrollX,e.top+=window.scrollY,e}_getDOMInputBounds(){let t=!1;this._dom_added||(document.body.appendChild(this._dom_input),t=!0);let e=this._dom_input.style.transform,i=this._dom_input.style.display;this._dom_input.style.transform="",this._dom_input.style.display="block";let r=this._dom_input.getBoundingClientRect();return this._dom_input.style.transform=e,this._dom_input.style.display=i,t&&document.body.removeChild(this._dom_input),r}_getDOMRelativeWorldTransform(){let t=this._last_renderer.view.getBoundingClientRect(),e=this.worldTransform.clone();return e.scale(this._resolution,this._resolution),e.scale(t.width/this._last_renderer.width,t.height/this._last_renderer.height),e}_pixiMatrixToCSS(t){return"matrix("+[t.a,t.b,t.c,t.d,t.tx,t.ty].join(",")+")"}_comparePixiMatrices(t,e){return!(!t||!e)&&t.a==e.a&&t.b==e.b&&t.c==e.c&&t.d==e.d&&t.tx==e.tx&&t.ty==e.ty}_compareClientRects(t,e){return!(!t||!e)&&t.left==e.left&&t.top==e.top&&t.width==e.width&&t.height==e.height}}function r(t){if((t=t||{fill:13421772}).default)t.focused=t.focused||t.default,t.disabled=t.disabled||t.default;else{let e=t;(t={}).default=t.focused=t.disabled=e}return function(i,r,n){let s=t[n.toLowerCase()],o=new e.Graphics;return s.fill&&o.beginFill(s.fill),s.stroke&&o.lineStyle(s.stroke.width||1,s.stroke.color||0,s.stroke.alpha||1),s.rounded?o.drawRoundedRect(0,0,i,r,s.rounded):o.drawRect(0,0,i,r),o.endFill(),o.closePath(),o}}t.exportTo[0][t.exportTo[1]]=i}("object"==typeof PIXI?{PIXI,exportTo:[PIXI,"TextInput"]}:{PIXI:i(2857),exportTo:[t,"exports"]})},2857:(t,e,i)=>{"use strict";i.r(e),i.d(e,{ALPHA_MODES:()=>Y.iw,AbstractBatchRenderer:()=>F.eo,AbstractMultiResource:()=>F.M4,AbstractRenderer:()=>F.I8,AccessibilityManager:()=>w,AnimatedSprite:()=>wi,AppLoaderPlugin:()=>V.LP,Application:()=>L,ArrayResource:()=>F.$N,Attribute:()=>F.ah,BLEND_MODES:()=>Y.T$,BUFFER_BITS:()=>Y.V0,BUFFER_TYPE:()=>Y.mr,BaseImageResource:()=>F.bg,BasePrepare:()=>jt,BaseRenderTexture:()=>F.jd,BaseTexture:()=>F.VL,BatchDrawCall:()=>F.a$,BatchGeometry:()=>F.JZ,BatchPluginFactory:()=>F.TJ,BatchRenderer:()=>F.Bv,BatchShaderGenerator:()=>F.Zk,BatchSystem:()=>F.Sj,BatchTextureArray:()=>F.Ie,BitmapFont:()=>fe,BitmapFontData:()=>se,BitmapFontLoader:()=>ye,BitmapText:()=>ve,BlobResource:()=>J,Bounds:()=>S.YZ,Buffer:()=>F.lW,BufferResource:()=>F.qm,CLEAR_MODES:()=>Y.yl,CanvasResource:()=>F.Y8,Circle:()=>A.Cd,CompressedTextureLoader:()=>tt,CompressedTextureResource:()=>Q,Container:()=>S.W2,ContextSystem:()=>F.lH,CountLimiter:()=>Nt,CubeResource:()=>F.TA,DDSLoader:()=>at,DEG_TO_RAD:()=>A.ZX,DRAW_MODES:()=>Y.lg,DisplayObject:()=>S.s$,ENV:()=>Y.Vi,Ellipse:()=>A.Pj,Extract:()=>j,FORMATS:()=>Y.I2,FORMATS_TO_COMPONENTS:()=>ut,FillStyle:()=>bt.ft,Filter:()=>F.wn,FilterState:()=>F.jV,FilterSystem:()=>F.kV,Framebuffer:()=>F.AI,FramebufferSystem:()=>F.WB,GC_MODES:()=>Y.UN,GLFramebuffer:()=>F.tT,GLProgram:()=>F.Ei,GLTexture:()=>F.fy,GRAPHICS_CURVES:()=>bt.wA,Geometry:()=>F.ZX,GeometrySystem:()=>F.TO,Graphics:()=>bt.TC,GraphicsData:()=>bt.iM,GraphicsGeometry:()=>bt.RB,IGLUniformData:()=>F.W1,INSTALLED:()=>F.e_,INTERNAL_FORMATS:()=>G,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:()=>H,ImageBitmapResource:()=>F._w,ImageResource:()=>F.PA,InteractionData:()=>C,InteractionEvent:()=>M,InteractionManager:()=>U,InteractionTrackingData:()=>P,KTXLoader:()=>dt,LINE_CAP:()=>bt.$o,LINE_JOIN:()=>bt.S,LineStyle:()=>bt.TD,Loader:()=>V.aN,LoaderResource:()=>V.kC,MASK_TYPES:()=>Y.A7,MIPMAP_MODES:()=>Y.WB,MSAA_QUALITY:()=>Y.G5,MaskData:()=>F.HI,MaskSystem:()=>F.zj,Matrix:()=>A.y3,Mesh:()=>re.Kj,MeshBatchUvs:()=>re.wQ,MeshGeometry:()=>re.xc,MeshMaterial:()=>re.rY,NineSlicePlane:()=>Ti.ZT,ObjectRenderer:()=>F.bO,ObservablePoint:()=>A.AB,PI_2:()=>A._b,PRECISION:()=>Y.cB,ParticleContainer:()=>_t,ParticleRenderer:()=>vt,PlaneGeometry:()=>Ti._1,Point:()=>A.E9,Polygon:()=>A.mg,Prepare:()=>Wt,Program:()=>F.$r,ProjectionSystem:()=>F.NW,Quad:()=>F.lD,QuadUv:()=>F.ud,RAD_TO_DEG:()=>A.jl,RENDERER_TYPE:()=>Y.N3,Rectangle:()=>A.Ae,RenderTexture:()=>F.TI,RenderTexturePool:()=>F.uW,RenderTextureSystem:()=>F.J$,Renderer:()=>F.Th,Resource:()=>F._z,RopeGeometry:()=>Ti.Au,RoundedRectangle:()=>A.c9,Runner:()=>Si.R,SAMPLER_TYPES:()=>Y.oT,SCALE_MODES:()=>Y.aH,SHAPES:()=>A.HS,SVGResource:()=>F.pX,ScissorSystem:()=>F.id,Shader:()=>F.ex,ShaderSystem:()=>F.p,SimpleMesh:()=>Ti.AL,SimplePlane:()=>Ti.VJ,SimpleRope:()=>Ti.IE,Sprite:()=>xt.j,SpriteMaskFilter:()=>F.z9,Spritesheet:()=>qt,SpritesheetLoader:()=>Kt,State:()=>F.ZM,StateSystem:()=>F.zI,StencilSystem:()=>F.Ld,System:()=>F.xP,TARGETS:()=>Y.sp,TEXT_GRADIENT:()=>mt,TYPES:()=>Y.vK,TYPES_TO_BYTES_PER_COMPONENT:()=>lt,TYPES_TO_BYTES_PER_PIXEL:()=>ct,TemporaryDisplayObject:()=>S.Ql,Text:()=>Rt,TextMetrics:()=>Ot,TextStyle:()=>wt,Texture:()=>F.xE,TextureGCSystem:()=>F.wr,TextureLoader:()=>V.dp,TextureMatrix:()=>F.UX,TextureSystem:()=>F.CT,TextureUvs:()=>F.aF,Ticker:()=>I.vB,TickerPlugin:()=>I.Sb,TilingSprite:()=>Qt,TilingSpriteRenderer:()=>ie,TimeLimiter:()=>zt,Transform:()=>A.wx,UPDATE_PRIORITY:()=>I.uF,UniformGroup:()=>F.oo,VERSION:()=>Ai,VideoResource:()=>F.eH,ViewableBuffer:()=>F.Rv,WRAP_MODES:()=>Y.Nt,accessibleTarget:()=>E,autoDetectRenderer:()=>F.e6,autoDetectResource:()=>F.pb,checkMaxIfStatementsInShader:()=>F.a7,createUBOElements:()=>F.TF,defaultFilterVertex:()=>F.Y9,defaultVertex:()=>F.kP,filters:()=>Ii,generateProgram:()=>F.qw,generateUniformBufferSync:()=>F.K0,getTestContext:()=>F.Kc,getUBOData:()=>F.DL,graphicsUtils:()=>bt.yR,groupD8:()=>A.Lv,interactiveTarget:()=>D,isMobile:()=>yt.t,resources:()=>F.Jb,settings:()=>yt.X,systems:()=>F.eG,uniformParsers:()=>F.sg,utils:()=>T});var r=setTimeout,n="undefined"!=typeof setImmediate?setImmediate:null;function s(t){return Boolean(t&&void 0!==t.length)}function o(){}function a(t){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(t,this)}function h(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,a._immediateFn((function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var r;try{r=i(t._value)}catch(t){return void u(e.promise,t)}l(e.promise,r)}else(1===t._state?l:u)(e.promise,t._value)}))):t._deferreds.push(e)}function l(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if(e instanceof a)return t._state=3,t._value=e,void c(t);if("function"==typeof i)return void p((r=i,n=e,function(){r.apply(n,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(e){u(t,e)}var r,n}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&a._immediateFn((function(){t._handled||a._unhandledRejectionFn(t._value)}));for(var e=0,i=t._deferreds.length;e<i;e++)h(t,t._deferreds[e]);t._deferreds=null}function d(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function p(t,e){var i=!1;try{t((function(t){i||(i=!0,l(e,t))}),(function(t){i||(i=!0,u(e,t))}))}catch(t){if(i)return;i=!0,u(e,t)}}a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var i=new this.constructor(o);return h(this,new d(t,e,i)),i},a.prototype.finally=function(t){var e=this.constructor;return this.then((function(i){return e.resolve(t()).then((function(){return i}))}),(function(i){return e.resolve(t()).then((function(){return e.reject(i)}))}))},a.all=function(t){return new a((function(e,i){if(!s(t))return i(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var n=r.length;function o(t,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(e){o(t,e)}),i)}r[t]=s,0==--n&&e(r)}catch(t){i(t)}}for(var a=0;a<r.length;a++)o(a,r[a])}))},a.allSettled=function(t){return new this((function(e,i){if(!t||void 0===t.length)return i(new TypeError(typeof t+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var n=r.length;function s(t,i){if(i&&("object"==typeof i||"function"==typeof i)){var o=i.then;if("function"==typeof o)return void o.call(i,(function(e){s(t,e)}),(function(i){r[t]={status:"rejected",reason:i},0==--n&&e(r)}))}r[t]={status:"fulfilled",value:i},0==--n&&e(r)}for(var o=0;o<r.length;o++)s(o,r[o])}))},a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a((function(e){e(t)}))},a.reject=function(t){return new a((function(e,i){i(t)}))},a.race=function(t){return new a((function(e,i){if(!s(t))return i(new TypeError("Promise.race accepts an array"));for(var r=0,n=t.length;r<n;r++)a.resolve(t[r]).then(e,i)}))},a._immediateFn="function"==typeof n&&function(t){n(t)}||function(t){r(t,0)},a._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};const f=a;var m=i(9813),_=i.n(m);if(self.Promise||(self.Promise=f),Object.assign||(Object.assign=_()),Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!self.performance||!self.performance.now){var g=Date.now();self.performance||(self.performance={}),self.performance.now=function(){return Date.now()-g}}for(var v=Date.now(),y=["ms","moz","webkit","o"],b=0;b<y.length&&!self.requestAnimationFrame;++b){var x=y[b];self.requestAnimationFrame=self[x+"RequestAnimationFrame"],self.cancelAnimationFrame=self[x+"CancelAnimationFrame"]||self[x+"CancelRequestAnimationFrame"]}self.requestAnimationFrame||(self.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+v-e;return i<0&&(i=0),v=e,self.setTimeout((function(){v=Date.now(),t(performance.now())}),i)}),self.cancelAnimationFrame||(self.cancelAnimationFrame=function(t){return clearTimeout(t)}),Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1}),Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),self.ArrayBuffer||(self.ArrayBuffer=Array),self.Float32Array||(self.Float32Array=Array),self.Uint32Array||(self.Uint32Array=Array),self.Uint16Array||(self.Uint16Array=Array),self.Uint8Array||(self.Uint8Array=Array),self.Int32Array||(self.Int32Array=Array);var T=i(8281),S=i(2975),E={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};S.s$.mixin(E);var w=function(){function t(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(T.isMobile.tablet||T.isMobile.phone)&&this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2..toString(),this.div=e,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),self.addEventListener("keydown",this._onKeyDown,!1)}return Object.defineProperty(t.prototype,"isActive",{get:function(){return this._isActive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMobileAccessibility",{get:function(){return this._isMobileAccessibility},enumerable:!1,configurable:!0}),t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2..toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",(function(){t._isMobileAccessibility=!0,t.activate(),t.destroyTouchHook()})),document.body.appendChild(e),this._hookDiv=e},t.prototype.destroyTouchHook=function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)},t.prototype.activate=function(){var t;this._isActive||(this._isActive=!0,self.document.addEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(t=this.renderer.view.parentNode)||void 0===t||t.appendChild(this.div))},t.prototype.deactivate=function(){var t;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(t=this.div.parentNode)||void 0===t||t.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible&&t.accessibleChildren){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);var e=t.children;if(e)for(var i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){var t=performance.now();if(!(T.isMobile.android.device&&t<this.androidUpdateCount)&&(this.androidUpdateCount=t+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer._lastObjectRendered&&this.updateAccessibleObjects(this.renderer._lastObjectRendered);var e=this.renderer.view.getBoundingClientRect(),i=e.left,r=e.top,n=e.width,s=e.height,o=this.renderer,a=o.width,h=o.height,l=o.resolution,u=n/a*l,c=s/h*l,d=this.div;d.style.left=i+"px",d.style.top=r+"px",d.style.width=a+"px",d.style.height=h+"px";for(var p=0;p<this.children.length;p++){var f=this.children[p];if(f.renderId!==this.renderId)f._accessibleActive=!1,(0,T.removeItems)(this.children,p,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,p--;else{d=f._accessibleDiv;var m=f.hitArea,_=f.worldTransform;f.hitArea?(d.style.left=(_.tx+m.x*_.a)*u+"px",d.style.top=(_.ty+m.y*_.d)*c+"px",d.style.width=m.width*_.a*u+"px",d.style.height=m.height*_.d*c+"px"):(m=f.getBounds(),this.capHitArea(m),d.style.left=m.x*u+"px",d.style.top=m.y*c+"px",d.style.width=m.width*u+"px",d.style.height=m.height*c+"px",d.title!==f.accessibleTitle&&null!==f.accessibleTitle&&(d.title=f.accessibleTitle),d.getAttribute("aria-label")!==f.accessibleHint&&null!==f.accessibleHint&&d.setAttribute("aria-label",f.accessibleHint)),f.accessibleTitle===d.title&&f.tabIndex===d.tabIndex||(d.title=f.accessibleTitle,d.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}},t.prototype.updateDebugHTML=function(t){t.innerHTML="type: "+t.type+"</br> title : "+t.title+"</br> tabIndex: "+t.tabIndex},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);var e=this.renderer,i=e.width,r=e.height;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>r&&(t.height=r-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2..toString(),e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),e.style.pointerEvents=t.accessiblePointerEvents,e.type=t.accessibleType,t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(e),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction,i=t.target.displayObject,r=e.eventData;e.dispatchEvent(i,"click",r),e.dispatchEvent(i,"pointertap",r),e.dispatchEvent(i,"tap",r)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction,i=t.target.displayObject,r=e.eventData;e.dispatchEvent(i,"mouseover",r)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction,i=t.target.displayObject,r=e.eventData;e.dispatchEvent(i,"mouseout",r)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.destroyTouchHook(),this.div=null,self.document.removeEventListener("mousemove",this._onMouseMove,!0),self.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}(),A=i(6617),I=i(107),C=function(){function t(){this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0,this.global=new A.E9,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Object.defineProperty(t.prototype,"pointerId",{get:function(){return this.identifier},enumerable:!1,configurable:!0}),t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){"isPrimary"in t&&t.isPrimary&&(this.isPrimary=!0),this.button="button"in t&&t.button;var e="buttons"in t&&t.buttons;this.buttons=Number.isInteger(e)?e:"which"in t&&t.which,this.width="width"in t&&t.width,this.height="height"in t&&t.height,this.tiltX="tiltX"in t&&t.tiltX,this.tiltY="tiltY"in t&&t.tiltY,this.pointerType="pointerType"in t&&t.pointerType,this.pressure="pressure"in t&&t.pressure,this.rotationAngle="rotationAngle"in t&&t.rotationAngle,this.twist="twist"in t&&t.twist||0,this.tangentialPressure="tangentialPressure"in t&&t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},t}(),O=function(t,e){return(O=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},M=function(){function t(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0,this.stopPropagationHint=!0,this.stopsPropagatingAt=this.currentTarget},t.prototype.reset=function(){this.stopped=!1,this.stopsPropagatingAt=null,this.stopPropagationHint=!1,this.currentTarget=null,this.target=null},t}(),P=function(){function t(e){this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},Object.defineProperty(t.prototype,"pointerId",{get:function(){return this._pointerId},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"flags",{get:function(){return this._flags},set:function(t){this._flags=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"none",{get:function(){return this._flags===t.FLAGS.NONE},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"over",{get:function(){return 0!=(this._flags&t.FLAGS.OVER)},set:function(e){this._doSet(t.FLAGS.OVER,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rightDown",{get:function(){return 0!=(this._flags&t.FLAGS.RIGHT_DOWN)},set:function(e){this._doSet(t.FLAGS.RIGHT_DOWN,e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leftDown",{get:function(){return 0!=(this._flags&t.FLAGS.LEFT_DOWN)},set:function(e){this._doSet(t.FLAGS.LEFT_DOWN,e)},enumerable:!1,configurable:!0}),t.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4}),t}(),R=function(){function t(){this._tempPoint=new A.E9}return t.prototype.recursiveFindHit=function(t,e,i,r,n){if(!e||!e.visible)return!1;var s=t.data.global,o=!1,a=n=e.interactive||n,h=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(s,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?o=!0:(r=!1,h=!1)),a=!1):e._mask&&r&&(e._mask.containsPoint&&e._mask.containsPoint(s)||(r=!1)),h&&e.interactiveChildren&&e.children)for(var l=e.children,u=l.length-1;u>=0;u--){var c=l[u],d=this.recursiveFindHit(t,c,i,r,a);if(d){if(!c.parent)continue;a=!1,d&&(t.target&&(r=!1),o=!0)}}return n&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(s)&&(o=!0),e.interactive&&(o&&!t.target&&(t.target=e),i&&i(t,e,!!o))),o},t.prototype.findHit=function(t,e,i,r){this.recursiveFindHit(t,e,i,r,!1)},t}(),D={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0};S.s$.mixin(D);var N={target:null,data:{global:null}},U=function(t){function e(e,i){var r=t.call(this)||this;return i=i||{},r.renderer=e,r.autoPreventDefault=void 0===i.autoPreventDefault||i.autoPreventDefault,r.interactionFrequency=i.interactionFrequency||10,r.mouse=new C,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new M,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.tickerAdded=!1,r.mouseOverRenderer=!("PointerEvent"in self),r.supportsTouchEvents="ontouchstart"in self,r.supportsPointerEvents=!!self.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"none",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r.resolution=1,r.delayedEvents=[],r.search=new R,r._tempDisplayObject=new S.Ql,r._eventListenerOptions={capture:!0,passive:!1},r._useSystemTicker=void 0===i.useSystemTicker||i.useSystemTicker,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}return function(t,e){function i(){this.constructor=t}O(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"useSystemTicker",{get:function(){return this._useSystemTicker},set:function(t){this._useSystemTicker=t,t?this.addTickerListener():this.removeTickerListener()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastObjectRendered",{get:function(){return this.renderer._lastObjectRendered||this._tempDisplayObject},enumerable:!1,configurable:!0}),e.prototype.hitTest=function(t,e){return N.target=null,N.data.global=t,e||(e=this.lastObjectRendered),this.processInteractive(N,e,null,!0),N.target},e.prototype.setTargetElement=function(t,e){void 0===e&&(e=1),this.removeTickerListener(),this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents(),this.addTickerListener()},e.prototype.addTickerListener=function(){!this.tickerAdded&&this.interactionDOMElement&&this._useSystemTicker&&(I.vB.system.add(this.tickerUpdate,this,I.uF.INTERACTION),this.tickerAdded=!0)},e.prototype.removeTickerListener=function(){this.tickerAdded&&(I.vB.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)},e.prototype.addEvents=function(){if(!this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none"),this.supportsPointerEvents?(self.document.addEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.addEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.addEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.addEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.eventsAdded=!0}},e.prototype.removeEvents=function(){if(this.eventsAdded&&this.interactionDOMElement){var t=this.interactionDOMElement.style;self.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(self.document.removeEventListener("pointermove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("pointercancel",this.onPointerCancel,this._eventListenerOptions),self.removeEventListener("pointerup",this.onPointerUp,this._eventListenerOptions)):(self.document.removeEventListener("mousemove",this.onPointerMove,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,this._eventListenerOptions),self.removeEventListener("mouseup",this.onPointerUp,this._eventListenerOptions)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,this._eventListenerOptions),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,this._eventListenerOptions)),this.interactionDOMElement=null,this.eventsAdded=!1}},e.prototype.tickerUpdate=function(t){this._deltaTime+=t,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())},e.prototype.update=function(){if(this.interactionDOMElement)if(this._didMove)this._didMove=!1;else{for(var t in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(t)){var e=this.activeInteractionData[t];if(e.originalEvent&&"touch"!==e.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,e.originalEvent,e);this.processInteractive(i,this.lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){t=t||"default";var e=!0;if(self.OffscreenCanvas&&this.interactionDOMElement instanceof OffscreenCanvas&&(e=!1),this.currentCursorMode!==t){this.currentCursorMode=t;var i=this.cursorStyles[t];if(i)switch(typeof i){case"string":e&&(this.interactionDOMElement.style.cursor=i);break;case"function":i(t);break;case"object":e&&Object.assign(this.interactionDOMElement.style,i)}else e&&"string"==typeof t&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopPropagationHint&&t!==i.stopsPropagatingAt||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.delayDispatchEvent=function(t,e,i){this.delayedEvents.push({displayObject:t,eventString:e,eventData:i})},e.prototype.mapPositionToPoint=function(t,e,i){var r;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:this.interactionDOMElement.width,height:this.interactionDOMElement.height,left:0,top:0};var n=1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*n,t.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*n},e.prototype.processInteractive=function(t,e,i,r){var n=this.search.findHit(t,e,i,r),s=this.delayedEvents;if(!s.length)return n;t.stopPropagationHint=!1;var o=s.length;this.delayedEvents=[];for(var a=0;a<o;a++){var h=s[a],l=h.displayObject,u=h.eventString,c=h.eventData;c.stopsPropagatingAt===l&&(c.stopPropagationHint=!0),this.dispatchEvent(l,u,c)}return n},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(var i=e.length,r=0;r<i;r++){var n=e[r],s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);if(o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===n.pointerType)this.emit("touchstart",o);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var r=t.data,n=t.data.identifier;if(i)if(e.trackedPointers[n]||(e.trackedPointers[n]=new P(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var s=2===r.button;s?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,s?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var r=this.normalizeToPointerData(t),n=r.length,s=t.target!==this.interactionDOMElement?"outside":"",o=0;o<n;o++){var a=r[o],h=this.getInteractionDataForPointerId(a),l=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(l.data.originalEvent=t,this.processInteractive(l,this.lastObjectRendered,i,e||!s),this.emit(e?"pointercancel":"pointerup"+s,l),"mouse"===a.pointerType||"pen"===a.pointerType){var u=2===a.button;this.emit(u?"rightup"+s:"mouseup"+s,l)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+s,l),this.releaseInteractionDataForPointerId(a.pointerId))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var r=t.data,n=t.data.identifier,s=e.trackedPointers[n],o="touch"===r.pointerType,a="mouse"===r.pointerType||"pen"===r.pointerType,h=!1;if(a){var l=2===r.button,u=P.FLAGS,c=l?u.RIGHT_DOWN:u.LEFT_DOWN,d=void 0!==s&&s.flags&c;i?(this.dispatchEvent(e,l?"rightup":"mouseup",t),d&&(this.dispatchEvent(e,l?"rightclick":"click",t),h=!0)):d&&this.dispatchEvent(e,l?"rightupoutside":"mouseupoutside",t),s&&(l?s.rightDown=!1:s.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),o&&this.dispatchEvent(e,"touchend",t),s&&(a&&!h||this.dispatchEvent(e,"pointertap",t),o&&(this.dispatchEvent(e,"tap",t),s.over=!1))):s&&(this.dispatchEvent(e,"pointerupoutside",t),o&&this.dispatchEvent(e,"touchendoutside",t)),s&&s.none&&delete e.trackedPointers[n]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this._didMove=!0,this.cursor=null);for(var i=e.length,r=0;r<i;r++){var n=e[r],s=this.getInteractionDataForPointerId(n),o=this.configureInteractionEventForDOMEvent(this.eventData,n,s);o.data.originalEvent=t,this.processInteractive(o,this.lastObjectRendered,this.processPointerMove,!0),this.emit("pointermove",o),"touch"===n.pointerType&&this.emit("touchmove",o),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var r=t.data,n="touch"===r.pointerType,s="mouse"===r.pointerType||"pen"===r.pointerType;s&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),s&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,this.processInteractive(r,this.lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var r=t.data,n=t.data.identifier,s="mouse"===r.pointerType||"pen"===r.pointerType,o=e.trackedPointers[n];i&&!o&&(o=e.trackedPointers[n]=new P(n)),void 0!==o&&(i&&this.mouseOverRenderer?(o.over||(o.over=!0,this.delayDispatchEvent(e,"pointerover",t),s&&this.delayDispatchEvent(e,"mouseover",t)),s&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),s&&this.dispatchEvent(e,"mouseout",t),o.none&&delete e.trackedPointers[n]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e,i=t.pointerId;return 1===i||"mouse"===t.pointerType?e=this.mouse:this.activeInteractionData[i]?e=this.activeInteractionData[i]:((e=this.interactionDataPool.pop()||new C).identifier=i,this.activeInteractionData[i]=e),e.copyEvent(t),e},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,r=t.changedTouches.length;i<r;i++){var n=t.changedTouches[i];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else if(!self.MouseEvent||t instanceof MouseEvent&&!(this.supportsPointerEvents&&t instanceof self.PointerEvent)){var s=t;void 0===s.isPrimary&&(s.isPrimary=!0),void 0===s.width&&(s.width=1),void 0===s.height&&(s.height=1),void 0===s.tiltX&&(s.tiltX=0),void 0===s.tiltY&&(s.tiltY=0),void 0===s.pointerType&&(s.pointerType="mouse"),void 0===s.pointerId&&(s.pointerId=1),void 0===s.pressure&&(s.pressure=.5),void 0===s.twist&&(s.twist=0),void 0===s.tangentialPressure&&(s.tangentialPressure=0),s.isNormalized=!0,e.push(s)}else e.push(t);return e},e.prototype.destroy=function(){this.removeEvents(),this.removeTickerListener(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this.search=null},e}(T.EventEmitter),F=i(331),L=function(){function t(e){var i=this;this.stage=new S.W2,e=Object.assign({forceCanvas:!1},e),this.renderer=(0,F.e6)(e),t._plugins.forEach((function(t){t.init.call(i,e)}))}return t.registerPlugin=function(e){t._plugins.push(e)},t.prototype.render=function(){this.renderer.render(this.stage)},Object.defineProperty(t.prototype,"view",{get:function(){return this.renderer.view},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"screen",{get:function(){return this.renderer.screen},enumerable:!1,configurable:!0}),t.prototype.destroy=function(e,i){var r=this,n=t._plugins.slice(0);n.reverse(),n.forEach((function(t){t.destroy.call(r)})),this.stage.destroy(i),this.stage=null,this.renderer.destroy(e),this.renderer=null},t._plugins=[],t}(),k=function(){function t(){}return t.init=function(t){var e=this;Object.defineProperty(this,"resizeTo",{set:function(t){self.removeEventListener("resize",this.queueResize),this._resizeTo=t,t&&(self.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){e._resizeTo&&(e.cancelResize(),e._resizeId=requestAnimationFrame((function(){return e.resize()})))},this.cancelResize=function(){e._resizeId&&(cancelAnimationFrame(e._resizeId),e._resizeId=null)},this.resize=function(){if(e._resizeTo){var t,i;if(e.cancelResize(),e._resizeTo===self)t=self.innerWidth,i=self.innerHeight;else{var r=e._resizeTo;t=r.clientWidth,i=r.clientHeight}e.renderer.resize(t,i)}},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null},t.destroy=function(){self.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null},t}();L.registerPlugin(k);var B,G,X=new A.Ae,j=function(){function t(t){this.renderer=t}return t.prototype.image=function(t,e,i){var r=new Image;return r.src=this.base64(t,e,i),r},t.prototype.base64=function(t,e,i){return this.canvas(t).toDataURL(e,i)},t.prototype.canvas=function(e){var i,r,n,s=this.renderer,o=!1,a=!1;e&&(e instanceof F.TI?n=e:(n=this.renderer.generateTexture(e),a=!0)),n?(i=n.baseTexture.resolution,r=n.frame,o=!1,s.renderTexture.bind(n)):(i=this.renderer.resolution,o=!0,(r=X).width=this.renderer.width,r.height=this.renderer.height,s.renderTexture.bind(null));var h=Math.floor(r.width*i+1e-4),l=Math.floor(r.height*i+1e-4),u=new T.CanvasRenderTarget(h,l,1),c=new Uint8Array(4*h*l),d=s.gl;d.readPixels(r.x*i,r.y*i,h,l,d.RGBA,d.UNSIGNED_BYTE,c);var p=u.context.getImageData(0,0,h,l);if(t.arrayPostDivide(c,p.data),u.context.putImageData(p,0,0),o){var f=new T.CanvasRenderTarget(u.width,u.height,1);f.context.scale(1,-1),f.context.drawImage(u.canvas,0,-l),u.destroy(),u=f}return a&&n.destroy(!0),u.canvas},t.prototype.pixels=function(e){var i,r,n,s=this.renderer,o=!1;e&&(e instanceof F.TI?n=e:(n=this.renderer.generateTexture(e),o=!0)),n?(i=n.baseTexture.resolution,r=n.frame,s.renderTexture.bind(n)):(i=s.resolution,(r=X).width=s.width,r.height=s.height,s.renderTexture.bind(null));var a=r.width*i,h=r.height*i,l=new Uint8Array(4*a*h),u=s.gl;return u.readPixels(r.x*i,r.y*i,a,h,u.RGBA,u.UNSIGNED_BYTE,l),o&&n.destroy(!0),t.arrayPostDivide(l,l),l},t.prototype.destroy=function(){this.renderer=null},t.arrayPostDivide=function(t,e){for(var i=0;i<t.length;i+=4){var r=e[i+3]=t[i+3];0!==r?(e[i]=Math.round(Math.min(255*t[i]/r,255)),e[i+1]=Math.round(Math.min(255*t[i+1]/r,255)),e[i+2]=Math.round(Math.min(255*t[i+2]/r,255))):(e[i]=t[i],e[i+1]=t[i+1],e[i+2]=t[i+2])}},t}(),V=i(3600),Y=i(6921);!function(t){t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL"}(G||(G={}));var H=((B={})[G.COMPRESSED_RGB_S3TC_DXT1_EXT]=.5,B[G.COMPRESSED_RGBA_S3TC_DXT1_EXT]=.5,B[G.COMPRESSED_RGBA_S3TC_DXT3_EXT]=1,B[G.COMPRESSED_RGBA_S3TC_DXT5_EXT]=1,B[G.COMPRESSED_SRGB_S3TC_DXT1_EXT]=.5,B[G.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT]=.5,B[G.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT]=1,B[G.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT]=1,B[G.COMPRESSED_R11_EAC]=.5,B[G.COMPRESSED_SIGNED_R11_EAC]=.5,B[G.COMPRESSED_RG11_EAC]=1,B[G.COMPRESSED_SIGNED_RG11_EAC]=1,B[G.COMPRESSED_RGB8_ETC2]=.5,B[G.COMPRESSED_RGBA8_ETC2_EAC]=1,B[G.COMPRESSED_SRGB8_ETC2]=.5,B[G.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC]=1,B[G.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,B[G.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2]=.5,B[G.COMPRESSED_RGB_PVRTC_4BPPV1_IMG]=.5,B[G.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG]=.5,B[G.COMPRESSED_RGB_PVRTC_2BPPV1_IMG]=.25,B[G.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG]=.25,B[G.COMPRESSED_RGB_ETC1_WEBGL]=.5,B[G.COMPRESSED_RGB_ATC_WEBGL]=.5,B[G.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL]=1,B[G.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL]=1,B),W=function(t,e){return(W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function z(t,e){function i(){this.constructor=t}W(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var q,K,Z,$,J=function(t){function e(e,i){void 0===i&&(i={width:1,height:1,autoLoad:!0});var r,n,s=this;return"string"==typeof e?(r=e,n=new Uint8Array):(r=null,n=e),(s=t.call(this,n,i)||this).origin=r,s.buffer=n?new F.Rv(n):null,s.origin&&!1!==i.autoLoad&&s.load(),n&&n.length&&(s.loaded=!0,s.onBlobLoaded(s.buffer.rawBinaryData)),s}return z(e,t),e.prototype.onBlobLoaded=function(t){},e.prototype.load=function(){return t=this,i=function(){var t;return function(t,e){var i,r,n,s,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(n=2&s[0]?r.return:s[0]?r.throw||((n=r.return)&&n.call(r),0):r.next)&&!(n=n.call(r,s[1])).done)return n;switch(r=0,n&&(s=[2&s[0],n.value]),s[0]){case 0:case 1:n=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,r=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==s[0]&&2!==s[0])){o=0;continue}if(3===s[0]&&(!n||s[1]>n[0]&&s[1]<n[3])){o.label=s[1];break}if(6===s[0]&&o.label<n[1]){o.label=n[1],n=s;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(s);break}n[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(t){s=[6,t],r=0}finally{i=n=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}(this,(function(e){switch(e.label){case 0:return[4,fetch(this.origin)];case 1:return[4,e.sent().blob()];case 2:return[4,e.sent().arrayBuffer()];case 3:return t=e.sent(),this.data=new Uint32Array(t),this.buffer=new F.Rv(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),[2,this]}}))},new((e=Promise)||(e=Promise))((function(r,n){function s(t){try{a(i.next(t))}catch(t){n(t)}}function o(t){try{a(i.throw(t))}catch(t){n(t)}}function a(t){t.done?r(t.value):new e((function(e){e(t.value)})).then(s,o)}a((i=i.apply(t,[])).next())}));var t,e,i},e}(F.qm),Q=function(t){function e(i,r){var n=t.call(this,i,r)||this;return n.format=r.format,n.levels=r.levels||1,n._width=r.width,n._height=r.height,n._extension=e._formatToExtension(n.format),(r.levelBuffers||n.buffer)&&(n._levelBuffers=r.levelBuffers||e._createLevelBuffers(i instanceof Uint8Array?i:n.buffer.uint8View,n.format,n.levels,4,4,n.width,n.height)),n}return z(e,t),e.prototype.upload=function(t,e,i){var r=t.gl;if(!t.context.extensions[this._extension])throw new Error(this._extension+" textures are not supported on the current machine");if(!this._levelBuffers)return!1;for(var n=0,s=this.levels;n<s;n++){var o=this._levelBuffers[n],a=o.levelID,h=o.levelWidth,l=o.levelHeight,u=o.levelBuffer;r.compressedTexImage2D(r.TEXTURE_2D,a,this.format,h,l,0,u)}return!0},e.prototype.onBlobLoaded=function(){this._levelBuffers=e._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)},e._formatToExtension=function(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")},e._createLevelBuffers=function(t,e,i,r,n,s,o){for(var a=new Array(i),h=t.byteOffset,l=s,u=o,c=l+r-1&~(r-1),d=u+n-1&~(n-1),p=c*d*H[e],f=0;f<i;f++)a[f]={levelID:f,levelWidth:i>1?l:c,levelHeight:i>1?u:d,levelBuffer:new Uint8Array(t.buffer,h,p)},h+=p,p=(c=(l=l>>1||1)+r-1&~(r-1))*(d=(u=u>>1||1)+n-1&~(n-1))*H[e];return a},e}(J),tt=function(){function t(){}return t.use=function(e,i){var r=e.data;if(e.type===V.kC.TYPE.JSON&&r&&r.cacheID&&r.textures){for(var n=r.textures,s=void 0,o=void 0,a=0,h=n.length;a<h;a++){var l=n[a],u=l.src,c=l.format;if(c||(o=u),t.textureFormats[c]){s=u;break}}if(!(s=s||o))return void i(new Error("Cannot load compressed-textures in "+e.url+", make sure you provide a fallback"));if(s===e.url)return void i(new Error("URL of compressed texture cannot be the same as the manifest's URL"));var d={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},p=T.url.resolve(e.url.replace(this.baseUrl,""),s),f=r.cacheID;this.add(f,p,d,(function(t){if(t.error)i(t.error);else{var r=t.texture,n=void 0===r?null:r,s=t.textures,o=void 0===s?{}:s;Object.assign(e,{texture:n,textures:o}),i()}}))}else i()},t.add=function(){var e=document.createElement("canvas").getContext("webgl");if(e){var i={s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};for(var r in t.textureExtensions=i,t.textureFormats={},i){var n=i[r];n&&Object.assign(t.textureFormats,Object.getPrototypeOf(n))}}else console.warn("WebGL not available for compressed textures. Silently failing.")},t}();function et(t,e,i){var r={textures:{},texture:null};return e?(e.map((function(t){return new F.xE(new F.VL(t,Object.assign({mipmap:Y.WB.OFF,alphaMode:Y.iw.NO_PREMULTIPLIED_ALPHA},i)))})).forEach((function(e,i){var n=e.baseTexture,s=t+"-"+(i+1);F.VL.addToCache(n,s),F.xE.addToCache(e,s),0===i&&(F.VL.addToCache(n,t),F.xE.addToCache(e,t),r.texture=e),r.textures[s]=e})),r):r}V.kC.setExtensionXhrType("dds",V.kC.XHR_RESPONSE_TYPE.BUFFER),function(t){t[t.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",t[t.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",t[t.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",t[t.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",t[t.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",t[t.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",t[t.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",t[t.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",t[t.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",t[t.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",t[t.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",t[t.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",t[t.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",t[t.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",t[t.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",t[t.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",t[t.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",t[t.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",t[t.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",t[t.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",t[t.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",t[t.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",t[t.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",t[t.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",t[t.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",t[t.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",t[t.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",t[t.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",t[t.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",t[t.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",t[t.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",t[t.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",t[t.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",t[t.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",t[t.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",t[t.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",t[t.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",t[t.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",t[t.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",t[t.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",t[t.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",t[t.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",t[t.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",t[t.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",t[t.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",t[t.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",t[t.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",t[t.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",t[t.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",t[t.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",t[t.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",t[t.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",t[t.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",t[t.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",t[t.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",t[t.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",t[t.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",t[t.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",t[t.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",t[t.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",t[t.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",t[t.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",t[t.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",t[t.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",t[t.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",t[t.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",t[t.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",t[t.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",t[t.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",t[t.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",t[t.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",t[t.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",t[t.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",t[t.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",t[t.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",t[t.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",t[t.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",t[t.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",t[t.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",t[t.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",t[t.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",t[t.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",t[t.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",t[t.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",t[t.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",t[t.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",t[t.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",t[t.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",t[t.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",t[t.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",t[t.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",t[t.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",t[t.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",t[t.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",t[t.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",t[t.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",t[t.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",t[t.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",t[t.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",t[t.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",t[t.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",t[t.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",t[t.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",t[t.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",t[t.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",t[t.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",t[t.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",t[t.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",t[t.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",t[t.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",t[t.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",t[t.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",t[t.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",t[t.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",t[t.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",t[t.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",t[t.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT"}(Z||(Z={})),function(t){t[t.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",t[t.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",t[t.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D"}($||($={}));var it,rt,nt,st=((q={})[827611204]=G.COMPRESSED_RGBA_S3TC_DXT1_EXT,q[861165636]=G.COMPRESSED_RGBA_S3TC_DXT3_EXT,q[894720068]=G.COMPRESSED_RGBA_S3TC_DXT5_EXT,q),ot=((K={})[Z.DXGI_FORMAT_BC1_TYPELESS]=G.COMPRESSED_RGBA_S3TC_DXT1_EXT,K[Z.DXGI_FORMAT_BC1_UNORM]=G.COMPRESSED_RGBA_S3TC_DXT1_EXT,K[Z.DXGI_FORMAT_BC2_TYPELESS]=G.COMPRESSED_RGBA_S3TC_DXT3_EXT,K[Z.DXGI_FORMAT_BC2_UNORM]=G.COMPRESSED_RGBA_S3TC_DXT3_EXT,K[Z.DXGI_FORMAT_BC3_TYPELESS]=G.COMPRESSED_RGBA_S3TC_DXT5_EXT,K[Z.DXGI_FORMAT_BC3_UNORM]=G.COMPRESSED_RGBA_S3TC_DXT5_EXT,K[Z.DXGI_FORMAT_BC1_UNORM_SRGB]=G.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,K[Z.DXGI_FORMAT_BC2_UNORM_SRGB]=G.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,K[Z.DXGI_FORMAT_BC3_UNORM_SRGB]=G.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,K),at=function(){function t(){}return t.use=function(e,i){if("dds"===e.extension&&e.data)try{Object.assign(e,et(e.name||e.url,t.parse(e.data),e.metadata))}catch(t){return void i(t)}i()},t.parse=function(t){var e=new Uint32Array(t);if(542327876!==e[0])throw new Error("Invalid DDS file magic word");var i=new Uint32Array(t,0,124/Uint32Array.BYTES_PER_ELEMENT),r=i[3],n=i[4],s=i[7],o=new Uint32Array(t,19*Uint32Array.BYTES_PER_ELEMENT,32/Uint32Array.BYTES_PER_ELEMENT),a=o[1];if(4&a){var h=o[2];if(808540228!==h){var l=st[h],u=new Uint8Array(t,128);return[new Q(u,{format:l,width:n,height:r,levels:s})]}var c=new Uint32Array(e.buffer,128,20/Uint32Array.BYTES_PER_ELEMENT),d=c[0],p=c[1],f=c[2],m=c[3],_=ot[d];if(void 0===_)throw new Error("DDSLoader cannot parse texture data with DXGI format "+d);if(4===f)throw new Error("DDSLoader does not support cubemap textures");if(p===$.DDS_DIMENSION_TEXTURE3D)throw new Error("DDSLoader does not supported 3D texture data");var g=new Array;if(1===m)g.push(new Uint8Array(t,148));else{for(var v=H[_],y=0,b=n,x=r,T=0;T<s;T++)y+=Math.max(1,b+3&-4)*Math.max(1,x+3&-4)*v,b>>>=1,x>>>=1;var S=148;for(T=0;T<m;T++)g.push(new Uint8Array(t,S,y)),S+=y}return g.map((function(t){return new Q(t,{format:_,width:n,height:r,levels:s})}))}if(64&a)throw new Error("DDSLoader does not support uncompressed texture data.");if(512&a)throw new Error("DDSLoader does not supported YUV uncompressed texture data.");if(131072&a)throw new Error("DDSLoader does not support single-channel (lumninance) texture data!");if(2&a)throw new Error("DDSLoader does not support single-channel (alpha) texture data!");throw new Error("DDSLoader failed to load a texture file due to an unknown reason!")},t}();V.kC.setExtensionXhrType("ktx",V.kC.XHR_RESPONSE_TYPE.BUFFER);var ht=[171,75,84,88,32,49,49,187,13,10,26,10],lt=((it={})[Y.vK.UNSIGNED_BYTE]=1,it[Y.vK.UNSIGNED_SHORT]=2,it[Y.vK.FLOAT]=4,it[Y.vK.HALF_FLOAT]=8,it),ut=((rt={})[Y.I2.RGBA]=4,rt[Y.I2.RGB]=3,rt[Y.I2.LUMINANCE]=1,rt[Y.I2.LUMINANCE_ALPHA]=2,rt[Y.I2.ALPHA]=1,rt),ct=((nt={})[Y.vK.UNSIGNED_SHORT_4_4_4_4]=2,nt[Y.vK.UNSIGNED_SHORT_5_5_5_1]=2,nt[Y.vK.UNSIGNED_SHORT_5_6_5]=2,nt),dt=function(){function t(){}return t.use=function(e,i){if("ktx"===e.extension&&e.data)try{var r=e.name||e.url;Object.assign(e,et(r,t.parse(r,e.data),e.metadata))}catch(t){return void i(t)}i()},t.parse=function(e,i){var r=new DataView(i);if(!t.validate(e,r))return null;var n=67305985===r.getUint32(12,!0),s=r.getUint32(16,n),o=r.getUint32(24,n),a=r.getUint32(28,n),h=r.getUint32(36,n),l=r.getUint32(40,n)||1,u=r.getUint32(44,n)||1,c=r.getUint32(48,n)||1,d=r.getUint32(52,n),p=r.getUint32(56,n),f=r.getUint32(60,n);if(0===l||1!==u)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==c)throw new Error("WebGL does not support array textures");var m,_=h+3&-4,g=l+3&-4,v=new Array(c),y=h*l;if(0===s&&(y=_*g),void 0===(m=0!==s?lt[s]?lt[s]*ut[o]:ct[s]:H[a]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var b=y*m,x=h,T=l,S=_,E=g,w=64+f,A=0;A<p;A++){for(var I=r.getUint32(w,n),C=w+4,O=0;O<c;O++){var M=v[O];M||(M=v[O]=new Array(p)),M[A]={levelID:A,levelWidth:p>1?x:S,levelHeight:p>1?T:E,levelBuffer:new Uint8Array(i,C,b)},C+=b}w=(w+=I+4)%4!=0?w+4-w%4:w,b=(S=(x=x>>1||1)+4-1&-4)*(E=(T=T>>1||1)+4-1&-4)*m}if(0!==s)throw new Error("TODO: Uncompressed");return v.map((function(t){return new Q(null,{format:a,width:h,height:l,levels:p,levelBuffers:t})}))},t.validate=function(t,e){for(var i=0;i<ht.length;i++)if(e.getUint8(i)!==ht[i])return console.error(t+" is not a valid *.ktx file!"),!1;return!0},t}(),pt=function(t,e){return(pt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function ft(t,e){function i(){this.constructor=t}pt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var mt,_t=function(t){function e(e,i,r,n){void 0===e&&(e=1500),void 0===r&&(r=16384),void 0===n&&(n=!1);var s=t.call(this)||this;return r>16384&&(r=16384),s._properties=[!1,!0,!1,!1,!1],s._maxSize=e,s._batchSize=r,s._buffers=null,s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=Y.T$.NORMAL,s.autoResize=n,s.roundPixels=!0,s.baseTexture=null,s.setProperties(i),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return ft(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){this._tint=t,(0,T.hex2rgb)(t,this.tintRgb)},enumerable:!1,configurable:!0}),e.prototype.render=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.dispose=function(){if(this._buffers){for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},e}(S.W2),gt=function(){function t(t,e,i){this.geometry=new F.ZX,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var r=0;r<t.length;++r){var n=t[r];n={attributeName:n.attributeName,size:n.size,uploadFunction:n.uploadFunction,type:n.type||Y.vK.FLOAT,offset:n.offset},e[r]?this.dynamicProperties.push(n):this.staticProperties.push(n)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.geometry,e=0;this.indexBuffer=new F.lW((0,T.createIndicesForQuads)(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i)(o=this.dynamicProperties[i]).offset=e,e+=o.size,this.dynamicStride+=o.size;var r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new F.lW(this.dynamicData,!1,!1);var n=0;for(this.staticStride=0,i=0;i<this.staticProperties.length;++i)(o=this.staticProperties[i]).offset=n,n+=o.size,this.staticStride+=o.size;var s=new ArrayBuffer(this.size*this.staticStride*4*4);for(this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new F.lW(this.staticData,!0,!1),i=0;i<this.dynamicProperties.length;++i){var o=this.dynamicProperties[i];t.addAttribute(o.attributeName,this.dynamicBuffer,0,o.type===Y.vK.UNSIGNED_BYTE,o.type,4*this.dynamicStride,4*o.offset)}for(i=0;i<this.staticProperties.length;++i)o=this.staticProperties[i],t.addAttribute(o.attributeName,this.staticBuffer,0,o.type===Y.vK.UNSIGNED_BYTE,o.type,4*this.staticStride,4*o.offset)},t.prototype.uploadDynamic=function(t,e,i){for(var r=0;r<this.dynamicProperties.length;r++){var n=this.dynamicProperties[r];n.uploadFunction(t,e,i,n.type===Y.vK.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer._updateID++},t.prototype.uploadStatic=function(t,e,i){for(var r=0;r<this.staticProperties.length;r++){var n=this.staticProperties[r];n.uploadFunction(t,e,i,n.type===Y.vK.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer._updateID++},t.prototype.destroy=function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()},t}(),vt=function(t){function e(e){var i=t.call(this,e)||this;return i.shader=null,i.properties=null,i.tempMatrix=new A.y3,i.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:i.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:i.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:i.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:i.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Y.vK.UNSIGNED_BYTE,uploadFunction:i.uploadTint,offset:0}],i.shader=F.ex.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),i.state=F.ZM.for2d(),i}return ft(e,t),e.prototype.render=function(t){var e=t.children,i=t._maxSize,r=t._batchSize,n=this.renderer,s=e.length;if(0!==s){s>i&&!t.autoResize&&(s=i);var o=t._buffers;o||(o=t._buffers=this.generateBuffers(t));var a=e[0]._texture.baseTexture;this.state.blendMode=(0,T.correctBlendMode)(t.blendMode,a.alphaMode),n.state.set(this.state);var h=n.gl,l=t.worldTransform.copyTo(this.tempMatrix);l.prepend(n.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=l.toArray(!0),this.shader.uniforms.uColor=(0,T.premultiplyRgba)(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,a.alphaMode),this.shader.uniforms.uSampler=a,this.renderer.shader.bind(this.shader);for(var u=!1,c=0,d=0;c<s;c+=r,d+=1){var p=s-c;p>r&&(p=r),d>=o.length&&o.push(this._generateOneMoreBuffer(t));var f=o[d];f.uploadDynamic(e,c,p);var m=t._bufferUpdateIDs[d]||0;(u=u||f._updateID<m)&&(f._updateID=t._updateID,f.uploadStatic(e,c,p)),n.geometry.bind(f.geometry),h.drawElements(h.TRIANGLES,6*p,h.UNSIGNED_SHORT,0)}}},e.prototype.generateBuffers=function(t){for(var e=[],i=t._maxSize,r=t._batchSize,n=t._properties,s=0;s<i;s+=r)e.push(new gt(this.properties,n,r));return e},e.prototype._generateOneMoreBuffer=function(t){var e=t._batchSize,i=t._properties;return new gt(this.properties,i,e)},e.prototype.uploadVertices=function(t,e,i,r,n,s){for(var o=0,a=0,h=0,l=0,u=0;u<i;++u){var c=t[e+u],d=c._texture,p=c.scale.x,f=c.scale.y,m=d.trim,_=d.orig;m?(o=(a=m.x-c.anchor.x*_.width)+m.width,h=(l=m.y-c.anchor.y*_.height)+m.height):(o=_.width*(1-c.anchor.x),a=_.width*-c.anchor.x,h=_.height*(1-c.anchor.y),l=_.height*-c.anchor.y),r[s]=a*p,r[s+1]=l*f,r[s+n]=o*p,r[s+n+1]=l*f,r[s+2*n]=o*p,r[s+2*n+1]=h*f,r[s+3*n]=a*p,r[s+3*n+1]=h*f,s+=4*n}},e.prototype.uploadPosition=function(t,e,i,r,n,s){for(var o=0;o<i;o++){var a=t[e+o].position;r[s]=a.x,r[s+1]=a.y,r[s+n]=a.x,r[s+n+1]=a.y,r[s+2*n]=a.x,r[s+2*n+1]=a.y,r[s+3*n]=a.x,r[s+3*n+1]=a.y,s+=4*n}},e.prototype.uploadRotation=function(t,e,i,r,n,s){for(var o=0;o<i;o++){var a=t[e+o].rotation;r[s]=a,r[s+n]=a,r[s+2*n]=a,r[s+3*n]=a,s+=4*n}},e.prototype.uploadUvs=function(t,e,i,r,n,s){for(var o=0;o<i;++o){var a=t[e+o]._texture._uvs;a?(r[s]=a.x0,r[s+1]=a.y0,r[s+n]=a.x1,r[s+n+1]=a.y1,r[s+2*n]=a.x2,r[s+2*n+1]=a.y2,r[s+3*n]=a.x3,r[s+3*n+1]=a.y3,s+=4*n):(r[s]=0,r[s+1]=0,r[s+n]=0,r[s+n+1]=0,r[s+2*n]=0,r[s+2*n+1]=0,r[s+3*n]=0,r[s+3*n+1]=0,s+=4*n)}},e.prototype.uploadTint=function(t,e,i,r,n,s){for(var o=0;o<i;++o){var a=t[e+o],h=a._texture.baseTexture.alphaMode>0,l=a.alpha,u=l<1&&h?(0,T.premultiplyTint)(a._tintRGB,l):a._tintRGB+(255*l<<24);r[s]=u,r[s+n]=u,r[s+2*n]=u,r[s+3*n]=u,s+=4*n}},e.prototype.destroy=function(){t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null},e}(F.bO),yt=i(9907),bt=i(2028),xt=i(7965),Tt=function(t,e){return(Tt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};!function(t){t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL"}(mt||(mt={}));var St={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:mt.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},Et=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],wt=function(){function t(t){this.styleID=0,this.reset(),Ct(this,t,t)}return t.prototype.clone=function(){var e={};return Ct(e,this,St),new t(e)},t.prototype.reset=function(){Ct(this,St,St)},Object.defineProperty(t.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"breakWords",{get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadow",{get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAlpha",{get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowAngle",{get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowBlur",{get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowColor",{get:function(){return this._dropShadowColor},set:function(t){var e=It(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dropShadowDistance",{get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fill",{get:function(){return this._fill},set:function(t){var e=It(t);this._fill!==e&&(this._fill=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientType",{get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fillGradientStops",{get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontStyle",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontVariant",{get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"leading",{get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lineJoin",{get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"miterLimit",{get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"stroke",{get:function(){return this._stroke},set:function(t){var e=It(t);this._stroke!==e&&(this._stroke=e,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"strokeThickness",{get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"textBaseline",{get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"trim",{get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"whiteSpace",{get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrap",{get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"wordWrapWidth",{get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)},enumerable:!1,configurable:!0}),t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var r=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&Et.indexOf(r)<0&&(r='"'+r+'"'),e[i]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},t}();function At(t){return"number"==typeof t?(0,T.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function It(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=At(t[e]);return t}return At(t)}function Ct(t,e,i){for(var r in i)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}var Ot=function(){function t(t,e,i,r,n,s,o,a,h){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=n,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h}return t.measureText=function(e,i,r,n){void 0===n&&(n=t._canvas),r=null==r?i.wordWrap:r;var s=i.toFontString(),o=t.measureFont(s);0===o.fontSize&&(o.fontSize=i.fontSize,o.ascent=i.fontSize);var a=n.getContext("2d");a.font=s;for(var h=(r?t.wordWrap(e,i,n):e).split(/(?:\r\n|\r|\n)/),l=new Array(h.length),u=0,c=0;c<h.length;c++){var d=a.measureText(h[c]).width+(h[c].length-1)*i.letterSpacing;l[c]=d,u=Math.max(u,d)}var p=u+i.strokeThickness;i.dropShadow&&(p+=i.dropShadowDistance);var f=i.lineHeight||o.fontSize+i.strokeThickness,m=Math.max(f,o.fontSize+i.strokeThickness)+(h.length-1)*(f+i.leading);return i.dropShadow&&(m+=i.dropShadowDistance),new t(e,i,p,m,h,l,f+i.leading,u,o)},t.wordWrap=function(e,i,r){void 0===r&&(r=t._canvas);for(var n=r.getContext("2d"),s=0,o="",a="",h=Object.create(null),l=i.letterSpacing,u=i.whiteSpace,c=t.collapseSpaces(u),d=t.collapseNewlines(u),p=!c,f=i.wordWrapWidth+l,m=t.tokenize(e),_=0;_<m.length;_++){var g=m[_];if(t.isNewline(g)){if(!d){a+=t.addLine(o),p=!c,o="",s=0;continue}g=" "}if(c){var v=t.isBreakingSpace(g),y=t.isBreakingSpace(o[o.length-1]);if(v&&y)continue}var b=t.getFromCache(g,l,h,n);if(b>f)if(""!==o&&(a+=t.addLine(o),o="",s=0),t.canBreakWords(g,i.breakWords))for(var x=t.wordWrapSplit(g),T=0;T<x.length;T++){for(var S=x[T],E=1;x[T+E];){var w=x[T+E],A=S[S.length-1];if(t.canBreakChars(A,w,g,T,i.breakWords))break;S+=w,E++}T+=S.length-1;var I=t.getFromCache(S,l,h,n);I+s>f&&(a+=t.addLine(o),p=!1,o="",s=0),o+=S,s+=I}else{o.length>0&&(a+=t.addLine(o),o="",s=0);var C=_===m.length-1;a+=t.addLine(g,!C),p=!1,o="",s=0}else b+s>f&&(p=!1,a+=t.addLine(o),o="",s=0),(o.length>0||!t.isBreakingSpace(g)||p)&&(o+=g,s+=b)}return a+t.addLine(o,!1)},t.addLine=function(e,i){return void 0===i&&(i=!0),e=t.trimRight(e),i?e+"\n":e},t.getFromCache=function(t,e,i,r){var n=i[t];if("number"!=typeof n){var s=t.length*e;n=r.measureText(t).width+s,i[t]=n}return n},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var r=e[i];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e,i){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],r="";if("string"!=typeof e)return i;for(var n=0;n<e.length;n++){var s=e[n],o=e[n+1];t.isBreakingSpace(s,o)||t.isNewline(s)?(""!==r&&(i.push(r),r=""),i.push(s)):r+=s}return""!==r&&i.push(r),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,r,n){return!0},t.wordWrapSplit=function(t){return t.split("")},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={ascent:0,descent:0,fontSize:0},r=t._canvas,n=t._context;n.font=e;var s=t.METRICS_STRING+t.BASELINE_SYMBOL,o=Math.ceil(n.measureText(s).width),a=Math.ceil(n.measureText(t.BASELINE_SYMBOL).width),h=Math.ceil(t.HEIGHT_MULTIPLIER*a);a=a*t.BASELINE_MULTIPLIER|0,r.width=o,r.height=h,n.fillStyle="#f00",n.fillRect(0,0,o,h),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(s,0,a);var l=n.getImageData(0,0,o,h).data,u=l.length,c=4*o,d=0,p=0,f=!1;for(d=0;d<a;++d){for(var m=0;m<c;m+=4)if(255!==l[p+m]){f=!0;break}if(f)break;p+=c}for(i.ascent=a-d,p=u-c,f=!1,d=h;d>a;--d){for(m=0;m<c;m+=4)if(255!==l[p+m]){f=!0;break}if(f)break;p-=c}return i.descent=d-a,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(e){void 0===e&&(e=""),e?delete t._fonts[e]:t._fonts={}},t}(),Mt=function(){try{var t=new OffscreenCanvas(0,0),e=t.getContext("2d");return e&&e.measureText?t:document.createElement("canvas")}catch(t){return document.createElement("canvas")}}();Mt.width=Mt.height=10,Ot._canvas=Mt,Ot._context=Mt.getContext("2d"),Ot._fonts={},Ot.METRICS_STRING="|ÉqÅ",Ot.BASELINE_SYMBOL="M",Ot.BASELINE_MULTIPLIER=1.4,Ot.HEIGHT_MULTIPLIER=2,Ot._newlines=[10,13],Ot._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var Pt={texture:!0,children:!1,baseTexture:!0},Rt=function(t){function e(e,i,r){var n=this,s=!1;r||(r=document.createElement("canvas"),s=!0),r.width=3,r.height=3;var o=F.xE.from(r);return o.orig=new A.Ae,o.trim=new A.Ae,(n=t.call(this,o)||this)._ownCanvas=s,n.canvas=r,n.context=n.canvas.getContext("2d"),n._resolution=yt.X.RESOLUTION,n._autoResolution=!0,n._text=null,n._style=null,n._styleListener=null,n._font="",n.text=e,n.style=i,n.localStyleID=-1,n}return function(t,e){function i(){this.constructor=t}Tt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(t){var i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),this.dirty||!t){this._font=this._style.toFontString();var r,n,s=this.context,o=Ot.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=o.width,h=o.height,l=o.lines,u=o.lineHeight,c=o.lineWidths,d=o.maxLineWidth,p=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+2*i.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,h)+2*i.padding)*this._resolution),s.scale(this._resolution,this._resolution),s.clearRect(0,0,this.canvas.width,this.canvas.height),s.font=this._font,s.lineWidth=i.strokeThickness,s.textBaseline=i.textBaseline,s.lineJoin=i.lineJoin,s.miterLimit=i.miterLimit;for(var f=i.dropShadow?2:1,m=0;m<f;++m){var _=i.dropShadow&&0===m,g=_?Math.ceil(Math.max(1,h)+2*i.padding):0,v=g*this._resolution;if(_){s.fillStyle="black",s.strokeStyle="black";var y=i.dropShadowColor,b=(0,T.hex2rgb)("number"==typeof y?y:(0,T.string2hex)(y));s.shadowColor="rgba("+255*b[0]+","+255*b[1]+","+255*b[2]+","+i.dropShadowAlpha+")",s.shadowBlur=i.dropShadowBlur,s.shadowOffsetX=Math.cos(i.dropShadowAngle)*i.dropShadowDistance,s.shadowOffsetY=Math.sin(i.dropShadowAngle)*i.dropShadowDistance+v}else s.fillStyle=this._generateFillStyle(i,l,o),s.strokeStyle=i.stroke,s.shadowColor="black",s.shadowBlur=0,s.shadowOffsetX=0,s.shadowOffsetY=0;var x=(u-p.fontSize)/2;(!e.nextLineHeightBehavior||u-p.fontSize<0)&&(x=0);for(var S=0;S<l.length;S++)r=i.strokeThickness/2,n=i.strokeThickness/2+S*u+p.ascent+x,"right"===i.align?r+=d-c[S]:"center"===i.align&&(r+=(d-c[S])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(l[S],r+i.padding,n+i.padding-g,!0),i.fill&&this.drawLetterSpacing(l[S],r+i.padding,n+i.padding-g)}this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i,r){void 0===r&&(r=!1);var n=this._style.letterSpacing,s="letterSpacing"in CanvasRenderingContext2D.prototype||"textLetterSpacing"in CanvasRenderingContext2D.prototype;if(0===n||s)return s&&(this.context.letterSpacing=n,this.context.textLetterSpacing=n),void(r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i));for(var o=e,a=Array.from?Array.from(t):t.split(""),h=this.context.measureText(t).width,l=0,u=0;u<a.length;++u){var c=a[u];r?this.context.strokeText(c,o,i):this.context.fillText(c,o,i),o+=h-(l=this.context.measureText(t.substring(u+1)).width)+n,h=l}},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,T.trimCanvas)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,r=this._style,n=r.trim?0:r.padding,s=i.baseTexture;i.trim.width=i._frame.width=t.width/this._resolution,i.trim.height=i._frame.height=t.height/this._resolution,i.trim.x=-n,i.trim.y=-n,i.orig.width=i._frame.width-2*n,i.orig.height=i._frame.height-2*n,this._onTextureUpdate(),s.setRealSize(t.width,t.height,this._resolution),i.updateUvs(),this._recursivePostUpdateTransform(),this.dirty=!1},e.prototype._render=function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._generateFillStyle=function(t,e,i){var r,n=t.fill;if(!Array.isArray(n))return n;if(1===n.length)return n[0];var s=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=this.canvas.width/this._resolution-s-2*o,h=this.canvas.height/this._resolution-s-2*o,l=n.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var c=l.length+1,d=1;d<c;++d)u.push(d/c);if(l.unshift(n[0]),u.unshift(0),l.push(n[n.length-1]),u.push(1),t.fillGradientType===mt.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,o,a/2,h+o);var p=i.fontProperties.fontSize+t.strokeThickness;for(d=0;d<e.length;d++){var f=i.lineHeight*(d-1)+p,m=i.lineHeight*d,_=m;d>0&&f>m&&(_=(m+f)/2);var g=m+p,v=i.lineHeight*(d+1),y=g;d+1<e.length&&v<g&&(y=(g+v)/2);for(var b=(y-_)/h,x=0;x<l.length;x++){var T;T="number"==typeof u[x]?u[x]:x/l.length;var S=Math.min(1,Math.max(0,_/h+T*b));S=Number(S.toFixed(5)),r.addColorStop(S,l[x])}}}else{r=this.context.createLinearGradient(o,h/2,a+o,h/2);var E=l.length+1,w=1;for(d=0;d<l.length;d++){var A;A="number"==typeof u[d]?u[d]:w/E,r.addColorStop(A,l[d]),w++}}return r},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},Pt,e),t.prototype.destroy.call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,T.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,T.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t=t||{},this._style=t instanceof wt?t:new wt(t),this.localStyleID=-1,this.dirty=!0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolution",{get:function(){return this._resolution},set:function(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)},enumerable:!1,configurable:!0}),e.nextLineHeightBehavior=!1,e}(xt.j);yt.X.UPLOADS_PER_FRAME=4;var Dt=function(t,e){return(Dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},Nt=function(){function t(t){this.maxItemsPerFrame=t,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();function Ut(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof F.xE){var n=t._textures[r].baseTexture;-1===e.indexOf(n)&&(e.push(n),i=!0)}return i}function Ft(t,e){if(t.baseTexture instanceof F.VL){var i=t.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Lt(t,e){if(t._texture&&t._texture instanceof F.xE){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function kt(t,e){return e instanceof Rt&&(e.updateText(!0),!0)}function Bt(t,e){if(e instanceof wt){var i=e.toFontString();return Ot.measureFont(i),!0}return!1}function Gt(t,e){if(t instanceof Rt){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function Xt(t,e){return t instanceof wt&&(-1===e.indexOf(t)&&e.push(t),!0)}var jt=function(){function t(t){var e=this;this.limiter=new Nt(yt.X.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(Gt),this.registerFindHook(Xt),this.registerFindHook(Ut),this.registerFindHook(Ft),this.registerFindHook(Lt),this.registerUploadHook(kt),this.registerUploadHook(Bt)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,I.vB.system.addOnce(this.tick,this,I.uF.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)I.vB.system.addOnce(this.tick,this,I.uF.UTILITY);else{this.ticking=!1;var n=this.completes.slice(0);for(this.completes.length=0,i=0,r=n.length;i<r;i++)n[i]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof S.W2)for(e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this},t.prototype.destroy=function(){this.ticking&&I.vB.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function Vt(t,e){return e instanceof F.VL&&(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0)}function Yt(t,e){if(!(e instanceof bt.TC))return!1;var i=e.geometry;e.finishPoly(),i.updateBatches();for(var r=i.batches,n=0;n<r.length;n++){var s=r[n].style.texture;s&&Vt(t,s.baseTexture)}return i.batchable||t.geometry.bind(i,e._resolveDirectShader(t)),!0}function Ht(t,e){return t instanceof bt.TC&&(e.push(t),!0)}var Wt=function(t){function e(e){var i=t.call(this,e)||this;return i.uploadHookHelper=i.renderer,i.registerFindHook(Ht),i.registerUploadHook(Vt),i.registerUploadHook(Yt),i}return function(t,e){function i(){this.constructor=t}Dt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(jt),zt=function(){function t(t){this.maxMilliseconds=t,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}(),qt=function(){function t(t,e,i){void 0===i&&(i=null),this._texture=t instanceof F.xE?t:null,this.baseTexture=t instanceof F.VL?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;var r=this.baseTexture.resource;this.resolution=this._updateResolution(i||(r?r.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return t.prototype._updateResolution=function(t){void 0===t&&(t=null);var e=this.data.meta.scale,i=(0,T.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&this.baseTexture.setResolution(i),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,r=t.BATCH_SIZE;i-e<r&&i<this._frameKeys.length;){var n=this._frameKeys[i],s=this._frames[n],o=s.frame;if(o){var a,h=null,l=!1!==s.trimmed&&s.sourceSize?s.sourceSize:s.frame,u=new A.Ae(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);a=s.rotated?new A.Ae(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):new A.Ae(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),!1!==s.trimmed&&s.spriteSourceSize&&(h=new A.Ae(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[n]=new F.xE(this.baseTexture,a,u,h,s.rotated?2:0,s.anchor),F.xE.addToCache(this.textures[n],n)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];for(var i=0;i<t[e].length;i++){var r=t[e][i];this.animations[e].push(this.textures[r])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(t){var e;for(var i in void 0===t&&(t=!1),this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null},t.BATCH_SIZE=1e3,t}(),Kt=function(){function t(){}return t.use=function(e,i){var r,n,s=this,o=e.name+"_image";if(e.data&&e.type===V.kC.TYPE.JSON&&e.data.frames&&!s.resources[o]){var a=null===(n=null===(r=e.data)||void 0===r?void 0:r.meta)||void 0===n?void 0:n.related_multi_packs;if(Array.isArray(a))for(var h=function(t){if("string"!=typeof t)return"continue";var i=t.replace(".json",""),r=T.url.resolve(e.url.replace(s.baseUrl,""),t);if(s.resources[i]||Object.values(s.resources).some((function(t){return T.url.format(T.url.parse(t.url))===r})))return"continue";var n={crossOrigin:e.crossOrigin,loadType:V.kC.LOAD_TYPE.XHR,xhrType:V.kC.XHR_RESPONSE_TYPE.JSON,parentResource:e,metadata:e.metadata};s.add(i,r,n)},l=0,u=a;l<u.length;l++)h(u[l]);var c={crossOrigin:e.crossOrigin,metadata:e.metadata.imageMetadata,parentResource:e},d=t.getResourcePath(e,s.baseUrl);s.add(o,d,c,(function(t){if(t.error)i(t.error);else{var r=new qt(t.texture,e.data,e.url);r.parse((function(){e.spritesheet=r,e.textures=r.textures,i()}))}}))}else i()},t.getResourcePath=function(t,e){return t.isDataUrl?t.data.meta.image:T.url.resolve(t.url.replace(e,""),t.data.meta.image)},t}(),Zt=function(t,e){return(Zt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function $t(t,e){function i(){this.constructor=t}Zt(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Jt=new A.E9,Qt=function(t){function e(e,i,r){void 0===i&&(i=100),void 0===r&&(r=100);var n=t.call(this,e)||this;return n.tileTransform=new A.wx,n._width=i,n._height=r,n.uvMatrix=n.texture.uvMatrix||new F.UX(e),n.pluginName="tilingSprite",n.uvRespectAnchor=!1,n}return $t(e,t),Object.defineProperty(e.prototype,"clampMargin",{get:function(){return this.uvMatrix.clampMargin},set:function(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tileScale",{get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tilePosition",{get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copyFrom(t)},enumerable:!1,configurable:!0}),e.prototype._onTextureUpdate=function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215},e.prototype._render=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new A.Ae),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,Jt);var e=this._width,i=this._height,r=-e*this.anchor._x;if(Jt.x>=r&&Jt.x<r+e){var n=-i*this.anchor._y;if(Jt.y>=n&&Jt.y<n+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvMatrix=null},e.from=function(t,i){return new e(t instanceof F.xE?t:F.xE.from(t,i),i.width,i.height)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t},enumerable:!1,configurable:!0}),e}(xt.j),te="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",ee=new A.y3,ie=function(t){function e(e){var i=t.call(this,e)||this;return e.runners.contextChange.add(i),i.quad=new F.ud,i.state=F.ZM.for2d(),i}return $t(e,t),e.prototype.contextChange=function(){var t=this.renderer,e={globals:t.globalUniforms};this.simpleShader=F.ex.from(te,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",e),this.shader=t.context.webGLVersion>1?F.ex.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",e):F.ex.from(te,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",e)},e.prototype.render=function(t){var e=this.renderer,i=this.quad,r=i.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y);var n=t.uvRespectAnchor?t.anchor.x:0,s=t.uvRespectAnchor?t.anchor.y:0;(r=i.uvs)[0]=r[6]=-n,r[1]=r[3]=-s,r[2]=r[4]=1-n,r[5]=r[7]=1-s,i.invalidate();var o=t._texture,a=o.baseTexture,h=t.tileTransform.localTransform,l=t.uvMatrix,u=a.isPowerOfTwo&&o.frame.width===a.width&&o.frame.height===a.height;u&&(a._glTextures[e.CONTEXT_UID]?u=a.wrapMode!==Y.Nt.CLAMP:a.wrapMode===Y.Nt.CLAMP&&(a.wrapMode=Y.Nt.REPEAT));var c=u?this.simpleShader:this.shader,d=o.width,p=o.height,f=t._width,m=t._height;ee.set(h.a*d/f,h.b*d/m,h.c*p/f,h.d*p/m,h.tx/f,h.ty/m),ee.invert(),u?ee.prepend(l.mapCoord):(c.uniforms.uMapCoord=l.mapCoord.toArray(!0),c.uniforms.uClampFrame=l.uClampFrame,c.uniforms.uClampOffset=l.uClampOffset),c.uniforms.uTransform=ee.toArray(!0),c.uniforms.uColor=(0,T.premultiplyTintToRgba)(t.tint,t.worldAlpha,c.uniforms.uColor,a.alphaMode),c.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),c.uniforms.uSampler=o,e.shader.bind(c),e.geometry.bind(i),this.state.blendMode=(0,T.correctBlendMode)(t.blendMode,a.alphaMode),e.state.set(this.state),e.geometry.draw(this.renderer.gl.TRIANGLES,6,0)},e}(F.bO),re=i(5890),ne=function(t,e){return(ne=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},se=function(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]},oe=function(){function t(){}return t.test=function(t){return"string"==typeof t&&0===t.indexOf("info face=")},t.parse=function(t){var e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var r in e){var n=e[r].match(/^[a-z]+/gm)[0],s=e[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var a in s){var h=s[a].split("="),l=h[0],u=h[1].replace(/"/gm,""),c=parseFloat(u),d=isNaN(c)?u:c;o[l]=d}i[n].push(o)}var p=new se;return i.info.forEach((function(t){return p.info.push({face:t.face,size:parseInt(t.size,10)})})),i.common.forEach((function(t){return p.common.push({lineHeight:parseInt(t.lineHeight,10)})})),i.page.forEach((function(t){return p.page.push({id:parseInt(t.id,10),file:t.file})})),i.char.forEach((function(t){return p.char.push({id:parseInt(t.id,10),page:parseInt(t.page,10),x:parseInt(t.x,10),y:parseInt(t.y,10),width:parseInt(t.width,10),height:parseInt(t.height,10),xoffset:parseInt(t.xoffset,10),yoffset:parseInt(t.yoffset,10),xadvance:parseInt(t.xadvance,10)})})),i.kerning.forEach((function(t){return p.kerning.push({first:parseInt(t.first,10),second:parseInt(t.second,10),amount:parseInt(t.amount,10)})})),i.distanceField.forEach((function(t){return p.distanceField.push({distanceRange:parseInt(t.distanceRange,10),fieldType:t.fieldType})})),p},t}(),ae=function(){function t(){}return t.test=function(t){return t instanceof XMLDocument&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")},t.parse=function(t){for(var e=new se,i=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),n=t.getElementsByTagName("page"),s=t.getElementsByTagName("char"),o=t.getElementsByTagName("kerning"),a=t.getElementsByTagName("distanceField"),h=0;h<i.length;h++)e.info.push({face:i[h].getAttribute("face"),size:parseInt(i[h].getAttribute("size"),10)});for(h=0;h<r.length;h++)e.common.push({lineHeight:parseInt(r[h].getAttribute("lineHeight"),10)});for(h=0;h<n.length;h++)e.page.push({id:parseInt(n[h].getAttribute("id"),10)||0,file:n[h].getAttribute("file")});for(h=0;h<s.length;h++){var l=s[h];e.char.push({id:parseInt(l.getAttribute("id"),10),page:parseInt(l.getAttribute("page"),10)||0,x:parseInt(l.getAttribute("x"),10),y:parseInt(l.getAttribute("y"),10),width:parseInt(l.getAttribute("width"),10),height:parseInt(l.getAttribute("height"),10),xoffset:parseInt(l.getAttribute("xoffset"),10),yoffset:parseInt(l.getAttribute("yoffset"),10),xadvance:parseInt(l.getAttribute("xadvance"),10)})}for(h=0;h<o.length;h++)e.kerning.push({first:parseInt(o[h].getAttribute("first"),10),second:parseInt(o[h].getAttribute("second"),10),amount:parseInt(o[h].getAttribute("amount"),10)});for(h=0;h<a.length;h++)e.distanceField.push({fieldType:a[h].getAttribute("fieldType"),distanceRange:parseInt(a[h].getAttribute("distanceRange"),10)});return e},t}(),he=function(){function t(){}return t.test=function(t){if("string"==typeof t&&t.indexOf("<font>")>-1){var e=(new self.DOMParser).parseFromString(t,"text/xml");return ae.test(e)}return!1},t.parse=function(t){var e=(new self.DOMParser).parseFromString(t,"text/xml");return ae.parse(e)},t}(),le=[oe,ae,he];function ue(t){for(var e=0;e<le.length;e++)if(le[e].test(t))return le[e];return null}function ce(t,e,i,r,n,s,o){var a=i.text,h=i.fontProperties;e.translate(r,n),e.scale(s,s);var l=o.strokeThickness/2,u=-o.strokeThickness/2;e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=function(t,e,i,r,n,s){var o,a=i.fill;if(!Array.isArray(a))return a;if(1===a.length)return a[0];var h=i.dropShadow?i.dropShadowDistance:0,l=i.padding||0,u=t.width/r-h-2*l,c=t.height/r-h-2*l,d=a.slice(),p=i.fillGradientStops.slice();if(!p.length)for(var f=d.length+1,m=1;m<f;++m)p.push(m/f);if(d.unshift(a[0]),p.unshift(0),d.push(a[a.length-1]),p.push(1),i.fillGradientType===mt.LINEAR_VERTICAL){o=e.createLinearGradient(u/2,l,u/2,c+l);var _=0,g=(s.fontProperties.fontSize+i.strokeThickness)/c;for(m=0;m<n.length;m++)for(var v=s.lineHeight*m,y=0;y<d.length;y++){var b=v/c+("number"==typeof p[y]?p[y]:y/d.length)*g,x=Math.max(_,b);x=Math.min(x,1),o.addColorStop(x,d[y]),_=x}}else{o=e.createLinearGradient(l,c/2,u+l,c/2);var T=d.length+1,S=1;for(m=0;m<d.length;m++){var E;E="number"==typeof p[m]?p[m]:S/T,o.addColorStop(E,d[m]),S++}}return o}(t,e,o,s,[a],i),e.strokeStyle=o.stroke;var c=o.dropShadowColor,d=(0,T.hex2rgb)("number"==typeof c?c:(0,T.string2hex)(c));o.dropShadow?(e.shadowColor="rgba("+255*d[0]+","+255*d[1]+","+255*d[2]+","+o.dropShadowAlpha+")",e.shadowBlur=o.dropShadowBlur,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*o.dropShadowDistance,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*o.dropShadowDistance):(e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0),o.stroke&&o.strokeThickness&&e.strokeText(a,l,u+i.lineHeight-h.descent),o.fill&&e.fillText(a,l,u+i.lineHeight-h.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function de(t){return Array.from?Array.from(t):t.split("")}function pe(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}var fe=function(){function t(t,e,i){var r,n,s=t.info[0],o=t.common[0],a=t.page[0],h=t.distanceField[0],l=(0,T.getResolutionOfUrl)(a.file),u={};this._ownsTextures=i,this.font=s.face,this.size=s.size,this.lineHeight=o.lineHeight/l,this.chars={},this.pageTextures=u;for(var c=0;c<t.page.length;c++){var d=t.page[c],p=d.id,f=d.file;u[p]=e instanceof Array?e[c]:e[f],(null==h?void 0:h.fieldType)&&"none"!==h.fieldType&&(u[p].baseTexture.alphaMode=Y.iw.NO_PREMULTIPLIED_ALPHA)}for(c=0;c<t.char.length;c++){var m=t.char[c],_=(p=m.id,m.page),g=t.char[c],v=g.x,y=g.y,b=g.width,x=g.height,S=g.xoffset,E=g.yoffset,w=g.xadvance;v/=l,y/=l,b/=l,x/=l,S/=l,E/=l,w/=l;var I=new A.Ae(v+u[_].frame.x/l,y+u[_].frame.y/l,b,x);this.chars[p]={xOffset:S,yOffset:E,xAdvance:w,kerning:{},texture:new F.xE(u[_].baseTexture,I),page:_}}for(c=0;c<t.kerning.length;c++){var C=t.kerning[c],O=C.first,M=C.second,P=C.amount;O/=l,M/=l,P/=l,this.chars[M]&&(this.chars[M].kerning[O]=P)}this.distanceFieldRange=null==h?void 0:h.distanceRange,this.distanceFieldType=null!==(n=null===(r=null==h?void 0:h.fieldType)||void 0===r?void 0:r.toLowerCase())&&void 0!==n?n:"none"}return t.prototype.destroy=function(){for(var t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null},t.install=function(e,i,r){var n;if(e instanceof se)n=e;else{var s=ue(e);if(!s)throw new Error("Unrecognized data format for font.");n=s.parse(e)}i instanceof F.xE&&(i=[i]);var o=new t(n,i,r);return t.available[o.font]=o,o},t.uninstall=function(e){var i=t.available[e];if(!i)throw new Error("No font found named '"+e+"'");i.destroy(),delete t.available[e]},t.from=function(e,i,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");var n=Object.assign({},t.defaultOptions,r),s=n.chars,o=n.padding,a=n.resolution,h=n.textureWidth,l=n.textureHeight,u=function(t){"string"==typeof t&&(t=[t]);for(var e=[],i=0,r=t.length;i<r;i++){var n=t[i];if(Array.isArray(n)){if(2!==n.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got "+n.length+".");var s=n[0].charCodeAt(0),o=n[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(var a=s,h=o;a<=h;a++)e.push(String.fromCharCode(a))}else e.push.apply(e,de(n))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}(s),c=i instanceof wt?i:new wt(i),d=h,p=new se;p.info[0]={face:c.fontFamily,size:c.fontSize},p.common[0]={lineHeight:c.fontSize};for(var f,m,_,g=0,v=0,y=0,b=[],x=0;x<u.length;x++){f||((f=document.createElement("canvas")).width=h,f.height=l,m=f.getContext("2d"),_=new F.VL(f,{resolution:a}),b.push(new F.xE(_)),p.page.push({id:b.length-1,file:""}));var T=Ot.measureText(u[x],c,!1,f),S=T.width,E=Math.ceil(T.height),w=Math.ceil(("italic"===c.fontStyle?2:1)*S);if(v>=l-E*a){if(0===v)throw new Error("[BitmapFont] textureHeight "+l+"px is too small for "+c.fontSize+"px fonts");--x,f=null,m=null,_=null,v=0,g=0,y=0}else if(y=Math.max(E+T.fontProperties.descent,y),w*a+g>=d)--x,v+=y*a,v=Math.ceil(v),g=0,y=0;else{ce(f,m,T,g,v,a,c);var A=pe(T.text);p.char.push({id:A,page:b.length-1,x:g/a,y:v/a,width:w,height:E,xoffset:0,yoffset:0,xadvance:Math.ceil(S-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0))}),g+=(w+2*o)*a,g=Math.ceil(g)}}x=0;for(var I=u.length;x<I;x++)for(var C=u[x],O=0;O<I;O++){var M=u[O],P=m.measureText(C).width,R=m.measureText(M).width,D=m.measureText(C+M).width-(P+R);D&&p.kerning.push({first:pe(C),second:pe(M),amount:D})}var N=new t(p,b,!0);return void 0!==t.available[e]&&t.uninstall(e),t.available[e]=N,N},t.ALPHA=[["a","z"],["A","Z"]," "],t.NUMERIC=[["0","9"]],t.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],t.ASCII=[[" ","~"]],t.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:t.ALPHANUMERIC},t.available={},t}(),me=[],_e=[],ge=[],ve=function(t){function e(i,r){void 0===r&&(r={});var n=t.call(this)||this;n._tint=16777215;var s=Object.assign({},e.styleDefaults,r),o=s.align,a=s.tint,h=s.maxWidth,l=s.letterSpacing,u=s.fontName,c=s.fontSize;if(!fe.available[u])throw new Error('Missing BitmapFont "'+u+'"');return n._activePagesMeshData=[],n._textWidth=0,n._textHeight=0,n._align=o,n._tint=a,n._fontName=u,n._fontSize=c||fe.available[u].size,n._text=i,n._maxWidth=h,n._maxLineHeight=0,n._letterSpacing=l,n._anchor=new A.AB((function(){n.dirty=!0}),n,0,0),n._roundPixels=yt.X.ROUND_PIXELS,n.dirty=!0,n._textureCache={},n}return function(t,e){function i(){this.constructor=t}ne(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.updateText=function(){for(var t,e=fe.available[this._fontName],i=this._fontSize/e.size,r=new A.E9,n=[],s=[],o=[],a=de(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),h=this._maxWidth*e.size/this._fontSize,l="none"===e.distanceFieldType?me:_e,u=null,c=0,d=0,p=0,f=-1,m=0,_=0,g=0,v=0,y=0;y<a.length;y++){var b=pe(V=a[y]);if(/(?:\s)/.test(V)&&(f=y,m=c,v++),"\r"!==V&&"\n"!==V){var x=e.chars[b];if(x){u&&x.kerning[u]&&(r.x+=x.kerning[u]);var S=ge.pop()||{texture:F.xE.EMPTY,line:0,charCode:0,prevSpaces:0,position:new A.E9};S.texture=x.texture,S.line=p,S.charCode=b,S.position.x=r.x+x.xOffset+this._letterSpacing/2,S.position.y=r.y+x.yOffset,S.prevSpaces=v,n.push(S),c=S.position.x+x.texture.orig.width,r.x+=x.xAdvance+this._letterSpacing,g=Math.max(g,x.yOffset+x.texture.height),u=b,-1!==f&&h>0&&r.x>h&&(++_,(0,T.removeItems)(n,1+f-_,1+y-f),y=f,f=-1,s.push(m),o.push(n.length>0?n[n.length-1].prevSpaces:0),d=Math.max(d,m),p++,r.x=0,r.y+=e.lineHeight,u=null,v=0)}}else s.push(c),o.push(-1),d=Math.max(d,c),++p,++_,r.x=0,r.y+=e.lineHeight,u=null,v=0}var E=a[a.length-1];"\r"!==E&&"\n"!==E&&(/(?:\s)/.test(E)&&(c=m),s.push(c),d=Math.max(d,c),o.push(-1));var w=[];for(y=0;y<=p;y++){var I=0;"right"===this._align?I=d-s[y]:"center"===this._align?I=(d-s[y])/2:"justify"===this._align&&(I=o[y]<0?0:(d-s[y])/o[y]),w.push(I)}var C=n.length,O={},M=[],P=this._activePagesMeshData;for(y=0;y<P.length;y++)l.push(P[y]);for(y=0;y<C;y++){var R=(W=n[y].texture).baseTexture.uid;if(!O[R]){if(!(Q=l.pop())){var D=new re.xc,N=void 0,U=void 0;"none"===e.distanceFieldType?(N=new re.rY(F.xE.EMPTY),U=Y.T$.NORMAL):(N=new re.rY(F.xE.EMPTY,{program:F.$r.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r\n\r\n}\r\n"),uniforms:{uFWidth:0}}),U=Y.T$.NORMAL_NPM);var L=new re.Kj(D,N);L.blendMode=U,Q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:L,vertices:null,uvs:null,indices:null}}Q.index=0,Q.indexCount=0,Q.vertexCount=0,Q.uvsCount=0,Q.total=0;var k=this._textureCache;k[R]=k[R]||new F.xE(W.baseTexture),Q.mesh.texture=k[R],Q.mesh.tint=this._tint,M.push(Q),O[R]=Q}O[R].total++}for(y=0;y<P.length;y++)-1===M.indexOf(P[y])&&this.removeChild(P[y].mesh);for(y=0;y<M.length;y++)M[y].mesh.parent!==this&&this.addChild(M[y].mesh);for(var y in this._activePagesMeshData=M,O){var B=(Q=O[y]).total;if(!((null===(t=Q.indices)||void 0===t?void 0:t.length)>6*B)||Q.vertices.length<2*re.Kj.BATCHABLE_SIZE)Q.vertices=new Float32Array(8*B),Q.uvs=new Float32Array(8*B),Q.indices=new Uint16Array(6*B);else for(var G=Q.total,X=Q.vertices,j=4*G*2;j<X.length;j++)X[j]=0;Q.mesh.size=6*B}for(y=0;y<C;y++){var V,H=(V=n[y]).position.x+w[V.line]*("justify"===this._align?V.prevSpaces:1);this._roundPixels&&(H=Math.round(H));var W,z=H*i,q=V.position.y*i,K=O[(W=V.texture).baseTexture.uid],Z=W.frame,$=W._uvs,J=K.index++;K.indices[6*J+0]=0+4*J,K.indices[6*J+1]=1+4*J,K.indices[6*J+2]=2+4*J,K.indices[6*J+3]=0+4*J,K.indices[6*J+4]=2+4*J,K.indices[6*J+5]=3+4*J,K.vertices[8*J+0]=z,K.vertices[8*J+1]=q,K.vertices[8*J+2]=z+Z.width*i,K.vertices[8*J+3]=q,K.vertices[8*J+4]=z+Z.width*i,K.vertices[8*J+5]=q+Z.height*i,K.vertices[8*J+6]=z,K.vertices[8*J+7]=q+Z.height*i,K.uvs[8*J+0]=$.x0,K.uvs[8*J+1]=$.y0,K.uvs[8*J+2]=$.x1,K.uvs[8*J+3]=$.y1,K.uvs[8*J+4]=$.x2,K.uvs[8*J+5]=$.y2,K.uvs[8*J+6]=$.x3,K.uvs[8*J+7]=$.y3}for(var y in this._textWidth=d*i,this._textHeight=(r.y+e.lineHeight)*i,O){var Q=O[y];if(0!==this.anchor.x||0!==this.anchor.y)for(var tt=0,et=this._textWidth*this.anchor.x,it=this._textHeight*this.anchor.y,rt=0;rt<Q.total;rt++)Q.vertices[tt++]-=et,Q.vertices[tt++]-=it,Q.vertices[tt++]-=et,Q.vertices[tt++]-=it,Q.vertices[tt++]-=et,Q.vertices[tt++]-=it,Q.vertices[tt++]-=et,Q.vertices[tt++]-=it;this._maxLineHeight=g*i;var nt=Q.mesh.geometry.getBuffer("aVertexPosition"),st=Q.mesh.geometry.getBuffer("aTextureCoord"),ot=Q.mesh.geometry.getIndex();nt.data=Q.vertices,st.data=Q.uvs,ot.data=Q.indices,nt.update(),st.update(),ot.update()}for(y=0;y<n.length;y++)ge.push(n[y])},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype._render=function(e){var i=fe.available[this._fontName],r=i.distanceFieldRange,n=i.distanceFieldType,s=i.size;if("none"!==n)for(var o=this.worldTransform,a=o.a,h=o.b,l=o.c,u=o.d,c=Math.sqrt(a*a+h*h),d=Math.sqrt(l*l+u*u),p=(Math.abs(c)+Math.abs(d))/2,f=this._fontSize/s,m=0,_=this._activePagesMeshData;m<_.length;m++)_[m].mesh.shader.uniforms.uFWidth=p*r*f*e.resolution;t.prototype._render.call(this,e)},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Object.defineProperty(e.prototype,"tint",{get:function(){return this._tint},set:function(t){if(this._tint!==t){this._tint=t;for(var e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"align",{get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontName",{get:function(){return this._fontName},set:function(t){if(!fe.available[t])throw new Error('Missing BitmapFont "'+t+'"');this._fontName!==t&&(this._fontName=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t=String(null==t?"":t),this._text!==t&&(this._text=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineHeight",{get:function(){return this.validate(),this._maxLineHeight},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textWidth",{get:function(){return this.validate(),this._textWidth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"letterSpacing",{get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"roundPixels",{get:function(){return this._roundPixels},set:function(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textHeight",{get:function(){return this.validate(),this._textHeight},enumerable:!1,configurable:!0}),e.prototype.destroy=function(e){var i=this._textureCache;for(var r in i)i[r].destroy(),delete i[r];this._textureCache=null,t.prototype.destroy.call(this,e)},e.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0},e}(S.W2),ye=function(){function t(){}return t.add=function(){V.kC.setExtensionXhrType("fnt",V.kC.XHR_RESPONSE_TYPE.TEXT)},t.use=function(e,i){var r=ue(e.data);if(r)for(var n=t.getBaseUrl(this,e),s=r.parse(e.data),o={},a=function(t){o[t.metadata.pageFile]=t.texture,Object.keys(o).length===s.page.length&&(e.bitmapFont=fe.install(s,o,!0),i())},h=0;h<s.page.length;++h){var l=s.page[h].file,u=n+l,c=!1;for(var d in this.resources){var p=this.resources[d];if(p.url===u){p.metadata.pageFile=l,p.texture?a(p):p.onAfterMiddleware.add(a),c=!0;break}}if(!c){var f={crossOrigin:e.crossOrigin,loadType:V.kC.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},e.metadata.imageMetadata),parentResource:e};this.add(u,f,a)}}else i()},t.getBaseUrl=function(e,i){var r=i.isDataUrl?"":t.dirname(i.url);return i.isDataUrl&&("."===r&&(r=""),e.baseUrl&&r&&"/"===e.baseUrl.charAt(e.baseUrl.length-1)&&(r+="/")),(r=r.replace(e.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/"),r},t.dirname=function(t){var e=t.replace(/\\/g,"/").replace(/\/$/,"").replace(/\/[^\/]*$/,"");return e===t?".":""===e?"/":e},t}(),be=function(t,e){return(be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},xe=function(t){function e(e){void 0===e&&(e=1);var i=t.call(this,F.kP,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})||this;return i.alpha=e,i}return function(t,e){function i(){this.constructor=t}be(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(F.wn),Te=function(t,e){return(Te=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function Se(t,e){function i(){this.constructor=t}Te(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var Ee,we,Ae,Ie,Ce,Oe,Me,Pe,Re,De,Ne,Ue,Fe,Le,ke,Be,Ge,Xe,je,Ve={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Ye=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Ee||(Ee={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(we||(we={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}(Ae||(Ae={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Ie||(Ie={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Ce||(Ce={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(Oe||(Oe={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(Me||(Me={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(Pe||(Pe={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(Re||(Re={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(De||(De={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(Ne||(Ne={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(Ue||(Ue={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(Fe||(Fe={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(Le||(Le={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(ke||(ke={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(Be||(Be={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(Ge||(Ge={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(Xe||(Xe={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(je||(je={}));var He=function(t){function e(e,i,r,n,s){void 0===i&&(i=8),void 0===r&&(r=4),void 0===n&&(n=yt.X.FILTER_RESOLUTION),void 0===s&&(s=5);var o=this,a=function(t,e){var i,r=Math.ceil(t/2),n="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",s="";i=e?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<t;o++){var a=i.replace("%index%",o.toString());s+=a=a.replace("%sampleIndex%",o-(r-1)+".0"),s+="\n"}return(n=n.replace("%blur%",s)).replace("%size%",t.toString())}(s,e),h=function(t){for(var e,i=Ve[t],r=i.length,n=Ye,s="",o=0;o<t;o++){var a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",o.toString());e=o,o>=r&&(e=t-o-1),s+=a=a.replace("%value%",i[e].toString()),s+="\n"}return(n=n.replace("%blur%",s)).replace("%size%",t.toString())}(s);return(o=t.call(this,a,h)||this).horizontal=e,o.resolution=n,o._quality=0,o.quality=r,o.blur=i,o}return Se(e,t),e.prototype.apply=function(t,e,i,r){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/e.width):this.uniforms.strength=1/i.height*(i.height/e.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/e.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/e.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{var n=t.getFilterTexture(),s=t.renderer,o=e,a=n;this.state.blend=!1,t.applyFilter(this,o,a,Le.CLEAR);for(var h=1;h<this.passes-1;h++){t.bindAndClear(o,Le.BLIT),this.uniforms.uSampler=a;var l=a;a=o,o=l,s.shader.bind(this),s.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,a,i,r),t.returnFilterTexture(n)}},Object.defineProperty(e.prototype,"blur",{get:function(){return this.strength},set:function(t){this.padding=1+2*Math.abs(t),this.strength=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t},enumerable:!1,configurable:!0}),e}(F.wn),We=function(t){function e(e,i,r,n){void 0===e&&(e=8),void 0===i&&(i=4),void 0===r&&(r=yt.X.FILTER_RESOLUTION),void 0===n&&(n=5);var s=t.call(this)||this;return s.blurXFilter=new He(!0,e,i,r,n),s.blurYFilter=new He(!1,e,i,r,n),s.resolution=r,s.quality=i,s.blur=e,s.repeatEdgePixels=!1,s}return Se(e,t),e.prototype.apply=function(t,e,i,r){var n=Math.abs(this.blurXFilter.strength),s=Math.abs(this.blurYFilter.strength);if(n&&s){var o=t.getFilterTexture();this.blurXFilter.apply(t,e,o,Le.CLEAR),this.blurYFilter.apply(t,o,i,r),t.returnFilterTexture(o)}else s?this.blurYFilter.apply(t,e,i,r):this.blurXFilter.apply(t,e,i,r)},e.prototype.updatePadding=function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))},Object.defineProperty(e.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quality",{get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"blendMode",{get:function(){return this.blurYFilter.blendMode},set:function(t){this.blurYFilter.blendMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"repeatEdgePixels",{get:function(){return this._repeatEdgePixels},set:function(t){this._repeatEdgePixels=t,this.updatePadding()},enumerable:!1,configurable:!0}),e}(F.wn),ze=function(t,e){return(ze=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},qe=function(t){function e(){var e=this,i={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,F.Y9,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",i)||this).alpha=1,e}return function(t,e){function i(){this.constructor=t}ze(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype._loadMatrix=function(t,e){void 0===e&&(e=!1);var i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.tint=function(t,e){var i=[(t>>16&255)/255,0,0,0,0,0,(t>>8&255)/255,0,0,0,0,0,(255&t)/255,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),r=Math.sin(t),n=1/3,s=(0,Math.sqrt)(n),o=[i+(1-i)*n,n*(1-i)-s*r,n*(1-i)+s*r,0,0,n*(1-i)+s*r,i+n*(1-i),n*(1-i)-s*r,0,0,n*(1-i)-s*r,n*(1-i)+s*r,i+n*(1-i),0,0,0,0,0,1,0];this._loadMatrix(o,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,r=-.5*(i-1),n=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.saturate=function(t,e){void 0===t&&(t=0);var i=2*t/3+1,r=-.5*(i-1),n=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,r,n){var s=((i=i||16770432)>>16&255)/255,o=(i>>8&255)/255,a=(255&i)/255,h=((r=r||3375104)>>16&255)/255,l=(r>>8&255)/255,u=(255&r)/255,c=[.3,.59,.11,0,0,s,o,a,t=t||.2,0,h,l,u,e=e||.15,0,s-h,o-l,a-u,0,0];this._loadMatrix(c,n)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Object.defineProperty(e.prototype,"matrix",{get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t},enumerable:!1,configurable:!0}),e}(F.wn);qe.prototype.grayscale=qe.prototype.greyscale;var Ke,Ze,$e,Je,Qe,ti,ei,ii,ri,ni,si,oi,ai,hi,li,ui,ci,di,pi,fi=function(t,e){return(fi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},mi=function(t){function e(e,i){var r=this,n=new A.y3;return e.renderable=!1,(r=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})||this).maskSprite=e,r.maskMatrix=n,null==i&&(i=20),r.scale=new A.E9(i,i),r}return function(t,e){function i(){this.constructor=t}fi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.apply=function(t,e,i,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var n=this.maskSprite.worldTransform,s=Math.sqrt(n.a*n.a+n.b*n.b),o=Math.sqrt(n.c*n.c+n.d*n.d);0!==s&&0!==o&&(this.uniforms.rotation[0]=n.a/s,this.uniforms.rotation[1]=n.b/s,this.uniforms.rotation[2]=n.c/o,this.uniforms.rotation[3]=n.d/o),t.applyFilter(this,e,i,r)},Object.defineProperty(e.prototype,"map",{get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t},enumerable:!1,configurable:!0}),e}(F.wn),_i=function(t,e){return(_i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},gi=function(t){function e(){return t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')||this}return function(t,e){function i(){this.constructor=t}_i(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e}(F.wn),vi=function(t,e){return(vi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},yi=function(t){function e(e,i){void 0===e&&(e=.5),void 0===i&&(i=Math.random());var r=t.call(this,F.Y9,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})||this;return r.noise=e,r.seed=i,r}return function(t,e){function i(){this.constructor=t}vi(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),Object.defineProperty(e.prototype,"noise",{get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seed",{get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t},enumerable:!1,configurable:!0}),e}(F.wn);!function(t){t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2"}(Ke||(Ke={})),function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS"}(Ze||(Ze={})),function(t){t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL"}($e||($e={})),function(t){t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR"}(Je||(Je={})),function(t){t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN"}(Qe||(Qe={})),function(t){t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL"}(ti||(ti={})),function(t){t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z"}(ei||(ei={})),function(t){t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT"}(ii||(ii={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT"}(ri||(ri={})),function(t){t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR"}(ni||(ni={})),function(t){t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"}(si||(si={})),function(t){t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL"}(oi||(oi={})),function(t){t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLY_ALPHA=2]="PREMULTIPLY_ALPHA",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA"}(ai||(ai={})),function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT"}(hi||(hi={})),function(t){t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL"}(li||(li={})),function(t){t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp"}(ui||(ui={})),function(t){t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE"}(ci||(ci={})),function(t){t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH"}(di||(di={})),function(t){t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER"}(pi||(pi={}));var bi=new A.y3;S.s$.prototype._cacheAsBitmap=!1,S.s$.prototype._cacheData=null,S.s$.prototype._cacheAsBitmapResolution=null,S.s$.prototype._cacheAsBitmapMultisample=di.NONE;var xi=function(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null};Object.defineProperties(S.s$.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){var e;this._cacheAsBitmap!==t&&(this._cacheAsBitmap=t,t?(this._cacheData||(this._cacheData=new xi),(e=this._cacheData).originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea))}}}),S.s$.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},S.s$.prototype._initCachedDisplayObject=function(t){var e;if(!this._cacheData||!this._cacheData.sprite){var i=this.alpha;this.alpha=1,t.batch.flush();var r=this.getLocalBounds(null,!0).clone();if(this.filters&&this.filters.length){var n=this.filters[0].padding;r.pad(n)}r.ceil(yt.X.RESOLUTION);var s=t.renderTexture.current,o=t.renderTexture.sourceFrame.clone(),a=t.renderTexture.destinationFrame.clone(),h=t.projection.transform,l=F.TI.create({width:r.width,height:r.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:null!==(e=this.cacheAsBitmapMultisample)&&void 0!==e?e:t.multisample}),u="cacheAsBitmap_"+(0,T.uid)();this._cacheData.textureCacheId=u,F.VL.addToCache(l.baseTexture,u),F.xE.addToCache(l,u);var c=this.transform.localTransform.copyTo(bi).invert().translate(-r.x,-r.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=h,t.renderTexture.bind(s,o,a),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var d=new xt.j(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-r.x/r.width,d.anchor.y=-r.y/r.height,d.alpha=i,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)}},S.s$.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},S.s$.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;var r=t.context,n=t._projTransform;e.ceil(yt.X.RESOLUTION);var s=F.TI.create({width:e.width,height:e.height}),o="cacheAsBitmap_"+(0,T.uid)();this._cacheData.textureCacheId=o,F.VL.addToCache(s.baseTexture,o),F.xE.addToCache(s,o);var a=bi;this.transform.localTransform.copyTo(a),a.invert(),a.tx-=e.x,a.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:s,clear:!0,transform:a,skipUpdateTransform:!1}),t.context=r,t._projTransform=n,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var h=new xt.j(s);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-e.x/e.width,h.anchor.y=-e.y/e.height,h.alpha=i,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)}},S.s$.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},S.s$.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},S.s$.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,F.VL.removeFromCache(this._cacheData.textureCacheId),F.xE.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},S.s$.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},S.s$.prototype.name=null,S.W2.prototype.getChildByName=function(t,e){for(var i=0,r=this.children.length;i<r;i++)if(this.children[i].name===t)return this.children[i];if(e)for(i=0,r=this.children.length;i<r;i++)if(this.children[i].getChildByName){var n=this.children[i].getChildByName(t,!0);if(n)return n}return null},S.s$.prototype.getGlobalPosition=function(t,e){return void 0===t&&(t=new A.E9),void 0===e&&(e=!1),this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var Ti=i(9660),Si=i(8898),Ei=function(t,e){return(Ei=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},wi=function(t){function e(e,i){void 0===i&&(i=!0);var r=t.call(this,e[0]instanceof F.xE?e[0]:e[0].texture)||this;return r._textures=null,r._durations=null,r._autoUpdate=i,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=e,r}return function(t,e){function i(){this.constructor=t}Ei(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}(e,t),e.prototype.stop=function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(I.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1))},e.prototype.play=function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(I.vB.shared.add(this.update,this,I.uF.HIGH),this._isConnectedToTicker=!0))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){if(this._playing){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())}},e.prototype.updateTexture=function(){var t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null},e.fromFrames=function(t){for(var i=[],r=0;r<t.length;++r)i.push(F.xE.from(t[r]));return new e(i)},e.fromImages=function(t){for(var i=[],r=0;r<t.length;++r)i.push(F.xE.from(t[r]));return new e(i)},Object.defineProperty(e.prototype,"totalFrames",{get:function(){return this._textures.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textures",{get:function(){return this._textures},set:function(t){if(t[0]instanceof F.xE)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentFrame",{get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._playing},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(I.vB.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(I.vB.shared.add(this.update,this),this._isConnectedToTicker=!0))},enumerable:!1,configurable:!0}),e}(xt.j);F.Th.registerPlugin("accessibility",w),F.Th.registerPlugin("extract",j),F.Th.registerPlugin("interaction",U),F.Th.registerPlugin("particle",vt),F.Th.registerPlugin("prepare",Wt),F.Th.registerPlugin("batch",F.Bv),F.Th.registerPlugin("tilingSprite",ie),V.aN.registerPlugin(ye),V.aN.registerPlugin(tt),V.aN.registerPlugin(at),V.aN.registerPlugin(dt),V.aN.registerPlugin(Kt),L.registerPlugin(I.Sb),L.registerPlugin(V.LP);var Ai="6.2.1",Ii={AlphaFilter:xe,BlurFilter:We,BlurFilterPass:He,ColorMatrixFilter:qe,DisplacementFilter:mi,FXAAFilter:gi,NoiseFilter:yi}},1947:function(t,e,i){var r;t=i.nmd(t),function(n){e&&e.nodeType,t&&t.nodeType;var s="object"==typeof i.g&&i.g;s.global!==s&&s.window!==s&&s.self;var o,a=2147483647,h=36,l=/^xn--/,u=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,d={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,f=String.fromCharCode;function m(t){throw RangeError(d[t])}function _(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function g(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+_((t=t.replace(c,".")).split("."),e).join(".")}function v(t){for(var e,i,r=[],n=0,s=t.length;n<s;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<s?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function y(t){return _(t,(function(t){var e="";return t>65535&&(e+=f((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+f(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function x(t,e,i){var r=0;for(t=i?p(t/700):t>>1,t+=p(t/e);t>455;r+=h)t=p(t/35);return p(r+36*t/(t+38))}function T(t){var e,i,r,n,s,o,l,u,c,d,f,_=[],g=t.length,v=0,b=128,T=72;for((i=t.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&m("not-basic"),_.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<g;){for(s=v,o=1,l=h;n>=g&&m("invalid-input"),((u=(f=t.charCodeAt(n++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:h)>=h||u>p((a-v)/o))&&m("overflow"),v+=u*o,!(u<(c=l<=T?1:l>=T+26?26:l-T));l+=h)o>p(a/(d=h-c))&&m("overflow"),o*=d;T=x(v-s,e=_.length+1,0==s),p(v/e)>a-b&&m("overflow"),b+=p(v/e),v%=e,_.splice(v++,0,b)}return y(_)}function S(t){var e,i,r,n,s,o,l,u,c,d,_,g,y,T,S,E=[];for(g=(t=v(t)).length,e=128,i=0,s=72,o=0;o<g;++o)(_=t[o])<128&&E.push(f(_));for(r=n=E.length,n&&E.push("-");r<g;){for(l=a,o=0;o<g;++o)(_=t[o])>=e&&_<l&&(l=_);for(l-e>p((a-i)/(y=r+1))&&m("overflow"),i+=(l-e)*y,e=l,o=0;o<g;++o)if((_=t[o])<e&&++i>a&&m("overflow"),_==e){for(u=i,c=h;!(u<(d=c<=s?1:c>=s+26?26:c-s));c+=h)S=u-d,T=h-d,E.push(f(b(d+S%T,0))),u=p(S/T);E.push(f(b(u,0))),s=x(i,y,r==n),i=0,++r}++i,++e}return E.join("")}o={version:"1.3.2",ucs2:{decode:v,encode:y},decode:T,encode:S,toASCII:function(t){return g(t,(function(t){return u.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return g(t,(function(t){return l.test(t)?T(t.slice(4).toLowerCase()):t}))}},void 0===(r=function(){return o}.call(e,i,e,t))||(t.exports=r)}()},6063:t=>{"use strict";function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,i,r,n){i=i||"&",r=r||"=";var s={};if("string"!=typeof t||0===t.length)return s;var o=/\+/g;t=t.split(i);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var h=t.length;a>0&&h>a&&(h=a);for(var l=0;l<h;++l){var u,c,d,p,f=t[l].replace(o,"%20"),m=f.indexOf(r);m>=0?(u=f.substr(0,m),c=f.substr(m+1)):(u=f,c=""),d=decodeURIComponent(u),p=decodeURIComponent(c),e(s,d)?Array.isArray(s[d])?s[d].push(p):s[d]=[s[d],p]:s[d]=p}return s}},1957:t=>{"use strict";var e=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,i,r,n){return i=i||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map((function(n){var s=encodeURIComponent(e(n))+r;return Array.isArray(t[n])?t[n].map((function(t){return s+encodeURIComponent(e(t))})).join(i):s+encodeURIComponent(e(t[n]))})).join(i):n?encodeURIComponent(e(n))+r+encodeURIComponent(e(t)):""}},5582:(t,e,i)=>{"use strict";e.decode=e.parse=i(6063),e.encode=e.stringify=i(1957)},4044:(t,e,i)=>{"use strict";var r=i(1947),n=i(944);function s(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.Qc=y,e.DB=function(t,e){return y(t,!1,!0).resolve(e)},e.WU=function(t){return n.isString(t)&&(t=y(t)),t instanceof s?t.format():s.prototype.format.call(t)};var o=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,l=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(l),c=["%","/","?",";","#"].concat(u),d=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,f=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},v=i(5582);function y(t,e,i){if(t&&n.isObject(t)&&t instanceof s)return t;var r=new s;return r.parse(t,e,i),r}s.prototype.parse=function(t,e,i){if(!n.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var s=t.indexOf("?"),a=-1!==s&&s<t.indexOf("#")?"?":"#",l=t.split(a);l[0]=l[0].replace(/\\/g,"/");var y=t=l.join(a);if(y=y.trim(),!i&&1===t.split("#").length){var b=h.exec(y);if(b)return this.path=y,this.href=y,this.pathname=b[1],b[2]?(this.search=b[2],this.query=e?v.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var x=o.exec(y);if(x){var T=(x=x[0]).toLowerCase();this.protocol=T,y=y.substr(x.length)}if(i||x||y.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===y.substr(0,2);!S||x&&_[x]||(y=y.substr(2),this.slashes=!0)}if(!_[x]&&(S||x&&!g[x])){for(var E,w,A=-1,I=0;I<d.length;I++)-1!==(C=y.indexOf(d[I]))&&(-1===A||C<A)&&(A=C);for(-1!==(w=-1===A?y.lastIndexOf("@"):y.lastIndexOf("@",A))&&(E=y.slice(0,w),y=y.slice(w+1),this.auth=decodeURIComponent(E)),A=-1,I=0;I<c.length;I++){var C;-1!==(C=y.indexOf(c[I]))&&(-1===A||C<A)&&(A=C)}-1===A&&(A=y.length),this.host=y.slice(0,A),y=y.slice(A),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var M=this.hostname.split(/\./),P=(I=0,M.length);I<P;I++){var R=M[I];if(R&&!R.match(p)){for(var D="",N=0,U=R.length;N<U;N++)R.charCodeAt(N)>127?D+="x":D+=R[N];if(!D.match(p)){var F=M.slice(0,I),L=M.slice(I+1),k=R.match(f);k&&(F.push(k[1]),L.unshift(k[2])),L.length&&(y="/"+L.join(".")+y),this.hostname=F.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=r.toASCII(this.hostname));var B=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+B,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==y[0]&&(y="/"+y))}if(!m[T])for(I=0,P=u.length;I<P;I++){var X=u[I];if(-1!==y.indexOf(X)){var j=encodeURIComponent(X);j===X&&(j=escape(X)),y=y.split(X).join(j)}}var V=y.indexOf("#");-1!==V&&(this.hash=y.substr(V),y=y.slice(0,V));var Y=y.indexOf("?");if(-1!==Y?(this.search=y.substr(Y),this.query=y.substr(Y+1),e&&(this.query=v.parse(this.query)),y=y.slice(0,Y)):e&&(this.search="",this.query={}),y&&(this.pathname=y),g[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){B=this.pathname||"";var H=this.search||"";this.path=B+H}return this.href=this.format(),this},s.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",s=!1,o="";this.host?s=t+this.host:this.hostname&&(s=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(o=v.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||g[e])&&!1!==s?(s="//"+(s||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):s||(s=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+s+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},s.prototype.resolve=function(t){return this.resolveObject(y(t,!1,!0)).format()},s.prototype.resolveObject=function(t){if(n.isString(t)){var e=new s;e.parse(t,!1,!0),t=e}for(var i=new s,r=Object.keys(this),o=0;o<r.length;o++){var a=r[o];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),l=0;l<h.length;l++){var u=h[l];"protocol"!==u&&(i[u]=t[u])}return g[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!g[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var p=c[d];i[p]=t[p]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||_[t.protocol])i.pathname=t.pathname;else{for(var f=(t.pathname||"").split("/");f.length&&!(t.host=f.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),i.pathname=f.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var m=i.pathname||"",v=i.search||"";i.path=m+v}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var y=i.pathname&&"/"===i.pathname.charAt(0),b=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=b||y||i.host&&t.pathname,T=x,S=i.pathname&&i.pathname.split("/")||[],E=(f=t.pathname&&t.pathname.split("/")||[],i.protocol&&!g[i.protocol]);if(E&&(i.hostname="",i.port=null,i.host&&(""===S[0]?S[0]=i.host:S.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===f[0]?f[0]=t.host:f.unshift(t.host)),t.host=null),x=x&&(""===f[0]||""===S[0])),b)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,S=f;else if(f.length)S||(S=[]),S.pop(),S=S.concat(f),i.search=t.search,i.query=t.query;else if(!n.isNullOrUndefined(t.search))return E&&(i.hostname=i.host=S.shift(),(O=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=O.shift(),i.host=i.hostname=O.shift())),i.search=t.search,i.query=t.query,n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!S.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var w=S.slice(-1)[0],A=(i.host||t.host||S.length>1)&&("."===w||".."===w)||""===w,I=0,C=S.length;C>=0;C--)"."===(w=S[C])?S.splice(C,1):".."===w?(S.splice(C,1),I++):I&&(S.splice(C,1),I--);if(!x&&!T)for(;I--;I)S.unshift("..");!x||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),A&&"/"!==S.join("/").substr(-1)&&S.push("");var O,M=""===S[0]||S[0]&&"/"===S[0].charAt(0);return E&&(i.hostname=i.host=M?"":S.length?S.shift():"",(O=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=O.shift(),i.host=i.hostname=O.shift())),(x=x||i.host&&S.length)&&!M&&S.unshift(""),S.length?i.pathname=S.join("/"):(i.pathname=null,i.path=null),n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},s.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},944:t=>{"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},2728:t=>{t.exports=class{constructor(){this.version="0.6.16",this.setup=this.setup.bind(this)}setup(){this.sayHello(),Urso.helper=new Urso.Core.Lib.Helper;var t=new Urso.Core.Modules.Instances.Controller;for(var e of(Urso.getInstance=t.getInstance,Urso.getByPath=t.getByPath,Urso.getInstancesModes=t.getModes,Urso.addInstancesMode=t.addMode,Urso.removeInstancesMode=t.removeMode,Urso.Game={},Urso.config.extendingChain))Urso.helper.mergeObjectsRecursive(Urso.Game,Urso.helper.recursiveGet(e,window,{}),!0);Urso.observer=Urso.getInstance("Modules.Observer.Controller"),Urso.browserEvents=Urso.getInstance("Extra.BrowserEvents"),Urso.cache=Urso.getInstance("Lib.Cache"),Urso.device=Urso.getByPath("Lib.Device"),Urso.loader=Urso.getInstance("Lib.Loader"),Urso.localData=Urso.getInstance("Lib.LocalData"),Urso.logger=Urso.getInstance("Lib.Logger"),Urso.math=Urso.getInstance("Lib.Math"),Urso.time=Urso.getInstance("Lib.Time"),Urso.tween=Urso.getInstance("Lib.Tween"),Urso.assets=Urso.getInstance("Modules.Assets.Controller"),Urso.i18n=Urso.getInstance("Modules.I18n.Controller"),Urso.transport=Urso.getInstance("Modules.Transport.Controller"),Urso.logic=Urso.getInstance("Modules.Logic.Controller"),Urso.objects=Urso.getInstance("Modules.Objects.Controller"),Urso.scenes=Urso.getInstance("Modules.Scenes.Controller"),Urso.soundManager=Urso.getInstance("Modules.SoundManager.Controller"),Urso.statesManager=Urso.getInstance("Modules.StatesManager.Controller"),Urso.template=Urso.getInstance("Modules.Template.Controller"),document.title=Urso.config.title,Urso.addInstancesMode(Urso.helper.mobileAndTabletCheck()?"mobile":"desktop"),Urso.device.whenReady((()=>{Urso.assets.updateQuality(),Urso.getInstance("App").run()}))}sayHello(){console.log("%c ".concat(String.fromCodePoint(128059)," Urso ").concat(this.version," "),"background: #222; color: #bada55")}run(){Urso.scenes.display(Urso.config.defaultScene)}}}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.loaded=!0,s.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),window.Urso={Core:{}},i(4534),Urso.config=i(8904),Urso.Core.App=i(2728),Urso.runGame=(new Urso.Core.App).setup})()}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,i),s.exports}i(8450),window.Urso.SlotBase={},i(4534),i(8904),Urso.SlotBase.App=i(9658),Urso.runGame=(new Urso.SlotBase.App).setup})()}},e={};function i(r){var n=e[r];if(void 0!==n)return n.exports;var s=e[r]={exports:{}};return t[r](s,s.exports,i),s.exports}i(992),i(561),window.onload=Urso.runGame})();